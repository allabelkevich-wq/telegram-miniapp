<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>YupSoul</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Comfortaa',sans-serif}
    body{background:linear-gradient(135deg,#f9f7ff 0%,#fefeff 100%);min-height:100vh;display:flex;flex-direction:column;padding:20px 15px;position:relative;overflow-x:hidden;color:#2d2d2d}
    body::before{content:"";position:fixed;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle at 30% 30%,rgba(167,139,250,.08) 0%,transparent 25%),radial-gradient(circle at 70% 70%,rgba(249,168,212,.08) 0%,transparent 25%);z-index:-1;opacity:.3}
    .container{max-width:600px;margin:0 auto;width:100%}
    .page{display:none;min-height:100vh;padding-top:20px}
    .page.active{display:block}
    header{text-align:center;margin:25px 0 20px}
    h1{font-size:2.4rem;background:linear-gradient(90deg,#a78bfa,#f9a8d4,#5eead4);-webkit-background-clip:text;background-clip:text;color:transparent;font-weight:800;letter-spacing:-1px;line-height:1.1}
    .subtitle{color:#6b7280;font-size:1.15rem;margin-top:8px;font-weight:400}
    .tagline{color:#a78bfa;font-size:1.35rem;font-weight:700;margin:15px 0;letter-spacing:-0.5px}
    .section{background:#fefeff;border-radius:24px;padding:30px 25px;box-shadow:0 8px 30px rgba(167,139,250,.15);border:1px solid #e5e7eb;position:relative;overflow:hidden;margin-bottom:25px}
    .section::before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:linear-gradient(to bottom,#a78bfa,#f9a8d4)}
    .field{margin-bottom:22px;text-align:left}
    label{display:block;margin-bottom:10px;color:#2d2d2d;font-weight:600;font-size:1.05rem;display:flex;align-items:center;gap:10px}
    label::before{content:attr(data-icon);font-size:1.25rem}
    input,textarea,select{width:100%;padding:15px;border-radius:16px;border:1px solid #e5e7eb;background:white;color:#2d2d2d;font-size:16px;transition:all .3s ease;font-family:'Comfortaa',sans-serif}
    input:focus,textarea:focus,select:focus{outline:none;border-color:#a78bfa;box-shadow:0 0 0 3px rgba(167,139,250,.15)}
    input.valid,textarea.valid{border-color:#4ade80}
    .time-group{display:flex;flex-direction:column;gap:14px}
    .checkbox{display:flex;align-items:center;gap:12px;margin-top:-6px}
    .checkbox input{width:auto;height:20px;accent-color:#a78bfa}
    .checkbox label{margin-bottom:0;font-weight:500;color:#2d2d2d;font-size:1rem;display:flex;align-items:center;gap:8px}
    .checkbox label::before{content:"‚ùì";font-size:1.3rem}
    select{appearance:none;background:url("image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23a78bfa' d='M7 10l5 5 5-5z'/%3E%3C/svg%3E") no-repeat right 16px center;background-size:20px;padding-right:48px}
    textarea{min-height:140px;line-height:1.6;resize:vertical}
    .request-label{font-size:1.3rem;text-align:center;margin-bottom:15px;color:#a78bfa;font-weight:700;letter-spacing:-0.5px}
    button{background:linear-gradient(90deg,#a78bfa,#f9a8d4);color:white;border:none;padding:18px 30px;font-size:1.25rem;border-radius:20px;width:100%;font-weight:700;cursor:pointer;transition:all .3s ease;box-shadow:0 6px 20px rgba(167,139,250,.25);margin-top:10px;letter-spacing:1px;text-transform:uppercase;min-height:64px;position:relative;overflow:hidden}
    button::after{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.4),transparent);transform:rotate(30deg);transition:all .8s}
    button:hover{transform:translateY(-3px);box-shadow:0 8px 25px rgba(167,139,250,.35)}
    button:hover::after{left:100%}
    button:active{transform:translateY(1px)}
    button:disabled{background:#d1d5db;cursor:not-allowed;transform:none;box-shadow:none;opacity:.85}
    button.secondary{background:white;color:#a78bfa;border:2px solid #a78bfa;box-shadow:none;text-transform:none;letter-spacing:-0.5px;font-weight:600;min-height:56px}
    button.secondary:hover{background:#a78bfa;color:white;box-shadow:0 6px 20px rgba(167,139,250,.25)}
    .btn-group{display:flex;gap:15px;margin-top:25px}
    .btn-group button{flex:1}
    .price-tag{background:linear-gradient(90deg,#f9a8d4,#a78bfa);color:white;padding:12px 20px;border-radius:16px;font-size:1.4rem;font-weight:700;text-align:center;margin:20px 0;box-shadow:0 4px 15px rgba(249,168,212,.3);letter-spacing:1px}
    .payment-info{background:rgba(167,139,250,.05);border-left:4px solid #a78bfa;padding:15px;border-radius:0 12px 12px 0;margin:15px 0;font-size:.95rem;line-height:1.6}
    .payment-info::before{content:"üíé ";font-size:1.3rem}
    .success-icon{font-size:5rem;text-align:center;margin:20px 0;background:linear-gradient(90deg,#5eead4,#a78bfa);-webkit-background-clip:text;background-clip:text;color:transparent}
    .keys-composition{display:flex;align-items:center;justify-content:center;gap:20px;margin:25px 0;flex-wrap:wrap}
    .keys-composition svg{filter:drop-shadow(0 4px 12px rgba(167,139,250,.25));transition:transform .3s ease}
    .keys-composition .key-music{transform:rotate(-10deg);width:56px;height:80px}
    .keys-composition .key-door{transform:rotate(8deg);width:52px;height:80px}
    .keys-composition .key-music:hover,.keys-composition .key-door:hover{transform:rotate(0) scale(1.05)}
    .keys-composition-small{display:flex;align-items:center;justify-content:center;gap:12px;margin:15px 0}
    .keys-composition-small .key-music{width:36px;height:50px;transform:rotate(-8deg);opacity:.9}
    .keys-composition-small .key-door{width:34px;height:50px;transform:rotate(6deg);opacity:.9}
    .success-title{font-size:2.2rem;color:#a78bfa;font-weight:800;text-align:center;margin:20px 0;background:linear-gradient(90deg,#a78bfa,#f9a8d4);-webkit-background-clip:text;background-clip:text;color:transparent}
    .success-text{font-size:1.15rem;line-height:1.7;margin:20px 0;text-align:center;padding:0 10px}
    .loading{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px 40px;text-align:center;min-height:70vh}
    .spinner{width:60px;height:60px;border:5px solid rgba(167,139,250,.2);border-top-color:#a78bfa;border-radius:50%;margin:0 auto 25px;animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    .loading-text{font-size:1.5rem;color:#a78bfa;font-weight:700;margin-bottom:15px}
    .song-preview{background:white;border-radius:16px;padding:20px;margin:20px 0;text-align:left;border:2px solid #a78bfa}
    .song-preview h3{color:#a78bfa;font-size:1.4rem;margin-bottom:10px;text-align:center}
    .song-preview p{font-size:1.05rem;line-height:1.7;color:#2d2d2d}
    footer{text-align:center;padding:30px 0 20px;color:#6b7280;font-size:.95rem;margin-top:auto}
    
    /* –ü–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–µ–≤—å—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ */
    .preview-nav{background:white;border-radius:16px;padding:12px;margin-bottom:25px;box-shadow:0 4px 20px rgba(167,139,250,.15);text-align:center;border:1px solid #e5e7eb;display:none}
    .preview-nav.show{display:block}
    .preview-nav-buttons{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-top:10px}
    .preview-nav button{background:white;color:#a78bfa;border:2px solid #a78bfa;padding:6px 14px;margin:0 4px;border-radius:20px;cursor:pointer;font-weight:600;transition:all .2s;font-size:.9rem;min-width:90px}
    .preview-nav button:hover{background:#a78bfa;color:white;transform:translateY(-2px)}
    .preview-nav button.active{background:linear-gradient(90deg,#a78bfa,#f9a8d4);color:white;border-color:transparent;box-shadow:0 4px 15px rgba(167,139,250,.3)}
    
    @media (max-width:480px){.container{padding:0 12px}h1{font-size:2.1rem}.subtitle{font-size:1.05rem}.tagline{font-size:1.2rem}.section{padding:25px 20px}.btn-group{flex-direction:column}.btn-group button{width:100%}button{font-size:1.15rem;padding:16px;min-height:60px}.price-tag{font-size:1.25rem;padding:10px 15px}.success-icon{font-size:4rem}.success-title{font-size:1.9rem}.success-text{font-size:1.05rem}.preview-nav-buttons{flex-direction:column;align-items:center}.preview-nav button{width:100%;max-width:200px}}
  </style>
</head>
<body>
  <!-- –ü–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–µ–≤—å—é (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ) -->
  <div class="container">
    <div class="preview-nav" id="previewNav">
      <div style="font-weight:600;color:#a78bfa;margin-bottom:8px">üé® –†–µ–∂–∏–º –ø—Ä–µ–≤—å—é</div>
      <div class="preview-nav-buttons">
        <button class="active" data-page="home">–ì–ª–∞–≤–Ω–∞—è</button>
        <button data-page="form">–§–æ—Ä–º–∞</button>
        <button data-page="payment">–û–ø–ª–∞—Ç–∞</button>
        <button data-page="loading">–ó–∞–≥—Ä—É–∑–∫–∞</button>
        <button data-page="success">–£—Å–ø–µ—Ö</button>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
    <div class="page active" id="homePage">
      <header>
        <h1>YupSoul</h1>
        <div class="subtitle">—Ç–≤–æ—è –∂–∏–∑–Ω—å ‚Äî –∏–≥—Ä–∞</div>
        <div class="tagline">–û—Ç–ø—Ä–∞–≤—å –∑–∞–ø—Ä–æ—Å –≤–æ –í—Å–µ–ª–µ–Ω–Ω—É—é</div>
      </header>
      
      <div class="section">
        <div class="keys-composition-small" aria-hidden="true">
          <svg class="key-music" viewBox="0 0 50 100" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="keyGradHome" x1="0%" y1="100%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#a78bfa"/><stop offset="100%" style="stop-color:#f9a8d4"/></linearGradient></defs><path d="M25 92Q20 92 20 82Q20 68 28 54Q36 40 28 28Q20 16 25 8Q30 2 25 4" stroke="url(#keyGradHome)" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><ellipse cx="25" cy="78" rx="8" ry="10" fill="none" stroke="url(#keyGradHome)" stroke-width="2"/></svg>
          <svg class="key-door" viewBox="0 0 56 100" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="keyGradHome2" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#f9a8d4"/><stop offset="100%" style="stop-color:#a78bfa"/></linearGradient></defs><ellipse cx="28" cy="24" rx="16" ry="18" fill="none" stroke="url(#keyGradHome2)" stroke-width="2.5"/><path d="M28 40v44M24 84h8" stroke="url(#keyGradHome2)" stroke-width="2.5" stroke-linecap="round"/><path d="M28 54l12 8v16L28 86V54z" fill="url(#keyGradHome2)" opacity=".95"/><circle cx="28" cy="72" r="4" fill="url(#keyGradHome2)"/></svg>
        </div>
        <p style="text-align:center;font-size:1.15rem;line-height:1.7;margin-bottom:25px">
          –°–æ–∑–¥–∞–π —Å–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∑–≤—É–∫–æ–≤–æ–π –∫–ª—é—á ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—É—é –∞—É–¥–∏–æ–∫–æ–º–ø–æ–∑–∏—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–∫—Ä–æ–µ—Ç —Ç–µ–±–µ –¥–≤–µ—Ä—å –∫ –∂–µ–ª–∞–µ–º–æ–º—É.
        </p>
        <button id="startBtn">‚ú® –ù–∞—á–∞—Ç—å</button>
      </div>
      
      <footer>
        <p>YupSoul ‚Ä¢ 2026</p>
      </footer>
    </div>
    
    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ñ–æ—Ä–º—ã -->
    <div class="page" id="formPage">
      <header>
        <h1>YupSoul</h1>
        <div class="subtitle">—Ç–≤–æ—è –∂–∏–∑–Ω—å ‚Äî –∏–≥—Ä–∞</div>
      </header>
      
      <div class="section">
        <div class="field">
          <label for="name" data-icon="‚ú®">–ò–º—è</label>
          <input type="text" id="name" placeholder="–ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?" required>
        </div>
        
        <div class="field">
          <label for="birthdate" data-icon="üìÖ">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
          <input type="date" id="birthdate" required>
          <div id="birthdateSummary" class="field-summary" style="display:none; margin-top:8px; padding:10px; background:rgba(167,139,250,.08); border-radius:12px; font-size:.95rem;"></div>
        </div>
        
        <div class="field">
          <label for="birthplace" data-icon="üåç">–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
          <input type="text" id="birthplace" placeholder="–ì–æ—Ä–æ–¥, —Å—Ç—Ä–∞–Ω–∞" required>
          <div id="birthplaceSummary" class="field-summary" style="display:none; margin-top:8px; padding:10px; background:rgba(167,139,250,.08); border-radius:12px; font-size:.95rem;"></div>
          <div class="checkbox" style="margin-top:12px">
            <input type="checkbox" id="placeConfirmed">
            <label for="placeConfirmed">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é: –º–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è —É–∫–∞–∑–∞–Ω–æ –≤–µ—Ä–Ω–æ</label>
          </div>
        </div>
        
        <div class="field">
          <label for="birthtime" data-icon="‚è∞">–í—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è</label>
          <div class="time-group">
            <input type="time" id="birthtime" required>
            <div class="checkbox">
              <input type="checkbox" id="unknown">
              <label for="unknown">–ù–µ –∑–Ω–∞—é —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è</label>
            </div>
          </div>
        </div>
        
        <div class="field">
          <label for="gender" data-icon="‚ößÔ∏è">–ü–æ–ª</label>
          <select id="gender" required>
            <option value="">–í—ã–±–µ—Ä–∏</option>
            <option value="male">–ú—É–∂—Å–∫–æ–π</option>
            <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
            <option value="other">–î—Ä—É–≥–æ–π</option>
          </select>
        </div>
        
        <div class="field">
          <div class="request-label">–û—Ç–ø—Ä–∞–≤—å –∑–∞–ø—Ä–æ—Å –≤–æ –í—Å–µ–ª–µ–Ω–Ω—É—é</div>
          <textarea id="request" placeholder="–ß—Ç–æ —Ç—ã —Ö–æ—á–µ—à—å –∏–∑–º–µ–Ω–∏—Ç—å –≤ —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏? –û —á—ë–º –ø—Ä–æ—Å–∏—à—å –í—Å–µ–ª–µ–Ω–Ω—É—é?"></textarea>
        </div>
        
        <div class="btn-group">
          <button class="secondary" id="backBtn">‚Üê –ù–∞–∑–∞–¥</button>
          <button id="nextBtn">–î–∞–ª–µ–µ ‚Üí</button>
        </div>
      </div>
      
      <footer>
        <p>YupSoul ‚Ä¢ 2026</p>
      </footer>
    </div>
    
    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–Ω–∞—Ç–æ–≤ / —Ä–µ–∫–≤–∏–∑–∏—Ç—ã -->
    <div class="page" id="paymentPage">
      <header>
        <h1>YupSoul</h1>
        <div class="subtitle">–¢–≤–æ–π –∑–≤—É–∫–æ–≤–æ–π –∫–ª—é—á</div>
      </header>
      
      <div class="section">
        <div class="tagline" style="margin-bottom:15px">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</div>
        <p style="text-align:center;font-size:1.05rem;line-height:1.7;margin-bottom:20px">
          –Ø —Å–æ–∑–¥–∞–º –¥–ª—è —Ç–µ–±—è —É–Ω–∏–∫–∞–ª—å–Ω—É—é –∞—É–¥–∏–æ–∫–æ–º–ø–æ–∑–∏—Ü–∏—é –ø–æ —Ç–≤–æ–∏–º –¥–∞–Ω–Ω—ã–º –∏ –∑–∞–ø—Ä–æ—Å—É ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∑–≤—É–∫–æ–≤–æ–π –∫–ª—é—á. –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç, –º–æ–∂–µ—à—å –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –ª—é–±—É—é —Å—É–º–º—É –ø–æ –∂–µ–ª–∞–Ω–∏—é –Ω–∞ –∫–∞—Ä—Ç—É –Ω–∏–∂–µ.
        </p>
        
        <div style="background:rgba(167,139,250,.12);border-radius:16px;padding:20px;margin:20px 0;border:1px solid rgba(167,139,250,.25);text-align:center">
          <div style="font-weight:700;color:#6d28d9;margin-bottom:10px;font-size:1.05rem">üí≥ –ö–∞—Ä—Ç–∞ –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ –∂–µ–ª–∞–Ω–∏—é</div>
          <div id="donationCardDetails" style="font-size:1.05rem;font-family:monospace;letter-spacing:1px;word-break:break-all;color:#2d2d2d;line-height:1.8">
            –ü—Ä–∏–æ—Ä–±–∞–Ω–∫: 4916 9896 3237 0697<br>
            –ê–ª—å—Ñ–∞-–±–∞–Ω–∫: 4585 2200 0626 0623
          </div>
          <p style="font-size:.9rem;color:#6b7280;margin-top:12px">–õ—é–±–∞—è —Å—É–º–º–∞ –æ—Ç —Ç–µ–±—è ‚Äî —Ü–µ–Ω–Ω–∞</p>
        </div>
        
        <div style="background:rgba(249,168,212,.1);border-radius:12px;padding:15px;margin:20px 0;font-size:.95rem">
          <strong>–ß—Ç–æ —Ç—ã –ø–æ–ª—É—á–∏—à—å:</strong>
          <ul style="margin-left:20px;margin-top:10px;line-height:1.7">
            <li>–£–Ω–∏–∫–∞–ª—å–Ω—É—é –º—É–∑—ã–∫—É –ø–æ–¥ —Ç–≤–æ–π —Å–≤–µ—Ç–æ–≤–æ–π —É–∑–æ—Ä</li>
            <li>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∞—Ñ—Ñ–∏—Ä–º–∞—Ü–∏–∏ —Å —Ç–≤–æ–∏–º –∏–º–µ–Ω–µ–º</li>
            <li>–ê—É–¥–∏–æ—Ñ–∞–π–ª –≤ –≤—ã—Å–æ–∫–æ–º –∫–∞—á–µ—Å—Ç–≤–µ ‚Äî –ø—Ä–∏–¥—ë—Ç –≤ –±–æ—Ç–∞</li>
          </ul>
        </div>
        
        <div class="btn-group">
          <button class="secondary" id="backFromPaymentBtn">‚Üê –ù–∞–∑–∞–¥</button>
          <button id="payBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
        </div>
      </div>
      
      <footer>
        <p>YupSoul ‚Ä¢ 2026</p>
      </footer>
    </div>
    
    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div class="page" id="loadingPage">
      <div class="loading">
        <div class="spinner"></div>
        <div class="loading-text">–°–æ–∑–¥–∞—é —Ç–≤–æ–π –∫–ª—é—á...</div>
        <div style="color:#6b7280;font-size:1.1rem;text-align:center;max-width:400px">
          –ú–∞–≥–∏—è —Ç–≤–æ—Ä–∏—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –¢–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∑–≤—É–∫–æ–≤–æ–π –∫–ª—é—á —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–≤–æ–∏—Ö —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
        </div>
      </div>
    </div>
    
    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Å–ø–µ—Ö–∞ -->
    <div class="page" id="successPage">
      <header>
        <h1>YupSoul</h1>
        <div class="subtitle">–ö–ª—é—á –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!</div>
      </header>
      
      <div class="section">
        <div class="keys-composition" aria-hidden="true">
          <svg class="key-music" viewBox="0 0 50 100" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="keyGradSuccess1" x1="0%" y1="100%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#a78bfa"/><stop offset="100%" style="stop-color:#f9a8d4"/></linearGradient></defs><path d="M25 92Q20 92 20 82Q20 68 28 54Q36 40 28 28Q20 16 25 8Q30 2 25 4" stroke="url(#keyGradSuccess1)" stroke-width="2.8" fill="none" stroke-linecap="round" stroke-linejoin="round"/><ellipse cx="25" cy="78" rx="8" ry="10" fill="none" stroke="url(#keyGradSuccess1)" stroke-width="2.5"/></svg>
          <svg class="key-door" viewBox="0 0 56 100" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="keyGradSuccess2" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#f9a8d4"/><stop offset="100%" style="stop-color:#a78bfa"/></linearGradient></defs><ellipse cx="28" cy="24" rx="16" ry="18" fill="none" stroke="url(#keyGradSuccess2)" stroke-width="3"/><path d="M28 40v44M24 84h8" stroke="url(#keyGradSuccess2)" stroke-width="3" stroke-linecap="round"/><path d="M28 54l12 8v16L28 86V54z" fill="url(#keyGradSuccess2)" opacity=".95"/><circle cx="28" cy="72" r="4" fill="url(#keyGradSuccess2)"/></svg>
        </div>
        <h2 class="success-title">–ì–æ—Ç–æ–≤–æ!</h2>
        <p class="success-text">
          –¢–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∑–≤—É–∫–æ–≤–æ–π –∫–ª—é—á —Å–æ–∑–¥–∞–Ω! –≠—Ç–æ —Ç–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —Å–∏–ª—ã –¥–ª—è –∏–≥—Ä—ã –∂–∏–∑–Ω–∏.
        </p>
        
        <div class="song-preview">
          <h3>üéµ –¢–≤–æ—è –ø–µ—Å–Ω—è</h3>
          <p id="songPreviewText">
            –¢–≤–æ—è —É–Ω–∏–∫–∞–ª—å–Ω–∞—è –∞—É–¥–∏–æ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è —É–∂–µ –∂–¥—ë—Ç —Ç–µ–±—è –≤ –±–æ—Ç–µ. –°–ª—É—à–∞–π –µ—ë –∫–∞–∂–¥–æ–µ —É—Ç—Ä–æ, —á—Ç–æ–±—ã –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å—Å—è –Ω–∞ –≤–æ–ª–Ω—É —É—Å–ø–µ—Ö–∞.
          </p>
        </div>
        
        <div style="background:rgba(167,139,250,.08);border-radius:12px;padding:15px;margin:20px 0;text-align:center;font-size:1.05rem;line-height:1.7">
          <strong>–ß—Ç–æ –¥–∞–ª—å—à–µ:</strong><br>
          –û—Ç–∫—Ä–æ–π –±–æ—Ç–∞ <a href="https://t.me/YupSoulBot" style="color:#a78bfa;text-decoration:underline">@YupSoulBot</a> –≤ Telegram ‚Äî —Ç–∞–º —Ç–µ–±—è –∂–¥—ë—Ç —Ç–≤–æ–π –∑–≤—É–∫–æ–≤–æ–π –∫–ª—é—á.
        </div>
        
        <button class="secondary" id="newKeyBtn" style="margin-top:25px">‚ú® –°–æ–∑–¥–∞—Ç—å –µ—â—ë –æ–¥–∏–Ω –∫–ª—é—á</button>
      </div>
      
      <footer>
        <p>YupSoul ‚Ä¢ 2026</p>
      </footer>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var tg = null;
      function initApp() {
        try {
          if (window.Telegram && window.Telegram.WebApp) {
            tg = window.Telegram.WebApp;
            tg.ready();
            tg.expand();
            if (tg.enableClosingConfirmation) tg.enableClosingConfirmation();
            if (tg.themeParams) {
              document.documentElement.style.setProperty('--tg-theme-bg-color', tg.themeParams.bg_color || '#f9f7ff');
              document.documentElement.style.setProperty('--tg-theme-text-color', tg.themeParams.text_color || '#2d2d2d');
            }
            return true;
          }
        } catch (e) { console.warn('Telegram init:', e); }
        return false;
      }
      if (!initApp()) {
        var attempts = 0;
        var t = setInterval(function() {
          attempts++;
          if (initApp() || attempts >= 20) {
            clearInterval(t);
          }
        }, 100);
      }
      setTimeout(function() {
        try {
        if (!tg) {
          var p = document.getElementById('previewNav');
          if (p) p.classList.add('show');
        }
        var birthdateEl = document.getElementById('birthdate');
        if (birthdateEl) {
          var today = new Date();
          birthdateEl.max = today.toISOString().split('T')[0];
          var minDate = new Date();
          minDate.setFullYear(minDate.getFullYear() - 100);
          birthdateEl.min = minDate.toISOString().split('T')[0];
        }
        var unknown = document.getElementById('unknown');
        var birthtime = document.getElementById('birthtime');
        if (unknown && birthtime) unknown.addEventListener('change', function() {
          birthtime.required = !unknown.checked;
        });
        var birthdateSummary = document.getElementById('birthdateSummary');
        var birthdateInput = document.getElementById('birthdate');
        var birthplaceSummary = document.getElementById('birthplaceSummary');
        var birthplaceInput = document.getElementById('birthplace');
        var placeConfirmed = document.getElementById('placeConfirmed');
        var monthsRu = ['—è–Ω–≤–∞—Ä—è','—Ñ–µ–≤—Ä–∞–ª—è','–º–∞—Ä—Ç–∞','–∞–ø—Ä–µ–ª—è','–º–∞—è','–∏—é–Ω—è','–∏—é–ª—è','–∞–≤–≥—É—Å—Ç–∞','—Å–µ–Ω—Ç—è–±—Ä—è','–æ–∫—Ç—è–±—Ä—è','–Ω–æ—è–±—Ä—è','–¥–µ–∫–∞–±—Ä—è'];
        function formatDateRu(dateStr) {
          if (!dateStr) return '';
          var d = new Date(dateStr + 'T12:00:00');
          if (isNaN(d.getTime())) return dateStr;
          return d.getDate() + ' ' + monthsRu[d.getMonth()] + ' ' + d.getFullYear() + ' –≥.';
        }
        if (birthdateInput && birthdateSummary) {
          birthdateInput.addEventListener('change', function() {
            var v = birthdateInput.value;
            if (v) {
              birthdateSummary.textContent = '–í—ã–±—Ä–∞–Ω–æ: ' + formatDateRu(v);
              birthdateSummary.style.display = 'block';
            } else {
              birthdateSummary.style.display = 'none';
            }
          });
          if (birthdateInput.value) {
            birthdateSummary.textContent = '–í—ã–±—Ä–∞–Ω–æ: ' + formatDateRu(birthdateInput.value);
            birthdateSummary.style.display = 'block';
          }
        }
        if (birthplaceInput && birthplaceSummary) {
          birthplaceInput.addEventListener('input', function() {
            var v = birthplaceInput.value.trim();
            if (v) {
              birthplaceSummary.textContent = '–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è: ' + v;
              birthplaceSummary.style.display = 'block';
            } else {
              birthplaceSummary.style.display = 'none';
            }
          });
          birthplaceInput.addEventListener('blur', function() {
            var v = birthplaceInput.value.trim();
            if (v) {
              birthplaceSummary.textContent = '–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è: ' + v;
              birthplaceSummary.style.display = 'block';
            }
          });
          if (birthplaceInput.value.trim()) {
            birthplaceSummary.textContent = '–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è: ' + birthplaceInput.value.trim();
            birthplaceSummary.style.display = 'block';
          }
        }
      
      // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
      function goToPage(pageId) {
        if (tg && tg.MainButton && tg.MainButton.hide) tg.MainButton.hide();
        document.querySelectorAll('.page').forEach(function(page) {
          page.classList.remove('active');
        });
        var target = document.getElementById(pageId);
        if (target) target.classList.add('active');
        if (document.getElementById('previewNav') && document.getElementById('previewNav').classList.contains('show')) {
          document.querySelectorAll('.preview-nav button').forEach(function(btn) {
            btn.classList.remove('active');
          });
          var pageMap = { 'homePage': 'home', 'formPage': 'form', 'paymentPage': 'payment', 'loadingPage': 'loading', 'successPage': 'success' };
          var activeBtn = document.querySelector('.preview-nav button[data-page="' + (pageMap[pageId] || '') + '"]');
          if (activeBtn) activeBtn.classList.add('active');
        }
      }
      
      // –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
      var startBtn = document.getElementById('startBtn');
      var backBtn = document.getElementById('backBtn');
      var nextBtn = document.getElementById('nextBtn');
      if (startBtn) startBtn.addEventListener('click', function() { goToPage('formPage'); });
      if (backBtn) backBtn.addEventListener('click', function() { goToPage('homePage'); });
      if (nextBtn) nextBtn.addEventListener('click', function() {
        var name = document.getElementById('name').value.trim();
        var birthdate = document.getElementById('birthdate').value;
        var birthplace = document.getElementById('birthplace').value.trim();
        var birthtimeVal = (unknown && unknown.checked) ? 'ok' : (document.getElementById('birthtime') ? document.getElementById('birthtime').value : '');
        var gender = document.getElementById('gender').value;
        var request = document.getElementById('request').value.trim();
        
        if (name.length < 2) {
          alert('–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞');
          return;
        }
        if (!birthdate) {
          alert('–í—ã–±–µ—Ä–∏ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è');
          return;
        }
        if (birthplace.length < 3) {
          alert('–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞');
          return;
        }
        if (!(placeConfirmed && placeConfirmed.checked)) {
          alert('–ü–æ–¥—Ç–≤–µ—Ä–¥–∏, —á—Ç–æ –º–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è —É–∫–∞–∑–∞–Ω–æ –≤–µ—Ä–Ω–æ (–æ—Ç–º–µ—Ç—å –≥–∞–ª–æ—á–∫—É)');
          return;
        }
        var btVal = document.getElementById('birthtime');
        if (!birthtimeVal || (!(unknown && unknown.checked) && (!btVal || !btVal.value))) {
          alert('–£–∫–∞–∂–∏ –≤—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è –∏–ª–∏ –æ—Ç–º–µ—Ç—å "–ù–µ –∑–Ω–∞—é"');
          return;
        }
        if (!gender) {
          alert('–í—ã–±–µ—Ä–∏ –ø–æ–ª');
          return;
        }
        if (request.length < 10) {
          alert('–ó–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤');
          return;
        }
        
        goToPage('paymentPage');
      });
      
      var backFromPaymentBtn = document.getElementById('backFromPaymentBtn');
      if (backFromPaymentBtn) backFromPaymentBtn.addEventListener('click', function() {
        if (tg && tg.MainButton && tg.MainButton.hide) tg.MainButton.hide();
        goToPage('formPage');
      });
      var payBtn = document.getElementById('payBtn');
      if (payBtn) payBtn.addEventListener('click', function() {
        if (tg && tg.MainButton && tg.sendData) {
          var payload = {
            name: document.getElementById('name').value.trim(),
            birthdate: document.getElementById('birthdate').value,
            birthplace: document.getElementById('birthplace').value.trim(),
            birthtime: document.getElementById('birthtime').value,
            birthtimeUnknown: document.getElementById('unknown').checked,
            gender: document.getElementById('gender').value,
            request: document.getElementById('request').value.trim(),
            initData: (tg.initData || '')
          };
          try {
            tg.MainButton.setText('–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –≤–æ –í—Å–µ–ª–µ–Ω–Ω—É—é');
            tg.MainButton.show();
            tg.MainButton.onClick(function() {
              tg.sendData(JSON.stringify(payload));
            });
          } catch (e) {
            console.warn('MainButton:', e);
            goToPage('loadingPage');
            setTimeout(function() {
              var sp = document.getElementById('songPreviewText');
              if (sp) sp.textContent = '–ó–∞—è–≤–∫–∞ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞. –û–∂–∏–¥–∞–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ —á–∞—Ç–µ —Å –±–æ—Ç–æ–º.';
              goToPage('successPage');
            }, 1500);
          }
        } else {
          goToPage('loadingPage');
          setTimeout(function() {
            var nameEl = document.getElementById('name');
            var reqEl = document.getElementById('request');
            var name = nameEl ? nameEl.value.trim() : '';
            var request = reqEl ? reqEl.value.trim() : '';
            if (!name) name = '–î—Ä—É–≥';
            if (!request) request = '—Ç–≤–æ–∏ —Ü–µ–ª–∏';
            var songText = '‚ú® ' + name + ', —Ç–≤–æ—è –ø–µ—Å–Ω—è —Å–æ–∑–¥–∞–Ω–∞!\n\n–ù–∞ –æ—Å–Ω–æ–≤–µ —Ç–≤–æ–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ \"' + request.substring(0, 30) + '...\" —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–∞—è –∞—É–¥–∏–æ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è.\n\n–≠—Ç–æ —Ç–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∑–≤—É–∫–æ–≤–æ–π –∫–ª—é—á ‚Äî –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —Å–∏–ª—ã –¥–ª—è –∏–≥—Ä—ã –∂–∏–∑–Ω–∏.';
            var sp = document.getElementById('songPreviewText');
            if (sp) sp.textContent = songText;
            goToPage('successPage');
          }, 2500);
        }
      });
      
      var newKeyBtn = document.getElementById('newKeyBtn');
      if (newKeyBtn) newKeyBtn.addEventListener('click', function() {
        var n = document.getElementById('name');
        var bd = document.getElementById('birthdate');
        var bp = document.getElementById('birthplace');
        var bt = document.getElementById('birthtime');
        var g = document.getElementById('gender');
        var r = document.getElementById('request');
        if (n) n.value = '';
        if (bd) bd.value = '';
        if (bp) bp.value = '';
        if (bt) bt.value = '';
        if (unknown) unknown.checked = false;
        if (placeConfirmed) placeConfirmed.checked = false;
        if (g) g.value = '';
        if (r) r.value = '';
        if (birthdateSummary) birthdateSummary.style.display = 'none';
        if (birthplaceSummary) birthplaceSummary.style.display = 'none';
        goToPage('formPage');
      });
      
      document.querySelectorAll('.preview-nav button').forEach(function(button) {
        button.addEventListener('click', function() {
          var pageMap = { 'home': 'homePage', 'form': 'formPage', 'payment': 'paymentPage', 'loading': 'loadingPage', 'success': 'successPage' };
          goToPage(pageMap[button.getAttribute('data-page')] || 'homePage');
        });
      });
        } catch (e) {
          console.warn('App init error:', e);
        }
      }, 50);
    });
  </script>
</body>
</html>
