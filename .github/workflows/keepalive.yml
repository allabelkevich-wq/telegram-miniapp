# Пинг сервиса на Render каждые 10 минут, чтобы free tier не засыпал.
# Без этого с телефона часто таймаут (холодный старт 30–60 сек).
# Бесплатно: GitHub Actions + Render free tier.
name: Keepalive Render
on:
  schedule:
    - cron: '*/10 * * * *'  # каждые 10 минут
  workflow_dispatch:        # можно запустить вручную
jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Render service
        run: |
          url="${RENDER_APP_URL:-https://telegram-miniapp-ar09.onrender.com}"
          echo "Pinging $url/healthz ..."
          curl -sf --max-time 120 "$url/healthz" -o /dev/null && echo "OK" || echo "Failed (server may be waking up)"
        env:
          # Переопредели в Settings → Secrets and variables → Actions → Variables при другом URL
          RENDER_APP_URL: ${{ vars.RENDER_APP_URL }}
