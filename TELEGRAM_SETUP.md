# Как добавить YupSoul в Telegram

Сайт приложения (Render): **https://telegram-miniapp-ar09.onrender.com/app**

## Вариант 1: У тебя уже есть бот (например @YupSoulBot)

### Кнопка «Меню» под полем ввода

1. Открой в Telegram **@BotFather**.
2. Отправь команду **`/mybots`**.
3. Выбери своего бота (например YupSoulBot).
4. Нажми **Bot Settings** → **Menu Button** → **Configure menu button**.
5. Введи URL:  
   **`https://telegram-miniapp-ar09.onrender.com/app`**
6. Введи текст кнопки, например: **Открыть приложение** или **YupSoul**.

После этого у бота под полем ввода появится кнопка — по нажатию откроется твоё Mini App.

---

## Вариант 2: Создать нового бота

1. Открой **@BotFather** в Telegram.
2. Отправь **`/newbot`**.
3. Введи имя бота (например: **YupSoul**).
4. Введи username бота (должен заканчиваться на `bot`, например: **yupsoul_mini_bot**).
5. BotFather пришлёт **токен** — сохрани его (он нужен для продвинутых сценариев).
6. Повтори шаги из **Варианта 1** (Bot Settings → Menu Button → URL приложения).

---

## Прямая ссылка на приложение

Любой пользователь может открыть приложение по ссылке:

- **https://telegram-miniapp-ar09.onrender.com/app**

Чтобы открыть его **внутри Telegram** (как Mini App), ссылка должна быть в формате:

- **https://t.me/ИМЯ_ТВОЕГО_БОТА?startapp=YupSoul**

Пример: если бот называется **@YupSoulBot**, то ссылка будет:

- **https://t.me/YupSoulBot**

После настройки кнопки меню пользователи нажимают на неё в чате с ботом — и приложение открывается.

---

## Что уже сделано в коде

- Подключён скрипт **Telegram Web App API** (`telegram-web-app.js`).
- В Telegram приложение откроется в режиме Mini App (без панели «Режим превью»).
- В обычном браузере по-прежнему показывается панель для переключения страниц.

После настройки кнопки меню в BotFather приложение будет открываться в Telegram по нажатию на кнопку.

---

## Приложение не открывается — что проверить

1. **URL в BotFather**  
   @BotFather → `/mybots` → твой бот → **Bot Settings** → **Menu Button** → **Configure menu button**.  
   URL должен быть **ровно**: `https://telegram-miniapp-ar09.onrender.com/app` (без пробелов в конце). Либо задай его в `bot/.env` как `MINI_APP_URL` — тогда бот сам выставит кнопку при запуске.

2. **Кнопка под полем ввода**  
   Открывай приложение кнопкой **под полем ввода** в чате с ботом (кнопка меню), а не кнопкой под сообщением бота.

3. **Прямая ссылка (проверка)**  
   Отправь себе в «Избранное» или в чат ссылку и открой её **в Telegram** (не в браузере):  
   `https://t.me/Yup_Soul_bot?startapp=app`  
   (если username бота другой — замени `Yup_Soul_bot` на свой).  
   Если по ссылке открывается, а по кнопке — нет, заново настрой Menu Button в BotFather (п. 1).

4. **Обновление после правок в коде**  
   После пуша в GitHub подожди 1–2 минуты. В Telegram закрой чат с ботом и открой снова или нажми кнопку меню ещё раз (чтобы не открывалась старая версия из кэша).

5. **Устройство**  
   Попробуй открыть с телефона (iOS или Android) — иногда на десктопе Mini App ведёт себя иначе.

---

## Заявка → песня в боте

Бэкенд (API + бот) уже на **Render**. Пользователь получает песню в ответ на заявку так:

1. **`index.html`** — уже задан `window.HEROES_API_BASE = 'https://telegram-miniapp-ar09.onrender.com'`.
2. Открой Mini App **из бота** (кнопка меню). Заполни форму и отправь заявку.
3. Бот обработает заявку на Render и отправит песню в чат.

Папка `backend/` не используется — API встроен в бота (`bot/index.js`).
