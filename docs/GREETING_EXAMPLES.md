# Приветствия к песне (звуковому ключу)

При отправке готовой песни пользователю в Telegram бот отправляет **приветствие** (текст сообщения) вместе с аудио. Текст выбирается по типу запроса пользователя.

## Где настраивать

- **Модуль:** `bot/greetingTemplates.js`
- **Объект:** `GREETINGS_BY_CATEGORY` — массивы фраз по категориям: `relationships`, `finances`, `health`, `spiritual`, `default`.
- **Подстановки в тексте:** `{{name}}` — имя пользователя, `{{title}}` — название трека (если есть).

## Категории по запросу

Категория определяется по ключевым словам в тексте запроса (см. `KEYWORDS` в том же файле):

| Категория      | Примеры тем запроса                          |
|----------------|----------------------------------------------|
| relationships  | отношения, любовь, партнёр, пара, семья      |
| finances       | деньги, карьера, работа, бизнес, изобилие    |
| health         | здоровье, тело, энергия, исцеление           |
| spiritual      | душа, миссия, карма, духовный путь, судьба   |
| default        | общий запрос, «создать песню», без явной темы |

## Примеры из чата с Qwen3max

Если у тебя есть готовые формулировки приветствий из переписки с Qwen3max, вставь их в `bot/greetingTemplates.js` в соответствующие массивы `GREETINGS_BY_CATEGORY` (можно заменить текущие или добавить новые строки). Формат: обычная строка с плейсхолдером `{{name}}` и при необходимости `{{title}}`.

Пример использования в коде воркера при отправке песни:

```js
import { getGreetingForSong } from "./greetingTemplates.js";

// request — текст запроса из track_requests.request
// name — из track_requests.name
const caption = getGreetingForSong(request, { name: row.name || "Друг", title: row.title || "" });
await bot.api.sendAudio(chatId, audioUrlOrStream, { caption });
```
