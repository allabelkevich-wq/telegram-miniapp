# Глюки в Telegram: что проверить

Если в Telegram не открывается приложение, заявки или админка — пройди по списку ниже.

---

## 1. Приложение (Mini App) не открывается или белый экран

- **Откуда открываешь:** только через **кнопку меню** в чате с ботом (внизу «✨ Открыть приложение»). Не по прямой ссылке в браузере.
- **Обнови страницу:** в WebView иногда зажми обновление или закрой и снова открой приложение из бота.
- **Версия Telegram:** обнови приложение до последней версии (мобильный или десктоп).
- **Ссылка в боте:** в Render (или в .env бота) переменная **MINI_APP_URL** должна быть ровно:  
  `https://allabelkevich-wq.github.io/telegram-miniapp/`  
  Без лишних слэшей и без index.html. После смены URL перезапусти бота / сделай Redeploy.
- **GitHub Pages:** репозиторий `allabelkevich-wq/telegram-miniapp` должен быть с включённым GitHub Pages (Settings → Pages → Source: main branch). После пуша обновление может занять 1–2 минуты.

---

## 2. Форма открывается, но заявка не отправляется

- Должна появляться **кнопка внизу экрана** «Отправить заявку во Вселенную». Если её нет — приложение, скорее всего, открыто не из Telegram (например, в браузере). Открой из чата с ботом.
- Если кнопка есть, но после нажатия ничего не приходит в чат — проверь, что **бот запущен** (на Render статус Live; при первом запросе после «сна» ответ может прийти через 30–60 сек).
- В чате с ботом после отправки должно прийти сообщение «✅ Заявка принята!». Если его нет — смотри логи бота на Render (Logs).

---

## 3. Команда /admin не отвечает или «висит»

- **Кто может:** только пользователи, чей Telegram ID указан в **ADMIN_TELEGRAM_IDS** в Render (переменные окружения). Узнать свой ID: написать боту @userinfobot в Telegram.
- **Где писать:** команду **/admin** нужно писать **в чат с ботом** (тот же чат, где открываешь приложение), а не в группу или другому боту.
- **Задержка на Render (Free):** если бот «спал», первый ответ может приходить **до 50–60 секунд**. Подожди минуту.
- Если через минуту ответа нет — открой на Render вкладку **Logs** и посмотри, есть ли ошибки при команде /admin (таймаут Supabase, ошибка БД и т.п.).

---

## 4. /admin_check для проверки бота и базы

В чате с ботом напиши **/admin_check** (тоже только если твой ID в ADMIN_TELEGRAM_IDS). Бот ответит, подключён ли Supabase и сколько записей в track_requests. Если команда не отвечает — бот не получает сообщения или падает (смотри Logs на Render).

---

## 5. Краткий чек-лист

| Проверка | Действие |
|----------|----------|
| Открываю приложение только из чата с ботом | Кнопка меню внизу в чате с ботом |
| MINI_APP_URL в боте совпадает с GitHub Pages | `https://allabelkevich-wq.github.io/telegram-miniapp/` |
| Бот на Render в статусе Live | Dashboard Render → сервис → Logs при ошибках |
| Мой ID в ADMIN_TELEGRAM_IDS | Переменные в Render, команды /admin и /admin_check в личке с ботом |
| Telegram обновлён | App Store / Google Play / desktop |
| После пуша в репо подождала 1–2 минуты | GitHub Pages обновляется не мгновенно |

Если после этого что-то всё равно не работает — опиши, что именно: «не открывается приложение» / «открывается, но кнопки нет» / «/admin не отвечает» и т.д., и при возможности скрин или текст ошибки из Logs на Render.
