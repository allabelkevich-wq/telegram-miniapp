# Код веб-страницы и про админку (для отладки с другой нейросетью)

## Важно: где «админка»

**В этом проекте «админка» — это не веб-страница.**  
Админка реализована **командами бота в Telegram**:
- **`/admin`** — список заявок из Supabase
- **`/admin_check`** — проверка подключения к базе и числа заявок

Обработка этих команд и подключение к Supabase находятся **в боте**, а не в HTML:
- **Файл:** `bot/index.js`
- Ищи по строкам: `bot.command("admin"`, `getRequestsForAdmin`, `ADMIN_TELEGRAM_IDS`, `isAdmin(userId)`.

Почему «админка не подключается» чаще всего:
1. В Render (Environment) не задан **ADMIN_TELEGRAM_IDS** или не указан твой Telegram ID.
2. Твой ID не совпадает с тем, с которого пишешь боту (проверка: @userinfobot).
3. Бот не может достучаться до Supabase (таймаут, неверные SUPABASE_URL / SUPABASE_SERVICE_KEY).

---

## Основная веб-страница (Mini App)

Это **форма для пользователей**, которая открывается по кнопке меню в Telegram.  
Она **не содержит** логики админки и не подключается к «админке» — только отправляет заявки в бота (sendData или POST /api/submit-request).

**Файл с полным кодом:** `public/index.html` (в корне репозитория — папка `public`, файл `index.html`).

Ниже — тот же код целиком, чтобы можно было скопировать и отдать другой нейросети.

---

<details>
<summary>Полный код public/index.html (нажми, чтобы развернуть)</summary>

Файл большой (~975 строк). Скопировать его проще так:
- В редакторе открой `public/index.html` и скопируй всё (Cmd+A, Cmd+C).
- Или в терминале: `cat public/index.html` (из корня репозитория).

Либо открой файл по пути: **telegram-miniapp/public/index.html**.

</details>

---

## Что отдать другой нейросети для разбора «админка не подключается»

1. **Код бота (админка):** файл **`bot/index.js`** — команды `/admin`, `/admin_check`, проверка `ADMIN_TELEGRAM_IDS`, вызов `getRequestsForAdmin`, отправка ответа.
2. **Переменные окружения:** в Render → твой Web Service → **Environment** должны быть заданы `ADMIN_TELEGRAM_IDS` (твой Telegram ID), `SUPABASE_URL`, `SUPABASE_SERVICE_KEY`.
3. **Веб-страница** (если нужно смотреть форму/отправку заявок): **`public/index.html`** — в этом файле админки нет, только форма и отправка в бота.
