# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã –∫–∞—Ä—Ç–∞–º–∏ —á–µ—Ä–µ–∑ T-Bank (–¢–∏–Ω—å–∫–æ—Ñ—Ñ) ‚Äî –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

> –≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –í–°–ï —à–∞–≥–∏ –æ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥–æ –ø–µ—Ä–≤–æ–≥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞.
> –ö–æ–¥ —É–∂–µ –Ω–∞–ø–∏—Å–∞–Ω –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω ‚Äî –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã.

---

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ T-Bank](#1-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è-–∏-–ø–æ–ª—É—á–µ–Ω–∏–µ-—Ç–µ—Ä–º–∏–Ω–∞–ª–∞-t-bank)
2. [–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π (TerminalKey –∏ Password)](#2-–ø–æ–ª—É—á–µ–Ω–∏–µ-–∫–ª—é—á–µ–π)
3. [SQL-–º–∏–≥—Ä–∞—Ü–∏—è –≤ Supabase](#3-sql-–º–∏–≥—Ä–∞—Ü–∏—è-–≤-supabase)
4. [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Render](#4-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è-–Ω–∞-render)
5. [–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤ landing.html](#5-–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ-—é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö-–¥–∞–Ω–Ω—ã—Ö)
6. [–î–µ–ø–ª–æ–π](#6-–¥–µ–ø–ª–æ–π)
7. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#7-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
8. [–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –±–æ–µ–≤–æ–π —Ä–µ–∂–∏–º](#8-–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ-–Ω–∞-–±–æ–µ–≤–æ–π-—Ä–µ–∂–∏–º)
9. [–ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º](#9-—á–µ–∫-–ª–∏—Å—Ç)
10. [–¶–µ–Ω—ã –∏ SKU](#10-—Ü–µ–Ω—ã-–∏-sku)
11. [–ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç](#11-—Ç—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥)

---

## 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ T-Bank

### –ï—Å–ª–∏ —É —Ç–µ–±—è –ò–ü –∏–ª–∏ –û–û–û:

1. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ **https://www.tbank.ru/kassa/** (T-Bank –ë–∏–∑–Ω–µ—Å ‚Üí –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-—ç–∫–≤–∞–π—Ä–∏–Ω–≥)
2. –ù–∞–∂–º–∏ **¬´–ü–æ–¥–∫–ª—é—á–∏—Ç—å¬ª**
3. –ó–∞–ø–æ–ª–Ω–∏ –∑–∞—è–≤–∫—É:
   - –¢–∏–ø –±–∏–∑–Ω–µ—Å–∞: **–ò–ü** (–∏–ª–∏ –û–û–û)
   - –ò–ù–ù: —Ç–≤–æ–π –ò–ù–ù
   - –°–∞–π—Ç: `https://yupsoul-bot.onrender.com/landing.html` (–∏–ª–∏ —Ç–≤–æ–π –¥–æ–º–µ–Ω)
   - –û–ø–∏—Å–∞–Ω–∏–µ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: ¬´–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∞—É–¥–∏–æ-–º–µ–¥–∏—Ç–∞—Ü–∏–∏ –∏ –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á—ë—Ç—ã¬ª
   - –ü—Ä–∏–º–µ—Ä–Ω—ã–π –æ–±–æ—Ä–æ—Ç: —É–∫–∞–∂–∏ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—É—é —Å—É–º–º—É
4. –î–æ–∂–¥–∏—Å—å –æ–¥–æ–±—Ä–µ–Ω–∏—è (–æ–±—ã—á–Ω–æ 1‚Äì3 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è)
5. –ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è —Ç–µ–±–µ –æ—Ç–∫—Ä–æ—é—Ç **–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –º–µ—Ä—á–∞–Ω—Ç–∞**

### –ï—Å–ª–∏ —É —Ç–µ–±—è —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ—Å—Ç—å:

T-Bank –Ω–∞–ø—Ä—è–º—É—é –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç —Å–∞–º–æ–∑–∞–Ω—è—Ç—ã—Ö. –í–∞—Ä–∏–∞–Ω—Ç—ã:
- –û—Ñ–æ—Ä–º–∏—Ç—å –ò–ü (–º–æ–∂–Ω–æ —Å–æ–≤–º–µ—â–∞—Ç—å —Å —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ—Å—Ç—å—é)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä (–ÆKassa, –†–æ–±–æ–∫–∞—Å—Å–∞) ‚Äî –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∫–æ–¥–∞

---

## 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π

–ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è –∑–∞—è–≤–∫–∏:

1. –í–æ–π–¥–∏ –≤ **–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –º–µ—Ä—á–∞–Ω—Ç–∞**: https://business.tbank.ru/
2. –ü–µ—Ä–µ–π–¥–∏ –≤ —Ä–∞–∑–¥–µ–ª **¬´–ú–∞–≥–∞–∑–∏–Ω—ã¬ª** ‚Üí –≤—ã–±–µ—Ä–∏ —Å–≤–æ–π –º–∞–≥–∞–∑–∏–Ω
3. –ü–µ—Ä–µ–π–¥–∏ –≤–æ –≤–∫–ª–∞–¥–∫—É **¬´–¢–µ—Ä–º–∏–Ω–∞–ª—ã¬ª**
4. –¢—ã —É–≤–∏–¥–∏—à—å **–¥–≤–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞**:
   - **–¢–µ—Å—Ç–æ–≤—ã–π** (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏, –¥–µ–Ω—å–≥–∏ –Ω–µ —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è) ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç `DEMO` –∏–ª–∏ `Test`
   - **–ë–æ–µ–≤–æ–π** (—Ä–µ–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏)

### –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∑–∞–ø–∏—à–∏:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ì–¥–µ –Ω–∞–π—Ç–∏ | –ü—Ä–∏–º–µ—Ä |
|----------|-----------|--------|
| **TerminalKey** | –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ ‚Üí ¬´–ö–ª—é—á —Ç–µ—Ä–º–∏–Ω–∞–ª–∞¬ª | `1234567890DEMO` |
| **Password** | –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ ‚Üí ¬´–ü–∞—Ä–æ–ª—å¬ª (–º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∫—Ä—ã—Ç, –Ω–∞–∂–º–∏ ¬´–ü–æ–∫–∞–∑–∞—Ç—å¬ª) | `abcdefgh12` |

> **–í–ê–ñ–ù–û:** Password ‚Äî —ç—Ç–æ –ù–ï –ø–∞—Ä–æ–ª—å –æ—Ç –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞! –≠—Ç–æ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Notification URL –≤ –∫–∞–±–∏–Ω–µ—Ç–µ T-Bank:

1. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –Ω–∞–π–¥–∏ —Ä–∞–∑–¥–µ–ª **¬´–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è¬ª** –∏–ª–∏ **¬´Webhook URL¬ª**
2. –£–∫–∞–∂–∏ URL:
   ```
   https://yupsoul-bot.onrender.com/api/payments/tbank/notification
   ```
   (–∑–∞–º–µ–Ω–∏ `yupsoul-bot.onrender.com` –Ω–∞ —Å–≤–æ–π –¥–æ–º–µ–Ω, –µ—Å–ª–∏ –æ–Ω –¥—Ä—É–≥–æ–π)
3. –°–æ—Ö—Ä–∞–Ω–∏

> –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Ä–º–∏–Ω–∞–ª—ã T-Bank –Ω–µ —Ç—Ä–µ–±—É—é—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å Notification URL –≤ –∫–∞–±–∏–Ω–µ—Ç–µ ‚Äî –æ–Ω –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ Init. –ù–∞—à –∫–æ–¥ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ù–æ –ª—É—á—à–µ —É–∫–∞–∑–∞—Ç—å –∏ —Ç–∞–º, –∏ —Ç–∞–º ‚Äî –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏.

---

## 3. SQL-–º–∏–≥—Ä–∞—Ü–∏—è –≤ Supabase

–ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `tbank_cards` –∏ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É –≤ `track_requests`.

### –®–∞–≥–∏:

1. –û—Ç–∫—Ä–æ–π **Supabase Dashboard**: https://supabase.com/dashboard
2. –í—ã–±–µ—Ä–∏ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç
3. –ü–µ—Ä–µ–π–¥–∏ –≤ **SQL Editor** (–ª–µ–≤–æ–µ –º–µ–Ω—é ‚Üí –∏–∫–æ–Ω–∫–∞ —Å `>_`)
4. –í—Å—Ç–∞–≤—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `bot/supabase-migration-tbank-cards.sql`:

```sql
-- –¢–∞–±–ª–∏—Ü–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç T-Bank (RebillId –¥–ª—è —Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π)
CREATE TABLE IF NOT EXISTS tbank_cards (
  id BIGSERIAL PRIMARY KEY,
  telegram_user_id BIGINT NOT NULL UNIQUE,
  rebill_id TEXT NOT NULL,
  card_pan TEXT,
  card_exp TEXT,
  card_id TEXT,
  active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX IF NOT EXISTS idx_tbank_cards_user ON tbank_cards(telegram_user_id);
CREATE INDEX IF NOT EXISTS idx_tbank_cards_active ON tbank_cards(telegram_user_id, active) WHERE active = TRUE;

-- –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–æ–Ω–∫—É tbank_payment_id –≤ track_requests (–µ—Å–ª–∏ –µ—â—ë –Ω–µ—Ç)
DO $$
BEGIN
  IF NOT EXISTS (
    SELECT 1 FROM information_schema.columns
    WHERE table_name = 'track_requests' AND column_name = 'tbank_payment_id'
  ) THEN
    ALTER TABLE track_requests ADD COLUMN tbank_payment_id TEXT;
  END IF;
END $$;
```

5. –ù–∞–∂–º–∏ **Run** (–∑–µ–ª—ë–Ω–∞—è –∫–Ω–æ–ø–∫–∞)
6. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤—ã–≤–æ–¥: `Success. No rows returned` ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ

### –ü—Ä–æ–≤–µ—Ä–∫–∞:

–í —Ç–æ–º –∂–µ SQL Editor –≤—ã–ø–æ–ª–Ω–∏:
```sql
SELECT column_name, data_type FROM information_schema.columns WHERE table_name = 'tbank_cards' ORDER BY ordinal_position;
```

–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å 9 –∫–æ–ª–æ–Ω–æ–∫: `id`, `telegram_user_id`, `rebill_id`, `card_pan`, `card_exp`, `card_id`, `active`, `created_at`, `updated_at`.

---

## 4. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Render

### –®–∞–≥–∏:

1. –û—Ç–∫—Ä–æ–π **Render Dashboard**: https://dashboard.render.com/
2. –í—ã–±–µ—Ä–∏ —Å–µ—Ä–≤–∏—Å **yupsoul-bot** (—Ç–∏–ø: Web Service)
3. –ü–µ—Ä–µ–π–¥–∏ –≤ **Environment** (–ª–µ–≤–æ–µ –º–µ–Ω—é)
4. –î–æ–±–∞–≤—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è? | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|---------------|----------|
| `TBANK_TERMINAL_KEY` | –ö–ª—é—á —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∏–∑ –∫–∞–±–∏–Ω–µ—Ç–∞ T-Bank | **–î–ê** | –ë–µ–∑ –Ω–µ—ë –∫–Ω–æ–ø–∫–∞ ¬´–û–ø–ª–∞—Ç–∏—Ç—å –∫–∞—Ä—Ç–æ–π¬ª –Ω–µ –ø–æ—è–≤–∏—Ç—Å—è |
| `TBANK_PASSWORD` | –ü–∞—Ä–æ–ª—å —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∏–∑ –∫–∞–±–∏–Ω–µ—Ç–∞ T-Bank | **–î–ê** | –î–ª—è –ø–æ–¥–ø–∏—Å–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ |
| `TBANK_API_URL` | `https://securepay.tinkoff.ru/v2` | –ù–µ—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É–∂–µ –∑–∞–¥–∞–Ω –≤ –∫–æ–¥–µ) | –î–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞: `https://rest-api-test.tinkoff.ru/v2` |
| `TBANK_SUCCESS_URL` | `https://yupsoul-bot.onrender.com/app` | –ù–µ—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) | –ö—É–¥–∞ –≤–µ—Ä–Ω—É—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã |
| `TBANK_FAIL_URL` | `https://yupsoul-bot.onrender.com/app` | –ù–µ—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) | –ö—É–¥–∞ –≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–µ –æ–ø–ª–∞—Ç—ã |
| `TBANK_NOTIFICATION_URL` | `https://yupsoul-bot.onrender.com/api/payments/tbank/notification` | –ù–µ—Ç (–≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ RENDER_EXTERNAL_URL) | –ö—É–¥–∞ T-Bank —à–ª—ë—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ–ø–ª–∞—Ç–µ |

### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—Ç–µ—Å—Ç–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª):

```
TBANK_TERMINAL_KEY = <–∫–ª—é—á —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞, –æ–±—ã—á–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç DEMO>
TBANK_PASSWORD = <–ø–∞—Ä–æ–ª—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞>
TBANK_API_URL = https://rest-api-test.tinkoff.ru/v2
```

### –î–ª—è –±–æ–µ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞:

```
TBANK_TERMINAL_KEY = <–∫–ª—é—á –±–æ–µ–≤–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞>
TBANK_PASSWORD = <–ø–∞—Ä–æ–ª—å –±–æ–µ–≤–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞>
TBANK_API_URL = https://securepay.tinkoff.ru/v2
```

> **–í–ê–ñ–ù–û:** –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–∞–∂–º–∏ **Save Changes**. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å.

### –¢–∞–∫–∂–µ –¥–æ–±–∞–≤—å —Ç–µ –∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –≤–æ—Ä–∫–µ—Ä–∞:

1. –í—ã–±–µ—Ä–∏ —Å–µ—Ä–≤–∏—Å **yupsoul-worker** (—Ç–∏–ø: Worker)
2. –ü–µ—Ä–µ–π–¥–∏ –≤ **Environment**
3. –î–æ–±–∞–≤—å —Ç–µ –∂–µ `TBANK_TERMINAL_KEY`, `TBANK_PASSWORD`, `TBANK_API_URL`, `TBANK_NOTIFICATION_URL`
4. –°–æ—Ö—Ä–∞–Ω–∏

> –í–æ—Ä–∫–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–¥–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–æ–∫ (—Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏).

---

## 5. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

–§–∞–π–ª `public/landing.html` —Å–æ–¥–µ—Ä–∂–∏—Ç —é—Ä–∏–¥–∏—á–µ—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é —Ç—Ä–µ–±—É–µ—Ç T-Bank.

### –ß—Ç–æ –Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:

–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª `public/landing.html` –∏ –∑–∞–º–µ–Ω–∏ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã:

| –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä | –ß—Ç–æ –≤–ø–∏—Å–∞—Ç—å |
|-------------|-------------|
| `[—É–∫–∞–∂–∏—Ç–µ –ò–ù–ù]` | –¢–≤–æ–π –ò–ù–ù (12 —Ü–∏—Ñ—Ä –¥–ª—è –ò–ü) |
| `[—É–∫–∞–∂–∏—Ç–µ –û–ì–†–ù–ò–ü]` | –¢–≤–æ–π –û–ì–†–ù–ò–ü (15 —Ü–∏—Ñ—Ä) |
| `[—É–∫–∞–∂–∏—Ç–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –∏–ª–∏ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å]` | –ê–¥—Ä–µ—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ò–ü |
| `[—É–∫–∞–∂–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞]` | –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω |

### –ü—Ä–∏–º–µ—Ä:

–ë—ã–ª–æ:
```html
–ò–ù–ù: <em>[—É–∫–∞–∂–∏—Ç–µ –ò–ù–ù]</em><br>
–û–ì–†–ù–ò–ü: <em>[—É–∫–∞–∂–∏—Ç–µ –û–ì–†–ù–ò–ü]</em>
```

–°—Ç–∞–ª–æ:
```html
–ò–ù–ù: 123456789012<br>
–û–ì–†–ù–ò–ü: 312345678901234
```

> –≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: `https://yupsoul-bot.onrender.com/landing.html`
> –ï—ë –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ T-Bank –∫–∞–∫ ¬´–°–∞–π—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–æ–¥–∞–≤—Ü–µ¬ª.

---

## 6. –î–µ–ø–ª–æ–π

–ü–æ—Å–ª–µ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫:

```bash
# 1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π —Ñ–∞–π–ª—ã
cp public/index.html bot/public/
cp -f public/landing.html bot/public/ 2>/dev/null
cp -r public/assets/icons bot/public/assets/ 2>/dev/null

# 2. –ö–æ–º–º–∏—Ç –∏ push
git add -A
git commit -m "feat: T-Bank card payments integration"
git push origin main
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π —Å–∫—Ä–∏–ø—Ç:
```bash
./scripts/sync-and-deploy-miniapp.sh "T-Bank card payments"
```

Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç.

---

## 7. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (—Ç–µ—Å—Ç–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª):

1. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤ Render —Å—Ç–æ–∏—Ç **—Ç–µ—Å—Ç–æ–≤—ã–π** `TBANK_TERMINAL_KEY` –∏ `TBANK_API_URL = https://rest-api-test.tinkoff.ru/v2`
2. –û—Ç–∫—Ä–æ–π Mini App –≤ Telegram
3. –ó–∞–ø–æ–ª–Ω–∏ –∑–∞—è–≤–∫—É –Ω–∞ –ø–µ—Å–Ω—é
4. –ù–∞ —ç–∫—Ä–∞–Ω–µ –æ–ø–ª–∞—Ç—ã –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ **¬´üí≥ –û–ø–ª–∞—Ç–∏—Ç—å –∫–∞—Ä—Ç–æ–π ‚Äî 490 ‚ÇΩ¬ª**
5. –ù–∞–∂–º–∏ –Ω–∞ –Ω–µ—ë
6. –û—Ç–∫—Ä–æ–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ –æ–ø–ª–∞—Ç—ã T-Bank

### –¢–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã T-Bank:

| –ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|-------------|-----------|
| `4300 0000 0000 0777` | –£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞ |
| `4000 0000 0000 0002` | –û—Ç–∫–ª–æ–Ω–µ–Ω–∞ |
| `4000 0000 0000 0036` | –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ |

- **–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è:** –ª—é–±–æ–π –±—É–¥—É—â–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `12/28`)
- **CVC:** –ª—é–±—ã–µ 3 —Ü–∏—Ñ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `123`)
- **3D-Secure –∫–æ–¥:** `12345678` (–µ—Å–ª–∏ —Å–ø—Ä–æ—Å–∏—Ç)

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

- [ ] –ö–Ω–æ–ø–∫–∞ ¬´–û–ø–ª–∞—Ç–∏—Ç—å –∫–∞—Ä—Ç–æ–π¬ª –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ –æ–ø–ª–∞—Ç—ã
- [ ] –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ T-Bank
- [ ] –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤–æ–π –∫–∞—Ä—Ç–æ–π —Å—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ ¬´–û–ø–ª–∞—á–µ–Ω–æ¬ª
- [ ] –î–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ ‚Äî –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è
- [ ] –î–ª—è —Ä–∞–∑–æ–≤–æ–π –ø–µ—Å–Ω–∏ ‚Äî –ø–µ—Å–Ω—è –Ω–∞—á–∏–Ω–∞–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
- [ ] –í –ª–æ–≥–∞—Ö Render –≤–∏–¥–Ω–æ `[T-Bank notification]` —Å `Status: CONFIRMED`

### –ö–∞–∫ —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏:

1. Render Dashboard ‚Üí yupsoul-bot ‚Üí Logs
2. –ò—â–∏ —Å—Ç—Ä–æ–∫–∏ —Å `[T-Bank]`:
   - `[T-Bank] ‚Üí Init` ‚Äî –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
   - `[T-Bank] ‚Üê Init` ‚Äî –æ—Ç–≤–µ—Ç (Success: true/false)
   - `[T-Bank notification]` ‚Äî –≤—Ö–æ–¥—è—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–ø–ª–∞—Ç–µ

---

## 8. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –±–æ–µ–≤–æ–π —Ä–µ–∂–∏–º

–ö–æ–≥–¥–∞ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã:

1. –í **Render Dashboard** ‚Üí yupsoul-bot ‚Üí Environment:
   - –ó–∞–º–µ–Ω–∏ `TBANK_TERMINAL_KEY` –Ω–∞ **–±–æ–µ–≤–æ–π** –∫–ª—é—á
   - –ó–∞–º–µ–Ω–∏ `TBANK_PASSWORD` –Ω–∞ **–±–æ–µ–≤–æ–π** –ø–∞—Ä–æ–ª—å
   - –ó–∞–º–µ–Ω–∏ `TBANK_API_URL` –Ω–∞ `https://securepay.tinkoff.ru/v2` (–∏–ª–∏ —É–¥–∞–ª–∏ ‚Äî —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
2. –¢–æ –∂–µ —Å–∞–º–æ–µ –¥–ª—è **yupsoul-worker**
3. –°–æ—Ö—Ä–∞–Ω–∏ ‚Üí Render –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å—ã
4. –°–¥–µ–ª–∞–π —Ç–µ—Å—Ç–æ–≤—ã–π –ø–ª–∞—Ç—ë–∂ —Ä–µ–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ–π –Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é —Å—É–º–º—É (490‚ÇΩ –∑–∞ –ø–µ—Å–Ω—é)
5. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –¥–µ–Ω—å–≥–∏ –ø—Ä–∏—à–ª–∏ –Ω–∞ —Å—á—ë—Ç –≤ T-Bank

---

## 9. –ß–µ–∫-–ª–∏—Å—Ç

### –ü–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º —Ç–µ—Å—Ç–æ–º:

- [ ] –¢–µ—Ä–º–∏–Ω–∞–ª T-Bank —Å–æ–∑–¥–∞–Ω –∏ –æ–¥–æ–±—Ä–µ–Ω
- [ ] SQL-–º–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –≤ Supabase
- [ ] `TBANK_TERMINAL_KEY` –¥–æ–±–∞–≤–ª–µ–Ω –≤ Render (yupsoul-bot)
- [ ] `TBANK_PASSWORD` –¥–æ–±–∞–≤–ª–µ–Ω –≤ Render (yupsoul-bot)
- [ ] –¢–µ –∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Render (yupsoul-worker)
- [ ] –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –≤ `landing.html`
- [ ] –ö–æ–¥ –∑–∞–¥–µ–ø–ª–æ–µ–Ω (`git push origin main`)

### –ü–µ—Ä–µ–¥ –±–æ–µ–≤—ã–º –∑–∞–ø—É—Å–∫–æ–º:

- [ ] –¢–µ—Å—Ç–æ–≤—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
- [ ] –ü–æ–¥–ø–∏—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã
- [ ] –†–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ —Ä–∞–±–æ—Ç–∞—é—Ç (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ –ª–æ–≥–∏ –≤–æ—Ä–∫–µ—Ä–∞)
- [ ] –ë–æ–µ–≤—ã–µ –∫–ª—é—á–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] `TBANK_API_URL` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ `https://securepay.tinkoff.ru/v2`
- [ ] Notification URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –∫–∞–±–∏–Ω–µ—Ç–µ T-Bank
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π –ø–ª–∞—Ç—ë–∂ —Ä–µ–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ–π –ø—Ä–æ—à—ë–ª

---

## 10. –¶–µ–Ω—ã –∏ SKU

–¢–µ–∫—É—â–∏–µ —Ü–µ–Ω—ã –∑–∞—à–∏—Ç—ã –≤ –∫–æ–¥–µ (–º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –≤ `bot/index.js`):

| SKU | –ù–∞–∑–≤–∞–Ω–∏–µ | –¶–µ–Ω–∞ (‚ÇΩ) | –¢–∏–ø |
|-----|----------|-----------|-----|
| `single_song` | –û–¥–Ω–∞ –ø–µ—Å–Ω—è | 490 | –†–∞–∑–æ–≤—ã–π |
| `couple_song` | –ü–µ—Å–Ω—è –¥–ª—è –ø–∞—Ä—ã | 890 | –†–∞–∑–æ–≤—ã–π |
| `deep_analysis_addon` | –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ | 290 | –†–∞–∑–æ–≤—ã–π |
| `soul_basic_sub` | Soul Basic –ø–æ–¥–ø–∏—Å–∫–∞ | 1 490 | –ü–æ–¥–ø–∏—Å–∫–∞ (30 –¥–Ω–µ–π) |
| `soul_plus_sub` | Soul Plus –ø–æ–¥–ø–∏—Å–∫–∞ | 2 490 | –ü–æ–¥–ø–∏—Å–∫–∞ (30 –¥–Ω–µ–π) |
| `master_monthly` | –ú–∞—Å—Ç–µ—Ä –ø–æ–¥–ø–∏—Å–∫–∞ | 3 990 | –ü–æ–¥–ø–∏—Å–∫–∞ (30 –¥–Ω–µ–π) |

> –¶–µ–Ω—ã —É–∫–∞–∑–∞–Ω—ã –≤ —Ä—É–±–ª—è—Ö. T-Bank –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—É–º–º—ã –≤ –∫–æ–ø–µ–π–∫–∞—Ö ‚Äî –∫–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–º–Ω–æ–∂–∞–µ—Ç –Ω–∞ 100.

---

## 11. –¢—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥

### –ö–Ω–æ–ø–∫–∞ ¬´–û–ø–ª–∞—Ç–∏—Ç—å –∫–∞—Ä—Ç–æ–π¬ª –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** `TBANK_TERMINAL_KEY` –Ω–µ –∑–∞–¥–∞–Ω –∏–ª–∏ –ø—É—Å—Ç.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Render Dashboard
2. –ü–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ ‚Äî –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞ `[T-Bank] TerminalKey: XXXXXX‚Ä¶`
3. –ï—Å–ª–∏ –≤–∏–¥–∏—à—å `[T-Bank] –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω` ‚Äî –∫–ª—é—á –Ω–µ –∑–∞–¥–∞–Ω

### –§–æ—Ä–º–∞ –æ–ø–ª–∞—Ç—ã –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π `TBANK_API_URL` –∏–ª–∏ TerminalKey.

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ URL: `https://rest-api-test.tinkoff.ru/v2`
2. –î–ª—è –±–æ–µ–≤–æ–≥–æ: `https://securepay.tinkoff.ru/v2`
3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: `[T-Bank] ‚Üê Init` ‚Äî –µ—Å–ª–∏ `Success: false`, —Å–º–æ—Ç—Ä–∏ `ErrorCode` –∏ `Message`

### –û–ø–ª–∞—Ç–∞ –ø—Ä–æ—à–ª–∞, –Ω–æ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∞—Å—å

**–ü—Ä–∏—á–∏–Ω–∞:** Notification URL –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: –µ—Å—Ç—å –ª–∏ `[T-Bank notification]`?
2. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî T-Bank –Ω–µ –º–æ–∂–µ—Ç –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞
3. –£–±–µ–¥–∏—Å—å, —á—Ç–æ URL `https://yupsoul-bot.onrender.com/api/payments/tbank/notification` –¥–æ—Å—Ç—É–ø–µ–Ω (–æ—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ ‚Äî –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –æ—à–∏–±–∫—É, –Ω–æ –Ω–µ 404)
4. –ü—Ä–æ–≤–µ—Ä—å Notification URL –≤ –∫–∞–±–∏–Ω–µ—Ç–µ T-Bank

### –û—à–∏–±–∫–∞ ¬´T-Bank –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω¬ª (503)

**–ü—Ä–∏—á–∏–Ω–∞:** –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –±–µ–∑ `TBANK_TERMINAL_KEY`.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å.

### –û—à–∏–±–∫–∞ ¬´–ù–µ–≤–µ—Ä–Ω—ã–π Token¬ª (403) –≤ –ª–æ–≥–∞—Ö notification

**–ü—Ä–∏—á–∏–Ω–∞:** `TBANK_PASSWORD` –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–µ–º, —á—Ç–æ –≤ –∫–∞–±–∏–Ω–µ—Ç–µ T-Bank.

**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—å –ø–∞—Ä–æ–ª—å —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –≤ –∫–∞–±–∏–Ω–µ—Ç–µ T-Bank –∏ –≤ Render.

### –†–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –Ω–µ —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –í–æ—Ä–∫–µ—Ä –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏–ª–∏ –Ω–µ—Ç `RebillId`.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ T-Bank –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ **yupsoul-worker**
2. –ü–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ –≤–æ—Ä–∫–µ—Ä–∞ ‚Äî –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `[T-Bank renew]`
3. –ü—Ä–æ–≤–µ—Ä—å —Ç–∞–±–ª–∏—Ü—É `tbank_cards` –≤ Supabase ‚Äî –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å —Å `active = true`

---

## –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã (–¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è)

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç ¬´–û–ø–ª–∞—Ç–∏—Ç—å –∫–∞—Ä—Ç–æ–π¬ª
        ‚Üì
Frontend ‚Üí POST /api/payments/tbank/init
        ‚Üì
Backend ‚Üí T-Bank API (Init) ‚Üí –ø–æ–ª—É—á–∞–µ—Ç payment_url
        ‚Üì
Frontend –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç payment_url (—Ñ–æ—Ä–º–∞ T-Bank)
        ‚Üì
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∫–∞—Ä—Ç—É ‚Üí –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç
        ‚Üì
T-Bank ‚Üí POST /api/payments/tbank/notification (webhook)
        ‚Üì
Backend: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç Token ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞—è–≤–∫—É ‚Üí –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É
        ‚Üì
Frontend (polling) ‚Üí –≤–∏–¥–∏—Ç —Å—Ç–∞—Ç—É—Å ¬´paid¬ª ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç ¬´–û–ø–ª–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∞¬ª
```

### –†–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ (–∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏):

```
–í–æ—Ä–∫–µ—Ä (–∫–∞–∂–¥—ã–π —á–∞—Å) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∏ —Å renew_at <= now()
        ‚Üì
–ù–∞—Ö–æ–¥–∏—Ç –ø–æ–¥–ø–∏—Å–∫—É ‚Üí –±–µ—Ä—ë—Ç RebillId –∏–∑ tbank_cards
        ‚Üì
Init (OperationInitiatorType: "R") ‚Üí Charge (RebillId)
        ‚Üì
T-Bank —Å–ø–∏—Å—ã–≤–∞–µ—Ç –¥–µ–Ω—å–≥–∏ ‚Üí notification ‚Üí –ø–æ–¥–ø–∏—Å–∫–∞ –ø—Ä–æ–¥–ª–µ–Ω–∞ –Ω–∞ 30 –¥–Ω–µ–π
```
