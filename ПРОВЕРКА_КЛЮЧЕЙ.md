# Проверка ключей для YupSoul

## Обязательные ключи (должны быть в .env на Render):

### 1. BOT_TOKEN
- **Где получить:** @BotFather в Telegram → /newbot → создать бота → скопировать токен
- **Используется в:** `bot/index.js`, `bot/workerSoundKey.js`
- **Проверка:** Бот должен отвечать на `/ping`

### 2. SUPABASE_URL
- **Где получить:** Supabase Dashboard → Project Settings → API → Project URL
- **Формат:** `https://xxxxx.supabase.co`
- **Используется в:** `bot/index.js`, `bot/workerSoundKey.js`, все модули с Supabase

### 3. SUPABASE_SERVICE_KEY
- **Где получить:** Supabase Dashboard → Project Settings → API → service_role key
- **Важно:** Это service_role ключ (не anon key!), начинается с `eyJ...`
- **Используется в:** `bot/index.js`, `bot/workerSoundKey.js`, все модули с Supabase

### 4. DEEPSEEK_API_KEY
- **Где получить:** https://platform.deepseek.com/api_keys
- **Формат:** `sk-...`
- **Используется в:** `bot/deepseek.js` (вызывается из `workerSoundKey.js`)
- **Проверка:** Должен быть в .env, используется через модуль `deepseek.js`

### 5. SUNO_API_KEY
- **Где получить:** https://sunoapi.org/api-key
- **Формат:** Обычно строка без префикса
- **Используется в:** `bot/suno.js` (вызывается из `workerSoundKey.js`)
- **Проверка:** Должен быть в .env, используется через модуль `suno.js`

### 6. ADMIN_TELEGRAM_IDS
- **Где получить:** Написать @userinfobot в Telegram → скопировать ID
- **Формат:** `123456789` или несколько через запятую `123,456,789`
- **Используется в:** `bot/index.js` (для команды /admin и уведомлений)

### 7. MINI_APP_URL (опционально, но желательно)
- **Где получить:** URL твоего Mini App (GitHub Pages или Vercel)
- **Формат:** `https://telegram-miniapp-ar09.onrender.com/app` (Render; Vercel удалён)
- **Используется в:** `bot/index.js` (для кнопки меню)

## Опциональные ключи:

### 8. SUNO_MODEL
- **Значения:** `V5`, `V4_5ALL`, `V4_5`, `V4_5PLUS`, `V4`
- **По умолчанию:** `V5` (если не указано)
- **Используется в:** `bot/suno.js`

### 9. SUNO_VOCAL_GENDER
- **Значения:** `m` (мужской) или `f` (женский)
- **Используется в:** `bot/suno.js`

### 10. BACKEND_URL или SUNO_CALLBACK_URL
- **Для:** Callback от Suno API
- **Формат:** `https://your-app.onrender.com`

## Где проверить ключи на Render:

1. Зайди в Render Dashboard
2. Выбери сервис `yupsoul-bot`
3. Environment → проверь все ключи выше
4. Если какого-то ключа нет — добавь его

## Что проверить:

✅ BOT_TOKEN — бот отвечает на `/ping`?
✅ SUPABASE_URL и SUPABASE_SERVICE_KEY — команда `/admin_check` показывает подключение?
✅ DEEPSEEK_API_KEY — есть ли в .env? (нужен для генерации текста)
✅ SUNO_API_KEY — есть ли в .env? (нужен для генерации музыки)
✅ ADMIN_TELEGRAM_IDS — команда `/admin` работает?

## Если заявки не отправляются:

1. Проверь, что все ключи есть в Render Environment
2. Проверь логи бота — есть ли ошибки о missing keys?
3. Проверь, что бот обновился (последний коммит в логах)
