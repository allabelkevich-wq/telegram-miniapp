<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#08071a">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>YupSoul</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <!-- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –æ—Ç —Å—Ç–∞—Ä—ã—Ö –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö URL (v=22) –Ω–∞ —Å–≤–µ–∂–∏–π timestamp -->
  <script>
    (function(){
      try {
        var APP_VERSION = '1.2.76';
        var CACHE_KEY = 'yupsoul_app_version';
        var cached = localStorage.getItem(CACHE_KEY);
        
        // –ï—Å–ª–∏ –≤–µ—Ä—Å–∏—è –∏–∑–º–µ–Ω–∏–ª–∞—Å—å ‚Äî –Ω–∞–≤–∏–≥–∏—Ä—É–µ–º –Ω–∞ –Ω–æ–≤—ã–π URL —Å timestamp
        // (window.location.reload(true) –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∫—ç—à –≤ Telegram iOS WebView)
        if (cached && cached !== APP_VERSION) {
          localStorage.setItem(CACHE_KEY, APP_VERSION);
          var base = window.location.href.split('?')[0];
          window.location.replace(base + '?v=' + Date.now());
          return;
        }
        localStorage.setItem(CACHE_KEY, APP_VERSION);
        
        var qs = window.location.search;
        var m = qs.match(/[?&]v=(\d+)/);
        if (m && m[1] && m[1].length <= 6) {
          // –°—Ç–∞—Ä—ã–π –∫–æ—Ä–æ—Ç–∫–∏–π v= (–Ω–∞–ø—Ä. v=22) ‚Äî –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è —Å timestamp —á—Ç–æ–±—ã —Å–±–∏—Ç—å –∫–µ—à
          var fresh = window.location.href.replace(/([?&])v=\d+/, '$1v=' + Date.now());
          window.location.replace(fresh);
        }
      } catch(e) {}
    })();
  </script>
  <!-- API: –Ω–∞ Render –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—Ç –∂–µ origin, –∏–Ω–∞—á–µ —Ö–∞—Ä–¥–∫–æ–¥. -->
  <script>
    (function(){
      var origin = (typeof window !== 'undefined' && window.location && window.location.origin) ? window.location.origin : '';
      var isRender = /\.onrender\.com$/i.test(origin);
      window.HEROES_API_BASE = isRender ? origin : 'https://telegram-miniapp-ar09.onrender.com';
      window.BACKEND_URL = window.HEROES_API_BASE;
    })();
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
    /* –ê–î–ê–ü–¢–ò–í–ù–´–ï –°–¢–ò–õ–ò –° –ü–û–î–î–ï–†–ñ–ö–û–ô –¢–ï–ú–´ –¢–ï–õ–ï–ì–†–ê–ú */
    /* –ü–∞–ª–∏—Ç—Ä–∞: –Ω–∞—Å—Ç–æ—è—â–µ–µ –∑–æ–ª–æ—Ç–æ + —Ç—ë–ø–ª—ã–π —è–Ω—Ç–∞—Ä—å (–±–µ–∑ —Ä–æ–∑–æ–≤–æ–≥–æ) */
    :root {
      --primary-color: #B8860B;
      --primary-light: #D4A017;
      --secondary-color: #B45309;
      --primary-rgb: 184, 134, 11;
      --secondary-rgb: 180, 83, 9;
      --success-color: #10b981;
      --subtitle-readable: rgba(255,255,255,0.92);
      /* Fluid scaling ‚Äî –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ Apple: —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —ç–∫—Ä–∞–Ω—É */
      --fluid-xs: clamp(0.7rem, 1.8vw, 0.8rem);
      --fluid-sm: clamp(0.8rem, 2.2vw, 0.95rem);
      --fluid-base: clamp(0.9rem, 2.8vw, 1.05rem);
      --fluid-md: clamp(1rem, 3.2vw, 1.2rem);
      --fluid-lg: clamp(1.1rem, 3.8vw, 1.4rem);
      --fluid-xl: clamp(1.2rem, 4.5vw, 1.6rem);
      --fluid-2xl: clamp(1.4rem, 5.5vw, 2.4rem);
      --spacing-xs: clamp(4px, 1.2vw, 8px);
      --spacing-sm: clamp(6px, 1.8vw, 12px);
      --spacing-md: clamp(10px, 2.5vw, 18px);
      --spacing-lg: clamp(14px, 3.5vw, 24px);
      --spacing-xl: clamp(18px, 4.5vw, 28px);
      --radius-sm: clamp(6px, 1.8vw, 10px);
      --radius-md: clamp(8px, 2.2vw, 14px);
      --radius-lg: clamp(12px, 3vw, 20px);
      /* –±–∞–∑–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ–º—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (dark premium) */
      --tg-theme-bg-color: #0A0A1A;
      --tg-theme-secondary-bg-color: rgba(255,255,255,0.08);
      --tg-theme-text-color: #ffffff;
      --tg-theme-hint-color: rgba(224, 224, 240, 0.7);
      --tg-theme-border-color: rgba(var(--primary-rgb), 0.3);
      --tg-theme-button-color: var(--primary-color);
      --tg-theme-button-text-color: #0A0A1A;
    }
    .theme-light {
      --tg-theme-bg-color: #f5f3ff;
      --tg-theme-secondary-bg-color: rgba(255,255,255,0.92);
      --tg-theme-text-color: #1f2937;
      --tg-theme-hint-color: rgba(31, 41, 55, 0.6);
      --tg-theme-border-color: rgba(var(--primary-rgb), 0.35);
      --tg-theme-button-color: var(--primary-color);
      --tg-theme-button-text-color: #1f2937;
      --subtitle-readable: rgba(31,41,55,0.88);
    }
    .theme-dark {
      --tg-theme-bg-color: #0A0A1A;
      --tg-theme-secondary-bg-color: rgba(255,255,255,0.08);
      --tg-theme-text-color: #ffffff;
      --tg-theme-hint-color: rgba(224,224,240,0.7);
      --tg-theme-border-color: rgba(var(--primary-rgb), 0.3);
      --tg-theme-button-color: var(--primary-color);
      --tg-theme-button-text-color: #0A0A1A;
      --subtitle-readable: rgba(255,255,255,0.92);
    }
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    html { height: 100%; }
    body {
      background: linear-gradient(160deg,#08071a 0%,#100828 40%,#0b1022 70%,#08071a 100%) !important;
      color: var(--tg-theme-text-color) !important;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-size: var(--fluid-base);
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      -webkit-tap-highlight-color: transparent;
    }
    body::before {
      content:"";
      position:fixed;
      inset:0;
      z-index:0;
      /* –û–¥–∏–Ω –ø–ª–∞–≤–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç –±–µ–∑ —Å—Ç–æ–ø–æ–≤ ‚Äî —Ä–µ–∑–∫–∏–µ —Å—Ç–æ–ø—ã –¥–∞–≤–∞–ª–∏ –ø–æ–ª–æ—Å—É —á–µ—Ä–µ–∑ –ª–æ–≥–æ—Ç–∏–ø –≤ –ø—Ä–µ–≤—å—é */
      background: linear-gradient(180deg, rgba(1,6,26,0.5) 0%, rgba(8,10,38,0.65) 100%);
      pointer-events:none;
    }
    body::after {
      content:"";
      position:fixed;
      inset:0;
      z-index:0;
      /* –ü–ª–∞–≤–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç –±–µ–∑ —Å—Ç–æ–ø–æ–≤ ‚Äî –∏–Ω–∞—á–µ –≤ –ø—Ä–µ–≤—å—é –≤–∏–¥–Ω–∞ –ø–æ–ª–æ—Å–∞ —á–µ—Ä–µ–∑ –ª–æ–≥–æ—Ç–∏–ø */
      background: linear-gradient(180deg, rgba(1,6,26,0.22) 0%, rgba(8,10,38,0.2) 100%);
      pointer-events:none;
    }
    .content-wrapper { max-width: min(600px,100%); margin: 0 auto; padding: var(--spacing-lg); width: 100%; }
    .form-group { margin-bottom: 16px; }
    .form-group label { display: block; color: var(--tg-theme-text-color, #fff); font-size: var(--fluid-sm); margin-bottom: 8px; font-weight: 500; }
    input::placeholder, textarea::placeholder { color: var(--tg-theme-hint-color, rgba(255,255,255,.55)); opacity: 1; }
    .form-group input, .form-group select, .form-group textarea {
      width: 100%; padding: 12px 16px; background: var(--tg-theme-secondary-bg-color, rgba(255, 255, 255, 0.05));
      border: 1px solid var(--tg-theme-border-color, rgba(255, 255, 255, 0.1)); border-radius: 8px;
      color: var(--tg-theme-text-color, #fff); font-size: var(--fluid-base); box-sizing: border-box;
    }
    .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
      outline: none; border-color: rgba(var(--primary-rgb),0.6); box-shadow: 0 0 0 2px rgba(var(--primary-rgb),0.12);
    }
    .checkbox-group { display: flex; align-items: center; margin-top: 8px; }
    .checkbox-group input[type="checkbox"] { width: 18px; height: 18px; margin-right: 8px; cursor: pointer; }
    .checkbox-group label { margin: 0; font-size: var(--fluid-sm); color: var(--tg-theme-text-color, #fff); opacity: 0.9; }
    small { color: var(--tg-theme-hint-color, rgba(255, 255, 255, 0.6)); font-size: var(--fluid-xs); }
    h3 { color: var(--tg-theme-text-color, #fff); font-size: var(--fluid-md); margin: 0 0 15px 0; font-weight: 600; }
    #payBtn {
      width: 100%; padding: 13px 24px; background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      border: none; border-radius: 14px; color: var(--tg-theme-button-text-color, #fff); font-size: 1rem; font-weight: 600;
      cursor: pointer; transition: all 0.3s; margin-top: 16px; box-shadow: 0 4px 15px rgba(var(--primary-rgb),0.3);
    }
    #payBtn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4); }
    #payBtn:active { transform: translateY(0); }
    .form-section {
      background: var(--tg-theme-secondary-bg-color, rgba(255, 255, 255, 0.05)); border-radius: 12px; padding: 20px; margin-bottom: 20px;
      border: 1px solid var(--tg-theme-border-color, rgba(255, 255, 255, 0.1));
    }
    .request-examples {
      margin: 20px 0; padding: 15px; background: var(--tg-theme-secondary-bg-color, rgba(255, 255, 255, 0.05));
      border-radius: 12px; border: 1px solid var(--tg-theme-border-color, rgba(255, 255, 255, 0.1));
    }
    .request-examples h3 { font-size: var(--fluid-md); color: var(--tg-theme-text-color, #fff); margin: 0 0 12px 0; font-weight: 500; }
    .examples-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 8px; }
    .example-btn {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-light), var(--primary-color));
      border: 1px solid rgba(var(--primary-rgb), 0.7); color: #0A0A1A;
      padding: 10px 12px; border-radius: 8px; font-size: var(--fluid-xs); font-weight: 600;
      cursor: pointer; text-align: left; transition: all 0.2s; width: 100%;
      white-space: normal; word-wrap: break-word; word-break: break-word;
      box-shadow: 0 4px 12px rgba(var(--primary-rgb), 0.4);
    }
    .example-btn:hover { opacity: 0.95; transform: translateY(-2px); box-shadow: 0 6px 18px rgba(var(--primary-rgb), 0.5); background: linear-gradient(135deg, var(--primary-light), var(--primary-color), var(--primary-light)); }
    .example-btn.special { background: linear-gradient(135deg, var(--primary-color), var(--primary-light)); border-color: rgba(var(--primary-rgb), 0.7); }
    /* ===== MODE SELECTOR ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ —Å —è—Ä–∫–æ–π –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π ===== */
    .mode-selector {
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(var(--primary-rgb), 0.1);
      border-radius: 16px;
      padding: 16px;
      margin: 12px;
    }
    .mode-selector h3 {
      color: #ffffff;
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 4px;
      text-align: center;
    }
    .mode-subtitle {
      color: rgba(255, 255, 255, 0.6);
      font-size: 12px;
      text-align: center;
      margin-bottom: 12px;
    }
    .mode-buttons {
      display: flex;
      gap: 8px;
      justify-content: center;
    }
    .mode-btn {
      position: relative;
      flex: 1;
      min-width: 0;
      display: flex !important;
      flex-direction: column !important;
      align-items: center !important;
      justify-content: center !important;
      min-height: 64px !important;
      max-height: 64px !important;
      padding: 8px 6px !important;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(var(--primary-rgb), 0.15);
      border-radius: 10px;
      color: #ffffff !important;
      font-family: 'Comfortaa', sans-serif;
      font-size: 8px !important;
      font-weight: 600 !important;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      line-height: 1.2 !important;
      white-space: normal !important;
      word-wrap: break-word !important;
      overflow: hidden !important;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important;
    }
    .mode-btn .mode-label {
      display: -webkit-box !important;
      -webkit-box-orient: vertical !important;
      -webkit-line-clamp: 2 !important;
      overflow: hidden !important;
      word-wrap: break-word !important;
      white-space: normal !important;
      text-overflow: ellipsis;
      min-width: 0;
      width: 100%;
      font-size: inherit;
      line-height: 1.2 !important;
      font-weight: inherit;
      text-align: center;
    }
    .mode-btn.active .mode-label { font-weight: 600; }
    .mode-btn:hover {
      background: rgba(var(--primary-rgb), 0.1);
      border-color: rgba(var(--primary-rgb), 0.3);
      color: #ffffff;
      transform: translateY(-1px);
    }
    .mode-btn.active {
      background: linear-gradient(135deg,
        rgba(var(--primary-rgb), 0.3) 0%,
        rgba(var(--primary-rgb), 0.15) 100%);
      border: 2px solid #D4AF37;
      color: #FFE55C !important;
      font-weight: 600;
      box-shadow:
        0 0 20px rgba(var(--primary-rgb), 0.6),
        0 0 40px rgba(var(--primary-rgb), 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
      transform: scale(1.02);
      text-shadow:
        0 0 10px rgba(var(--primary-rgb), 0.8),
        0 0 20px rgba(var(--primary-rgb), 0.5) !important;
    }
    .mode-btn.active::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(135deg,
        rgba(var(--primary-rgb), 0.8),
        rgba(var(--secondary-rgb), 0.4));
      border-radius: 10px;
      opacity: 0.3;
      z-index: -1;
      filter: blur(8px);
    }
    .mode-btn.active::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 150%;
      height: 150%;
      background: radial-gradient(circle,
        rgba(var(--primary-rgb), 0.4),
        transparent 70%);
      -webkit-animation: activePulse 2s ease-in-out infinite;
      animation: activePulse 2s ease-in-out infinite;
      pointer-events: none;
      border-radius: 50%;
    }
    @-webkit-keyframes activePulse {
      0%, 100% { -webkit-transform: translate(-50%, -50%) scale(1); transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
      50% { -webkit-transform: translate(-50%, -50%) scale(1.1); transform: translate(-50%, -50%) scale(1.1); opacity: 0.8; }
    }
    @keyframes activePulse {
      0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
      50% { transform: translate(-50%, -50%) scale(1.1); opacity: 0.8; }
    }
    .mode-btn:active { transform: scale(0.98); transition: transform 0.1s; }
    @media (max-width: 380px) {
      .mode-btn {
        font-size: 7px !important;
        min-height: 60px !important;
        max-height: 60px !important;
        padding: 6px 4px !important;
        border-radius: 8px;
      }
      .mode-selector {
        padding: 14px 12px;
        margin: 10px;
      }
      .mode-selector h3 {
        font-size: 14px;
      }
      .mode-subtitle {
        font-size: 11px;
      }
    }
    .mode-btn[data-mode="transit"] .mode-label {
      display: -webkit-box !important;
      word-break: break-word !important;
      hyphens: auto !important;
    }
    .mode-icon { display: none; }
    .mode-label { font-weight: 700; font-size: inherit; line-height: 1.25; }
    .mode-desc { display: none; }
    /* –ê–∫–∫–æ—Ä–¥–µ–æ–Ω –≤—Ç–æ—Ä–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ */
    #secondPersonAccordion .pfa-header { background: rgba(var(--primary-rgb),0.06); border: 1px solid rgba(var(--primary-rgb),0.18); }
    #secondPersonAccordion .pfa-header:hover { background: rgba(var(--primary-rgb),0.1); }
    #secondPersonFormWrap { overflow: hidden; transition: max-height .38s cubic-bezier(.4,0,.2,1), opacity .3s ease; max-height: 0; opacity: 0; }
    #transitFormWrap { overflow: hidden; transition: max-height .38s cubic-bezier(.4,0,.2,1), opacity .3s ease; max-height: 0; opacity: 0; }
    .mode-info {
      min-width: 44px; min-height: 44px; width: 44px; height: 44px; border-radius: 50%; border: 1px solid rgba(var(--primary-rgb),0.4);
      color: rgba(var(--primary-rgb),0.7); font-size: 0.7rem; font-weight: 700;
      display: inline-flex; align-items: center; justify-content: center;
      flex-shrink: 0; cursor: pointer; line-height: 1; transition: border-color 0.2s, color 0.2s;
      font-style: normal; user-select: none;
    }
    .mode-info:active { color: var(--primary-color); border-color: var(--primary-color); }
    /* –¢—É–ª—Ç–∏–ø –ø–æ–¥—Å–∫–∞–∑–∫–∏ */
    #modeTooltip {
      display: none; position: fixed; z-index: 9999;
      background: rgba(25,25,35,0.97); border: 1px solid rgba(var(--primary-rgb),0.3);
      color: rgba(255,255,255,0.88); font-size: 0.8rem; line-height: 1.45;
      padding: 9px 13px; border-radius: 10px; max-width: 220px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.4); pointer-events: none;
    }
    .location-input-wrapper { position: relative; }
    .location-input {
      width: 100%; padding: 12px 16px; background: var(--tg-theme-secondary-bg-color, rgba(255, 255, 255, 0.05));
      border: 1px solid var(--tg-theme-border-color, rgba(255, 255, 255, 0.1)); border-radius: 8px;
      color: var(--tg-theme-text-color, #fff); font-size: var(--fluid-base); box-sizing: border-box;
    }
    .location-input:focus {
      outline: none; border-color: rgba(var(--primary-rgb),0.6); box-shadow: 0 0 0 2px rgba(var(--primary-rgb),0.12);
    }
    .location-suggestions {
      position: absolute; z-index: 1000; background: var(--tg-theme-bg-color, #1a1a1a);
      border: 1px solid var(--tg-theme-border-color, rgba(255, 255, 255, 0.1)); border-radius: 8px;
      max-height: 200px; overflow-y: auto; width: 100%; margin-top: 4px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      display: none;
    }
    .location-suggestion {
      padding: 10px 12px; cursor: pointer; border-bottom: 1px solid var(--tg-theme-border-color, rgba(255, 255, 255, 0.1));
      color: var(--tg-theme-text-color, #fff); font-size: var(--fluid-base); transition: background 0.2s;
    }
    .location-suggestion:hover { background: var(--tg-theme-secondary-bg-color, rgba(255, 255, 255, 0.1)); }
    .location-suggestion:last-child { border-bottom: none; }
    .stepper {
      display: flex; gap: 8px; align-items: center; margin-bottom: 16px; position: relative;
    }
    .step-line {
      position: absolute; left: 12px; right: 12px; height: 2px; background: var(--tg-theme-border-color); top: 18px; z-index: 0;
    }
    .step-indicator {
      position: relative; z-index: 1; padding: 8px 12px; border-radius: 10px; border: 1px solid var(--tg-theme-border-color);
      background: var(--tg-theme-secondary-bg-color); color: var(--tg-theme-text-color); font-weight: 600; font-size: var(--fluid-sm);
      flex: 1; text-align: center;
    }
    .step-indicator.active {
      border-color: var(--tg-theme-button-color); background: linear-gradient(135deg, var(--tg-theme-button-color), var(--secondary-color));
      color: var(--tg-theme-button-text-color); box-shadow: 0 6px 18px rgba(var(--primary-rgb),0.25);
    }
    .step-panel { margin-top: 20px; }
    .step-nav { display: flex; gap: 12px; margin-top: 16px; }
    .step-nav button { flex: 1; text-transform: none; letter-spacing: 0; }
    .form-submit-sticky { position: sticky; bottom: 0; background: none; padding: 14px 0 6px; margin: 0; z-index: 5; display: flex; flex-direction: column; align-items: stretch; gap: 0; }
    .form-submit-sticky button#stepNext { flex: none; width: 100%; }
    .form-nav-links{display:flex;justify-content:center;gap:14px;margin-top:18px;padding:10px 0}
    .form-nav-link{background:none;border:none;color:rgba(var(--primary-rgb),0.55);font-size:0.8rem;cursor:pointer;font-family:inherit;padding:0;min-height:unset;box-shadow:none;animation:none;font-weight:500}
    .form-nav-link:hover{color:rgba(var(--primary-rgb),0.8)}
    @media (max-width: 600px) {
      .examples-grid { grid-template-columns: 1fr; }
      .content-wrapper { padding: 15px; }
      #payBtn { padding: 14px; font-size: 15px; }
    }
    /* –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è */
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Comfortaa',sans-serif}
    .container{max-width:min(600px,100%);margin:0 auto;width:100%;position:relative;z-index:1;padding:0 var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left,0));padding-right:max(var(--spacing-md),env(safe-area-inset-right,0))}
    .page{position:fixed;inset:0;display:none !important;flex-direction:column;overflow:hidden}
    .page.active{display:flex !important}
    .page-scroll{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;padding:0 var(--spacing-md) calc(env(safe-area-inset-bottom) + 24px)}
    .page-header{flex-shrink:0}
    .page-footer{flex-shrink:0;padding:var(--spacing-md);padding-bottom:max(var(--spacing-md),env(safe-area-inset-bottom))}
    header{text-align:center;margin:var(--spacing-xl) 0 var(--spacing-lg);position:relative}
    .lang-switcher-compact{position:relative;z-index:1}
    .lang-switcher-btn{display:inline-flex !important;align-items:center;justify-content:center;gap:2px;min-width:44px !important;min-height:44px !important;width:44px !important;height:44px !important;padding:0 !important;font-size:9px;line-height:1;background:linear-gradient(135deg,rgba(var(--primary-rgb),0.18),rgba(var(--secondary-rgb),0.14)) !important;border:1.5px solid rgba(var(--primary-rgb),0.4) !important;border-radius:50% !important;color:rgba(var(--primary-rgb),0.9);cursor:pointer;font-family:inherit;font-weight:600;letter-spacing:0;transition:background .2s, border-color .2s, color .2s;box-shadow:0 2px 12px rgba(0,0,0,0.3) !important;animation:none !important;transform:none !important}
    .lang-switcher-btn:hover{background:rgba(var(--primary-rgb),0.28) !important;border-color:rgba(var(--primary-rgb),0.6) !important;color:var(--primary-color)}
    #langSwitcherIcon{font-size:10px;opacity:0.6;line-height:1}
    #langSwitcherCurrent{text-align:center;font-size:9px;font-weight:600}
    .lang-dropdown{position:absolute;top:calc(100% + 4px);right:0;left:auto;margin-top:0;width:40px;padding:2px;background:rgba(18,15,40,0.97);border:1px solid rgba(var(--primary-rgb),0.18);border-radius:8px;box-shadow:0 4px 14px rgba(0,0,0,0.55);overflow:hidden;z-index:9999}
    .lang-dropdown[hidden]{display:none !important}
    .lang-opt{display:flex;align-items:center;justify-content:center;width:100%;min-height:44px;padding:8px 0;text-align:center;background:transparent;border:none;border-radius:4px;color:rgba(255,255,255,0.55);font-size:9px;font-weight:600;letter-spacing:0.04em;cursor:pointer;font-family:inherit;transition:color .15s,background .15s;animation:none;box-shadow:none;margin:0}
    .lang-opt:hover,.lang-opt:active{background:rgba(var(--primary-rgb),0.12);color:var(--primary-color)}
    h1{font-size:var(--fluid-2xl);background:linear-gradient(135deg,var(--primary-color),var(--secondary-color),var(--primary-color));background-size:300% 300%;animation:gradientShift 4s ease infinite;-webkit-background-clip:text;background-clip:text;color:transparent;font-weight:700;letter-spacing:-1px;line-height:1.2;padding-bottom:4px}
    .subtitle{color:var(--subtitle-readable,var(--tg-theme-text-color));font-size:var(--fluid-base);margin-top:8px;font-weight:400}
    .tagline{color:var(--primary-color);font-size:var(--fluid-sm);font-weight:400;margin:6px 0 0;letter-spacing:0.1px;opacity:0.75}
    .section{background:var(--tg-theme-secondary-bg-color);border-radius:var(--radius-lg);padding:var(--spacing-lg) var(--spacing-lg);box-shadow:0 4px 18px rgba(var(--primary-rgb),0.08);border:1px solid rgba(255,255,255,0.06);position:relative;overflow:hidden;margin-bottom:var(--spacing-lg);overflow-wrap:break-word;word-break:break-word}
    #paymentPage .section{background:rgba(20,18,45,0.98);min-height:300px;color:#fff}
    body.theme-light #paymentPage .section{background:rgba(250,248,255,0.98);color:#1f2937}
    .section::before{display:none}
    .field{margin-bottom:var(--spacing-md);text-align:left}
    .field label{font-size:0.85rem;font-weight:500;color:rgba(255,255,255,0.85);margin-bottom:6px;display:flex;align-items:center;gap:8px}
    .field input:not([type="checkbox"]):not([type="radio"]),.field select,.field textarea{font-size:0.92rem;padding:10px 14px}
    label{display:block;margin-bottom:10px;color:var(--tg-theme-text-color,#2d2d2d);font-weight:500;font-size:1.05rem;display:flex;align-items:center;gap:10px}
    label::before{content:attr(data-icon);font-size:1.25rem}
    input,textarea,select{width:100%;padding:var(--spacing-md);border-radius:var(--radius-md);border:1px solid var(--tg-theme-border-color,#e5e7eb);background:var(--tg-theme-secondary-bg-color,#fff);color:var(--tg-theme-text-color,#2d2d2d);font-size:var(--fluid-base);transition:all .3s ease;font-family:'Comfortaa',sans-serif}
    input:focus,textarea:focus,select:focus{outline:none;border-color:rgba(var(--primary-rgb),0.6);box-shadow:0 0 0 3px rgba(var(--primary-rgb),.12)}
    input.valid,textarea.valid{border-color:#4ade80}
    /* –£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è date/time inputs –Ω–∞ Android */
    input[type="date"],input[type="time"]{
      font-size:1.2rem;
      min-height:56px;
      font-weight:500;
      letter-spacing:0.3px;
      padding:15px 18px;
      font-weight:600;
      letter-spacing:0.4px;
      -webkit-appearance:none;
      -moz-appearance:none;
      appearance:none;
      background:rgba(255,255,255,0.12);
      border:2px solid rgba(var(--primary-rgb),0.4);
      color:#fff;
      border-radius:12px;
      transition:all 0.2s ease;
    }
    input[type="date"]:focus,input[type="time"]:focus{
      border-color:rgba(var(--primary-rgb),0.8);
      background:rgba(255,255,255,0.16);
      outline:none;
      box-shadow:0 0 0 3px rgba(var(--primary-rgb),0.15);
    }
    input[type="date"]::-webkit-calendar-picker-indicator,
    input[type="time"]::-webkit-calendar-picker-indicator{
      width:32px;
      height:32px;
      min-width:32px;
      min-height:32px;
      opacity:0.85;
      cursor:pointer;
      filter:invert(1) brightness(1.2);
      padding:4px;
      border-radius:6px;
      transition:all 0.2s ease;
    }
    input[type="date"]::-webkit-calendar-picker-indicator:hover,
    input[type="time"]::-webkit-calendar-picker-indicator:hover{
      opacity:1;
      background:rgba(var(--primary-rgb),0.2);
    }
    /* Placeholder –¥–ª—è –ø—É—Å—Ç—ã—Ö date/time inputs */
    input[type="date"]:not(:focus):invalid,
    input[type="time"]:not(:focus):invalid{
      color:rgba(255,255,255,0.5);
      font-weight:500;
    }
    /* –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å –¥–ª—è Android Xiaomi –∏ –¥—Ä—É–≥–∏—Ö –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
    @media (max-width: 600px) {
      input[type="date"],input[type="time"]{
        font-size:1.3rem;
        min-height:60px;
        padding:17px 22px;
        border-width:2.5px;
        font-weight:700;
        letter-spacing:0.5px;
        text-shadow:0 1px 2px rgba(0,0,0,0.3);
      }
      input[type="date"]::-webkit-calendar-picker-indicator,
      input[type="time"]::-webkit-calendar-picker-indicator{
        width:38px;
        height:38px;
        min-width:38px;
        min-height:38px;
        filter:invert(1) brightness(1.5) contrast(1.2);
      }
      input[type="date"]::-webkit-datetime-edit-fields-wrapper,
      input[type="time"]::-webkit-datetime-edit-fields-wrapper{
        padding:2px 0;
      }
      input[type="date"]::-webkit-datetime-edit-text,
      input[type="time"]::-webkit-datetime-edit-text{
        padding:0 4px;
        font-weight:500;
      }
      input[type="date"]::-webkit-datetime-edit-day-field,
      input[type="date"]::-webkit-datetime-edit-month-field,
      input[type="date"]::-webkit-datetime-edit-year-field,
      input[type="time"]::-webkit-datetime-edit-hour-field,
      input[type="time"]::-webkit-datetime-edit-minute-field{
        padding:2px 4px;
        border-radius:0;
        background:transparent;
        font-weight:500;
      }
    }
    .birthdate-wrap{position:relative}
    .birthdate-wrap.has-date{padding-right:2.75rem}
    #birthdate{padding-right:2.5rem;min-width:0}
    .birthdate-check{position:absolute;right:16px;top:50%;transform:translateY(-50%);pointer-events:none;color:#4ade80;font-size:1.15rem;display:none;font-weight:700}
    .birthdate-wrap.has-date .birthdate-check{display:block}
    /* –£–¥–æ–±–Ω—ã–π –≤–≤–æ–¥ –¥–∞—Ç—ã —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞: —Ç—Ä–∏ –≤—ã–ø–∞–¥–∞—é—â–∏—Ö —Å–ø–∏—Å–∫–∞ */
    .date-group{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .date-group select{flex:1 1 auto;min-width:80px;max-width:120px}
    .date-group .date-group-day{min-width:70px}
    .date-group .date-group-month{min-width:110px}
    .date-group .date-group-year{min-width:90px}
    .birthdate-wrap .date-group + input[type="date"]{position:absolute;width:1px;height:1px;clip:rect(0,0,0,0);opacity:0;pointer-events:none;overflow:hidden}
    @media (max-width:480px){
      .date-group{flex-direction:column;align-items:stretch;gap:12px}
      .date-group select{width:100%;max-width:none;min-width:0;min-height:48px;font-size:1rem;-webkit-tap-highlight-color:rgba(var(--primary-rgb),0.15)}
    }
    .time-group{display:flex;flex-direction:row;align-items:center;gap:var(--spacing-sm);flex-wrap:wrap;margin:0}
    .time-group-input{flex:0 0 auto;min-width:0;width:140px;max-width:160px}
    .time-group-checkbox{margin:0;flex:1 1 auto;align-self:center}
    @media (max-width: 420px){
      .time-group{flex-direction:column;align-items:stretch}
      .time-group-input{width:100%;max-width:none}
      .time-group-checkbox{justify-content:flex-start}
    }
    .checkbox{display:flex;align-items:center;gap:10px;margin-top:0}
    .checkbox input{width:22px;height:22px;min-width:22px;accent-color:var(--primary-color);opacity:.65}
    .time-group .checkbox input{opacity:.45}
    .checkbox label{margin-bottom:0;font-weight:500;color:var(--tg-theme-text-color,#fff);font-size:1rem;display:flex;align-items:center;gap:6px;opacity:.88}
    select{appearance:none;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23B8860B' d='M7 10l5 5 5-5z'/%3E%3C/svg%3E") no-repeat right 16px center;background-size:20px;padding-right:48px}
    textarea:not(.request-textarea){min-height:140px;line-height:1.6;resize:vertical}
    textarea.request-textarea{line-height:1.6;}
    .request-label{font-size:var(--fluid-md);text-align:center;margin-bottom:var(--spacing-sm);color:var(--primary-color);font-weight:700;letter-spacing:-0.5px}
    .request-help-row{display:flex;align-items:center;justify-content:space-between;gap:var(--spacing-sm);margin-bottom:var(--spacing-sm)}
    .request-help-row .request-label{margin-bottom:0;text-align:left;font-size:var(--fluid-base);letter-spacing:-0.2px;line-height:1.2;flex:1;min-width:0}
    /* Apple-style quick picker */
    /* Referral card */
    .referral-card{background:linear-gradient(135deg,rgba(var(--primary-rgb),0.1),rgba(var(--primary-rgb),0.05));border:1px solid rgba(var(--primary-rgb),0.3);border-radius:16px;padding:18px;margin:0 0 16px}
    .referral-link-row{display:flex;gap:8px;align-items:center;margin:12px 0;min-width:0;flex-wrap:wrap}
    .referral-link-input{flex:1;min-width:120px;background:rgba(255,255,255,0.07);border:1px solid rgba(255,255,255,0.12);border-radius:10px;color:#fff;font-size:0.78rem;padding:10px 12px;font-family:monospace;outline:none;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}
    .referral-share-btn{padding:10px 14px !important;border-radius:10px !important;background:rgba(var(--primary-rgb),0.12) !important;border:1px solid rgba(var(--primary-rgb),0.45) !important;color:var(--primary-color) !important;font-weight:700 !important;font-size:0.8rem !important;cursor:pointer;font-family:inherit;white-space:nowrap;flex-shrink:0;box-shadow:none !important;animation:none !important;transition:background .2s;letter-spacing:0 !important}
    .referral-share-btn:active{background:rgba(var(--primary-rgb),0.22) !important}
    .referral-stats{display:flex;gap:10px;margin-top:12px}
    .referral-stat-box{flex:1;background:rgba(255,255,255,0.05);border-radius:10px;padding:10px;text-align:center}
    .referral-stat-num{font-size:1.4rem;font-weight:700;color:var(--primary-color)}
    .referral-stat-label{font-size:0.7rem;color:rgba(255,255,255,0.5);margin-top:2px}
    .quick-picker{position:relative;margin-bottom:12px}
    .quick-picker-btn{width:100%;padding:12px 16px;border-radius:12px;background:rgba(var(--primary-rgb),0.1);border:1px solid rgba(var(--primary-rgb),0.35);color:var(--primary-color);font-size:0.95rem;font-weight:600;cursor:pointer;font-family:inherit;display:flex;align-items:center;justify-content:space-between;transition:background .2s}
    .quick-picker-btn:hover{background:rgba(var(--primary-rgb),0.16)}
    .quick-picker-btn .qa{transition:transform .25s ease;font-size:0.75rem;opacity:0.7}
    .quick-picker-btn.open .qa{transform:rotate(180deg)}
    .quick-picker-sheet{position:absolute;left:0;right:0;top:calc(100% + 6px);z-index:200;background:#1a1730;border:1px solid rgba(var(--primary-rgb),0.25);border-radius:16px;box-shadow:0 8px 40px rgba(0,0,0,.8);overflow:hidden;animation:sheetIn .2s ease}
    @keyframes sheetIn{from{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}
    .quick-picker-scroll{max-height:260px;overflow-y:auto;-webkit-overflow-scrolling:touch;padding:6px 0}
    .quick-picker-scroll::-webkit-scrollbar{width:3px}
    .quick-picker-scroll::-webkit-scrollbar-track{background:transparent}
    .quick-picker-scroll::-webkit-scrollbar-thumb{background:rgba(var(--primary-rgb),0.3);border-radius:2px}
    .quick-cat{display:none}
    /* –ù–æ–≤—ã–π –±–ª–æ–∫ –≤–≤–æ–¥–∞ –∑–∞–ø—Ä–æ—Å–∞ */
    .request-input-box{border:1px solid rgba(255,255,255,0.1);border-radius:14px;overflow:visible;background:rgba(255,255,255,0.04);position:relative;}
    .request-textarea{width:100%;background:transparent;border:none;border-radius:14px 14px 0 0;padding:14px 14px 10px;resize:none;min-height:90px;font-size:16px;color:#fff;font-family:inherit;box-sizing:border-box;outline:none;}
    .request-textarea::placeholder{color:rgba(255,255,255,0.55);opacity:1;}
    .request-textarea:focus{outline:none;box-shadow:none;border:none;}
    .request-quick-bar{border-top:1px solid rgba(255,255,255,0.07);position:relative;}
    .request-quick-toggle{width:100%;background:none;border:none;color:rgba(var(--primary-rgb),0.55);font-size:0.72rem;font-weight:600;font-family:inherit;padding:8px 14px;cursor:pointer;display:flex;align-items:center;gap:6px;letter-spacing:0.03em;transition:color .2s;min-height:unset;box-shadow:none;animation:none;margin:0;border-radius:0 0 14px 14px;justify-content:space-between;}
    /* Soul Chat page */
    .sc-msg-user{display:flex;justify-content:flex-end;margin-bottom:12px;padding:0 4px;}
    .sc-msg-soul{display:flex;justify-content:flex-start;margin-bottom:12px;padding:0 4px;}
    .sc-bubble-user{max-width:80%;padding:12px 16px;border-radius:18px 18px 4px 18px;background:rgba(var(--primary-rgb),0.14);border:1px solid rgba(var(--primary-rgb),0.28);font-size:0.9rem;line-height:1.6;color:#fff;white-space:pre-wrap;overflow-wrap:break-word;word-break:break-word}
    .sc-bubble-soul{max-width:88%;padding:14px 18px;border-radius:18px 18px 18px 4px;background:linear-gradient(135deg,rgba(var(--primary-rgb),0.08),rgba(var(--secondary-rgb),0.04));border:1px solid rgba(255,255,255,0.12);border-left:3px solid rgba(var(--primary-rgb),0.4);font-size:0.92rem;line-height:1.72;color:rgba(255,255,255,0.95);white-space:pre-wrap;overflow-wrap:break-word;word-break:break-word;box-shadow:0 1px 3px rgba(0,0,0,0.06)}
    .sc-send-bar{border-top:1px solid rgba(255,255,255,0.06);padding:10px 12px;display:flex;justify-content:flex-end;align-items:center;gap:8px;}
    .sc-char-hint{font-size:0.7rem;color:rgba(255,255,255,0.25);flex:1;}
    @keyframes pulse{0%,100%{opacity:1;transform:scale(1);}50%{opacity:.5;transform:scale(0.88);}}
    @keyframes sc-spin{to{transform:rotate(360deg);}}
    .request-quick-toggle:hover{color:rgba(var(--primary-rgb),0.85);}
    .request-quick-toggle.open{color:rgba(var(--primary-rgb),0.9);}
    .request-quick-dropdown{position:absolute;left:0;right:0;bottom:calc(100% + 4px);z-index:200;background:#1c1930;border:1px solid rgba(var(--primary-rgb),0.2);border-radius:14px;box-shadow:0 -8px 32px rgba(0,0,0,.75);max-height:240px;overflow-y:auto;}
    .request-quick-dropdown::-webkit-scrollbar{width:3px}
    .request-quick-dropdown::-webkit-scrollbar-thumb{background:rgba(var(--primary-rgb),0.25);border-radius:2px}
    .request-quick-dropdown .quick-item{display:block;width:100%;padding:10px 14px;background:none;border:none;color:rgba(255,255,255,0.8);font-size:0.82rem;font-weight:500;cursor:pointer;font-family:inherit;text-align:left;border-bottom:1px solid rgba(255,255,255,0.04);transition:background .15s;min-height:unset;box-shadow:none;animation:none;margin:0;border-radius:0;}
    .request-quick-dropdown .quick-item:last-child{border-bottom:none;border-radius:0 0 14px 14px;}
    .request-quick-dropdown .quick-item:first-child{border-radius:14px 14px 0 0;}
    .request-quick-dropdown .quick-item:hover,.request-quick-dropdown .quick-item:active{background:rgba(var(--primary-rgb),0.09);color:#fff;}
    .quick-item{display:block;width:100%;padding:11px 16px;background:none;border:none;color:rgba(255,255,255,0.85);font-size:0.9rem;font-weight:500;cursor:pointer;font-family:inherit;text-align:left;transition:background .15s;border-bottom:1px solid rgba(255,255,255,0.04)}
    .quick-item:last-child{border-bottom:none}
    .quick-item:hover,.quick-item:active{background:rgba(var(--primary-rgb),0.1);color:var(--primary-color)}
    /* –°—Ç–∞—Ä—ã–µ —Å—Ç–∏–ª–∏ (–æ—Å—Ç–∞–≤–ª—è–µ–º –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏) */
    .quick-dropdown{position:relative;flex:1 1 auto;min-width:0;margin-bottom:var(--spacing-sm);min-width:120px}
    @media (max-width: 380px){
      .request-help-row{flex-wrap:wrap}
      .request-help-row .request-label{flex:1 1 100%;margin-bottom:var(--spacing-xs)}
      .quick-dropdown{flex:1 1 100%}
    }
    .request-help-toggle{width:100%;min-height:auto;margin:0;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--radius-md);background:linear-gradient(135deg,rgba(var(--primary-rgb),0.2),rgba(var(--primary-rgb),0.12));color:var(--primary-color);border:1px solid rgba(var(--primary-rgb),0.5);box-shadow:none;text-transform:none;letter-spacing:0;font-size:var(--fluid-sm);font-weight:600;flex:0 0 auto;white-space:nowrap;display:flex;align-items:center;justify-content:space-between;cursor:pointer;transition:all .2s}
    .request-help-toggle::after{content:'';width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:6px solid currentColor;margin-left:6px;opacity:.8;transition:transform .2s}
    .request-help-toggle.open::after{transform:rotate(180deg)}
    .request-help-toggle:hover{background:rgba(var(--primary-rgb),.25)}
    .request-examples{display:none;position:absolute;top:100%;left:0;right:0;margin-top:4px;padding:var(--spacing-md);background:rgba(255,255,255,0.08);backdrop-filter:blur(16px);border:1px solid rgba(255,255,255,0.18);border-radius:var(--radius-md);box-shadow:0 8px 24px rgba(0,0,0,.5);max-height:min(45vh,220px);overflow-y:auto;z-index:100;-webkit-overflow-scrolling:touch}
    .request-examples.open{display:block}
    body.theme-light .request-examples{background:rgba(255,255,255,0.95);border-color:rgba(var(--primary-rgb),0.4);box-shadow:0 8px 24px rgba(0,0,0,0.12)}
    .quick-list{display:flex;flex-direction:column;gap:0;width:100%}
    .quick-list .example-btn{width:100% !important;padding:14px 18px !important;font-size:1.05rem !important;line-height:1.4 !important;min-height:auto !important;border-radius:0 !important;white-space:normal !important;overflow:visible !important;text-overflow:clip !important;box-sizing:border-box;background:transparent !important;border:none !important;border-bottom:1px solid rgba(255,255,255,0.1) !important;color:var(--tg-theme-text-color,#fff) !important;box-shadow:none !important;font-weight:500 !important;text-align:left !important;transition:all .2s !important}
    .quick-list .example-btn:last-child{border-bottom:none !important}
    .quick-list .example-btn:hover{background:rgba(var(--primary-rgb),.2) !important;color:var(--primary-light) !important;transform:none !important}
    body.theme-light .quick-list .example-btn{color:#1f2937 !important;border-bottom-color:rgba(31,41,55,0.1) !important}
    body.theme-light .quick-list .example-btn:hover{background:rgba(var(--primary-rgb),.15) !important;color:var(--primary-color) !important}
    .example-btn{width:auto;min-width:0;max-width:none;flex-shrink:0;white-space:normal;text-transform:none;letter-spacing:0;font-size:.95rem;font-weight:600;padding:12px 16px;margin:0;min-height:auto;border-radius:12px;box-shadow:none;word-wrap:break-word;word-break:break-word;overflow:visible}
    .example-btn::after{display:none}
    .example-btn:hover{transform:translateY(-2px);box-shadow:0 6px 18px rgba(var(--primary-rgb),0.45)}
    button{background:linear-gradient(135deg, var(--primary-color), var(--secondary-color), var(--primary-color));background-size:300% 300%;animation:gradientShift 4s ease infinite;color:var(--tg-theme-button-text-color);border:none;padding:13px 24px;font-size:1rem;border-radius:14px;width:100%;font-weight:600;cursor:pointer;transition:all .25s ease;box-shadow:0 8px 22px rgba(var(--primary-rgb),0.4);margin-top:8px;letter-spacing:0;text-transform:none;min-height:48px;position:relative;overflow:hidden}
    button::after{display:none}
    button:hover{transform:translateY(-1px);box-shadow:0 10px 28px rgba(var(--primary-rgb),0.5)}
    button:active{transform:translateY(1px);box-shadow:0 4px 12px rgba(var(--primary-rgb),0.3)}
    button:disabled{background:rgba(255,255,255,0.15);cursor:not-allowed;transform:none;box-shadow:none;opacity:.6;animation:none}
    button.secondary{background:rgba(255,255,255,0.07);color:rgba(255,255,255,0.75);border:1px solid rgba(255,255,255,0.12);box-shadow:none;text-transform:none;letter-spacing:0;font-weight:500;min-height:42px;animation:none;font-size:0.92rem}
    button.secondary:hover{background:rgba(255,255,255,0.12);color:rgba(255,255,255,0.9)}
    button:focus-visible,.home-nav-link:focus-visible,[role="button"]:focus-visible,a:focus-visible,.lang-switcher-btn:focus-visible,#profileIconBtn:focus-visible,.profile-back-btn:focus-visible,.stories-close:focus-visible,.mode-info:focus-visible,.ppc-details-btn:focus-visible{outline:2px solid var(--tg-theme-button-color);outline-offset:2px}
    .btn-group{display:flex;gap:15px;margin-top:25px}
    .btn-group button{flex:1}
    .price-tag{background:linear-gradient(90deg,var(--primary-color),var(--secondary-color));color:white;padding:10px 18px;border-radius:12px;font-size:1.3rem;font-weight:700;text-align:center;margin:16px 0;box-shadow:0 4px 15px rgba(var(--primary-rgb),.3);letter-spacing:0.5px}
    .payment-info{background:rgba(var(--primary-rgb),.05);border-left:3px solid rgba(var(--primary-rgb),0.5);padding:14px;border-radius:0 12px 12px 0;margin:12px 0;font-size:.92rem;line-height:1.6}
    .payment-info::before{content:"üíé ";font-size:1.3rem}
    .success-icon{font-size:5rem;text-align:center;margin:20px 0;background:linear-gradient(90deg,var(--primary-color),var(--secondary-color));-webkit-background-clip:text;background-clip:text;color:transparent}
    .keys-composition{display:flex;align-items:center;justify-content:center;gap:20px;margin:25px 0;flex-wrap:wrap}
    .keys-composition svg{filter:drop-shadow(0 4px 12px rgba(var(--primary-rgb),.2));transition:transform .3s ease}
    .keys-composition .key-music{transform:rotate(-10deg);width:56px;height:80px}
    .keys-composition .key-door{transform:rotate(8deg);width:52px;height:80px}
    .keys-composition .key-music:hover,.keys-composition .key-door:hover{transform:rotate(0) scale(1.05)}
    .keys-composition-small{display:flex;align-items:center;justify-content:center;gap:12px;margin:15px 0}
    .keys-composition-small .key-music{width:36px;height:50px;transform:rotate(-8deg);opacity:.9}
    .keys-composition-small .key-door{width:34px;height:50px;transform:rotate(6deg);opacity:.9}
    .app-logo{display:block;margin:0 auto;max-width:140px;width:100%;height:auto;border-radius:0;box-shadow:none;opacity:0.94}
    /* –ì–ª–∞–≤–Ω–∞—è ‚Äî –º–∏–Ω–∏–º–∞–ª–∏–∑–º: –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ —Ü–µ–Ω—Ç—Ä—É, –∑–∞–±–æ—Ç–∞ –æ –≤–∑–≥–ª—è–¥–µ */
    #homeHero{position:relative;text-align:center;background:linear-gradient(180deg,rgba(1,6,26,0.4) 0%,transparent 100%);flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:max(56px,calc(env(safe-area-inset-top)+50px)) var(--spacing-lg) var(--spacing-xl);gap:0;box-sizing:border-box;min-height:0}
    #homeHero .home-tagline{font-size:0.72rem;font-weight:400;letter-spacing:0.14em;color:rgba(var(--primary-rgb),0.45);margin-top:var(--spacing-md);text-transform:uppercase}
    #homeHero .home-greeting{font-size:0.95rem;color:rgba(255,255,255,0.6);line-height:1.6;max-width:240px;margin:var(--spacing-lg) auto var(--spacing-xl);letter-spacing:0.01em}
    #homeHero #startBtn{margin-top:0;width:auto;max-width:280px;padding:14px 36px;font-weight:600;letter-spacing:0.02em;border-radius:50px;align-self:center}
    /* –ì–ª–∞–≤–Ω–∞—è: —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∏ (—è–∑—ã–∫ —Å–ª–µ–≤–∞, –ø—Ä–æ—Ñ–∏–ª—å —Å–ø—Ä–∞–≤–∞), –±–µ–∑ –ø–∞–Ω–µ–ª–∏ */
    #homeTopBar{box-sizing:border-box;flex-shrink:0}
    #homeTopBar .home-topbar-slot{display:flex;align-items:center;justify-content:center;box-sizing:border-box}
    #homeTopBar .lang-switcher-compact{position:relative;display:flex;align-items:center;justify-content:center;box-sizing:border-box}
    /* –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–Ω–æ–ø–æ–∫ topbar: 44√ó44, —à—Ä–∏—Ñ—Ç 9px Comfortaa, SVG 18√ó18 ‚Äî –ø–µ—Ä–µ–±–∏–≤–∞—é—Ç –≤—Å–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∏ –º–µ–¥–∏–∞–ø—Ä–∞–≤–∏–ª–∞ */
    #homeTopBar .home-topbar-btn,#homeTopBar #profileIconBtn,#homeTopBar .lang-switcher-btn{box-sizing:border-box !important;width:40px !important;height:40px !important;min-width:40px !important;min-height:40px !important;max-width:40px !important;max-height:40px !important;margin:0 !important;padding:0 !important;border:1.5px solid rgba(var(--primary-rgb),0.4) !important;border-radius:50% !important;display:flex !important;align-items:center !important;justify-content:center !important;flex-shrink:0 !important;line-height:0 !important;font-size:9px !important;font-family:'Comfortaa',sans-serif !important;font-weight:600 !important;color:rgba(var(--primary-rgb),0.9) !important;overflow:hidden !important;vertical-align:middle !important;background:linear-gradient(135deg,rgba(var(--primary-rgb),0.18),rgba(var(--secondary-rgb),0.14)) !important;cursor:pointer !important;box-shadow:0 2px 12px rgba(0,0,0,0.3) !important;position:relative !important;top:auto !important;right:auto !important;bottom:auto !important;left:auto;aspect-ratio:1/1 !important}
    #homeTopBar .home-topbar-btn svg,#homeTopBar #profileIconBtn svg{display:block !important;vertical-align:middle !important;width:18px !important;height:18px !important;min-width:18px !important;min-height:18px !important;flex-shrink:0 !important;fill:rgba(var(--primary-rgb),0.9) !important}
    #homeTopBar .home-topbar-btn span,#homeTopBar .lang-switcher-btn span{line-height:0 !important;vertical-align:middle !important;font-size:9px !important;font-family:'Comfortaa',sans-serif !important;font-weight:600 !important;color:rgba(var(--primary-rgb),0.9) !important}
    #homeTopBar .home-topbar-btn:active,#homeTopBar #profileIconBtn:active{background:rgba(var(--primary-rgb),0.28) !important}
    #homeTopBar .header-menu-btn,#homeTopBar .btn-info{width:40px !important;height:40px !important;min-width:40px !important;min-height:40px !important;border:1px solid rgba(0,217,255,0.7) !important;box-shadow:0 0 6px rgba(0,217,255,0.5),0 0 12px rgba(0,217,255,0.3),0 0 20px rgba(0,217,255,0.1) !important;color:rgba(255,255,255,0.9) !important;background:rgba(0,217,255,0.1) !important}
    #homeTopBar .header-menu-btn:hover,#homeTopBar .btn-info:hover{box-shadow:0 0 8px rgba(0,217,255,0.6),0 0 16px rgba(0,217,255,0.4),0 0 24px rgba(0,217,255,0.2) !important}
    #homeTopBar .header-menu-btn svg,#homeTopBar .btn-info svg{fill:var(--primary-light) !important;stroke:var(--primary-light) !important}
    .lang-switcher-compact{position:relative}
    /* –ù–∏–∂–Ω—è—è –∑–æ–Ω–∞: —Ç—Ä–∏ —Å—Å—ã–ª–∫–∏ —Å—Ç—Ä–æ–≥–æ –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –±–µ–∑ –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å–ª–æ–≤–∞ */
    .home-lower{display:flex;flex-direction:column;align-items:center;text-align:center}
    .home-nav{display:flex !important;flex-wrap:nowrap !important;justify-content:space-between !important;align-items:center !important;gap:4px !important;width:100%;max-width:100%;padding:8px 6px !important;margin-top:var(--spacing-lg) !important;box-sizing:border-box !important}
    .home-nav .home-nav-link{flex:1 1 0 !important;min-width:0 !important;max-width:none !important;text-align:center !important;white-space:nowrap !important;word-break:normal !important;overflow:visible !important;font-size:0.7rem !important;line-height:1.2 !important;padding:6px 2px !important;background:none !important;border:none !important;color:rgba(var(--primary-rgb),0.65) !important;cursor:pointer !important;font-family:inherit !important;font-weight:600 !important;box-shadow:none !important}
    .app-logo.success{max-width:180px;margin-bottom:15px}
    /* ‚îÄ‚îÄ –°–¢–û–†–ò–°-–û–ù–ë–û–†–î–ò–ù–ì ‚îÄ‚îÄ */
    #onboardingPage{
      position:fixed;inset:0;z-index:10001;
      background:#0A0A1A url('assets/bg-yupsoul.png') center/cover no-repeat;
      overflow:hidden;user-select:none;
      display:flex;flex-direction:column;
      padding-top:max(28px,calc(env(safe-area-inset-top)+14px));
      padding-bottom:max(24px,calc(env(safe-area-inset-bottom)+12px));
    }
    #onboardingPage::before{content:"";position:fixed;inset:0;background:linear-gradient(180deg,rgba(4,4,20,.5) 0%,rgba(8,10,35,.75) 100%);z-index:0;pointer-events:none}
    /* –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã */
    .stories-bars{position:relative;display:flex;gap:5px;z-index:10;padding:0 44px 0 16px;flex-shrink:0;margin-bottom:0}
    .story-bar{flex:1;height:3px;border-radius:2px;background:rgba(255,255,255,0.25);overflow:hidden}
    .story-bar-fill{height:100%;width:0;background:rgba(255,255,255,0.9);border-radius:2px}
    .story-bar-fill.done{width:100%;transition:none}
    .story-bar-fill.playing{width:100%;transition:width var(--story-dur,4s) linear}
    /* –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç—å */
    .stories-close{position:absolute;top:max(24px,calc(env(safe-area-inset-top)+10px));right:14px;z-index:11;background:rgba(15,12,40,0.72);border:1px solid rgba(255,255,255,0.15);color:rgba(255,255,255,0.8);font-size:0.9rem;min-width:44px;min-height:44px;width:44px;height:44px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .2s;padding:0;line-height:1;isolation:isolate;flex-shrink:0}
    .stories-close:hover{background:rgba(15,12,40,0.9)}
    /* –ó–æ–Ω—ã —Ç–∞–ø–∞ */
    .stories-tap-prev,.stories-tap-next{position:absolute;top:0;bottom:0;width:40%;z-index:5;cursor:pointer}
    .stories-tap-prev{left:0}
    .stories-tap-next{right:0}
    /* –ë—Ä–µ–Ω–¥-–±–ª–æ–∫ –ø—Ä–µ–≤—å—é ‚Äî –≤–æ–∑–¥—É—Ö, –±–µ–∑ –¥–∞–≤–ª–µ–Ω–∏—è */
    .ob-brand{position:relative;z-index:6;text-align:center;padding:clamp(56px,11vh,96px) 28px 0;pointer-events:none;flex-shrink:0}
    .ob-brand-logo{width:72px;height:72px;margin:0 auto 10px;display:block;opacity:0.95;filter:drop-shadow(0 3px 12px rgba(var(--primary-rgb),0.2))}
    .ob-brand-divider{width:28px;height:1px;background:linear-gradient(90deg,transparent,rgba(var(--primary-rgb),0.35),transparent);margin:10px auto}
    .ob-brand-tag{font-size:0.72rem;color:rgba(var(--primary-rgb),0.45);line-height:1.6;max-width:220px;margin:0 auto;letter-spacing:0.03em}
    /* –°–ª–∞–π–¥—ã ‚Äî flex-grow, –∫–æ–Ω—Ç–µ–Ω—Ç —É –≤–µ—Ä—Ö–Ω–µ–≥–æ –∫—Ä–∞—è —Å–≤–æ–µ–π –∑–æ–Ω—ã */
    .onboarding-slide{position:relative;z-index:1;display:none;flex-direction:column;align-items:center;justify-content:flex-start;flex:1;padding:clamp(24px,7vh,60px) 36px clamp(16px,4vh,32px);text-align:center}
    .onboarding-slide.active{display:flex}
    /* –ê–∫—Ü–µ–Ω—Ç–Ω—ã–π –¥–µ–∫–æ—Ä –≤–º–µ—Å—Ç–æ –∏–∫–æ–Ω–∫–∏ */
    .ob-slide-accent{width:32px;height:2px;background:linear-gradient(90deg,transparent,rgba(var(--primary-rgb),0.7),transparent);border-radius:2px;margin:0 auto 28px;animation:accentFade .5s ease-out}
    .ob-icon-wrap{width:80px;height:80px;margin:0 auto 24px;flex-shrink:0;filter:drop-shadow(0 4px 18px rgba(var(--primary-rgb),0.35));}
    .ob-icon-wrap img{width:100%;height:100%;object-fit:contain;display:block;}
    .ob-icon-sm{width:36px;height:36px;flex-shrink:0;filter:drop-shadow(0 2px 8px rgba(var(--primary-rgb),0.3));}
    .ob-icon-sm img{width:100%;height:100%;object-fit:contain;display:block;}
    @keyframes accentFade{from{opacity:0;transform:scaleX(0.4)}to{opacity:1;transform:scaleX(1)}}
    .onboarding-title{font-size:1.25rem !important;font-weight:600 !important;color:rgba(255,248,225,0.96);margin:0 0 16px 0;line-height:1.35;max-width:260px;letter-spacing:-0.01em}
    .onboarding-text{font-size:0.85rem !important;line-height:1.7 !important;color:rgba(255,255,255,0.5);margin:0 0 28px 0;max-width:240px}
    .onboarding-btn{padding:14px 32px;border-radius:var(--radius-lg);background:linear-gradient(135deg,var(--primary-color),#c9922e);border:none;color:#0a0810;font-size:0.9rem !important;font-weight:700;cursor:pointer;font-family:inherit;box-shadow:0 4px 20px rgba(var(--primary-rgb),0.3);transition:transform .2s,box-shadow .2s;min-width:180px;width:auto;margin-top:0;min-height:unset;animation:none;letter-spacing:0.03em;text-transform:none}
    .onboarding-btn:hover{transform:translateY(-1px);box-shadow:0 6px 24px rgba(var(--primary-rgb),0.4)}
    .onboarding-btn:active{transform:translateY(1px)}
    .onboarding-dots{display:none}
    .onboarding-progress{display:none}
    .onboarding-progress-bar{display:none}
    .onboarding-skip{display:none}
    .success-title{font-size:2.2rem;font-weight:700;text-align:center;margin:20px 0;background:linear-gradient(90deg,var(--primary-color),var(--secondary-color));-webkit-background-clip:text;background-clip:text;color:transparent}
    .success-text{font-size:1.15rem;line-height:1.7;margin:20px 0;text-align:center;padding:0 10px}
    .loading{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px 40px;text-align:center;min-height:70vh}
    .spinner{width:60px;height:60px;border:4px solid rgba(var(--primary-rgb),.15);border-top-color:var(--primary-color);border-radius:50%;margin:0 auto 25px;animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    .loading-text{font-size:1.5rem;color:var(--primary-color);font-weight:600;margin-bottom:15px}
    .song-preview{background:rgba(var(--primary-rgb),0.06);border-radius:16px;padding:20px;margin:20px 0;text-align:left;border:1px solid rgba(var(--primary-rgb),0.25)}
    .song-preview h3{color:var(--primary-color);font-size:1.1rem;margin-bottom:8px;text-align:center}
    .song-preview p{font-size:0.9rem;line-height:1.65;color:rgba(255,255,255,0.6)}
    footer{text-align:center;padding:20px 0 max(16px,env(safe-area-inset-bottom));color:rgba(255,255,255,0.22);font-size:var(--fluid-xs);margin-top:auto;letter-spacing:0.02em}
    .footer-help{display:inline-flex !important;align-items:center;justify-content:center;color:rgba(var(--primary-rgb),0.4) !important;font-size:.78rem !important;cursor:pointer;border:none !important;background:none !important;font-family:inherit;padding:8px 16px !important;margin:0 !important;border-radius:20px !important;box-shadow:none !important;animation:none !important;min-height:unset !important;width:auto !important;font-weight:400 !important;letter-spacing:0.04em !important;transition:color .2s,background .2s}
    .footer-help:hover,.footer-help:active{color:rgba(var(--primary-rgb),0.75) !important;background:rgba(var(--primary-rgb),0.06) !important}
    /* –ö–∞—Ä—Ç–æ—á–∫–∏ –≥–µ—Ä–æ–µ–≤ */
    .hero-card{background:rgba(255,255,255,0.04);border:1px solid rgba(var(--primary-rgb),0.12);border-radius:16px;padding:16px;margin-bottom:12px;transition:border-color .2s}
    .hero-card.expanded{border-color:rgba(var(--primary-rgb),0.28)}
    .hero-card-head{display:flex;align-items:center;gap:12px;cursor:pointer}
    .hero-avatar{width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,rgba(var(--primary-rgb),0.3),rgba(var(--primary-rgb),0.08));display:flex;align-items:center;justify-content:center;font-size:1.15rem;font-weight:700;color:var(--primary-color);flex-shrink:0;border:1px solid rgba(var(--primary-rgb),0.22)}
    .hero-card-name{font-size:1rem;font-weight:600;color:#fff;line-height:1.25}
    .hero-card-meta{font-size:0.77rem;color:rgba(255,255,255,0.4);margin-top:3px;line-height:1.4}
    .hero-card-chevron{margin-left:auto;font-size:0.72rem;color:rgba(255,255,255,0.3);transition:transform .25s;flex-shrink:0}
    .hero-card.expanded .hero-card-chevron{transform:rotate(180deg)}
    .hero-card-body{display:none;margin-top:14px;padding-top:14px;border-top:1px solid rgba(255,255,255,0.07)}
    .hero-card.expanded .hero-card-body{display:block}
    .hca-row{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px}
    .hca-btn{padding:8px 13px;border-radius:10px;border:1px solid rgba(var(--primary-rgb),0.28);background:rgba(var(--primary-rgb),0.07);color:var(--primary-color);font-size:0.82rem;font-weight:600;cursor:pointer;font-family:inherit;white-space:nowrap;min-height:unset;width:auto;box-shadow:none;animation:none;margin:0;transition:background .2s;letter-spacing:0;line-height:1.3}
    .hca-btn:active{background:rgba(var(--primary-rgb),0.18)}
    .hca-btn.hca-danger{border-color:rgba(239,68,68,0.28);color:rgba(239,68,68,0.7);background:rgba(239,68,68,0.06)}
    .hca-btn.hca-secondary{border-color:rgba(255,255,255,0.15);color:rgba(255,255,255,0.55);background:rgba(255,255,255,0.04)}
    /* –ò—Å—Ç–æ—Ä–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–π –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –≥–µ—Ä–æ—è */
    .hero-hist-section{margin-top:14px}
    .hero-hist-loading{font-size:0.82rem;color:rgba(255,255,255,0.35);text-align:center;padding:12px 0}
    .hero-hist-empty{font-size:0.82rem;color:rgba(255,255,255,0.3);text-align:center;padding:12px 0}
    .hero-hist-item{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.07);border-radius:12px;padding:12px 14px;margin-bottom:8px}
    .hero-hist-title{font-size:0.88rem;font-weight:600;color:rgba(255,255,255,0.88);margin-bottom:4px}
    .hero-hist-meta{font-size:0.74rem;color:rgba(255,255,255,0.35);margin-bottom:10px}
    .hero-hist-block-label{font-size:0.74rem;font-weight:600;color:rgba(var(--primary-rgb),0.6);text-transform:uppercase;letter-spacing:0.06em;margin-bottom:5px}
    .hero-hist-text{font-size:0.8rem;color:rgba(255,255,255,0.55);line-height:1.55;white-space:pre-wrap;max-height:160px;overflow-y:auto;margin-bottom:10px}
    .hero-hist-audio{display:inline-flex;align-items:center;gap:6px;font-size:0.8rem;color:var(--primary-color);text-decoration:none;background:rgba(var(--primary-rgb),0.08);border:1px solid rgba(var(--primary-rgb),0.25);border-radius:8px;padding:6px 12px;margin-top:4px}
    .hero-hist-toggle{font-size:0.78rem;color:rgba(255,255,255,0.35);background:none;border:none;cursor:pointer;font-family:inherit;padding:0;margin-bottom:8px;min-height:unset;width:auto;box-shadow:none;animation:none;letter-spacing:0}
    .hero-style-badge{display:inline-block;font-size:0.72rem;background:rgba(var(--primary-rgb),0.1);border:1px solid rgba(var(--primary-rgb),0.22);color:rgba(var(--primary-rgb),0.75);border-radius:6px;padding:2px 8px;margin-top:5px}
    /* –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–º–æ—â–∏ */
    #helpPage .help-header{padding:max(20px,calc(env(safe-area-inset-top)+12px)) 20px 16px 20px}
    #loadingPage{align-items:center;justify-content:center}
    #successPage,.page#paymentThanksPage{flex-direction:column}
    .ppc-feature{display:flex;align-items:center;gap:4px}
    .ppc-info{width:14px;height:14px;border-radius:50%;border:1px solid rgba(var(--primary-rgb),0.35);color:rgba(var(--primary-rgb),0.6);font-size:0.6rem;font-weight:700;display:inline-flex;align-items:center;justify-content:center;flex-shrink:0;cursor:pointer;line-height:1;font-style:normal;user-select:none;margin-left:2px}
    .ppc-info:active{color:var(--primary-color);border-color:var(--primary-color)}
    #helpPage .help-back-row{display:flex;align-items:center;margin-bottom:12px}
    #helpPage .help-back-btn{background:none;border:1px solid #FF0055;border-radius:50%;width:44px;height:44px;color:#fff;font-size:1.2rem;cursor:pointer;padding:0;line-height:1;min-height:unset;box-shadow:0 0 8px #FF0055;animation:none;margin:0;flex-shrink:0;display:inline-flex;align-items:center;justify-content:center}
    #helpPage .help-back-btn:hover{box-shadow:0 0 12px #FF0055}
    #helpPage .help-title-wrap{text-align:center;padding:0 40px}
    #helpPage .help-title{font-size:1.35rem;font-weight:700;color:var(--primary-color);margin-bottom:4px}
    #helpPage .help-subtitle{font-size:0.85rem;color:rgba(255,255,255,0.45);line-height:1.5}
    .help-section{background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.07);border-radius:14px;margin:0 0 12px;overflow:hidden}
    .help-section-title{width:100%;background:none;border:none;color:rgba(255,255,255,0.85);font-size:0.95rem;font-weight:600;padding:15px 16px;text-align:left;cursor:pointer;font-family:inherit;display:flex;justify-content:space-between;align-items:center;gap:8px;line-height:1.35}
    .help-section-title .hst-icon{font-size:1.1rem;flex-shrink:0}
    .help-section-title .hst-chevron{font-size:0.7rem;opacity:0.45;transition:transform .25s;flex-shrink:0}
    .help-section.open .hst-chevron{transform:rotate(180deg)}
    .help-section-body{display:none;padding:0 16px 16px;font-size:0.87rem;color:rgba(255,255,255,0.6);line-height:1.65}
    .help-section.open .help-section-body{display:block}
    .help-section-body p{margin:0 0 8px}
    .help-section-body p:last-child{margin:0}
    .help-section-body ul{margin:6px 0 8px;padding-left:18px}
    .help-section-body ul li{margin-bottom:4px}
    .help-section-body strong{color:rgba(255,255,255,0.82)}
    .help-support-btn{width:100%;padding:13px 24px;border-radius:14px;background:linear-gradient(135deg,rgba(var(--primary-rgb),0.18),rgba(var(--primary-rgb),0.08)) !important;border:1px solid rgba(var(--primary-rgb),0.35);color:var(--primary-color) !important;font-size:1rem;font-weight:700;cursor:pointer;font-family:inherit;margin-top:16px;transition:background .2s;animation:none !important;box-shadow:none !important;min-height:48px}
    .help-support-btn:hover{background:rgba(var(--primary-rgb),0.22) !important}
    .help-support-btn:active{background:rgba(var(--primary-rgb),0.28) !important}
    .birthplace-wrap{position:relative}
    .birthplace-suggestions{display:none;position:absolute;left:0;right:0;top:100%;margin-top:4px;background:var(--tg-theme-bg-color,rgba(15,12,40,0.98));border:2px solid rgba(var(--primary-rgb),0.5);border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,.3);max-height:280px;overflow-y:auto;z-index:50;list-style:none;padding:6px 0}
    .birthplace-suggestions li{padding:14px 18px;cursor:pointer;font-size:1.05rem;color:var(--tg-theme-text-color,#fff);border-bottom:1px solid rgba(255,255,255,0.1);transition:all .2s;font-weight:400}
    .birthplace-suggestions li:last-child{border-bottom:none}
    .birthplace-suggestions li:hover,.birthplace-suggestions li.selected{background:rgba(var(--primary-rgb),.2);color:var(--primary-light)}
    .birthplace-suggestions .place-type{font-size:.9rem;color:rgba(255,255,255,0.6);margin-top:3px;font-weight:400}
    #birthplace,#birthplace2,#heroBirthplace{padding-right:3rem;text-overflow:ellipsis;min-width:0;font-size:1.05rem;font-weight:500}
    .birthplace-check{position:absolute;right:16px;top:50%;transform:translateY(-50%);pointer-events:none;color:#4ade80;font-size:1.15rem;display:none;font-weight:700;flex-shrink:0}
    .birthplace-wrap.has-place .birthplace-check{display:block}
    .birthplace-hint{margin-top:8px;font-size:.95rem;color:rgba(var(--primary-rgb),0.9);line-height:1.6;font-weight:500;background:rgba(var(--primary-rgb),0.08);padding:10px 14px;border-radius:10px;border:1px solid rgba(var(--primary-rgb),0.25)}
    @media (max-width: 600px) {
      .birthplace-suggestions{max-height:240px;border-width:2.5px}
      .birthplace-suggestions li{padding:16px 20px;font-size:1.2rem;font-weight:400;letter-spacing:0}
      .birthplace-suggestions .place-type{font-size:0.95rem;font-weight:400}
      #birthplace,#birthplace2,#heroBirthplace{font-size:1rem;padding:12px 48px 12px 16px;font-weight:500;letter-spacing:0}
      .birthplace-hint{font-size:0.9rem;padding:10px 14px}
      .field input:not([type="checkbox"]):not([type="radio"]){
        font-size:0.95rem;
        padding:12px 14px;
      }
      .field select{
        font-size:0.95rem;
        padding:12px 14px;
      }
    }
    
    #formPage header h1{font-size:clamp(1.1rem,4vw,1.35rem)}
    #formPage header .subtitle{font-size:0.72rem}
    #transitFormWrap { overflow: hidden; transition: max-height .38s cubic-bezier(.4,0,.2,1), opacity .3s ease; max-height: 0; opacity: 0; }
    #secondPersonForm{padding-top:8px;}
    
    /* –ü–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–µ–≤—å—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ */
    .preview-nav{background:white;border-radius:16px;padding:12px;margin-bottom:25px;box-shadow:0 4px 20px rgba(var(--primary-rgb),.12);text-align:center;border:1px solid #e5e7eb;display:none}
    .preview-nav.show{display:block}
    .preview-nav-buttons{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-top:10px}
    .preview-nav button{background:rgba(var(--primary-rgb),0.1);color:var(--primary-color);border:1px solid rgba(var(--primary-rgb),0.35);padding:6px 14px;margin:0 4px;border-radius:20px;cursor:pointer;font-weight:600;transition:all .2s;font-size:.9rem;min-width:90px;min-height:auto;animation:none}
    .preview-nav button:hover{background:rgba(var(--primary-rgb),0.2);color:var(--primary-color);transform:translateY(-1px)}
    .preview-nav button.active{background:linear-gradient(90deg,var(--primary-color),var(--secondary-color));color:white;border-color:transparent;box-shadow:0 4px 15px rgba(var(--primary-rgb),.3)}
    
    @media (max-width:480px){.container{padding:0 var(--spacing-sm)}h1{font-size:var(--fluid-2xl)}.subtitle{font-size:var(--fluid-base)}.tagline{font-size:var(--fluid-md)}.section{padding:var(--spacing-lg) var(--spacing-md)}.btn-group{flex-direction:column}.btn-group button{width:100%}button{font-size:1rem;padding:13px 20px;min-height:48px}.price-tag{font-size:1.25rem;padding:10px 15px}.success-icon{font-size:4rem}.success-title{font-size:1.9rem}.success-text{font-size:1.05rem}.preview-nav-buttons{flex-direction:column;align-items:center}.preview-nav button{width:100%;max-width:200px}}
    @media (max-width:360px){.container{padding:0 var(--spacing-xs)}.section{padding:var(--spacing-md) var(--spacing-sm)}.content-wrapper{padding:12px}.profile-header{padding:max(16px,calc(env(safe-area-inset-top)+10px)) 14px 12px}.profile-scroll{padding:6px 14px calc(env(safe-area-inset-bottom)+120px)}}
    @media (max-height:500px) and (orientation:landscape){
      .profile-header{padding:max(12px,calc(env(safe-area-inset-top)+8px)) 16px 10px}
      .page-scroll{padding-bottom:max(16px,calc(env(safe-area-inset-bottom)+16px))}
      .ob-brand{padding-top:clamp(24px,6vh,48px)}
      .onboarding-slide{padding:clamp(16px,4vh,36px) 28px clamp(12px,3vh,24px)}
    }

    /* ‚îÄ‚îÄ –ò–ö–û–ù–ö–ê –ü–†–û–§–ò–õ–Ø (–≤ —à–∞–ø–∫–µ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã) ‚îÄ‚îÄ */
    #profileIconBtn{min-width:44px;min-height:44px;width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,rgba(var(--primary-rgb),0.18),rgba(var(--secondary-rgb),0.14));border:1.5px solid rgba(var(--primary-rgb),0.4);cursor:pointer;padding:0;margin:0;box-shadow:0 2px 12px rgba(0,0,0,0.3);animation:none;display:flex;align-items:center;justify-content:center;font-size:0.85rem;font-weight:700;color:var(--primary-color);font-family:inherit;letter-spacing:0;line-height:1;transition:background .2s,border-color .2s;flex-shrink:0}
    #profileIconBtn:active{background:rgba(var(--primary-rgb),0.28)}

    /* ‚îÄ‚îÄ –ü–†–û–§–ò–õ–¨ ‚îÄ‚îÄ */
    .profile-header{display:flex;justify-content:space-between;align-items:center;padding:max(20px,calc(env(safe-area-inset-top)+12px)) 16px 16px;flex-shrink:0;background:#08071a;z-index:10;margin-bottom:0}
    .profile-header .profile-header-title{flex:1;text-align:center;margin:0}
    .profile-header-title{font-size:1.05rem;font-weight:600;color:rgba(255,255,255,0.85);letter-spacing:0.02em}
    /* –ù–µ–æ–Ω–æ–≤–∞—è –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞ –∫–Ω–æ–ø–æ–∫ */
    @keyframes neonPulse{0%{box-shadow:0 0 8px currentColor}50%{box-shadow:0 0 15px currentColor}100%{box-shadow:0 0 8px currentColor}}
    .btn-magic{border:1px solid #D4AF37 !important;box-shadow:0 0 8px #D4AF37 !important}
    .btn-magic:hover{animation:neonPulse 1.5s infinite;--neon-color:#D4AF37}
    .btn-pay{border:1px solid #00FFA3 !important;box-shadow:0 0 8px #00FFA3 !important}
    .btn-pay:hover{animation:neonPulse 1.5s infinite}
    .btn-nav{border:1px solid #FF0055 !important;box-shadow:0 0 8px #FF0055 !important}
    .btn-nav:hover{animation:neonPulse 1.5s infinite}
    .btn-info{border:1px solid #00D9FF !important;box-shadow:0 0 8px #00D9FF !important}
    .btn-info:hover{animation:neonPulse 1.5s infinite}
    .btn-secondary{border:1px solid rgba(255,255,255,0.3) !important;box-shadow:0 0 5px rgba(255,255,255,0.1) !important}
    .btn-secondary:hover{animation:neonPulse 1.5s infinite}
    /* YupSoul ‚Äî –∫–Ω–æ–ø–∫–∏ —Ö–µ–¥–µ—Ä–∞ —Å—Ç—Ä–æ–≥–æ –∫—Ä—É–≥–ª—ã–µ 40√ó40 (min/max + aspect-ratio) */
    .profile-back-btn,.header-back-btn,.btn-nav,.header-menu-btn,.btn-info{width:40px !important;height:40px !important;min-width:40px !important;max-width:40px !important;min-height:40px !important;max-height:40px !important;border-radius:50% !important;aspect-ratio:1/1 !important;display:inline-flex !important;align-items:center !important;justify-content:center !important;padding:0 !important;margin:0 !important;font-size:1rem !important;color:rgba(255,255,255,0.9) !important;cursor:pointer;transition:all .3s ease;flex-shrink:0;box-sizing:border-box !important}
    .profile-back-btn,.header-back-btn,.btn-nav{border:1px solid rgba(255,0,85,0.7) !important;background:rgba(255,0,85,0.1) !important;box-shadow:0 0 6px rgba(255,0,85,0.5),0 0 12px rgba(255,0,85,0.3),0 0 20px rgba(255,0,85,0.1) !important;backdrop-filter:blur(4px) !important}
    .profile-back-btn:hover,.header-back-btn:hover,.btn-nav:hover{box-shadow:0 0 8px rgba(255,0,85,0.6),0 0 16px rgba(255,0,85,0.4),0 0 24px rgba(255,0,85,0.2) !important;backdrop-filter:blur(6px)}
    .header-menu-btn,.btn-info{border:1px solid rgba(0,217,255,0.7) !important;background:rgba(0,217,255,0.1) !important;box-shadow:0 0 6px rgba(0,217,255,0.5),0 0 12px rgba(0,217,255,0.3),0 0 20px rgba(0,217,255,0.1) !important;backdrop-filter:blur(4px) !important}
    .header-menu-btn:hover,.btn-info:hover{box-shadow:0 0 8px rgba(0,217,255,0.6),0 0 16px rgba(0,217,255,0.4),0 0 24px rgba(0,217,255,0.2) !important;backdrop-filter:blur(6px)}
    .profile-back-btn svg,.header-back-btn svg,.btn-nav svg,.header-menu-btn svg,.btn-info svg{width:18px !important;height:18px !important;flex-shrink:0 !important}
    .profile-back-btn svg,.header-back-btn svg,.btn-nav svg{fill:rgba(255,255,255,0.95) !important;stroke:rgba(255,255,255,0.95) !important;filter:drop-shadow(0 0 2px rgba(255,255,255,0.5))}
    .header-menu-btn svg,.btn-info svg{fill:var(--primary-light) !important;stroke:var(--primary-light) !important;filter:drop-shadow(0 0 3px rgba(var(--primary-rgb),0.6)) !important}
    .header-menu-btn img,.btn-info img{width:18px !important;height:18px !important;filter:drop-shadow(0 0 3px rgba(var(--primary-rgb),0.6))}
    /* –ü–µ—Ä–µ–±–∏–≤–∞–µ–º inline width/height —Ç–æ–ª—å–∫–æ —É –∫–Ω–æ–ø–æ–∫ —Ö–µ–¥–µ—Ä–∞ */
    button.profile-back-btn,button.header-back-btn,button.btn-nav,button.header-menu-btn,button.btn-info{width:40px !important;height:40px !important;min-width:40px !important;max-width:40px !important;min-height:40px !important;max-height:40px !important;border-radius:50% !important}
    .form-header-bar,.form-nav-bar{display:flex;justify-content:space-between;align-items:center;padding:10px 16px;padding-top:max(10px,env(safe-area-inset-top));position:relative;flex-shrink:0;background:transparent;backdrop-filter:none;-webkit-backdrop-filter:none;z-index:100}
    #formNavBar{background:transparent !important;background-color:transparent !important;box-shadow:none !important;backdrop-filter:none !important;-webkit-backdrop-filter:none !important;}
    .profile-scroll{padding:24px 20px calc(env(safe-area-inset-bottom)+120px)}
    .profile-identity{text-align:center;margin-bottom:28px;padding-top:8px}
    .profile-avatar-wrap{position:relative;width:72px;height:72px;margin:0 auto 14px;cursor:pointer}
    .profile-avatar{width:72px;height:72px;border-radius:50%;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));display:flex;align-items:center;justify-content:center;font-size:2rem;color:#fff;font-weight:700;letter-spacing:0;box-shadow:0 0 0 4px rgba(var(--primary-rgb),0.12),0 4px 24px rgba(var(--primary-rgb),0.18);overflow:hidden;transition:filter .2s}
    .profile-avatar img{width:100%;height:100%;object-fit:cover;border-radius:50%}
    .profile-avatar-wrap:active .profile-avatar{filter:brightness(0.75)}
    .profile-avatar-edit{position:absolute;bottom:-4px;right:-4px;min-width:44px;min-height:44px;width:44px;height:44px;border-radius:50%;background:#1a1628;border:1.5px solid rgba(var(--primary-rgb),0.5);display:flex;align-items:center;justify-content:center;font-size:0.65rem;color:rgba(var(--primary-rgb),0.85);pointer-events:none}
    .profile-avatar-spinner{position:absolute;inset:0;border-radius:50%;background:rgba(10,8,25,0.6);display:none;align-items:center;justify-content:center;font-size:0.7rem;color:rgba(var(--primary-rgb),0.8)}
    .profile-name{font-size:1.3rem;font-weight:700;color:#fff;letter-spacing:0.01em;margin-bottom:8px}
    .profile-plan-badge{display:inline-flex;align-items:center;gap:5px;background:rgba(var(--primary-rgb),0.1);border:1px solid rgba(var(--primary-rgb),0.28);border-radius:20px;padding:4px 12px;font-size:0.75rem;font-weight:600;color:rgba(var(--primary-rgb),0.85);letter-spacing:0.04em;text-transform:uppercase}
    .profile-balance-card{background:linear-gradient(135deg,rgba(var(--primary-rgb),0.07),rgba(var(--secondary-rgb),0.04));border:1px solid rgba(var(--primary-rgb),0.2);border-radius:18px;padding:18px 20px;margin-bottom:28px;display:flex;align-items:center;justify-content:space-between;gap:16px}
    .profile-balance-left{}
    .profile-balance-label{font-size:0.8rem;color:rgba(255,255,255,0.55);margin-bottom:4px;letter-spacing:0.02em}
    .profile-balance-value{font-size:2.2rem;font-weight:800;color:var(--primary-color);line-height:1}
    .profile-balance-hint{font-size:0.78rem;color:rgba(255,255,255,0.4);margin-top:6px;line-height:1.45}
    .profile-balance-icon{font-size:1.8rem;color:rgba(var(--primary-rgb),0.3);line-height:1;font-family:Georgia,serif;font-style:italic}
    .profile-section-title{font-size:0.72rem;font-weight:700;letter-spacing:0.12em;color:rgba(255,255,255,0.35);text-transform:uppercase;margin-bottom:14px;display:flex;align-items:center;gap:10px}
    .profile-section-title::after{content:'';flex:1;height:1px;background:rgba(255,255,255,0.06)}
    /* –ö–∞—Ä—Ç–æ—á–∫–∞ ¬´–ú–æ–∏ –¥–∞–Ω–Ω—ã–µ¬ª ‚Äî glassmorphism + glow */
    #profileSectionMyData.profile-section-title{color:rgba(var(--primary-rgb),0.9);font-size:0.75rem;letter-spacing:0.1em;margin-bottom:16px;padding-left:4px;position:relative}
    #profileSectionMyData.profile-section-title::before{content:'';position:absolute;left:0;top:50%;transform:translateY(-50%);width:3px;height:12px;background:linear-gradient(180deg,#D4AF37,rgba(var(--primary-rgb),0.3));border-radius:2px}
    #profileDataCard{position:relative;display:flex;align-items:center;justify-content:space-between;gap:12px;background:linear-gradient(135deg,rgba(var(--primary-rgb),0.08) 0%,rgba(var(--primary-rgb),0.02) 100%);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(var(--primary-rgb),0.2);border-radius:20px;padding:20px 18px;margin-bottom:24px;overflow:hidden;transition:all 0.4s cubic-bezier(0.4,0,0.2,1);box-shadow:0 8px 32px rgba(var(--primary-rgb),0.1),inset 0 1px 0 rgba(255,255,255,0.05);box-sizing:border-box}
    #profileDataCard::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(var(--primary-rgb),0.15) 0%,transparent 70%);animation:profileDataCardPulse 8s ease-in-out infinite;pointer-events:none;opacity:0.5}
    @keyframes profileDataCardPulse{0%,100%{transform:scale(1);opacity:0.5}50%{transform:scale(1.1);opacity:0.8}}
    #profileDataCard:hover{transform:translateY(-2px);border-color:rgba(var(--primary-rgb),0.4);box-shadow:0 12px 40px rgba(var(--primary-rgb),0.2),inset 0 1px 0 rgba(255,255,255,0.1)}
    #profileDataCard .pfa-info{flex:1;min-width:0}
    #profileDataCard #profileEditBtn{position:relative;padding:16px 20px;background:linear-gradient(135deg,rgba(var(--primary-rgb),0.15) 0%,rgba(var(--primary-rgb),0.05) 100%);border:1px solid rgba(var(--primary-rgb),0.3);border-radius:14px;color:#D4AF37;font-family:'Comfortaa',sans-serif;font-size:0.95rem;font-weight:600;letter-spacing:0.02em;cursor:pointer;transition:all 0.3s cubic-bezier(0.4,0,0.2,1);overflow:hidden;display:flex;align-items:center;justify-content:center;gap:10px;min-height:44px;box-shadow:none;animation:none;white-space:nowrap;flex-shrink:0}
    #profileDataCard #profileEditBtn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(var(--primary-rgb),0.3),transparent);transition:left 0.6s ease}
    #profileDataCard #profileEditBtn:hover::before{left:100%}
    #profileDataCard #profileEditBtn:hover{background:linear-gradient(135deg,rgba(var(--primary-rgb),0.25) 0%,rgba(var(--primary-rgb),0.1) 100%);border-color:rgba(var(--primary-rgb),0.5);transform:translateY(-1px);box-shadow:0 8px 24px rgba(var(--primary-rgb),0.3),inset 0 1px 0 rgba(255,255,255,0.1)}
    #profileDataCard #profileEditBtn:active{transform:scale(0.98);transition:transform 0.1s ease}
    /* YupSoul ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è –∫–Ω–æ–ø–∫–∞ ¬´–ò–∑–º–µ–Ω–∏—Ç—å¬ª –≤ –ø—Ä–æ—Ñ–∏–ª–µ */
    #profileSectionMyData.profile-section-title{margin-bottom:12px}
    #profileDataCard{padding:12px 16px !important;margin-bottom:16px !important}
    #profileDataCard #profileEditBtn{padding:8px 16px !important;font-size:0.9rem !important;font-weight:500 !important;border-radius:20px !important;border:1px solid rgba(var(--primary-rgb),0.6) !important;background:rgba(var(--primary-rgb),0.1) !important;color:#D4AF37 !important;box-shadow:0 0 8px rgba(var(--primary-rgb),0.3) !important;backdrop-filter:blur(4px);min-height:unset !important;gap:6px !important}
    #profileDataCard #profileEditBtn::before{display:none}
    #profileDataCard #profileEditBtn:hover{background:rgba(var(--primary-rgb),0.2) !important;box-shadow:0 0 12px rgba(var(--primary-rgb),0.5) !important;transform:translateY(-1px)}
    #profileDataCard #profileEditBtn svg{width:14px !important;height:14px !important;fill:#D4AF37 !important;stroke:#D4AF37 !important}
    /* YupSoul ‚Äî –≤–æ–∑–¥—É—Ö –≤ –ø—Ä–æ—Ñ–∏–ª–µ: –æ—Ç—Å—Ç—É–ø—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ */
    #profilePage .profile-header{margin-bottom:24px !important}
    #profilePage .profile-section-title{margin-top:0 !important;margin-bottom:16px !important;padding-top:8px !important}
    #profilePage .profile-balance-card{margin-bottom:24px !important;padding:20px !important;border-radius:16px !important;box-shadow:0 4px 20px rgba(0,0,0,0.3) !important}
    #profilePage #profileDataCard{margin-bottom:24px !important;border-radius:16px !important;box-shadow:0 4px 20px rgba(0,0,0,0.3) !important}
    #profilePage .profile-plans-grid{margin-bottom:24px !important}
    #profilePage .profile-track-list{margin-bottom:24px !important}
    #profilePage .profile-referral-section{margin-bottom:24px !important;padding:20px !important;border-radius:16px !important;box-shadow:0 4px 20px rgba(0,0,0,0.2) !important}
    #profilePage .profile-create-btn{margin-top:24px !important;margin-bottom:12px !important}
    #profilePage .profile-create-btn + button{margin-top:0 !important}
    @media (max-width:480px){
      #profilePage .profile-scroll{padding:16px 12px calc(env(safe-area-inset-bottom)+120px) !important}
      #profilePage .profile-balance-card,#profilePage #profileDataCard,#profilePage .profile-referral-section{padding:16px !important;margin-bottom:20px !important}
    }
    /* –°–µ—Ç–∫–∞ –ø–ª–∞–Ω–æ–≤ */
    #profileSectionPlans.profile-section-title{margin-top:24px}
    .profile-plans-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px}
    .profile-plan-card{background:rgba(255,255,255,0.04);border:1.5px solid rgba(255,255,255,0.1);border-radius:16px;padding:16px 14px;position:relative;display:flex;flex-direction:column;gap:4px;transition:border-color .2s,background .2s}
    .profile-plan-card.current{background:rgba(var(--primary-rgb),0.07);border-color:rgba(var(--primary-rgb),0.38)}
    .profile-plan-card.popular{background:linear-gradient(135deg,rgba(var(--secondary-rgb),0.08),rgba(var(--primary-rgb),0.06));border-color:rgba(var(--secondary-rgb),0.35);grid-column:1 / -1}
    .ppc-badge{font-size:0.62rem;font-weight:700;letter-spacing:0.1em;text-transform:uppercase;color:rgba(var(--primary-rgb),0.7);margin-bottom:4px}
    .ppc-badge.hot{color:var(--secondary-color)}
    .ppc-name{font-size:1rem;font-weight:700;color:#fff;margin-bottom:8px}
    .ppc-features{display:flex;flex-direction:column;gap:4px;margin-bottom:10px;flex:1}
    .ppc-feature{font-size:0.78rem;color:rgba(255,255,255,0.6);line-height:1.45}
    .ppc-price-wrap{display:flex;align-items:baseline;gap:8px;margin-bottom:8px}
    .ppc-price{font-size:0.85rem;font-weight:700;color:rgba(var(--primary-rgb),0.85)}
    .ppc-save{font-size:0.68rem;font-weight:600;color:var(--secondary-color);background:rgba(var(--secondary-rgb),0.1);border:1px solid rgba(var(--secondary-rgb),0.25);border-radius:10px;padding:2px 6px;white-space:nowrap}
    .profile-plan-card.current .ppc-price{color:rgba(255,255,255,0.4);font-size:0.75rem;font-weight:400}
    .profile-plan-card.master{background:linear-gradient(135deg,rgba(var(--primary-rgb),0.1),rgba(var(--secondary-rgb),0.07));border-color:rgba(var(--primary-rgb),0.5);grid-column:1 / -1}
    .ppc-badge.master-badge{color:var(--primary-color)}
    .ppc-btn.master-btn{background:linear-gradient(135deg,rgba(var(--primary-rgb),0.3),rgba(var(--secondary-rgb),0.25));border:1px solid rgba(var(--primary-rgb),0.5);color:var(--primary-color)}
    .ppc-btn{padding:8px 14px;border-radius:10px;background:rgba(var(--primary-rgb),0.15);border:1px solid rgba(var(--primary-rgb),0.35);color:var(--primary-color);font-size:0.78rem;font-weight:600;cursor:pointer;font-family:inherit;min-height:unset;box-shadow:none;animation:none;margin:0;letter-spacing:0.02em;width:100%}
    .ppc-btn:active{background:rgba(var(--primary-rgb),0.25)}
    .ppc-btn.popular-btn{background:linear-gradient(135deg,rgba(var(--secondary-rgb),0.25),rgba(var(--primary-rgb),0.18));border-color:rgba(var(--secondary-rgb),0.45);color:var(--secondary-color)}
    /* –ö–Ω–æ–ø–∫–∞ ¬´–ü–æ–¥—Ä–æ–±–Ω–µ–µ¬ª –ø–æ–¥ —Ç–∞—Ä–∏—Ñ–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–æ–π */
    .ppc-details-btn{width:100%;background:none;border:none;color:rgba(255,255,255,0.28);font-size:0.7rem;font-weight:500;font-family:inherit;min-height:44px;padding:12px 0;cursor:pointer;text-align:center;letter-spacing:0.03em;box-shadow:none;animation:none;margin:0;transition:color .2s;text-decoration:underline;text-underline-offset:3px;display:inline-flex;align-items:center;justify-content:center;}
    .ppc-details-btn:hover{color:rgba(255,255,255,0.55);}
    /* –ú–æ–¥–∞–ª –æ–ø–∏—Å–∞–Ω–∏—è —Ç–∞—Ä–∏—Ñ–∞ */
    .plan-modal-overlay{position:fixed;inset:0;z-index:3000;background:rgba(0,0,0,0.65);backdrop-filter:blur(4px);display:flex;align-items:flex-end;justify-content:center;}
    .plan-modal-sheet{background:linear-gradient(165deg,#130826 0%,#0d1830 100%);border-radius:22px 22px 0 0;padding:28px 22px 36px;max-height:85vh;overflow-y:auto;width:100%;max-width:520px;box-sizing:border-box;}
    .plan-modal-sheet::-webkit-scrollbar{width:3px}
    .plan-modal-sheet::-webkit-scrollbar-thumb{background:rgba(var(--primary-rgb),0.2);border-radius:2px}
    .plan-modal-handle{width:40px;height:4px;border-radius:2px;background:rgba(255,255,255,0.15);margin:0 auto 24px;}
    .plan-modal-title{font-size:1.3rem;font-weight:700;color:var(--primary-color);margin-bottom:4px;}
    .plan-modal-price{font-size:0.9rem;color:rgba(255,255,255,0.5);margin-bottom:20px;}
    .plan-modal-section{font-size:0.72rem;font-weight:700;letter-spacing:0.12em;text-transform:uppercase;color:rgba(var(--primary-rgb),0.55);margin:18px 0 10px;}
    .plan-modal-feature{display:flex;gap:10px;align-items:flex-start;margin-bottom:12px;}
    .plan-modal-feature-icon{flex-shrink:0;width:28px;height:28px;border-radius:8px;background:rgba(var(--primary-rgb),0.1);border:1px solid rgba(var(--primary-rgb),0.2);display:flex;align-items:center;justify-content:center;font-size:0.85rem;}
    .plan-modal-feature-text{font-size:0.84rem;color:rgba(255,255,255,0.75);line-height:1.5;}
    .plan-modal-feature-text strong{color:#fff;font-weight:600;}
    .plan-modal-cta{width:100%;margin-top:24px;padding:14px;border-radius:14px;font-size:0.95rem;font-weight:700;font-family:inherit;cursor:pointer;letter-spacing:0.02em;box-shadow:none;animation:none;}
    .plan-modal-cta.gold{background:linear-gradient(135deg,rgba(var(--primary-rgb),0.25),rgba(var(--primary-rgb),0.15));border:1px solid rgba(var(--primary-rgb),0.5);color:var(--primary-color);}
    .plan-modal-cta.pink{background:linear-gradient(135deg,rgba(var(--secondary-rgb),0.3),rgba(var(--primary-rgb),0.15));border:1px solid rgba(var(--secondary-rgb),0.5);color:var(--secondary-color);}
    .plan-modal-close{width:100%;margin-top:10px;padding:12px;border-radius:14px;font-size:0.85rem;font-weight:500;font-family:inherit;cursor:pointer;background:none;border:none;color:rgba(255,255,255,0.3);min-height:unset;box-shadow:none;animation:none;}
    /* –†–∞–∑–æ–≤—ã–µ —Ç—Ä–µ–∫–∏ */
    .profile-track-list{display:flex;flex-direction:column;gap:6px;margin-bottom:28px}
    .profile-track-item{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.07);border-radius:13px;padding:13px 14px;display:flex;align-items:center;justify-content:space-between;cursor:pointer;transition:background .15s,border-color .15s}
    .profile-track-item:active{background:rgba(255,255,255,0.06);border-color:rgba(var(--primary-rgb),0.25)}
    .pti-name{font-size:0.88rem;font-weight:600;color:rgba(255,255,255,0.75)}
    .pti-desc{font-size:0.72rem;color:rgba(255,255,255,0.3);margin-top:3px}
    .pti-right{display:flex;align-items:center;gap:8px}
    .pti-price{font-size:0.88rem;font-weight:700;color:rgba(var(--primary-rgb),0.85)}
    .pti-arrow{font-size:0.8rem;color:rgba(255,255,255,0.2);line-height:1}
    /* –†–µ—Ñ–µ—Ä–∞–ª */
    .profile-referral-section{margin-bottom:28px;background:linear-gradient(135deg,rgba(var(--primary-rgb),0.06),rgba(var(--primary-rgb),0.02));border:1px solid rgba(var(--primary-rgb),0.15);border-radius:18px;padding:18px 16px}
    .profile-referral-section .profile-section-title{margin-bottom:8px}
    .profile-ref-tagline{font-size:0.82rem;color:rgba(255,255,255,0.5);margin-bottom:16px;line-height:1.5}
    .profile-ref-link-row{display:none}
    .profile-ref-share-btn{width:100%;padding:13px 20px;border-radius:13px;background:rgba(var(--primary-rgb),0.14);border:1.5px solid rgba(var(--primary-rgb),0.38);color:var(--primary-color);font-weight:700;font-size:0.92rem;cursor:pointer;font-family:inherit;min-height:unset;box-shadow:none;animation:none;margin:0 0 14px;letter-spacing:0.02em;transition:background .2s}
    .profile-ref-share-btn:active{background:rgba(var(--primary-rgb),0.25)}
    .profile-ref-milestones{display:flex;align-items:center;justify-content:center;gap:4px;margin:10px 0 14px;flex-wrap:wrap}
    .ref-milestone{display:flex;flex-direction:column;align-items:center;gap:1px;background:rgba(var(--primary-rgb),0.07);border:1px solid rgba(var(--primary-rgb),0.15);border-radius:10px;padding:6px 8px;min-width:36px;transition:background .2s,border-color .2s}
    .ref-milestone.reached{background:rgba(var(--primary-rgb),0.18);border-color:rgba(var(--primary-rgb),0.5)}
    .ref-milestone.next{border-color:rgba(var(--primary-rgb),0.4);box-shadow:0 0 8px rgba(var(--primary-rgb),0.15)}
    .ref-mi-num{font-size:0.9rem;font-weight:800;color:var(--primary-color);line-height:1}
    .ref-mi-label{font-size:0.55rem;color:rgba(255,255,255,0.35);line-height:1}
    .ref-milestone-arrow{font-size:0.65rem;color:rgba(var(--primary-rgb),0.3);flex-shrink:0}
    .profile-ref-stats{display:flex;gap:10px}
    .profile-ref-stats span{flex:1;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.07);border-radius:12px;padding:10px 12px;display:flex;flex-direction:column;align-items:center;gap:2px}
    .profile-ref-stats strong{font-size:1.4rem;font-weight:800;color:var(--primary-color);line-height:1}
    .profile-ref-stats-label{font-size:0.68rem;color:rgba(255,255,255,0.38);margin-top:2px;text-align:center}
    .profile-create-btn{width:100%;padding:15px 24px;border-radius:16px;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));border:none;color:#fff;font-size:1rem;font-weight:700;cursor:pointer;font-family:inherit;margin-bottom:12px;letter-spacing:0.02em;box-shadow:0 4px 20px rgba(var(--primary-rgb),0.2);transition:transform .15s,box-shadow .15s}
    .profile-create-btn:active{transform:scale(0.98)}
    /* ‚îÄ‚îÄ –§–û–†–ú–ê: –ê–ö–ö–û–†–î–ï–û–ù –ü–†–û–§–ò–õ–Ø ‚îÄ‚îÄ */
    .pfa-header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;background:rgba(var(--primary-rgb),0.05);border:1px solid rgba(var(--primary-rgb),0.2);border-radius:14px;cursor:pointer;font-family:'Comfortaa',sans-serif;transition:background .2s,border-color .2s;user-select:none;-webkit-user-select:none;box-sizing:border-box;}
    .pfa-header:active{background:rgba(var(--primary-rgb),0.12);border-color:rgba(var(--primary-rgb),0.38);}
    .pfa-info{display:flex;align-items:center;gap:8px;min-width:0;flex:1;overflow:hidden;}
    .pfa-icon{color:rgba(var(--primary-rgb),0.7);flex-shrink:0;}
    .pfa-name{font-size:0.95rem;font-weight:700;color:rgba(255,255,255,0.92);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:'Comfortaa',sans-serif;}
    .pfa-sep{color:rgba(var(--primary-rgb),0.4);font-size:0.85rem;flex-shrink:0;}
    .pfa-date{font-size:0.85rem;color:rgba(var(--primary-rgb),0.82);white-space:nowrap;flex-shrink:0;font-family:'Comfortaa',sans-serif;}
    .pfa-chevron{color:rgba(var(--primary-rgb),0.65);flex-shrink:0;margin-left:12px;transition:transform .28s ease;display:flex;align-items:center;}
    .pfa-chevron.open{transform:rotate(180deg);}
    #formFieldsWrap{overflow:hidden;transition:max-height .38s cubic-bezier(.4,0,.2,1),opacity .3s ease;max-height:2400px;}
    #formFieldsWrap.pfw-collapsed{max-height:0!important;opacity:0;pointer-events:none;}
    #formFieldsWrap.no-anim{transition:none!important;}
    @media (prefers-reduced-motion:reduce){
      *,*::before,*::after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}
    }
    /* –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–π hover (transform, box-shadow) –æ—Ç–∫–ª—é—á–∞–µ–º –Ω–∞ —Ç–∞—á-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö ‚Äî –Ω–µ ¬´–∑–∞–ª–∏–ø–∞–µ—Ç¬ª */
    @media (hover:none){
      button:hover,#payBtn:hover,.example-btn:hover,.onboarding-btn:hover,.preview-nav button:hover{transform:none}
      .keys-composition .key-music:hover{transform:rotate(-10deg)}
      .keys-composition .key-door:hover{transform:rotate(8deg)}
    }
    /* iOS/Android: –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç–µ —Å —Ç–µ–∫—Å—Ç–æ–º < 16px –±—Ä–∞—É–∑–µ—Ä –¥–µ–ª–∞–µ—Ç –∞–≤—Ç–æ–∑—É–º. –§–∏–∫—Å–∏—Ä—É–µ–º –º–∏–Ω–∏–º—É–º 16px —É –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –ö–Ω–æ–ø–∫–∏ —Ä–µ–∂–∏–º–æ–≤ ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω–æ (8px). */
    @media (hover:none) and (pointer:coarse){
      button,a,input,select,textarea,[role="button"],.mode-info,.form-nav-link,.home-nav-link,.lang-switcher-btn,.lang-opt,.ppc-details-btn,.ppc-btn,.request-quick-toggle,.quick-item,.quick-picker-btn,.onboarding-btn,.hca-btn,.hero-hist-toggle,.stories-close,.profile-back-btn,.preview-nav button,.example-btn,.request-help-toggle{font-size:max(1rem,16px)}
      .mode-btn,.mode-btn .mode-label{font-size:8px !important}
      .request-quick-dropdown .quick-item{font-size:max(1rem,16px)}
      #homeTopBar .home-topbar-btn,#homeTopBar #profileIconBtn,#homeTopBar .lang-switcher-btn,#homeTopBar .home-topbar-btn span{font-size:9px !important}
    }

    /* ============================================
       YUPSOUL ‚Äî –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤
       ============================================ */
    * { box-sizing: border-box; }
    html, body {
      width: 100%;
      min-width: 320px !important;
      max-width: 100vw;
      overflow-x: hidden;
    }
    body { font-size: 16px; }
    #app, .app-container, .main-wrapper {
      width: 100%;
      min-width: 320px;
      max-width: 100%;
      margin: 0 auto;
      padding: 0;
    }
    @media (max-width: 480px) {
      .profilePage, #profilePage, .page-content {
        padding-left: 12px !important;
        padding-right: 12px !important;
      }
      .profile-section, .profile-card, .content-block {
        padding: 14px !important;
        margin-bottom: 16px !important;
      }
    }
    @media (max-width: 480px) {
      h1, .header-title { font-size: 1.1rem !important; }
      h2, .section-title { font-size: 0.95rem !important; }
      p, .text-content, .profile-field { font-size: 0.85rem !important; }
      button, .btn { font-size: 0.9rem !important; padding: 10px 16px !important; }
    }
    button, .btn, .profile-back-btn, .header-menu-btn, .action-button {
      min-width: 40px !important;
      min-height: 40px !important;
      flex-shrink: 0 !important;
    }
    .header, .page-header, #homeTopBar {
      min-height: 56px !important;
      flex-shrink: 0 !important;
      padding: 10px 12px !important;
    }
    @media (max-width: 480px) {
      .header, .page-header { padding: 8px 12px !important; min-height: 50px !important; }
    }
    .card, .profile-card, .content-block, .section-container { min-width: 280px !important; }
    .flex-container, .button-group, .profile-actions { flex-wrap: wrap !important; gap: 8px !important; }
    @media (max-width: 480px) {
      .flex-container, .button-group { flex-direction: column !important; width: 100%; }
      .flex-container > *, .button-group > * { width: 100% !important; flex: 1 1 100% !important; }
    }
    img, svg, .icon { max-width: 100%; height: auto; flex-shrink: 0; }
    .modal, .popup, .dialog-overlay {
      max-width: 100% !important;
      min-width: 320px !important;
      margin: 10px !important;
    }
    @media (max-width: 480px) {
      .modal, .popup { margin: 5px !important; padding: 12px !important; }
    }
    input, textarea, select { min-width: 200px !important; font-size: 16px !important; }
    #startBtn, .main-action-btn, .create-song-btn {
      min-width: 240px !important;
      max-width: 90% !important;
      width: auto !important;
      padding: 14px 28px !important;
      font-size: 1rem !important;
    }
    @media (max-width: 480px) {
      #startBtn, .main-action-btn { min-width: 200px !important; padding: 12px 24px !important; font-size: 0.95rem !important; }
    }
    .nav-menu, .bottom-nav, .menu-buttons { flex-wrap: wrap !important; justify-content: center !important; }
    @media (max-width: 480px) {
      .nav-menu, .bottom-nav { gap: 6px !important; }
      .nav-menu button, .bottom-nav button { min-width: 80px !important; font-size: 0.8rem !important; padding: 8px 12px !important; }
    }
    .logo, .app-logo, .brand-image { max-width: 120px !important; width: 30% !important; min-width: 80px !important; }
    @media (max-width: 480px) { .logo, .app-logo { max-width: 100px !important; width: 35% !important; } }
    .greeting, .welcome-text, #homeGreeting { font-size: 0.9rem !important; max-width: 90% !important; word-wrap: break-word; }
    @media (max-width: 480px) { .greeting { font-size: 0.85rem !important; } }
    body, html, #app { overflow-x: hidden !important; position: relative; width: 100%; }
    .grid-container, .cards-grid, .options-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 12px;
    }
    @media (max-width: 480px) {
      .grid-container, .cards-grid { grid-template-columns: 1fr; gap: 8px; }
    }
    .card, .button, .profile-block { box-shadow: 0 2px 12px rgba(0, 0, 0, 0.3); min-height: auto; }
    footer, .app-footer, .footer-info { padding: 12px !important; font-size: 0.75rem !important; }
    .tg-theme-params { width: 100%; }
    @supports (padding: max(0px)) {
      body { padding-left: env(safe-area-inset-left); padding-right: env(safe-area-inset-right); }
      .header, .page-header { padding-top: max(10px, env(safe-area-inset-top)); padding-bottom: max(10px, env(safe-area-inset-bottom)); }
    }
    /* –°–µ—Ç–∫–∞ —Ç–∞—Ä–∏—Ñ–æ–≤ –Ω–∞ –æ—á–µ–Ω—å —É–∑–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö ‚Äî –æ–¥–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ */
    @media (max-width: 400px) {
      .profile-plans-grid { grid-template-columns: 1fr !important; }
    }
    /* –ú–æ–¥–∞–ª–∫–∞ –ø–ª–∞–Ω–æ–≤ ‚Äî –≤–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —ç–∫—Ä–∞–Ω */
    @media (max-width: 480px) {
      .plan-modal-sheet { max-width: 100% !important; margin: 0 !important; padding: 20px 16px 28px !important; border-radius: 20px 20px 0 0 !important; }
    }

    /* ============================================
       YUPSOUL ‚Äî –ó–∞–ø—Ä–µ—Ç —Å–∂–∞—Ç–∏—è –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö
       ============================================ */
    html, body {
      min-width: 360px !important;
      width: 100%;
      overflow-x: hidden;
      font-size: 16px !important;
      -webkit-text-size-adjust: 100%;
      text-size-adjust: 100%;
    }
    * {
      -webkit-text-size-adjust: 100%;
      text-size-adjust: 100%;
    }
    #app, .app-container, .main-wrapper, .page-content, #homePage, #profilePage {
      min-width: 360px !important;
      width: 100% !important;
      max-width: 100vw !important;
      margin: 0 auto !important;
      padding: 12px !important;
      box-sizing: border-box !important;
    }
    h1, h2, h3, h4, h5, h6 {
      font-size: clamp(1rem, 2.5vw, 1.5rem) !important;
    }
    p, span, div, label, input, textarea, button {
      font-size: clamp(0.875rem, 2vw, 1rem) !important;
    }
    button, .btn, .action-button, .card-button {
      min-width: 120px !important;
      min-height: 44px !important;
      padding: 12px 20px !important;
      font-size: 0.95rem !important;
      white-space: nowrap !important;
      flex-shrink: 0 !important;
    }
    .card, .profile-card, .content-block, .section-container, .format-song-block {
      min-width: 320px !important;
      width: 100% !important;
      padding: 16px !important;
      margin-bottom: 16px !important;
      box-sizing: border-box !important;
    }
    input, textarea, select, .text-input, .query-input {
      min-width: 280px !important;
      width: 100% !important;
      font-size: 16px !important;
      padding: 12px !important;
    }
    .birthdate-block, .user-info-block, .profile-field {
      min-width: 300px !important;
      width: 100% !important;
      padding: 14px 16px !important;
      font-size: 1rem !important;
    }
    .section-title, .block-title, h2 {
      min-width: 280px !important;
      font-size: 1.1rem !important;
      margin-bottom: 12px !important;
    }
    .format-buttons, .mode-buttons, .song-format-buttons {
      display: flex !important;
      flex-wrap: wrap !important;
      gap: 10px !important;
      justify-content: center !important;
      min-width: 320px !important;
    }
    .format-buttons button, .mode-buttons button, .song-format-buttons button {
      min-width: 100px !important;
      flex: 1 1 100px !important;
      padding: 14px 16px !important;
      font-size: 0.9rem !important;
    }
    #startBtn, .main-action-btn, .create-song-btn {
      min-width: 280px !important;
      max-width: 95% !important;
      width: auto !important;
      padding: 16px 32px !important;
      font-size: 1.05rem !important;
      margin: 16px auto !important;
      display: block !important;
    }
    .nav-buttons, .bottom-menu, .quick-actions, .home-nav {
      display: flex !important;
      flex-wrap: wrap !important;
      gap: 8px !important;
      justify-content: center !important;
      min-width: 300px !important;
    }
    .nav-buttons button, .bottom-menu button, .quick-actions button {
      min-width: 80px !important;
      padding: 10px 14px !important;
      font-size: 0.85rem !important;
      white-space: nowrap !important;
    }
    .header, .page-header, #homeTopBar {
      min-height: 56px !important;
      height: auto !important;
      padding: 10px 12px !important;
      flex-shrink: 0 !important;
    }
    @media (max-width: 360px) {
      html, body { font-size: 15px !important; }
      #app, .app-container { padding: 10px !important; min-width: 320px !important; }
      .card, .profile-card { min-width: 300px !important; padding: 14px !important; }
      button, .btn { min-width: 100px !important; min-height: 42px !important; font-size: 0.9rem !important; }
      #startBtn, .main-action-btn { min-width: 260px !important; font-size: 1rem !important; }
    }
    @media (min-width: 361px) and (max-width: 375px) {
      #app, .app-container { padding: 12px !important; }
      .card, .profile-card { min-width: 310px !important; }
      .format-buttons button, .mode-buttons button { min-width: 95px !important; font-size: 0.85rem !important; }
    }
    body, html, #app {
      overflow-x: hidden !important;
      position: relative !important;
      max-width: 100vw !important;
    }
    .flex-container, .flex-box {
      flex-shrink: 0 !important;
      min-width: 0 !important;
    }
    .flex-container > *, .flex-box > * {
      flex-shrink: 0 !important;
    }
    .grid-container, .cards-grid {
      grid-template-columns: 1fr !important;
      min-width: 300px !important;
    }
    .logo, .app-logo, .brand-image {
      min-width: 100px !important;
      max-width: 140px !important;
      width: 35% !important;
      flex-shrink: 0 !important;
    }
    .greeting, .welcome-text, #homeGreeting {
      min-width: 260px !important;
      font-size: 1rem !important;
      line-height: 1.4 !important;
    }
    footer, .app-footer {
      min-width: 300px !important;
      padding: 12px !important;
      font-size: 0.8rem !important;
    }

    /* ============================================
       YUPSOUL ‚Äî –ü–û–õ–ù–û–ï —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –±–æ—Ç–∞
       (Telegram —É–∂–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ –≤ –æ–∫–Ω–µ)
       ============================================ */
    .header-title,
    .page-header-title,
    .app-title,
    .yupsoul-title,
    span.header-title,
    div.header-title,
    .text-title,
    .title-text,
    .header-text,
    .app-name,
    .brand-title,
    span[class*="header-title"],
    #homeTopBar .header-title,
    .form-header-bar .header-title,
    .page-header .header-title,
    header.page-header > h1 {
      display: none !important;
      visibility: hidden !important;
      position: absolute !important;
      left: -9999px !important;
      overflow: hidden !important;
      width: 0 !important;
      height: 0 !important;
      padding: 0 !important;
      margin: 0 !important;
      opacity: 0 !important;
    }
    .header-title-container,
    .page-header-text,
    .title-wrapper,
    .header-center,
    .header-middle,
    .title-container,
    .header-text-wrapper,
    .center-slot,
    .middle-section {
      display: none !important;
    }
    [style*="YupSoul Personal Music"] {
      display: none !important;
    }
    .form-header-bar > *:not(button) {
      display: none !important;
    }
    .header,
    .page-header,
    #homeTopBar,
    .form-header-bar,
    .page-header-bar,
    .header-container {
      display: flex !important;
      justify-content: space-between !important;
      align-items: center !important;
      background: transparent !important;
      background-color: transparent !important;
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
      border: none !important;
      box-shadow: none !important;
      min-height: 56px !important;
      height: auto !important;
      margin: 0 !important;
    }
    #homeTopBar,
    .form-header-bar,
    .page-header {
      padding: max(10px, env(safe-area-inset-top)) 16px 0 !important;
    }
    #homeTopBar::before,
    #homeTopBar::after,
    .form-header-bar::before,
    .form-header-bar::after,
    .page-header::before,
    .page-header::after {
      display: none !important;
      content: none !important;
    }
    .header-back-btn,
    .header-menu-btn,
    .profile-back-btn,
    .profile-icon-btn,
    .btn-nav,
    .btn-info {
      display: inline-flex !important;
      visibility: visible !important;
      opacity: 1 !important;
    }

    /* ============================================
       YUPSOUL ‚Äî –ü–û–õ–ù–û–ï –£–î–ê–õ–ï–ù–ò–ï –ß–ï–†–ù–û–ô –ü–ê–ù–ï–õ–ò
       ============================================ */
    #homeTopBar,
    .page-header,
    .form-header-bar,
    .header-container,
    .page-header-bar,
    .header-wrapper {
      background: transparent !important;
      background-color: transparent !important;
      border: none !important;
      box-shadow: none !important;
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
      min-height: 0 !important;
      padding-top: max(8px, env(safe-area-inset-top)) !important;
      padding-bottom: 8px !important;
    }
    .page-header > span,
    .form-header-bar > span,
    .page-header > div:not([class*="back"]):not([class*="menu"]):not([class*="btn"]):not(.home-topbar-slot),
    .form-header-bar > div {
      display: none !important;
    }
    .profile-back-btn,
    .header-back-btn,
    .btn-nav,
    .profile-icon-btn,
    .header-menu-btn,
    .btn-info {
      display: flex !important;
      visibility: visible !important;
      opacity: 1 !important;
      position: relative !important;
      z-index: 100 !important;
    }
    #homeTopBar,
    .page-header,
    .form-header-bar {
      font-size: 0 !important;
    }
    #homeTopBar > *,
    .page-header > *,
    .form-header-bar > * {
      font-size: 16px !important;
    }
    .header-center,
    .header-middle,
    .center-slot,
    .middle-slot,
    .title-wrapper,
    .text-container {
      display: none !important;
      visibility: hidden !important;
      width: 0 !important;
      height: 0 !important;
    }
    .form-header-bar > :not(button):not(.home-topbar-slot) {
      display: none !important;
    }

    /* ============================================
       YUPSOUL ‚Äî –£–î–ê–õ–ò–¢–¨ –ß–Å–†–ù–£–Æ –ü–ê–ù–ï–õ–¨ –ò –¢–ï–ö–°–¢
       ============================================ */
    .form-header-bar,
    .page-header,
    #homeTopBar {
      background: transparent !important;
      background-color: transparent !important;
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
      box-shadow: none !important;
      border: none !important;
      padding-top: 8px !important;
      padding-bottom: 8px !important;
    }
    .header-title,
    span.header-title,
    div.header-title,
    .page-header-title,
    .app-title,
    .form-header-bar .header-title,
    .page-header .header-title {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      width: 0 !important;
      height: 0 !important;
      overflow: hidden !important;
      position: absolute !important;
      left: -9999px !important;
    }
    .form-header-bar > span,
    .form-header-bar > div:not([class*="btn"]):not([class*="back"]):not([class*="menu"]),
    .page-header > span,
    .page-header > div:not([class*="btn"]):not([class*="back"]):not([class*="menu"]) {
      display: none !important;
    }
    .profile-back-btn,
    .header-back-btn,
    .btn-nav,
    .profile-icon-btn,
    .header-menu-btn,
    .btn-info,
    button[class*="back"],
    button[class*="menu"] {
      display: flex !important;
      visibility: visible !important;
      opacity: 1 !important;
      position: relative !important;
    }
    .form-header-bar,
    .page-header,
    #homeTopBar {
      display: flex !important;
      justify-content: space-between !important;
      align-items: center !important;
      min-height: 44px !important;
    }
    .form-header-bar::before,
    .form-header-bar::after,
    .page-header::before,
    .page-header::after {
      display: none !important;
      content: none !important;
    }

    /* –§–∏–Ω–∞–ª—å–Ω—ã–π CSS-—É–¥–∞—Ä (–ø—Ä–æ–±–∏–≤–∞–µ—Ç inline –∏ —Å–∫—Ä–∏–ø—Ç—ã) */
    #formNavBar,
    .form-header-bar,
    .form-nav-bar,
    .page-header,
    #homeTopBar,
    .header-container {
      background: transparent !important;
      background-color: transparent !important;
      box-shadow: none !important;
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
      padding: 8px 12px !important;
      min-height: 44px !important;
    }
    .header-title,
    .page-header-title,
    .app-title,
    span.header-title,
    div.header-title,
    .form-header-bar > span,
    .form-header-bar > div:not([class*="btn"]):not([class*="back"]):not([class*="menu"]) {
      display: none !important;
      visibility: hidden !important;
      width: 0 !important;
      height: 0 !important;
      overflow: hidden !important;
    }
    .profile-back-btn,
    .header-back-btn,
    .btn-nav,
    .profile-icon-btn,
    .header-menu-btn,
    .btn-info {
      display: flex !important;
      visibility: visible !important;
      opacity: 1 !important;
    }
  </style>
</head>
<body>
  <!-- –ü–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–µ–≤—å—é (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ) -->
  <div class="container">
    <div class="preview-nav" id="previewNav">
      <div style="font-weight:600;color:var(--primary-color);margin-bottom:8px">üé® –†–µ–∂–∏–º –ø—Ä–µ–≤—å—é</div>
      <div class="preview-nav-buttons">
        <button class="active" data-page="home">–ì–ª–∞–≤–Ω–∞—è</button>
        <button data-page="form">–§–æ—Ä–º–∞</button>
        <button data-page="payment">–û–ø–ª–∞—Ç–∞</button>
        <button data-page="loading">–ó–∞–≥—Ä—É–∑–∫–∞</button>
        <button data-page="success">–£—Å–ø–µ—Ö</button>
      </div>
    </div>
  </div>

  <!-- –û–Ω–±–æ—Ä–¥–∏–Ω–≥ ‚Äî —Ñ–æ—Ä–º–∞—Ç —Å—Ç–æ—Ä–∏—Å -->
  <!-- ‚îÄ‚îÄ –ì–µ–π—Ç-—ç–∫—Ä–∞–Ω: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â—ë –Ω–µ –Ω–∞–∂–∞–ª /start –≤ –±–æ—Ç–µ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div id="botGatePage" style="display:none;position:fixed;inset:0;z-index:9999;background:linear-gradient(165deg,#0a0818 0%,#130826 50%,#0d1525 100%);flex-direction:column;align-items:center;justify-content:center;padding:32px 28px;text-align:center;font-family:'Comfortaa',sans-serif;">
    <img src="assets/logo-yupsoul.png" alt="YupSoul" style="width:80px;height:80px;object-fit:contain;border-radius:50%;border:2px solid rgba(var(--primary-rgb),0.25);margin-bottom:28px;">
    <div style="font-size:1.4rem;font-weight:700;color:var(--primary-color);margin-bottom:12px;line-height:1.3;">–û–¥–∏–Ω —à–∞–≥ –¥–æ —Ç–≤–æ–µ–π –ø–µ—Å–Ω–∏</div>
    <div style="font-size:0.92rem;color:rgba(255,255,255,0.6);line-height:1.8;max-width:290px;margin-bottom:8px;">–ì–æ—Ç–æ–≤—É—é –ø–µ—Å–Ω—é –º—ã –æ—Ç–ø—Ä–∞–≤–∏–º —Ç–µ–±–µ –ø—Ä—è–º–æ –≤ Telegram.</div>
    <div style="font-size:0.92rem;color:rgba(255,255,255,0.45);line-height:1.8;max-width:290px;margin-bottom:32px;">–ß—Ç–æ–±—ã –±–æ—Ç –º–æ–≥ –Ω–∞–ø–∏—Å–∞—Ç—å —Ç–µ–±–µ ‚Äî –Ω–∞–∂–º–∏ ¬´–°—Ç–∞—Ä—Ç¬ª –≤ —á–∞—Ç–µ —Å –±–æ—Ç–æ–º. –û–¥–∏–Ω —Ä–∞–∑, –Ω–∞–≤—Å–µ–≥–¥–∞.</div>
    <button id="gateOpenBotBtn" type="button" style="width:100%;max-width:300px;padding:15px 24px;border-radius:14px;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));border:none;color:#fff;font-size:1rem;font-weight:700;cursor:pointer;font-family:inherit;box-shadow:0 6px 24px rgba(var(--primary-rgb),0.3);letter-spacing:0;margin-bottom:16px;">
      –ü–µ—Ä–µ–π—Ç–∏ –≤ –±–æ—Ç–∞ –∏ –Ω–∞–∂–∞—Ç—å –°—Ç–∞—Ä—Ç
    </button>
    <button id="gateCheckBtn" type="button" style="background:none;border:none;color:rgba(var(--primary-rgb),0.5);font-size:0.82rem;cursor:pointer;font-family:inherit;padding:8px 0;min-height:unset;box-shadow:none;animation:none;text-decoration:underline;text-underline-offset:3px;">
      –£–∂–µ –Ω–∞–∂–∞–ª –°—Ç–∞—Ä—Ç ‚Üí –≤–æ–π—Ç–∏
    </button>
  </div>
  <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->

  <div id="onboardingPage" style="display:none">

    <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã —Å—Ç–æ—Ä–∏—Å -->
    <div class="stories-bars">
      <div class="story-bar"><div class="story-bar-fill" id="storyBar1"></div></div>
      <div class="story-bar"><div class="story-bar-fill" id="storyBar2"></div></div>
      <div class="story-bar"><div class="story-bar-fill" id="storyBar3"></div></div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç—å -->
    <button class="stories-close" id="onboardingSkip" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>

    <!-- –ë—Ä–µ–Ω–¥-–±–ª–æ–∫: –ª–æ–≥–æ + —Å–ª–æ–≥–∞–Ω -->
    <div class="ob-brand">
      <img src="assets/logo-yupsoul.png" alt="YupSoul" class="ob-brand-logo" loading="lazy">
      <div class="ob-brand-divider"></div>
      <div class="ob-brand-tag">–ü–µ—Ä–≤—ã–π –≤ –º–∏—Ä–µ —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è –≤ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –º—É–∑—ã–∫—É</div>
    </div>

    <!-- –ó–æ–Ω—ã —Ç–∞–ø–∞: –≤–ª–µ–≤–æ = –Ω–∞–∑–∞–¥, –≤–ø—Ä–∞–≤–æ = –≤–ø–µ—Ä—ë–¥ -->
    <div class="stories-tap-prev" id="storiesTapPrev"></div>
    <div class="stories-tap-next" id="storiesTapNext"></div>

    <!-- –°–ª–∞–π–¥ 1 ‚Äî –û—Ç–∫—Ä—ã—Ç–∏–µ -->
    <div class="onboarding-slide active" data-step="1">
      <div class="ob-icon-wrap"><img src="assets/icons/music.png" alt="" loading="lazy"></div>
      <h2 class="onboarding-title" id="obTitle1">–ï—Å—Ç—å –ø–µ—Å–Ω—è ‚Äî –æ —Ç–µ–±–µ</h2>
      <p class="onboarding-text" id="obText1">–ù–∞–ø–∏—Å–∞–Ω–Ω–∞—è –ø–æ –¥–∞—Ç–µ —Ä–æ–∂–¥–µ–Ω–∏—è. –ù–µ —à–∞–±–ª–æ–Ω ‚Äî –∂–∏–≤–æ–π —Ç–µ–∫—Å—Ç –æ —Ç–≤–æ—ë–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–µ, —Å–∏–ª–µ –∏ –ø—É—Ç–∏.</p>
    </div>

    <!-- –°–ª–∞–π–¥ 2 ‚Äî –¶–µ–Ω–Ω–æ—Å—Ç—å -->
    <div class="onboarding-slide" data-step="2">
      <div class="ob-icon-wrap"><img src="assets/icons/profile.png" alt="" loading="lazy"></div>
      <h2 class="onboarding-title" id="obTitle2">–¢–æ–ª—å–∫–æ –æ —Ç–µ–±–µ</h2>
      <p class="onboarding-text" id="obText2">–ö–∞–∂–¥–∞—è ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω–∞. –ï—ë –±–æ–ª—å—à–µ –Ω–µ—Ç –Ω–∏ —É –∫–æ–≥–æ. –ù–∏ –æ–¥–Ω–∞ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è.</p>
    </div>

    <!-- –°–ª–∞–π–¥ 3 ‚Äî –ù–∞—á–∞—Ç—å -->
    <div class="onboarding-slide" data-step="3">
      <div class="ob-icon-wrap"><img src="assets/icons/lightning.png" alt="" loading="lazy"></div>
      <h2 class="onboarding-title" id="obTitle3">–ü–µ—Ä–≤–∞—è ‚Äî –≤ –ø–æ–¥–∞—Ä–æ–∫</h2>
      <p class="onboarding-text" id="obText3">–í–≤–µ–¥–∏ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è. –ü–µ—Å–Ω—è –ø—Ä–∏–¥—ë—Ç –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º.</p>
      <button class="onboarding-btn" id="onboardingStartBtn" style="display:none"></button>
    </div>

    <!-- –°–∫—Ä—ã—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å–æ —Å—Ç–∞—Ä—ã–º JS -->
    <div class="onboarding-dots" style="display:none">
      <button class="onboarding-dot active" data-step="1"></button>
      <button class="onboarding-dot" data-step="2"></button>
      <button class="onboarding-dot" data-step="3"></button>
    </div>
    <div class="onboarding-progress" style="display:none">
      <div class="onboarding-progress-bar" id="onboardingProgressBar"></div>
    </div>
  </div>

  <!-- –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
    <div class="page" id="homePage">

      <!-- –¢–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∏: —è–∑—ã–∫ —Å–ª–µ–≤–∞, –ø—Ä–æ—Ñ–∏–ª—å —Å–ø—Ä–∞–≤–∞, –±–µ–∑ –ø–∞–Ω–µ–ª–∏ –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ -->
      <div id="homeTopBar" style="display:flex;justify-content:space-between;align-items:center;padding:max(10px,env(safe-area-inset-top)) 16px 0;position:absolute;top:0;left:0;right:0;z-index:20;pointer-events:none;">
        <div class="home-topbar-slot" style="pointer-events:auto;">
          <div id="langSwitcher" class="lang-switcher-compact" aria-label="–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞">
            <button type="button" id="langSwitcherBtn" class="lang-switcher-btn home-topbar-btn btn-info header-menu-btn" title="–Ø–∑—ã–∫">
              <span id="langSwitcherIcon" aria-hidden="true">üåê</span>
              <span id="langSwitcherCurrent">RU</span>
            </button>
            <div id="langSwitcherDropdown" class="lang-dropdown" hidden>
              <button type="button" class="lang-opt" data-lang="ru">RU</button>
              <button type="button" class="lang-opt" data-lang="en">EN</button>
              <button type="button" class="lang-opt" data-lang="de">DE</button>
              <button type="button" class="lang-opt" data-lang="fr">FR</button>
            </div>
          </div>
        </div>
        <div class="home-topbar-slot" style="pointer-events:auto;">
          <button id="profileIconBtn" class="home-topbar-btn header-menu-btn btn-info" onclick="goToProfileFrom('homePage')" aria-label="–ü—Ä–æ—Ñ–∏–ª—å" title="–ü—Ä–æ—Ñ–∏–ª—å">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="8" r="4" fill="currentColor" opacity="0.9"/>
              <path d="M4 20c0-4 3.6-7 8-7s8 3 8 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" opacity="0.9"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- –õ–æ–≥–æ –∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ ‚Äî –ø–æ —Ü–µ–Ω—Ç—Ä—É -->
      <div id="homeHero">
        <img src="assets/logo-yupsoul.png" alt="YupSoul" class="app-logo" width="140" height="140">
        <div id="homeTagline" class="home-tagline">–ú—É–∑—ã–∫–∞ —Ç–≤–æ–µ–π –¥—É—à–∏</div>
        <p id="homeGreeting" class="home-greeting">–ü—Ä–∏–≤–µ—Ç</p>
        <button id="startBtn">–°–æ–∑–¥–∞—Ç—å —Å–≤–æ—é –ø–µ—Å–Ω—é</button>
      </div>

      <!-- –ù–∏–∂–Ω—è—è –∑–æ–Ω–∞ ‚Äî —Ç–∏—Ö–æ, –∫–æ–≥–¥–∞ –ø—É—Å—Ç–æ -->
      <div class="home-lower" style="flex-shrink:0;padding:var(--spacing-md) var(--spacing-md) max(var(--spacing-lg),env(safe-area-inset-bottom))">

      <!-- –ë–∞–Ω–Ω–µ—Ä –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è ‚Äî –º—è–≥–∫–æ, –±–µ–∑ –¥–∞–≤–ª–µ–Ω–∏—è -->
      <div id="recoveryBanner" style="display:none;margin:0 0 var(--spacing-md) 0;background:rgba(5,150,105,0.08);border:1px solid rgba(16,185,129,0.2);border-radius:var(--radius-md);padding:var(--spacing-md) var(--spacing-lg);position:relative;">
        <button id="recoveryDismissBtn" style="position:absolute;top:8px;right:10px;background:none;border:none;color:rgba(255,255,255,0.3);font-size:1rem;line-height:1;cursor:pointer;padding:2px 4px;min-height:unset;width:auto;box-shadow:none;animation:none;margin:0;font-weight:400;" title="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
        <div id="recoveryBannerText" style="font-size:0.88rem;color:rgba(209,250,229,0.85);line-height:1.5;margin-bottom:10px;padding-right:20px;">
          üéÅ <strong style="color:#6ee7b7;">–¢–≤–æ—è –∑–∞—è–≤–∫–∞ –∂–¥—ë—Ç!</strong> –ü–æ–ª—É—á–∏ –ø–µ—Ä–≤—É—é –ø–µ—Å–Ω—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ.
        </div>
        <button id="recoveryClaimBtn" style="width:100%;padding:12px 24px;border-radius:12px;background:linear-gradient(135deg,#059669,#10b981);border:none;color:#fff;font-size:0.95rem;font-weight:700;cursor:pointer;font-family:inherit;">
          üéÅ –ü–æ–ª—É—á–∏—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ
        </button>
      </div>

      <!-- –ê–¥–º–∏–Ω–∫–∞ ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤, –Ω–µ–Ω–∞–≤—è–∑—á–∏–≤–æ -->
      <div id="adminLinkWrap" style="display:none;margin-top:var(--spacing-lg);text-align:center">
        <button type="button" id="adminLinkBtn" onclick="goToPage('adminPage')" style="background:none;border:none;color:rgba(var(--primary-rgb),0.35);font-size:0.72rem;cursor:pointer;font-family:inherit;min-height:unset;box-shadow:none;animation:none;padding:6px 12px;margin:0;font-weight:400;letter-spacing:0.03em">üëë –ê–¥–º–∏–Ω–∫–∞</button>
      </div>

      <!-- –ü—Ä–æ—Ñ–∏–ª—å, –ü–æ–º–æ—â—å, –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è ‚Äî –±–µ–∑ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤, —Å—Ç–∏–ª–∏ –≤ CSS -->
      <nav class="home-nav">
        <button type="button" class="home-nav-link" onclick="goToSoulChat()">Soul Chat</button>
        <button type="button" id="goHelpBtn" class="home-nav-link" onclick="goToHelpFrom('homePage')">–ü–æ–º–æ—â—å</button>
        <button type="button" id="goHeroesBtn" class="home-nav-link" onclick="goToHeroesFrom('homePage')">–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è</button>
      </nav>

      </div><!-- /–Ω–∏–∂–Ω—è—è –æ–±—ë—Ä—Ç–∫–∞ -->

      <footer>
        <p>YupSoul ‚Ä¢ 2026 ‚Ä¢ v1.2.76</p>
      </footer>
    </div>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–º–æ—â–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ -->
    <div class="page" id="helpPage">
      <div class="help-header page-header">
        <div class="help-back-row">
          <button type="button" class="help-back-btn" onclick="goBack()" aria-label="–ù–∞–∑–∞–¥">‚Üê</button>
        </div>
        <div class="help-title-wrap">
          <div id="helpPageTitle" class="help-title">–ü–æ–º–æ—â—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞</div>
          <div id="helpPageSubtitle" class="help-subtitle">–í—Å—ë –æ YupSoul ‚Äî –ø—Ä–æ—Å—Ç–æ –∏ –ø–æ –¥–µ–ª—É</div>
        </div>
      </div>
      <div class="page-scroll" style="padding-top:12px">

        <!-- –ß—Ç–æ —Ç–∞–∫–æ–µ YupSoul -->
        <div class="help-section open">
          <button type="button" class="help-section-title" onclick="this.closest('.help-section').classList.toggle('open')">
            <span class="hst-icon">üåü</span><span id="helpT1" style="flex:1">–ß—Ç–æ —Ç–∞–∫–æ–µ YupSoul</span><span class="hst-chevron">‚ñº</span>
          </button>
          <div id="helpB1" class="help-section-body">
            <p>YupSoul —Å–æ–∑–¥–∞—ë—Ç <strong>–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –ø–µ—Å–Ω—é –∏–º–µ–Ω–Ω–æ –¥–ª—è —Ç–µ–±—è</strong> ‚Äî –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞—Ç—ã, –≤—Ä–µ–º–µ–Ω–∏ –∏ –º–µ—Å—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è. –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–≤–æ—é –ª–∏—á–Ω–æ—Å—Ç—å –∏ –ø–∏—à–µ—Ç –ø–µ—Å–Ω—é –æ —Ç–≤–æ–∏—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–∞—á–µ—Å—Ç–≤–∞—Ö, –ø—É—Ç–∏ –∏ —Å–∏–ª–µ.</p>
            <p>–≠—Ç–æ –Ω–µ —à–∞–±–ª–æ–Ω –∏ –Ω–µ —Å–ª—É—á–∞–π–Ω—ã–π —Ç–µ–∫—Å—Ç ‚Äî –∫–∞–∂–¥–∞—è –ø–µ—Å–Ω—è —É–Ω–∏–∫–∞–ª—å–Ω–∞ –∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–µ–±–µ.</p>
          </div>
        </div>

        <!-- –ß—Ç–æ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å -->
        <div class="help-section">
          <button type="button" class="help-section-title" onclick="this.closest('.help-section').classList.toggle('open')">
            <span class="hst-icon">üéµ</span><span id="helpT2" style="flex:1">–ß—Ç–æ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å</span><span class="hst-chevron">‚ñº</span>
          </button>
          <div id="helpB2" class="help-section-body">
            <ul>
              <li><strong>–ü–µ—Å–Ω—è –æ —Å–µ–±–µ</strong> ‚Äî —Ç–≤–æ–π –ª–∏—á–Ω—ã–π –∑–≤—É–∫–æ–≤–æ–π –ø–æ—Ä—Ç—Ä–µ—Ç: –∫—Ç–æ —Ç—ã, —Ç–≤–æ—è —Å–∏–ª–∞ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—É—Ç—å</li>
              <li><strong>–ü–µ—Å–Ω—è –¥–ª—è –ø–∞—Ä—ã</strong> ‚Äî –¥–ª—è –¥–≤–æ–∏—Ö (–≤–ª—é–±–ª—ë–Ω–Ω—ã—Ö, –¥—Ä—É–∑–µ–π, –ø–æ–¥—Ä—É–≥). –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ–±–µ –∫–∞—Ä—Ç—ã –∏ –æ—Ç—Ä–∞–∂–∞–µ—Ç —Å–æ—é–∑</li>
              <li><strong>–≠–Ω–µ—Ä–≥–∏—è –¥–Ω—è</strong> ‚Äî –ø–µ—Å–Ω—è –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É –∏ –º–µ—Å—Ç–æ. –ö–∞–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å</li>
            </ul>
            <p>–¢–∞–∫–∂–µ –µ—Å—Ç—å <strong>–±—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã</strong> ‚Äî –≥–æ—Ç–æ–≤—ã–µ –∏–¥–µ–∏: –ø–µ—Å–Ω—è —Å–∏–ª—ã, –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è, –º–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω–∞—è, –ø—Ä–æ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ –ø—Ä–æ—à–ª–æ–≥–æ –∏ –¥—Ä—É–≥–∏–µ.</p>
          </div>
        </div>

        <!-- –°–∫–æ–ª—å–∫–æ –∂–¥–∞—Ç—å -->
        <div class="help-section">
          <button type="button" class="help-section-title" onclick="this.closest('.help-section').classList.toggle('open')">
            <span class="hst-icon">‚è±</span><span id="helpT3" style="flex:1">–°–∫–æ–ª—å–∫–æ –∂–¥–∞—Ç—å –ø–µ—Å–Ω—é</span><span class="hst-chevron">‚ñº</span>
          </button>
          <div id="helpB3" class="help-section-body">
            <p>–û–±—ã—á–Ω–æ <strong>5‚Äì15 –º–∏–Ω—É—Ç</strong>. –ë–æ—Ç –ø—Ä–∏—à–ª—ë—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ —á–∞—Ç, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –ø–µ—Å–Ω—è –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞.</p>
            <p>–ú–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏–¥—ë—Ç —Å–∞–º, —Ç—ã –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ—Ç–µ—Ä—è–µ—à—å.</p>
          </div>
        </div>

        <!-- –ù–µ –∑–Ω–∞—é –≤—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è -->
        <div class="help-section">
          <button type="button" class="help-section-title" onclick="this.closest('.help-section').classList.toggle('open')">
            <span class="hst-icon">üïê</span><span id="helpT4" style="flex:1">–ù–µ –∑–Ω–∞—é —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è</span><span class="hst-chevron">‚ñº</span>
          </button>
          <div id="helpB4" class="help-section-body">
            <p>–ù–µ —Å—Ç—Ä–∞—à–Ω–æ. –û—Ç–º–µ—Ç—å <strong>¬´–í—Ä–µ–º—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ¬ª</strong> ‚Äî —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—Å—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –ø–µ—Å–Ω—é –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.</p>
          </div>
        </div>

        <!-- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ -->
        <div class="help-section">
          <button type="button" class="help-section-title" onclick="this.closest('.help-section').classList.toggle('open')">
            <span class="hst-icon">üéÅ</span><span id="helpT5" style="flex:1">–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</span><span class="hst-chevron">‚ñº</span>
          </button>
          <div id="helpB5" class="help-section-body">
            <p><strong>–ü–µ—Ä–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω–æ.</strong></p>
            <p>–ü–æ–ª—É—á–∏—Ç—å –µ—â—ë –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É: –ø–æ–¥–µ–ª–∏—Å—å —Å–≤–æ–µ–π —Å—Å—ã–ª–∫–æ–π. –ö–æ–≥–¥–∞ 5 –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω—ã—Ö —Ç–æ–±–æ–π –¥—Ä—É–∑–µ–π —Å–æ–∑–¥–∞–¥—É—Ç –ø–µ—Ä–≤—É—é –ø–µ—Å–Ω—é ‚Äî —Ç–µ–±–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏—Å–ª–∏—Ç—Å—è 1 –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è.</p>
            <p>–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ ‚Äî –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´–ü—Ä–æ—Ñ–∏–ª—å¬ª, –±–ª–æ–∫ ¬´–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞¬ª.</p>
          </div>
        </div>

        <!-- –û–ø–ª–∞—Ç–∞ -->
        <div class="help-section">
          <button type="button" class="help-section-title" onclick="this.closest('.help-section').classList.toggle('open')">
            <span class="hst-icon">üí≥</span><span id="helpT6" style="flex:1">–û–ø–ª–∞—Ç–∞ –∏ –ø—Ä–æ–º–æ–∫–æ–¥—ã</span><span class="hst-chevron">‚ñº</span>
          </button>
          <div id="helpB6" class="help-section-body">
            <p>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–ø–ª–∞—á–∏–≤–∞—é—Ç—Å—è –ø–æ —Ç–∞—Ä–∏—Ñ—É. –°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞—è–≤–∫–∏.</p>
            <p>–ï—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å <strong>–ø—Ä–æ–º–æ–∫–æ–¥</strong> ‚Äî –≤–≤–µ–¥–∏ –µ–≥–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –æ–ø–ª–∞—Ç—ã. –ü—Ä–æ–º–æ–∫–æ–¥—ã —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É, –≤–≤–æ–¥–∏ —Ç–æ—á–Ω–æ –∫–∞–∫ –Ω–∞–ø–∏—Å–∞–Ω–æ.</p>
          </div>
        </div>

        <!-- –ü—Ä–æ–±–ª–µ–º—ã –∏ –æ—à–∏–±–∫–∏ -->
        <div class="help-section">
          <button type="button" class="help-section-title" onclick="this.closest('.help-section').classList.toggle('open')">
            <span class="hst-icon">‚ö†Ô∏è</span><span id="helpT7" style="flex:1">–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫</span><span class="hst-chevron">‚ñº</span>
          </button>
          <div id="helpB7" class="help-section-body">
            <p><strong>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–∫—Ä—ã–ª–æ—Å—å –∏–ª–∏ –ø–æ–∫–∞–∑–∞–ª–æ –æ—à–∏–±–∫—É</strong> ‚Äî –ø–æ–ø—Ä–æ–±—É–π –æ—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞ –∑–∞–Ω–æ–≤–æ. –ù–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</p>
            <p><strong>–û–ø–ª–∞—Ç–∏–ª, –Ω–æ –ø–µ—Å–Ω–∏ –Ω–µ—Ç</strong> ‚Äî –ø–æ–¥–æ–∂–¥–∏ 15‚Äì20 –º–∏–Ω—É—Ç (–ø–µ—Å–Ω—è –º–æ–∂–µ—Ç –µ—â—ë –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è). –ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–µ—Ç ‚Äî –Ω–∞–ø–∏—à–∏ –±–æ—Ç—É –≤ —á–∞—Ç: ¬´–ø–µ—Å–Ω—è –Ω–µ –ø—Ä–∏—à–ª–∞¬ª ‚Äî –æ–Ω –ø–æ–ø—Ä–æ–±—É–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ. –ü–æ–≤—Ç–æ—Ä–Ω—É—é –ø–æ–ø—ã—Ç–∫—É –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Ä–∞–∑ –≤ 10 –º–∏–Ω—É—Ç. –î–µ–π—Å—Ç–≤—É–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 30 –¥–Ω–µ–π –ø–æ—Å–ª–µ –∑–∞–∫–∞–∑–∞. –ò–ª–∏ –Ω–∞–ø–∏—à–∏ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.</p>
            <p><strong>–ü—Ä–æ–º–æ–∫–æ–¥ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è</strong> ‚Äî –ø—Ä–æ–≤–µ—Ä—å —Ä–µ–≥–∏—Å—Ç—Ä –±—É–∫–≤. –ï—Å–ª–∏ –≤—Å—ë –≤–µ—Ä–Ω–æ ‚Äî –Ω–∞–ø–∏—à–∏ –Ω–∞–º —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–¥–∞.</p>
          </div>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ -->
        <button type="button" class="help-support-btn" id="helpSupportBtn">üí¨ –ù–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É</button>

      </div>
    </div>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ ¬´–ü—Ä–æ—Ñ–∏–ª—å¬ª -->
    <div class="page" id="profilePage">
      <!-- –®–∞–ø–∫–∞: –ù–∞–∑–∞–¥, –∑–∞–≥–æ–ª–æ–≤–æ–∫ ¬´–ü—Ä–æ—Ñ–∏–ª—å¬ª, —Å–ø—Ä–∞–≤–∞ ‚Äî –ü–æ–º–æ—â—å (–∏–∫–æ–Ω–∫–∞ ?) -->
      <div class="profile-header">
        <button type="button" class="profile-back-btn header-back-btn btn-nav" onclick="goBack()" aria-label="–ù–∞–∑–∞–¥">‚Üê</button>
        <div id="profilePageTitle" class="profile-header-title">–ü—Ä–æ—Ñ–∏–ª—å</div>
        <button type="button" class="header-menu-btn btn-info" onclick="goToHelpFrom('profilePage')" aria-label="–ü–æ–º–æ—â—å" title="–ü–æ–º–æ—â—å">?</button>
      </div>

      <div class="profile-scroll page-scroll">
        <!-- –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è / –ø–æ–¥–ø–∏—Å–∫–∏ -->
        <div id="profileLoadErrorWrap" style="display:none;margin-bottom:16px;padding:14px 16px;background:rgba(var(--secondary-rgb),0.08);border:1px solid rgba(var(--secondary-rgb),0.25);border-radius:14px;">
          <div id="profileLoadErrorText" style="font-size:0.88rem;color:rgba(255,255,255,0.75);line-height:1.5;margin-bottom:12px;">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.</div>
          <button type="button" id="profileLoadRetryBtn" style="width:100%;padding:10px 16px;border-radius:12px;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.2);color:rgba(255,255,255,0.9);font-size:0.88rem;font-weight:600;cursor:pointer;font-family:inherit;">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
        </div>
        <!-- –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: –∞–≤–∞—Ç–∞—Ä + –∏–º—è + –ø–ª–∞–Ω -->
        <div class="profile-identity">
          <div class="profile-avatar-wrap" id="profileAvatarWrap" title="–ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ" role="button" aria-label="–ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ" tabindex="0">
            <div id="profileAvatar" class="profile-avatar">
              <span id="profileAvatarInitial">üë§</span>
            </div>
            <div class="profile-avatar-edit">‚úé</div>
            <div class="profile-avatar-spinner" id="profileAvatarSpinner">‚Ä¶</div>
          </div>
          <!-- –°–∫—Ä—ã—Ç—ã–π input –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–æ—Ç–æ -->
          <input type="file" id="avatarFileInput" accept="image/*" style="display:none">
          <div id="profileName" class="profile-name">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</div>
          <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap;justify-content:center;">
            <div id="profilePlanBadge" class="profile-plan-badge">‚ú¶ YupSoul Free</div>
          </div>
        </div>

        <!-- –ë–∞–ª–∞–Ω—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–π -->
        <div class="profile-balance-card">
          <div class="profile-balance-left">
            <div id="profileBalanceLabel" class="profile-balance-label">–ë–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π</div>
            <div id="profileCreditsCount" class="profile-balance-value">‚Äî</div>
            <div id="profileBalanceHintText" class="profile-balance-hint">–ü—Ä–∏–≥–ª–∞—à–∞–π –¥—Ä—É–∑–µ–π ‚Äî –ø–æ–ª—É—á–∞–π —Ç—Ä–µ–∫–∏ –≤ –ø–æ–¥–∞—Ä–æ–∫</div>
            <div id="profileRenewalDate" class="profile-balance-hint" style="display:none;color:rgba(var(--primary-rgb),0.75);margin-top:4px;font-weight:600;"></div>
          </div>
          <div class="profile-balance-icon"><img src="assets/icons/music.png" style="width:32px;height:32px;object-fit:contain;display:block;opacity:0.85;" alt="" loading="lazy"></div>
        </div>

        <!-- –ú–æ–∏ –¥–∞–Ω–Ω—ã–µ -->
        <div id="profileSectionMyData" class="profile-section-title">–ú–æ–∏ –¥–∞–Ω–Ω—ã–µ</div>
        <div id="profileDataCard">
          <div class="pfa-info">
            <svg class="pfa-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2"/><path d="M4 20c0-4 3.6-7 8-7s8 3 8 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            <span id="profileDataName" class="pfa-name">‚Äî</span>
            <span id="profileDataSep" class="pfa-sep" style="display:none;">¬∑</span>
            <span id="profileDataDate" class="pfa-date"></span>
            <span id="profileDataCitySep" class="pfa-sep" style="display:none;">¬∑</span>
            <span id="profileDataCity" class="pfa-date" style="color:rgba(255,255,255,0.35);"></span>
          </div>
          <button type="button" id="profileEditBtn" onclick="goToPage('formPage')">–ò–∑–º–µ–Ω–∏—Ç—å ‚Üí</button>
        </div>

        <!-- –¢–∞—Ä–∏—Ñ—ã -->
        <div id="profileSectionPlans" class="profile-section-title">–¢–∞—Ä–∏—Ñ—ã</div>
        <div class="profile-plans-grid">
          <!-- Free -->
          <div class="profile-plan-card current" id="planCardFree">
            <div id="planFreeBadge" class="ppc-badge">–¢–µ–∫—É—â–∏–π</div>
            <div class="ppc-name">Free</div>
            <div class="ppc-features">
              <div class="ppc-feature"><span id="planFreeF1">‚ú¶ 1 —Ç—Ä–µ–∫ –≤ –ø–æ–¥–∞—Ä–æ–∫</span> <i class="ppc-info" data-tip="–ü–µ—Ä–≤–∞—è –ø–µ—Å–Ω—è —Å–æ–∑–¥–∞—ë—Ç—Å—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ ‚Äî –±–µ–∑ —É—Å–ª–æ–≤–∏–π –∏ —Å–∫—Ä—ã—Ç—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π.">i</i></div>
              <div class="ppc-feature"><span id="planFreeF2">‚ú¶ –í—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã</span> <i class="ppc-info" data-tip="–î–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ —Ç—Ä–∏ —Ñ–æ—Ä–º–∞—Ç–∞: –î–ª—è —Å–µ–±—è, –î–ª—è –¥–≤–æ–∏—Ö –∏ –≠–Ω–µ—Ä–≥–∏—è –¥–Ω—è.">i</i></div>
            </div>
            <div id="planFreePrice" class="ppc-price">–£–∂–µ —É —Ç–µ–±—è</div>
          </div>
          <!-- Soul Basic -->
          <div class="profile-plan-card" id="planCardBasic">
            <div class="ppc-badge" style="visibility:hidden">‚Äî</div>
            <div class="ppc-name">Basic</div>
            <div class="ppc-features">
              <div class="ppc-feature"><span id="planBasicF1">‚ú¶ 5 —Ç—Ä–µ–∫–æ–≤/–º–µ—Å</span> <i class="ppc-info" data-tip="5 –Ω–æ–≤—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–µ—Å–µ–Ω –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü. –†–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ ‚Äî $5.99/—Ç—Ä–µ–∫. –ü–æ –ø–æ–¥–ø–∏—Å–∫–µ –≤—ã—Ö–æ–¥–∏—Ç $3/—Ç—Ä–µ–∫. –≠–∫–æ–Ω–æ–º–∏—è 50%.">i</i></div>
              <div class="ppc-feature"><span id="planBasicF2">‚ú¶ Soul Chat (–¥–æ 50 —Å–æ–æ–±—â/–º–µ—Å)</span> <i class="ppc-info" data-tip="Soul Chat ‚Äî –∂–∏–≤–æ–π —Ä–∞–∑–≥–æ–≤–æ—Ä —Å —Ç–≤–æ–µ–π –¥—É—à–æ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–≤–æ–∏—Ö –ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ó–∞–¥–∞–≤–∞–π –≤–æ–ø—Ä–æ—Å—ã –æ —Å–µ–±–µ, —Å–≤–æ—ë–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–µ, –ø—É—Ç–∏ –∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏. –î–æ 50 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–µ—Å—è—Ü.">i</i></div>
              <div class="ppc-feature"><span id="planBasicF3">‚ú¶ –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</span> <i class="ppc-info" data-tip="–í—Å–µ —Ç–≤–æ–∏ –ø–µ—Å–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏. –ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è, –ø–µ—Ä–µ—Å–ª—É—à–∞—Ç—å –∏ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è.">i</i></div>
            </div>
            <div class="ppc-price-wrap">
              <div class="ppc-price">$14.99/–º–µ—Å</div>
              <div id="planBasicSave" class="ppc-save">‚àí50% vs —Ä–∞–∑–æ–≤—ã—Ö</div>
            </div>
            <button class="ppc-btn" id="planBtnBasic">–û—Ñ–æ—Ä–º–∏—Ç—å</button>
            <button class="ppc-details-btn" id="planDetailsBasic" onclick="openPlanDetails('basic')">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
          </div>
          <!-- Soul Plus -->
          <div class="profile-plan-card popular" id="planCardPlus">
            <div id="planPlusBadge" class="ppc-badge hot">‚ú¶ –ü–æ–ø—É–ª—è—Ä–Ω—ã–π</div>
            <div class="ppc-name">Plus</div>
            <div class="ppc-features">
              <div class="ppc-feature"><span id="planPlusF1">‚ú¶ 10 —Ç—Ä–µ–∫–æ–≤/–º–µ—Å</span> <i class="ppc-info" data-tip="10 –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–µ—Å–µ–Ω –≤ –º–µ—Å—è—Ü. –†–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ ‚Äî $5.99/—Ç—Ä–µ–∫. –ü–æ –ø–æ–¥–ø–∏—Å–∫–µ –≤—ã—Ö–æ–¥–∏—Ç $2.5/—Ç—Ä–µ–∫. –≠–∫–æ–Ω–æ–º–∏—è 58%.">i</i></div>
              <div class="ppc-feature"><span id="planPlusF2">‚ú¶ Soul Chat –±–µ–∑ –ª–∏–º–∏—Ç–∞</span> <i class="ppc-info" data-tip="Soul Chat ‚Äî –∂–∏–≤–æ–π —Ä–∞–∑–≥–æ–≤–æ—Ä —Å —Ç–≤–æ–µ–π –¥—É—à–æ–π. –í Plus ‚Äî –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å–µ—Å—Å–∏–π. –û–±—â–∞–π—Å—è –∫–æ–≥–¥–∞ —É–≥–æ–¥–Ω–æ.">i</i></div>
              <div class="ppc-feature"><span id="planPlusF3">‚ú¶ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏</span> <i class="ppc-info" data-tip="–¢–≤–æ–∏ –∑–∞—è–≤–∫–∏ –∏–¥—É—Ç –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å ‚Äî –ø–µ—Å–Ω—è –≥–æ—Ç–æ–≤–∞ –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º —É –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.">i</i></div>
              <div class="ppc-feature"><span id="planPlusF4">‚ú¶ –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–µ–∫–æ–≤</span> <i class="ppc-info" data-tip="–í—Å–µ —Ç–≤–æ–∏ –ø–µ—Å–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å —Ç–µ–∫—Å—Ç–∞–º–∏, –∞—É–¥–∏–æ –∏ –¥–∞—Ç–∞–º–∏ —Å–æ–∑–¥–∞–Ω–∏—è ‚Äî –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –ø—Ä–æ—Ñ–∏–ª–µ.">i</i></div>
              <div class="ppc-feature"><span id="planPlusF5">‚ú¶ –í—ã–±–æ—Ä —Å—Ç–∏–ª–µ–π –º—É–∑—ã–∫–∏</span> <i class="ppc-info" data-tip="–£–∫–∞–∂–∏ –∂–µ–ª–∞–µ–º—ã–π –∂–∞–Ω—Ä –∏–ª–∏ —Å—Ç–∏–ª—å (–ø–æ–ø, —Å–æ—É–ª, –¥–∂–∞–∑, —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –∏ —Ç.–¥.) ‚Äî –ø–µ—Å–Ω—è –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –≤ —ç—Ç–æ–º –∑–≤—É—á–∞–Ω–∏–∏.">i</i></div>
            </div>
            <div class="ppc-price-wrap">
              <div class="ppc-price">$24.99/–º–µ—Å</div>
              <div id="planPlusSave" class="ppc-save">‚àí58% vs —Ä–∞–∑–æ–≤—ã—Ö</div>
            </div>
            <button class="ppc-btn popular-btn" id="planBtnPlus">–û—Ñ–æ—Ä–º–∏—Ç—å</button>
            <button class="ppc-details-btn" id="planDetailsPlus" onclick="openPlanDetails('plus')">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
          </div>
          <!-- –ú–∞—Å—Ç–µ—Ä ‚Äî –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è -->
          <div class="profile-plan-card master" id="planCardMaster">
            <div id="planMasterBadge" class="ppc-badge master-badge">–ú–∞—Å—Ç–µ—Ä</div>
            <div id="planMasterName" class="ppc-name">–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è</div>
            <div class="ppc-features">
              <div class="ppc-feature"><span id="planMasterF1">‚ú¶ 30 —Ç—Ä–µ–∫–æ–≤/–º–µ—Å</span> <i class="ppc-info" data-tip="30 –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–µ—Å–µ–Ω –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü ‚Äî –¥–ª—è —Å–µ–±—è –∏ –¥–ª—è –±–ª–∏–∑–∫–∏—Ö. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä—ë–º.">i</i></div>
              <div class="ppc-feature"><span id="planMasterF2">‚ú¶ –ö–∞—Ä—Ç–æ—Ç–µ–∫–∞ –ª—é–¥–µ–π</span> <i class="ppc-info" data-tip="–î–æ–±–∞–≤–ª—è–π –±–ª–∏–∑–∫–∏—Ö –≤ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—é –∏ —Å–æ–∑–¥–∞–≤–∞–π –¥–ª—è –Ω–∏—Ö –ø–µ—Å–Ω–∏ –≤ –æ–¥–∏–Ω —Ç–∞–ø. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è ‚Äî –≤–≤–æ–¥–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –Ω–µ –Ω—É–∂–Ω–æ.">i</i></div>
              <div class="ppc-feature"><span id="planMasterF3">‚ú¶ –ò—Å—Ç–æ—Ä–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–π</span> <i class="ppc-info" data-tip="–ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–µ—Å–µ–Ω —Å —Ç–µ–∫—Å—Ç–∞–º–∏, –∞—É–¥–∏–æ –∏ –¥–∞—Ç–∞–º–∏ ‚Äî –¥–ª—è —Ç–µ–±—è –∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ —Ç–≤–æ–∏—Ö –ª—é–¥–µ–π.">i</i></div>
              <div class="ppc-feature"><span id="planMasterF4">‚ú¶ Soul Chat –±–µ–∑ –ª–∏–º–∏—Ç–∞</span> <i class="ppc-info" data-tip="–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ Soul Chat ‚Äî —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–π —Å –¥—É—à–æ–π —Å—Ç–æ–ª—å–∫–æ, —Å–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ.">i</i></div>
              <div class="ppc-feature"><span id="planMasterF5">‚ú¶ –í—ã–±–æ—Ä —Å—Ç–∏–ª–µ–π –º—É–∑—ã–∫–∏</span> <i class="ppc-info" data-tip="–£–∫–∞–∂–∏ –∂–µ–ª–∞–µ–º—ã–π –∂–∞–Ω—Ä –∏–ª–∏ —Å—Ç–∏–ª—å (–ø–æ–ø, —Å–æ—É–ª, –¥–∂–∞–∑, —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –∏ —Ç.–¥.) ‚Äî –ø–µ—Å–Ω—è –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –≤ —ç—Ç–æ–º –∑–≤—É—á–∞–Ω–∏–∏.">i</i></div>
            </div>
            <div class="ppc-price-wrap">
              <div class="ppc-price" id="masterPriceEl">$39.99/–º–µ—Å</div>
              <div id="planMasterSave" class="ppc-save">‚àí83% vs —Ä–∞–∑–æ–≤—ã—Ö</div>
            </div>
            <button class="ppc-btn master-btn" id="planBtnMaster">–û—Ç–∫—Ä—ã—Ç—å –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—é</button>
            <button class="ppc-details-btn" id="planDetailsMaster" onclick="openPlanDetails('master')">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
          </div>
        </div>

        <!-- –†–∞–∑–æ–≤—ã–µ —Ç—Ä–µ–∫–∏ -->
        <div id="profileSectionTracks" class="profile-section-title" style="margin-top:24px">–†–∞–∑–æ–≤—ã–µ —Ç—Ä–µ–∫–∏</div>
        <div class="profile-track-list">
          <div class="profile-track-item" onclick="goToPage('formPage');setTimeout(function(){var b=document.querySelector('.mode-btn[data-mode=\'single\']');if(b){b.click();}},100)">
            <div>
              <div id="ptiSingleName" class="pti-name">–î–ª—è —Å–µ–±—è</div>
              <div id="ptiSingleDesc" class="pti-desc">–¢–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –≤ –∑–≤—É–∫–µ</div>
            </div>
            <div class="pti-right"><div class="pti-price">$5.99</div><div class="pti-arrow">‚Ä∫</div></div>
          </div>
          <div class="profile-track-item" onclick="goToPage('formPage');setTimeout(function(){var b=document.querySelector('.mode-btn[data-mode=\'couple\']');if(b){b.click();}},100)">
            <div>
              <div id="ptiCoupleName" class="pti-name">–î–ª—è –¥–≤–æ–∏—Ö</div>
              <div id="ptiCoupleDesc" class="pti-desc">–í–∞—à–∞ —Å–≤—è–∑—å –∏ —Ä–µ–∑–æ–Ω–∞–Ω—Å</div>
            </div>
            <div class="pti-right"><div class="pti-price">$8.99</div><div class="pti-arrow">‚Ä∫</div></div>
          </div>
          <div class="profile-track-item" onclick="goToPage('formPage');setTimeout(function(){var b=document.querySelector('.mode-btn[data-mode=\'transit\']');if(b){b.click();}},100)">
            <div>
              <div id="ptiTransitName" class="pti-name">–≠–Ω–µ—Ä–≥–∏—è –¥–Ω—è</div>
              <div id="ptiTransitDesc" class="pti-desc">–ü–µ—Å–Ω—è –ø–æ–¥ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å</div>
            </div>
            <div class="pti-right"><div class="pti-price">$6.99</div><div class="pti-arrow">‚Ä∫</div></div>
          </div>
        </div>

        <!-- –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ -->
        <div class="profile-referral-section">
          <div class="profile-section-title">
            <div style="width:18px;height:18px;border-radius:5px;overflow:hidden;background:#fdf8ec;box-shadow:0 1px 4px rgba(0,0,0,0.2);flex-shrink:0;display:inline-flex;align-items:center;justify-content:center;"><img src="assets/icons/forward.png" style="width:100%;height:100%;object-fit:contain;display:block;padding:2px;box-sizing:border-box;" alt="" loading="lazy"></div>
            <span id="profileInviteFriendTitle">–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞</span>
          </div>
          <div id="profileRefTagline" class="profile-ref-tagline">–ü—Ä–∏–≥–ª–∞—à–∞–π –¥—Ä—É–∑–µ–π ‚Äî –ø–æ–ª—É—á–∞–π –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø–µ—Å–Ω–∏ –ø–æ –Ω–∞—Ä–∞—Å—Ç–∞—é—â–µ–π</div>
          <div class="profile-ref-milestones">
            <div class="ref-milestone" data-n="1"><span class="ref-mi-num">1</span><span class="ref-mi-label">–¥—Ä—É–≥</span></div>
            <div class="ref-milestone-arrow">‚Üí</div>
            <div class="ref-milestone" data-n="3"><span class="ref-mi-num">3</span><span class="ref-mi-label">–¥—Ä—É–≥–∞</span></div>
            <div class="ref-milestone-arrow">‚Üí</div>
            <div class="ref-milestone" data-n="5"><span class="ref-mi-num">5</span><span class="ref-mi-label">–¥—Ä—É–∑–µ–π</span></div>
            <div class="ref-milestone-arrow">‚Üí</div>
            <div class="ref-milestone" data-n="10"><span class="ref-mi-num">10</span><span class="ref-mi-label">–¥—Ä—É–∑–µ–π</span></div>
            <div class="ref-milestone-arrow">‚Üí</div>
            <div class="ref-milestone" data-n="15"><span class="ref-mi-num">15</span><span class="ref-mi-label">–¥—Ä—É–∑–µ–π</span></div>
          </div>
          <div class="profile-ref-link-row">
            <input id="profileRefLinkInput" readonly placeholder="–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶">
          </div>
          <button type="button" id="profileRefShareBtn" class="profile-ref-share-btn">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π</button>
          <div class="profile-ref-stats">
            <span><strong id="profileRefInvited">0</strong><span id="profileRefInvitedLabel" class="profile-ref-stats-label">–ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ</span></span>
            <span><strong id="profileRefRewarded">0</strong><span id="profileRefActivatedLabel" class="profile-ref-stats-label">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ</span></span>
          </div>
          <div id="profileRefNextHint" style="font-size:0.72rem;color:rgba(var(--primary-rgb),0.6);text-align:center;margin-top:6px;"></div>
        </div>

        <!-- –î–µ–π—Å—Ç–≤–∏—è -->
        <button type="button" id="profileCreateSongBtn" class="profile-create-btn">
          –°–æ–∑–¥–∞—Ç—å —Å–≤–æ—é –ø–µ—Å–Ω—é
        </button>
        <button type="button" id="profileHelpBtn" class="secondary" onclick="goToHelpFrom('profilePage')" style="width:100%;margin-bottom:16px;background:transparent;border-color:rgba(255,255,255,0.1);color:rgba(255,255,255,0.4);font-size:0.82rem;">–ü–æ–º–æ—â—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞</button>
      </div>
    </div>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ ¬´–ú–æ–∏ –≥–µ—Ä–æ–∏¬ª (—Ç–∞—Ä–∏—Ñ –ú–∞—Å—Ç–µ—Ä) -->
    <div class="page" id="heroesPage">
      <!-- –®–∞–ø–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
      <div class="page-header" style="padding:max(20px,calc(env(safe-area-inset-top)+12px)) 18px 12px; display:flex; align-items:center; gap:12px;">
        <button type="button" id="heroesBackBtn" style="background:none;border:none;color:rgba(255,255,255,0.5);font-size:1.4rem;cursor:pointer;padding:4px 8px;min-height:unset;width:auto;box-shadow:none;animation:none;margin:0;line-height:1">‚Üê</button>
        <div style="flex:1">
          <div id="heroesPageTitle" style="font-size:1.15rem;font-weight:700;color:#fff;line-height:1.2">–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è</div>
          <div style="font-size:0.75rem;color:rgba(var(--primary-rgb),0.65);margin-top:2px" id="masterAccessBadge"></div>
        </div>
      </div>

      <!-- Paywall (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –µ—Å–ª–∏ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞) -->
      <div id="masterPaywall" class="page-scroll" style="display:none; padding-top:28px;">
        <div style="text-align:center; margin-bottom:20px">
          <div style="font-size:2rem;margin-bottom:12px;color:var(--primary-color);letter-spacing:0.1em">‚ú¶</div>
          <div id="heroesPromoHeading" style="font-size:1.2rem;font-weight:700;color:var(--primary-color);margin-bottom:8px">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –¥–ª—è –º–∞—Å—Ç–µ—Ä–æ–≤</div>
          <div id="heroesPromoDesc" style="font-size:0.85rem;color:rgba(255,255,255,0.5);line-height:1.6">–î–æ–±–∞–≤–ª—è–π –ª—é–¥–µ–π –æ–¥–∏–Ω —Ä–∞–∑ ‚Äî –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–π –¥–ª—è –Ω–∏—Ö<br>–ø–µ—Å–Ω–∏ –≤ –æ–¥–∏–Ω —Ç–∞–ø. –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —Å —Ç–µ–∫—Å—Ç–∞–º–∏.</div>
        </div>
        <div style="background:rgba(var(--primary-rgb),0.06);border:1px solid rgba(var(--primary-rgb),0.18);border-radius:14px;padding:16px;margin-bottom:22px;font-size:0.82rem;color:rgba(255,255,255,0.55);line-height:1.65">
          <div id="heroesPromoFeaturesTitle" style="color:var(--primary-color);font-weight:600;margin-bottom:8px">–ß—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ —Ç–∞—Ä–∏—Ñ:</div>
          <div id="heroesF1">‚ú¶ –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ –≥–µ—Ä–æ–µ–≤</div>
          <div id="heroesF2">‚ú¶ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ —Å–æ–ª–æ –∏ —Å–æ–≤–º–µ—Å—Ç–Ω—ã—Ö –ø–µ—Å–µ–Ω</div>
          <div id="heroesF3">‚ú¶ –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ —Å—Ç–∏–ª—é –º—É–∑—ã–∫–∏</div>
          <div id="heroesF4">‚ú¶ –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–π —Å —Ç–µ–∫—Å—Ç–∞–º–∏ –∏ –∞–Ω–∞–ª–∏–∑–æ–º</div>
          <div id="heroesF5">‚ú¶ –ê—É–¥–∏–æ –ø—Ä—è–º–æ –∏–∑ –∫–∞—Ä—Ç–æ—á–∫–∏ –≥–µ—Ä–æ—è</div>
        </div>
        <button type="button" id="masterTrialBtn" style="width:100%;padding:13px 24px;border-radius:14px;background:linear-gradient(135deg,rgba(var(--primary-rgb),0.2),rgba(var(--primary-rgb),0.08));border:1px solid rgba(var(--primary-rgb),0.4);color:var(--primary-color);font-size:1rem;font-weight:700;cursor:pointer;font-family:inherit;margin-bottom:12px;box-shadow:none;animation:none;letter-spacing:0;min-height:48px">1 –¥–µ–Ω—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ ‚Äî –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å</button>
        <button type="button" id="masterSubBtn" onclick="showPlanConfirm('plan_master','–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è')" style="width:100%;padding:14px 24px;border-radius:14px;background:linear-gradient(135deg,rgba(167,139,250,0.15),rgba(167,139,250,0.06));border:1.5px solid rgba(167,139,250,0.35);color:rgba(167,139,250,0.9);font-size:0.95rem;font-weight:700;cursor:pointer;font-family:inherit;box-shadow:none;animation:none;letter-spacing:0;min-height:48px">–û—Ñ–æ—Ä–º–∏—Ç—å –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—é ‚Äî $39.99/–º–µ—Å</button>
        <div id="heroesSubNote" style="font-size:0.7rem;color:rgba(255,255,255,0.22);text-align:center;margin-top:12px">30 —Ç—Ä–µ–∫–æ–≤ –≤ –º–µ—Å—è—Ü ¬∑ –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ HOT Pay</div>
      </div>

      <!-- –ö–∞–±–∏–Ω–µ—Ç –≥–µ—Ä–æ–µ–≤ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø) -->
      <div id="masterCabinet" class="page-scroll" style="display:none;">
        <!-- –°—Ç—Ä–æ–∫–∞ –ø–æ–∏—Å–∫–∞ + –∫–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–∏—Ç—å -->
        <div style="display:flex;gap:10px;margin-bottom:16px">
          <input type="text" id="heroesSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏‚Ä¶" style="flex:1;margin:0;padding:11px 14px;font-size:0.88rem">
          <button type="button" id="heroesSearchBtn" style="width:auto;padding:11px 14px;font-size:0.88rem;min-height:44px;box-shadow:none;animation:none;letter-spacing:0;background:rgba(var(--primary-rgb),0.12);border-color:rgba(var(--primary-rgb),0.3);color:var(--primary-color);flex-shrink:0">–ù–∞–π—Ç–∏</button>
        </div>
        <div id="heroesList"></div>
        <button type="button" id="addHeroBtn" style="margin-top:12px;width:100%;background:rgba(var(--primary-rgb),0.08);border:1px dashed rgba(var(--primary-rgb),0.35);color:rgba(var(--primary-rgb),0.8);font-size:0.9rem;padding:13px 24px;border-radius:14px;box-shadow:none;animation:none;letter-spacing:0;min-height:48px">+ –î–æ–±–∞–≤–∏—Ç—å –≥–µ—Ä–æ—è</button>
      </div>

      <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–µ—Ä–æ—è -->
      <div id="heroFormWrap" style="display:none; padding:16px 16px 90px; overflow-y:auto; flex:1">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:18px">
          <button type="button" id="heroFormCancel" style="background:none;border:none;color:rgba(255,255,255,0.4);font-size:1.3rem;cursor:pointer;padding:4px;min-height:unset;width:auto;box-shadow:none;animation:none;margin:0">‚Üê</button>
          <div style="font-size:1rem;font-weight:700;color:#fff" id="heroFormTitle">–î–æ–±–∞–≤–∏—Ç—å –≥–µ—Ä–æ—è</div>
        </div>
        <div class="field"><label for="heroName">–ò–º—è *</label><input type="text" id="heroName" placeholder="–ö–∞–∫ –∑–æ–≤—É—Ç —á–µ–ª–æ–≤–µ–∫–∞"></div>
        <div class="field"><label id="heroRelLabel" for="heroRelationship">–ö—Ç–æ –¥–ª—è —Ç–µ–±—è</label>
          <select id="heroRelationship">
            <option value="">‚Äî –≤—ã–±–µ—Ä–∏ ‚Äî</option>
            <option value="–º–∞—Ç—å">–ú–∞—Ç—å</option>
            <option value="–æ—Ç–µ—Ü">–û—Ç–µ—Ü</option>
            <option value="–¥–æ—á—å">–î–æ—á—å</option>
            <option value="—Å—ã–Ω">–°—ã–Ω</option>
            <option value="—Å–µ—Å—Ç—Ä–∞">–°–µ—Å—Ç—Ä–∞</option>
            <option value="–±—Ä–∞—Ç">–ë—Ä–∞—Ç</option>
            <option value="–±–∞–±—É—à–∫–∞">–ë–∞–±—É—à–∫–∞</option>
            <option value="–¥–µ–¥—É—à–∫–∞">–î–µ–¥—É—à–∫–∞</option>
            <option value="–º—É–∂">–ú—É–∂</option>
            <option value="–∂–µ–Ω–∞">–ñ–µ–Ω–∞</option>
            <option value="–ª—é–±–∏–º—ã–π —á–µ–ª–æ–≤–µ–∫">–õ—é–±–∏–º—ã–π —á–µ–ª–æ–≤–µ–∫</option>
            <option value="–¥—Ä—É–≥">–î—Ä—É–≥</option>
            <option value="–ø–æ–¥—Ä—É–≥–∞">–ü–æ–¥—Ä—É–≥–∞</option>
            <option value="–∫–æ–ª–ª–µ–≥–∞">–ö–æ–ª–ª–µ–≥–∞</option>
            <option value="–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫">–ù–∞—Å—Ç–∞–≤–Ω–∏–∫</option>
            <option value="–¥—Ä—É–≥–æ–µ">–î—Ä—É–≥–æ–µ</option>
          </select>
        </div>
        <div class="field">
          <label for="heroBirthdate" data-icon="üìÖ">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
          <div id="heroBirthdateWrap" class="birthdate-wrap">
            <div class="date-group" role="group" aria-label="–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è">
              <select id="heroBirthdateDay" class="date-group-day" aria-label="–î–µ–Ω—å"><option value="">–î–µ–Ω—å</option></select>
              <select id="heroBirthdateMonth" class="date-group-month" aria-label="–ú–µ—Å—è—Ü"><option value="">–ú–µ—Å—è—Ü</option></select>
              <select id="heroBirthdateYear" class="date-group-year" aria-label="–ì–æ–¥"><option value="">–ì–æ–¥</option></select>
            </div>
            <input type="date" id="heroBirthdate" tabindex="-1">
          </div>
          <div id="heroBirthdateHint" style="font-size:0.85rem;color:var(--tg-theme-hint-color,#9ca3af);margin-top:6px;">–í—ã–±–µ—Ä–∏ –¥–µ–Ω—å, –º–µ—Å—è—Ü –∏ –≥–æ–¥</div>
        </div>
        <div class="field">
          <label for="heroBirthplace" data-icon="üìç">–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
          <div id="heroBirthplaceWrap" class="birthplace-wrap">
            <input type="text" id="heroBirthplace" placeholder="–ú–æ—Å–∫–≤–∞, –õ–æ–Ω–¥–æ–Ω, –ù—å—é-–ô–æ—Ä–∫‚Ä¶" autocomplete="off">
            <span id="heroBirthplaceCheck" class="birthplace-check" aria-hidden="true">‚úì</span>
            <ul id="heroBirthplaceSuggestions" class="birthplace-suggestions" aria-hidden="true" aria-live="polite"></ul>
          </div>
          <div id="heroBirthplaceHint" class="birthplace-hint" style="display:block;font-size:0.9rem;color:rgba(var(--primary-rgb),0.85);margin-top:8px;line-height:1.5;">–ù–∞—á–Ω–∏ –≤–≤–æ–¥–∏—Ç—å –≥–æ—Ä–æ–¥ –∏ –≤—ã–±–µ—Ä–∏ –∏–∑ –≤—ã–ø–∞–≤—à–µ–≥–æ —Å–ø–∏—Å–∫–∞.</div>
        </div>
        <div class="field">
          <label id="heroTimeBirthLabel" for="heroBirthtime" data-icon="üïê">–í—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è</label>
          <div class="time-group" role="group" aria-label="–í—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è">
            <input type="time" id="heroBirthtime" class="time-group-input">
            <div class="checkbox time-group-checkbox">
              <input type="checkbox" id="heroBirthtimeUnknown">
              <label for="heroBirthtimeUnknown">–ù–µ –∑–Ω–∞—é —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è</label>
            </div>
          </div>
        </div>
        <div class="field"><label for="heroGender">–ü–æ–ª</label>
          <select id="heroGender">
            <option value="">–í—ã–±–µ—Ä–∏</option>
            <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
            <option value="male">–ú—É–∂—Å–∫–æ–π</option>
          </select>
        </div>
        <div class="field"><label id="heroStyleLabel" for="heroStyle">–õ—é–±–∏–º—ã–µ —Å—Ç–∏–ª–∏ –º—É–∑—ã–∫–∏</label><input type="text" id="heroStyle" placeholder="–ø–æ–ø, –¥–∂–∞–∑, —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è‚Ä¶"></div>
        <div class="field"><label for="heroNotes">–ó–∞–º–µ—Ç–∫–∏</label><textarea id="heroNotes" placeholder="–ß—Ç–æ –≤–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å –æ–± —ç—Ç–æ–º —á–µ–ª–æ–≤–µ–∫–µ" rows="2"></textarea></div>
        <div style="display:flex;gap:10px;margin-top:6px">
          <button type="button" id="heroFormSave" style="flex:2">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
      </div>
    </div>
    
    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ñ–æ—Ä–º—ã: —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∏ –ù–∞–∑–∞–¥ –∏ –ü—Ä–æ—Ñ–∏–ª—å, –±–µ–∑ –ø–∞–Ω–µ–ª–∏/—Ñ–æ–Ω–∞ (–∫–ª–∞—Å—Å—ã form-header-bar –∏ page-header —É–±—Ä–∞–Ω—ã ‚Äî –æ–Ω–∏ –¥–∞–≤–∞–ª–∏ #000000B8) -->
    <div class="page" id="formPage">
      <div id="formNavBar" class="form-nav-bar" style="display:flex;justify-content:space-between;align-items:center;padding:10px 16px;padding-top:max(10px,env(safe-area-inset-top));background:transparent;background-color:transparent;box-shadow:none;backdrop-filter:none;-webkit-backdrop-filter:none;position:relative;flex-shrink:0;z-index:100;">
        <button type="button" class="profile-back-btn header-back-btn btn-nav" onclick="goBack()" aria-label="–ù–∞–∑–∞–¥">‚Üê</button>
        <button type="button" class="header-menu-btn btn-info" onclick="goToProfileFrom('formPage')" aria-label="–ü—Ä–æ—Ñ–∏–ª—å"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="8" r="4" fill="currentColor" opacity="0.9"/><path d="M4 20c0-4 3.6-7 8-7s8 3 8 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" opacity="0.9"/></svg></button>
      </div>

      <div class="page-scroll">
      <!-- –í—ã–±–æ—Ä –≥–µ—Ä–æ—è –¥–ª—è –º–∞—Å—Ç–µ—Ä-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å–∫—Ä—ã—Ç —É –æ–±—ã—á–Ω—ã—Ö) -->
      <div id="forWhoWrap" style="display:none; padding:0; margin-bottom:16px">
        <div class="field" style="margin-bottom:0">
          <label id="forWhoLabel" for="forWho" style="font-size:0.82rem">–î–ª—è –∫–æ–≥–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º?</label>
          <select id="forWho">
            <option value="">–î–ª—è —Å–µ–±—è</option>
          </select>
        </div>
      </div>
      
      <div class="section">
        <div class="step-panel" data-step="1">
          <div class="mode-selector">
            <h3>
              <div style="width:28px;height:28px;border-radius:8px;overflow:hidden;flex-shrink:0;box-shadow:0 2px 6px rgba(0,0,0,0.25);"><img src="assets/icons/writing.png" alt="" style="width:100%;height:100%;object-fit:contain;display:block;" loading="lazy"></div>
              –§–æ—Ä–º–∞—Ç –ø–µ—Å–Ω–∏
            </h3>
            <p class="mode-subtitle">–î–ª—è –∫–æ–≥–æ —Å–æ–∑–¥–∞—ë–º?</p>
            <div class="mode-buttons">
              <button type="button" class="mode-btn btn-magic active" data-mode="single">
                <span class="mode-label" data-i18n="modeSingle">–û–±–æ –º–Ω–µ</span>
                <span class="mode-desc" data-i18n="modeSingleDesc">–ü–µ—Å–Ω—è –ø–æ —Ç–≤–æ–µ–π –¥–∞—Ç–µ —Ä–æ–∂–¥–µ–Ω–∏—è</span>
              </button>
              <button type="button" class="mode-btn btn-magic" data-mode="couple">
                <span class="mode-label" data-i18n="modeCouple">–ü—Ä–æ –¥–≤–æ–∏—Ö</span>
                <span class="mode-desc" data-i18n="modeCoupleDesc">–ü–µ—Å–Ω—è –¥–ª—è –¥–≤—É—Ö –ª—é–¥–µ–π</span>
              </button>
              <button type="button" class="mode-btn btn-magic" data-mode="transit">
                <span class="mode-label" data-i18n="modeTransit">–≠–Ω–µ—Ä–≥–∏—è<br>–º–æ–º–µ–Ω—Ç–∞</span>
                <span class="mode-desc" data-i18n="modeTransitDesc">–ü–µ—Å–Ω—è –æ —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–º –¥–Ω–µ</span>
              </button>
            </div>
          </div>
        </div>

        <!-- –ê–∫–∫–æ—Ä–¥–µ–æ–Ω –ø—Ä–æ—Ñ–∏–ª—è –¥–ª—è –≤–æ–∑–≤—Ä–∞—â–∞—é—â–µ–≥–æ—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
        <div id="profileAccordion" style="display:none;margin-bottom:12px;">
          <div class="pfa-header" onclick="toggleProfileAccordion()">
            <div class="pfa-info">
              <svg class="pfa-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2"/><path d="M4 20c0-4 3.6-7 8-7s8 3 8 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              <span id="pfaName" class="pfa-name"></span>
              <span class="pfa-sep" id="pfaSep" style="display:none">¬∑</span>
              <span id="pfaDate" class="pfa-date"></span>
            </div>
            <div class="pfa-chevron" id="pfaChevron">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </div>
          </div>
        </div>

        <div id="formFieldsWrap">
        <div class="step-panel" data-step="2">
        <div class="field">
          <label id="nameLabel" for="name" data-icon="üë§">–ò–º—è</label>
            <input type="text" id="name" placeholder="–ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?" required aria-label="–ò–º—è">
        </div>
        
        <div class="field">
          <label id="birthdateLbl" for="birthdate" data-icon="üìÖ">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
          <div id="birthdateWrap" class="birthdate-wrap">
            <div class="date-group" role="group" aria-label="–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è">
              <select id="birthdateDay" class="date-group-day" aria-label="–î–µ–Ω—å"><option value="">–î–µ–Ω—å</option></select>
              <select id="birthdateMonth" class="date-group-month" aria-label="–ú–µ—Å—è—Ü"><option value="">–ú–µ—Å—è—Ü</option></select>
              <select id="birthdateYear" class="date-group-year" aria-label="–ì–æ–¥"><option value="">–ì–æ–¥</option></select>
            </div>
            <input type="date" id="birthdate" required aria-label="–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è" tabindex="-1">
            <span id="birthdateCheck" class="birthdate-check" aria-hidden="true">‚úì</span>
          </div>
        </div>
        
        <div class="field">
          <label id="birthplaceLbl" for="birthplace" data-icon="üìç">–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
          <div id="birthplaceWrap" class="birthplace-wrap">
              <input type="text" id="birthplace" placeholder="–ú–æ—Å–∫–≤–∞, –õ–æ–Ω–¥–æ–Ω, –ù—å—é-–ô–æ—Ä–∫..." required autocomplete="off" aria-label="–õ–æ–∫–∞—Ü–∏—è —Ä–æ–∂–¥–µ–Ω–∏—è">
              <span id="birthplaceCheck" class="birthplace-check" aria-hidden="true">‚úì</span>
            <ul id="birthplaceSuggestions" class="birthplace-suggestions" aria-hidden="true" aria-live="polite"></ul>
          </div>
          <div id="birthplaceHint" class="birthplace-hint" style="display:none;font-size:0.9rem;color:rgba(var(--primary-rgb),0.85);margin-top:8px;line-height:1.5;">–ù–∞—á–Ω–∏ –≤–≤–æ–¥–∏—Ç—å –≥–æ—Ä–æ–¥ –∏ –≤—ã–±–µ—Ä–∏ –∏–∑ –≤—ã–ø–∞–≤—à–µ–≥–æ —Å–ø–∏—Å–∫–∞.</div>
        </div>
        
        <div class="field">
          <label id="birthtimeLbl" data-icon="üïê">–í—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è</label>
          <div class="time-group" role="group" aria-label="–í—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è">
            <input type="time" id="birthtime" required aria-label="–í—Ä–µ–º—è" class="time-group-input">
            <div class="checkbox time-group-checkbox">
              <input type="checkbox" id="unknown" aria-label="–ù–µ –∑–Ω–∞—é —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è">
              <label for="unknown">–ù–µ –∑–Ω–∞—é —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è</label>
            </div>
          </div>
        </div>
        
        <div class="field">
          <label for="gender" id="genderLabel">–ü–æ–ª</label>
          <select id="gender" required aria-label="–ü–æ–ª">
              <option value="">–í—ã–±–µ—Ä–∏</option>
            <option value="male">–ú—É–∂—Å–∫–æ–π</option>
            <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
          </select>
        </div>
        
        <div class="field">
            <select id="language" required aria-label="–Ø–∑—ã–∫ –ø–µ—Å–Ω–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è" title="–ù–∞ –∫–∞–∫–æ–º —è–∑—ã–∫–µ –±—É–¥–µ—Ç —Ç–µ–∫—Å—Ç –ø–µ—Å–Ω–∏ –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞">
              <option value="">–Ø–∑—ã–∫ –ø–µ—Å–Ω–∏</option>
            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            <option value="en">English</option>
            <option value="de">Deutsch</option>
            <option value="fr">Fran√ßais</option>
            <option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
          </select>
        </div>
        
        </div>
        </div><!-- /formFieldsWrap -->

        <!-- –ê–∫–∫–æ—Ä–¥–µ–æ–Ω –≤—Ç–æ—Ä–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–æ, —Ä—è–¥–æ–º —Å –ø–µ—Ä–≤—ã–º -->
        <div id="secondPersonAccordion" style="display:none;margin-top:8px;">
          <div class="pfa-header" onclick="toggleSecondPersonAccordion()">
            <div class="pfa-info">
              <svg class="pfa-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2"/><path d="M4 20c0-4 3.6-7 8-7s8 3 8 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              <span id="p2AccName" class="pfa-name">–î–∞–Ω–Ω—ã–µ –≤—Ç–æ—Ä–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞</span>
              <span class="pfa-sep" id="p2AccSep" style="display:none">¬∑</span>
              <span id="p2AccDate" class="pfa-date"></span>
            </div>
            <div class="pfa-chevron" id="p2AccChevron">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </div>
          </div>
          <div id="secondPersonFormWrap">
            <div id="secondPersonForm" style="padding-top:8px;">
              <div class="field">
                <label for="name2" data-icon="üë§">–ò–º—è</label>
                <input type="text" id="name2" placeholder="–ò–º—è –≤—Ç–æ—Ä–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞" maxlength="50">
              </div>
              <div class="field">
                <label for="birthdate2" data-icon="üìÖ">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                <div id="birthdate2Wrap" class="birthdate-wrap">
                  <div class="date-group" role="group" aria-label="–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –≤—Ç–æ—Ä–æ–≥–æ">
                    <select id="birthdate2Day" class="date-group-day" aria-label="–î–µ–Ω—å"><option value="">–î–µ–Ω—å</option></select>
                    <select id="birthdate2Month" class="date-group-month" aria-label="–ú–µ—Å—è—Ü"><option value="">–ú–µ—Å—è—Ü</option></select>
                    <select id="birthdate2Year" class="date-group-year" aria-label="–ì–æ–¥"><option value="">–ì–æ–¥</option></select>
                  </div>
                  <input type="date" id="birthdate2" tabindex="-1">
                </div>
              </div>
              <div class="field">
                <label for="birthplace2" data-icon="üìç">–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                <div id="birthplace2Wrap" class="birthplace-wrap">
                  <input type="text" id="birthplace2" placeholder="–ú–æ—Å–∫–≤–∞, –õ–æ–Ω–¥–æ–Ω, –ù—å—é-–ô–æ—Ä–∫..." maxlength="100" autocomplete="off" aria-label="–õ–æ–∫–∞—Ü–∏—è —Ä–æ–∂–¥–µ–Ω–∏—è –≤—Ç–æ—Ä–æ–≥–æ">
                  <span id="birthplace2Check" class="birthplace-check" aria-hidden="true">‚úì</span>
                  <ul id="birthplaceSuggestions2" class="birthplace-suggestions" aria-hidden="true" aria-live="polite"></ul>
                </div>
                <div id="birthplace2Hint" class="birthplace-hint" style="display:none;font-size:0.9rem;color:rgba(var(--primary-rgb),0.85);margin-top:8px;line-height:1.5;">–ù–∞—á–Ω–∏ –≤–≤–æ–¥–∏—Ç—å –≥–æ—Ä–æ–¥ –∏ –≤—ã–±–µ—Ä–∏ –∏–∑ –≤—ã–ø–∞–≤—à–µ–≥–æ —Å–ø–∏—Å–∫–∞.</div>
              </div>
              <div class="field">
                <label data-icon="üïê">–í—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                <div class="time-group" role="group">
                  <input type="time" id="birthtime2" aria-label="–í—Ä–µ–º—è" class="time-group-input">
                  <div class="checkbox time-group-checkbox">
                    <input type="checkbox" id="unknown2" aria-label="–ù–µ –∑–Ω–∞—é —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è">
                    <label for="unknown2">–ù–µ –∑–Ω–∞—é —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è</label>
                  </div>
                </div>
              </div>
              <div class="field">
                <label for="gender2" data-icon="‚öß">–ü–æ–ª</label>
                <select id="gender2">
                  <option value="">–í—ã–±–µ—Ä–∏</option>
                  <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
                  <option value="male">–ú—É–∂—Å–∫–æ–π</option>
                </select>
              </div>
              <input type="hidden" id="person2Relationship">
            </div>
          </div>
        </div>

        <!-- –ê–∫–∫–æ—Ä–¥–µ–æ–Ω —ç–Ω–µ—Ä–≥–∏–∏ –º–æ–º–µ–Ω—Ç–∞ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–æ, –∫–∞–∫ –≤—Ç–æ—Ä–æ–π —á–µ–ª–æ–≤–µ–∫ -->
        <div id="transitAccordion" style="display:none;margin-top:8px;">
          <div class="pfa-header" onclick="toggleTransitAccordion()">
            <div class="pfa-info">
              <svg class="pfa-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              <span id="transitAccName" class="pfa-name">–≠–Ω–µ—Ä–≥–∏—è –º–æ–º–µ–Ω—Ç–∞</span>
              <span class="pfa-sep" id="transitAccSep" style="display:none">¬∑</span>
              <span id="transitAccDate" class="pfa-date"></span>
            </div>
            <div class="pfa-chevron" id="transitAccChevron">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </div>
          </div>
          <div id="transitFormWrap">
            <div id="transitForm" style="padding-top:8px;">
              <div class="field">
                <label for="transitDate" data-icon="üìÖ">–î–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è</label>
                <input type="date" id="transitDate" min="2024-01-01" max="2030-12-31" placeholder="–î–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è">
              </div>
              <div class="field">
                <label for="transitTime" data-icon="üïê">–í—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è</label>
                <input type="time" id="transitTime" placeholder="–í—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è">
              </div>
              <div class="field form-group location-input-wrapper">
                <label for="transitLocation" data-icon="üìç">–ì–æ—Ä–æ–¥ –¥–ª—è —ç–Ω–µ—Ä–≥–∏–∏ –º–æ–º–µ–Ω—Ç–∞</label>
                <input type="text" id="transitLocation" class="location-input" placeholder="–ú–æ—Å–∫–≤–∞, –õ–æ–Ω–¥–æ–Ω, –ù—å—é-–ô–æ—Ä–∫..." maxlength="100" autocomplete="off">
                <div id="transitLocationSuggestions" class="location-suggestions" aria-live="polite"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="step-panel" data-step="3">
        <div class="field">
          <div class="request-label">–ß—Ç–æ –±—É–¥–µ—à—å –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è?</div>

          <!-- –ë–ª–æ–∫ –≤–≤–æ–¥–∞: textarea + –Ω–∏–∂–Ω—è—è –ø–æ–ª–æ—Å–∫–∞ —Å –±—ã—Å—Ç—Ä—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ -->
          <div class="request-input-box">
            <textarea id="request" class="request-textarea" placeholder="–ù–∞–ø–∏—à–∏ –ª—é–±–æ–π –∑–∞–ø—Ä–æ—Å" aria-label="–ó–∞–ø—Ä–æ—Å" rows="4"></textarea>
            <div class="request-quick-bar">
              <button type="button" class="request-quick-toggle" id="quickPickerBtn" onclick="toggleQuickPicker(event)">
                <span id="quickPickerLabel">‚ú¶ –ë—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã</span>
                <svg id="quickPickerArrow" width="12" height="12" viewBox="0 0 24 24" fill="none" style="transition:transform .2s;flex-shrink:0;"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
              </button>
              <div id="quickPickerSheet" class="request-quick-dropdown" style="display:none;">
                <button type="button" class="quick-item example-btn" data-text="–í–µ—Å—ë–ª–∞—è –ø–µ—Å–Ω—è —Å —Å–∞–º–æ–∏—Ä–æ–Ω–∏–µ–π –ø—Ä–æ –º–æ–∏ —Å–ª–∞–±–æ—Å—Ç–∏ –∏ –ø—Ä–∏–≤—ã—á–∫–∏">üòÑ –í–µ—Å—ë–ª–∞—è –ø—Ä–æ —Å–ª–∞–±–æ—Å—Ç–∏</button>
                <button type="button" class="quick-item example-btn" data-text="–Æ–º–æ—Ä –∏ –ª—ë–≥–∫–æ—Å—Ç—å ‚Äî –¥–æ–±—Ä—ã–π –≤–∑–≥–ª—è–¥ –Ω–∞ —Å–µ–±—è">üòä –Æ–º–æ—Ä –∏ –ª—ë–≥–∫–æ—Å—Ç—å</button>
                <button type="button" class="quick-item example-btn" data-text="–†–µ–∂–∏–º —é–º–æ—Ä 100% ‚Äî –≤–µ—Å—ë–ª–∞—è –ø–µ—Å–Ω—è —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º —é–º–æ—Ä–æ–º –∏ –ª—ë–≥–∫–æ—Å—Ç—å—é">üòÇ –†–µ–∂–∏–º: —é–º–æ—Ä 100%</button>
                <button type="button" class="quick-item example-btn" data-text="–¢—Ä–æ–≥–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è ‚Äî –¥—É—à–µ–≤–Ω–∞—è –ø–µ—Å–Ω—è-–ø–æ–¥–∞—Ä–æ–∫">üéÇ –¢—Ä–æ–≥–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ</button>
                <button type="button" class="quick-item example-btn" data-text="–ó–∞–±–∞–≤–Ω–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è ‚Äî —Ç–µ–ø–ª–æ –∏ —Å —É–ª—ã–±–∫–æ–π">ü•≥ –ó–∞–±–∞–≤–Ω–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ</button>
                <button type="button" class="quick-item example-btn" data-text="–ú–æ—â–Ω–∞—è –ø–µ—Å–Ω—è –æ –º–æ–µ–π —Å–∏–ª–µ –∏ –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–∏ —Ç—Ä—É–¥–Ω–æ—Å—Ç–µ–π">üí™ –°–∏–ª–∞ –∏ –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–µ</button>
                <button type="button" class="quick-item example-btn" data-text="–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ –æ–ø–æ—Ä–∞ –Ω–∞ —Å–µ–±—è">‚ú® –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –∏ –ø—É—Ç—å</button>
                <button type="button" class="quick-item example-btn" data-text="–Ø—Ä–∫–∞—è —Å–∞–º–æ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è ‚Äî –∫—Ç–æ —è –∏ —á—Ç–æ –Ω–µ—Å—É –≤ –º–∏—Ä">üåü –ö—Ç–æ —è –∏ –º–æ—è –º–∏—Å—Å–∏—è</button>
                <button type="button" class="quick-item example-btn" data-text="–ì–∞—Ä–º–æ–Ω–∏—è –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö –∏ –ª—é–±–æ–≤—å –∫ —Å–µ–±–µ">üåø –ì–∞—Ä–º–æ–Ω–∏—è –∏ –ª—é–±–æ–≤—å –∫ —Å–µ–±–µ</button>
                <button type="button" class="quick-item example-btn" data-text="–û—Ç–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—à–ª–æ–µ –∏ –æ—Ç–∫—Ä—ã—Ç—å –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏">üå± –û—Ç–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—à–ª–æ–µ</button>
                <button type="button" class="quick-item example-btn" data-text="–ò—Å—Ü–µ–ª–∏—Ç—å –¥–µ—Ç—Å–∫–∏–µ —Ç—Ä–∞–≤–º—ã –∏ –æ–±—Ä–µ—Å—Ç–∏ —Å–≤–æ–±–æ–¥—É">üí´ –ò—Å—Ü–µ–ª–µ–Ω–∏–µ –∏ —Å–≤–æ–±–æ–¥–∞</button>
                <button type="button" class="quick-item example-btn" data-text="–ú–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω–∞—è –ø–µ—Å–Ω—è –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ —Ç–∏—à–∏–Ω—ã">üßò –¢–∏—à–∏–Ω–∞ –∏ –º–µ–¥–∏—Ç–∞—Ü–∏—è</button>
              </div>
            </div>
          </div>
        </div>
        <!-- –°—Ç–∏–ª—å –º—É–∑—ã–∫–∏ (–¥–ª—è –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ Plus –∏ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è) -->
        <div class="field" style="margin-top:14px;">
          <label for="requestPreferredStyle" id="requestPreferredStyleLabel" style="font-size:0.82rem;color:rgba(255,255,255,0.5);">–°—Ç–∏–ª—å –º—É–∑—ã–∫–∏ <span style="color:rgba(var(--primary-rgb),0.5);">(Plus –∏ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è)</span></label>
          <input type="text" id="requestPreferredStyle" placeholder="–ø–æ–ø, —Å–æ—É–ª, –¥–∂–∞–∑, —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è‚Ä¶" maxlength="120" autocomplete="off" style="margin-top:6px;font-size:0.9rem;padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,0.12);background:rgba(255,255,255,0.05);color:#fff;width:100%;box-sizing:border-box;">
        </div>

        <p id="submitHint" style="display:none"></p>

        <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ ‚Äî sticky –≤–Ω–∏–∑—É, –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ -->
        <div class="step-nav form-submit-sticky">
          <button id="stepNext" class="btn-pay">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
        </div>
      </div>
      
      </div><!-- /page-scroll -->
    </div>
    </div><!-- /formPage -->
    
    <!-- paymentPage —É–±—Ä–∞–Ω –∏–∑ .page-—Å–∏—Å—Ç–µ–º—ã ‚Äî –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ #paymentOverlay –Ω–∏–∂–µ -->
    
    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div class="page" id="loadingPage">
      <div class="loading">
        <div class="spinner"></div>
        <div class="loading-text" id="loadingTitle">–ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞</div>
        <div id="loadingDesc" style="color:rgba(255,255,255,0.55);font-size:0.92rem;text-align:center;max-width:320px;line-height:1.7;margin-top:12px;">
          –ü–µ—Å–Ω—è —Å–æ–∑–¥–∞—ë—Ç—Å—è. –ü—Ä–∏–¥—ë—Ç –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º.<br>–ú–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ.
        </div>
        <div id="loadingCountdown" style="margin-top:20px;color:rgba(var(--primary-rgb),0.65);font-size:0.9rem;"></div>
      </div>
    </div>
    
    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Å–ø–µ—Ö–∞ -->
    <div class="page" id="successPage">
      <div style="flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 28px calc(env(safe-area-inset-bottom)+24px);text-align:center;">
        <div style="font-size:3rem;margin-bottom:20px;">‚úâÔ∏è</div>
        <div id="successTitle" style="font-size:1.45rem;font-weight:800;color:var(--primary-color);margin-bottom:14px;line-height:1.3;">–ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞!</div>
        <p id="successDesc" style="font-size:0.95rem;color:rgba(255,255,255,0.65);line-height:1.75;max-width:280px;margin:0 0 32px;">
          –¢–≤–æ—è –ø–µ—Å–Ω—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è.<br>–ö–∞–∫ —Ç–æ–ª—å–∫–æ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞ ‚Äî –ø—Ä–∏–¥—ë—Ç –≤ –±–æ—Ç.<br>
          <span style="color:rgba(255,255,255,0.4);font-size:0.85rem;">–û–±—ã—á–Ω–æ 10‚Äì20 –º–∏–Ω—É—Ç.</span>
        </p>
        <button id="openBotBtn" type="button" style="width:100%;max-width:320px;padding:14px 24px;border-radius:14px;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));border:none;color:#fff;font-size:1rem;font-weight:700;cursor:pointer;font-family:inherit;margin-bottom:12px;letter-spacing:0;">
          üí¨ –ü–µ—Ä–µ–π—Ç–∏ –≤ –±–æ—Ç
        </button>
        <p id="successHint" style="font-size:0.78rem;color:rgba(255,255,255,0.35);line-height:1.6;max-width:290px;margin:0 0 28px;">
          –ù–µ –ø—Ä–∏—à–ª–∞ —á–µ—Ä–µ–∑ 20 –º–∏–Ω? –ù–∞–ø–∏—à–∏ –±–æ—Ç—É ¬´–ø–µ—Å–Ω—è –Ω–µ –ø—Ä–∏—à–ª–∞¬ª.
        </p>
        <button class="secondary" id="newKeyBtn" style="width:100%;max-width:320px;margin-bottom:4px;">–°–æ–∑–¥–∞—Ç—å –µ—â—ë –æ–¥–Ω—É –ø–µ—Å–Ω—é</button>
        <button type="button" id="successToProfileBtn" class="form-nav-link" onclick="goToProfileFrom('successPage')" style="background:none;border:none;color:rgba(255,255,255,0.25);font-size:0.78rem;cursor:pointer;font-family:inherit;padding:8px 0;width:100%;text-align:center;min-height:unset;box-shadow:none;">–ü–µ—Ä–µ–π—Ç–∏ –≤ –ø—Ä–æ—Ñ–∏–ª—å</button>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SOUL CHAT PAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="page" id="soulChatPage">

      <!-- –®–∞–ø–∫–∞ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–æ–º–æ-—Ä–µ–∂–∏–º–µ -->
      <div id="scHeader" class="profile-header">
        <button type="button" class="profile-back-btn header-back-btn btn-nav" onclick="goBack()" aria-label="–ù–∞–∑–∞–¥">‚Üê</button>
        <div class="profile-header-title">Soul Chat</div>
        <button type="button" class="header-menu-btn btn-info" onclick="goToHelpFrom('soulChatPage')" aria-label="–ü–æ–º–æ—â—å"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="8" r="4" fill="currentColor" opacity="0.9"/><path d="M4 20c0-4 3.6-7 8-7s8 3 8 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" opacity="0.9"/></svg></button>
      </div>

      <!-- –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä—ã—Ç–∞; —Å—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —à–∞–ø–∫—É –∏ –ø—Ä–æ–º–æ —Å ¬´–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø¬ª -->
      <div id="scGlobalLoading" style="flex:1;display:none;align-items:center;justify-content:center;color:rgba(255,255,255,0.35);font-size:0.9rem;"><span id="scGlobalLoadingText">‚ú® –ó–∞–≥—Ä—É–∂–∞—é‚Ä¶</span></div>

      <!-- –ü–†–û–ú–û-–ó–û–ù–ê: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∏–¥–Ω–∞ (—à–∞–ø–∫–∞ + ¬´–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø¬ª), –ø—Ä–∏ –æ—Ç–≤–µ—Ç–µ API ‚Äî —Ç–∞—Ä–∏—Ñ—ã/–ø–æ–¥–∞—Ä–æ–∫ –∏–ª–∏ —á–∞—Ç -->
      <div id="scPromoArea" class="page-scroll" style="padding:16px 20px calc(env(safe-area-inset-bottom)+32px);">

        <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –æ—à–∏–±–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏ (—Å–µ—Ç—å/—Ç–∞–π–º–∞—É—Ç) -->
        <div id="scPromoErrorWrap" style="display:none;margin-bottom:16px;padding:14px 16px;background:rgba(var(--secondary-rgb),0.08);border:1px solid rgba(var(--secondary-rgb),0.25);border-radius:14px;">
          <div id="scPromoErrorText" style="font-size:0.88rem;color:rgba(255,255,255,0.75);line-height:1.5;margin-bottom:12px;">–í—Ä–µ–º–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏. –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ –∏–ª–∏ –∫—É–ø–∏—Ç—å —Å—É—Ç–∫–∏.</div>
          <button type="button" id="scPromoRetryBtn" style="width:100%;padding:10px 16px;border-radius:12px;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.2);color:rgba(255,255,255,0.9);font-size:0.88rem;font-weight:600;cursor:pointer;font-family:inherit;">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
        </div>

        <!-- –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ + –∫–Ω–æ–ø–∫–∞ ¬´–ü–æ–¥—Ä–æ–±–Ω–µ–µ¬ª -->
        <div style="margin-bottom:18px;">
          <div id="scPromoIntro" style="font-size:0.9rem;color:rgba(255,255,255,0.65);line-height:1.65;margin-bottom:10px;">
            Soul Chat ‚Äî —Ç–≤–æ–π –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–Ω–∏–º–∞–µ—Ç —Ç–µ–±—è —Å–ª–æ–≤–Ω–æ –ª—É—á—à–∏–π –¥—Ä—É–≥ –∏–ª–∏ –í—ã—Å—à–µ–µ –Ø. –û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–µ, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ –∏ –ø—É—Ç–∏.
          </div>
          <button type="button" id="scMoreBtn" style="background:none;border:none;color:rgba(var(--primary-rgb),0.7);font-size:0.82rem;cursor:pointer;padding:0;font-family:inherit;box-shadow:none;animation:none;min-height:unset;">
            <span id="scMoreBtnText">–ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üì</span>
          </button>
        </div>

        <!-- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ + –ø—Ä–∏–º–µ—Ä—ã) ‚Äî —Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
        <div id="scMoreContent" style="display:none;margin-bottom:18px;">
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:16px;">
            <div style="background:rgba(var(--primary-rgb),0.06);border:1px solid rgba(var(--primary-rgb),0.14);border-radius:14px;padding:12px;text-align:center;">
              <div style="font-size:1.4rem;font-weight:700;color:var(--primary-color);line-height:1;">78%</div>
              <div id="scStat1" style="font-size:0.7rem;color:rgba(255,255,255,0.5);margin-top:4px;line-height:1.4;">–æ—Ç–º–µ—á–∞—é—Ç —Å–Ω–∏–∂–µ–Ω–∏–µ —Ç—Ä–µ–≤–æ–≥–∏</div>
            </div>
            <div style="background:rgba(var(--secondary-rgb),0.06);border:1px solid rgba(var(--secondary-rgb),0.14);border-radius:14px;padding:12px;text-align:center;">
              <div style="font-size:1.4rem;font-weight:700;color:var(--secondary-color);line-height:1;">91%</div>
              <div id="scStat2" style="font-size:0.7rem;color:rgba(255,255,255,0.5);margin-top:4px;line-height:1.4;">—á—É–≤—Å—Ç–≤—É—é—Ç —Å–µ–±—è –ø–æ–Ω—è—Ç—ã–º–∏</div>
            </div>
            <div style="background:rgba(var(--primary-rgb),0.06);border:1px solid rgba(var(--primary-rgb),0.14);border-radius:14px;padding:12px;text-align:center;">
              <div style="font-size:1.4rem;font-weight:700;color:var(--primary-color);line-height:1;">3√ó</div>
              <div id="scStat3" style="font-size:0.7rem;color:rgba(255,255,255,0.5);margin-top:4px;line-height:1.4;">–±—ã—Å—Ç—Ä–µ–µ –Ω–∞—Ö–æ–¥—è—Ç –æ—Ç–≤–µ—Ç</div>
            </div>
            <div style="background:rgba(var(--secondary-rgb),0.06);border:1px solid rgba(var(--secondary-rgb),0.14);border-radius:14px;padding:12px;text-align:center;">
              <div style="font-size:1.4rem;font-weight:700;color:var(--secondary-color);line-height:1;">84%</div>
              <div id="scStat4" style="font-size:0.7rem;color:rgba(255,255,255,0.5);margin-top:4px;line-height:1.4;">–≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Å–Ω–æ–≤–∞</div>
            </div>
          </div>
          <div id="scExamplesTitle" style="font-size:0.7rem;font-weight:700;letter-spacing:0.1em;text-transform:uppercase;color:rgba(255,255,255,0.3);margin-bottom:8px;">–ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤</div>
          <div style="display:flex;flex-direction:column;gap:6px;">
            <div id="scEx1" style="background:rgba(var(--primary-rgb),0.05);border:1px solid rgba(var(--primary-rgb),0.12);border-radius:10px;padding:10px 12px;font-size:0.85rem;color:rgba(255,255,255,0.7);line-height:1.5;">¬´–ü–æ—á–µ–º—É –º–Ω–µ —Ç–∞–∫ —Å–ª–æ–∂–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—å –æ —Å–≤–æ–∏—Ö —á—É–≤—Å—Ç–≤–∞—Ö?¬ª</div>
            <div id="scEx2" style="background:rgba(var(--primary-rgb),0.05);border:1px solid rgba(var(--primary-rgb),0.12);border-radius:10px;padding:10px 12px;font-size:0.85rem;color:rgba(255,255,255,0.7);line-height:1.5;">¬´–ö–∞–∫–æ–π –º–æ–π –≥–ª–∞–≤–Ω—ã–π —Å—Ç—Ä–∞—Ö –∏ –∫–∞–∫ —Å –Ω–∏–º —Ä–∞–±–æ—Ç–∞—Ç—å?¬ª</div>
            <div id="scEx3" style="background:rgba(var(--primary-rgb),0.05);border:1px solid rgba(var(--primary-rgb),0.12);border-radius:10px;padding:10px 12px;font-size:0.85rem;color:rgba(255,255,255,0.7);line-height:1.5;">¬´–í —á—ë–º –º–æ—ë –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ –∫–∞–∫ –∫ –Ω–µ–º—É –ø—Ä–∏–π—Ç–∏?¬ª</div>
          </div>
        </div>

        <!-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ (–≤–∏–¥–Ω–æ —Å—Ä–∞–∑—É –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ Soul Chat, —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ –æ—Ç–≤–µ—Ç—É API) -->
        <div id="scPageLoading" style="display:block;text-align:center;padding:20px 0;color:rgba(255,255,255,0.45);font-size:0.9rem;">–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø‚Ä¶</div>

        <!-- –¢–∞—Ä–∏—Ñ—ã -->
        <div id="scPagePromo">
          <div style="background:rgba(15,12,40,0.8);border:1px solid rgba(var(--primary-rgb),0.2);border-radius:18px;padding:16px;margin-bottom:12px;">
            <div id="scSubIncluded" style="font-size:0.65rem;font-weight:700;letter-spacing:0.1em;text-transform:uppercase;color:rgba(var(--primary-rgb),0.5);margin-bottom:10px;">Soul Chat –≤–∫–ª—é—á—ë–Ω –≤ –ø–æ–¥–ø–∏—Å–∫—É</div>
            <div style="display:flex;flex-direction:column;gap:7px;">
              <div style="display:flex;justify-content:space-between;align-items:center;padding:9px 12px;background:rgba(255,255,255,0.04);border-radius:10px;">
                <div><div style="font-size:0.85rem;font-weight:600;color:#fff;">Basic</div><div style="font-size:0.7rem;color:rgba(255,255,255,0.38);">5 —Ç—Ä–µ–∫–æ–≤/–º–µ—Å + Soul Chat</div></div>
                <div style="font-size:0.85rem;font-weight:700;color:var(--primary-color);">$14.99/–º–µ—Å</div>
              </div>
              <div style="display:flex;justify-content:space-between;align-items:center;padding:9px 12px;background:linear-gradient(135deg,rgba(var(--secondary-rgb),0.07),rgba(var(--primary-rgb),0.04));border:1px solid rgba(var(--secondary-rgb),0.18);border-radius:10px;">
                <div><div style="font-size:0.85rem;font-weight:600;color:#fff;">Plus <span style="font-size:0.68rem;color:rgba(var(--primary-rgb),0.6);font-weight:400;">‚ú¶ –ü–æ–ø—É–ª—è—Ä–Ω—ã–π</span></div><div style="font-size:0.7rem;color:rgba(255,255,255,0.38);">10 —Ç—Ä–µ–∫–æ–≤/–º–µ—Å + Chat –±–µ–∑ –ª–∏–º–∏—Ç–∞</div></div>
                <div style="font-size:0.85rem;font-weight:700;color:var(--secondary-color);">$24.99/–º–µ—Å</div>
              </div>
              <div style="display:flex;justify-content:space-between;align-items:center;padding:9px 12px;background:rgba(var(--primary-rgb),0.04);border:1px solid rgba(var(--primary-rgb),0.12);border-radius:10px;">
                <div><div style="font-size:0.85rem;font-weight:600;color:#fff;">–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è</div><div style="font-size:0.7rem;color:rgba(255,255,255,0.38);">30 —Ç—Ä–µ–∫–æ–≤/–º–µ—Å + Chat –±–µ–∑ –ª–∏–º–∏—Ç–∞</div></div>
                <div style="font-size:0.85rem;font-weight:700;color:var(--primary-color);">$39.99/–º–µ—Å</div>
              </div>
            </div>
            <button id="scChoosePlanBtn" onclick="goToProfileFrom('soulChatPage')" style="width:100%;margin-top:12px;padding:12px;border-radius:13px;background:linear-gradient(135deg,rgba(var(--primary-rgb),0.25),rgba(var(--secondary-rgb),0.2));border:1px solid rgba(var(--primary-rgb),0.4);color:var(--primary-color);font-size:0.92rem;font-weight:700;cursor:pointer;font-family:inherit;letter-spacing:0.02em;box-shadow:none;animation:none;">
              –í—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ ‚Üí
            </button>
          </div>

          <!-- –ü–æ–¥–∞—Ä–æ—á–Ω—ã–µ 24—á -->
          <div id="scPageGiftWrap" style="display:none;background:linear-gradient(135deg,rgba(var(--primary-rgb),0.08),rgba(var(--secondary-rgb),0.06));border:1px solid rgba(var(--primary-rgb),0.3);border-radius:16px;padding:16px;text-align:center;margin-bottom:10px;">
            <div style="font-size:1.6rem;margin-bottom:6px;">üéÅ</div>
            <div id="scGiftHeading" style="font-weight:700;color:var(--primary-color);margin-bottom:4px;">–ü–æ–ø—Ä–æ–±—É–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ ‚Äî 24 —á–∞—Å–∞</div>
            <div id="scGiftNote" style="font-size:0.83rem;color:rgba(255,255,255,0.6);line-height:1.5;margin-bottom:12px;">–û–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>
            <button id="scPageGiftBtn" type="button" style="padding:12px 24px;border-radius:13px;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));border:none;color:#fff;font-size:0.92rem;font-weight:700;cursor:pointer;font-family:inherit;width:100%;">
              üéÅ –ü–æ–ª—É—á–∏—Ç—å 24 —á–∞—Å–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ
            </button>
          </div>

          <!-- –ö—É–ø–∏—Ç—å —Å—É—Ç–∫–∏ -->
          <div id="scPageBuyDayWrap" style="display:none;border:1px solid rgba(255,255,255,0.1);border-radius:14px;padding:14px;text-align:center;">
            <div id="scBuyDayNote" style="font-size:0.78rem;color:rgba(255,255,255,0.4);margin-bottom:9px;line-height:1.5;">–ù–µ –≥–æ—Ç–æ–≤ –∫ –ø–æ–¥–ø–∏—Å–∫–µ? –ü–æ–ø—Ä–æ–±—É–π —Ä–∞–∑–æ–≤—ã–π –¥–æ—Å—Ç—É–ø</div>
            <button id="scPageBuyDayBtn" type="button" style="width:100%;padding:11px;border-radius:12px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.15);color:rgba(255,255,255,0.7);font-size:0.88rem;font-weight:600;cursor:pointer;font-family:inherit;box-shadow:none;animation:none;">
              ‚ö° –û—Ç–∫—Ä—ã—Ç—å Soul Chat –Ω–∞ 24—á ‚Äî $2.99
            </button>
            <div id="scPageBuyDayStatus" style="display:none;font-size:0.78rem;color:rgba(var(--primary-rgb),0.7);margin-top:7px;"></div>
          </div>
        </div>
      </div>

      <!-- –ß–ê–¢-–ó–û–ù–ê: –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø ‚Äî –∏—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç—Å—è, –≤–≤–æ–¥ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –≤–Ω–∏–∑—É -->
      <!-- –®–∞–ø–∫–∞ —á–∞—Ç–∞: –Ω–∞–∑–∞–¥, –∫–æ–Ω—Ç–µ–∫—Å—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ (–∏–º—è, –¥–∞—Ç–∞), —Ç–∞–π–º–µ—Ä –¥–æ—Å—Ç—É–ø–∞ -->
      <div id="scChatHeader" style="display:none;flex-shrink:0;align-items:center;gap:10px;padding:max(10px,env(safe-area-inset-top)) 16px 12px;border-bottom:1px solid rgba(255,255,255,0.08);background:rgba(8,7,26,0.6);">
        <button type="button" class="profile-back-btn" onclick="goBack()" aria-label="–ù–∞–∑–∞–¥" style="margin-right:auto;">‚Üê</button>
        <button id="scCardPickerBtn" type="button" title="–ö–æ–Ω—Ç–µ–∫—Å—Ç —á–∞—Ç–∞ ‚Äî —Å–º–µ–Ω–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É" style="display:none;font-size:0.8rem;font-weight:600;color:var(--primary-color);background:rgba(var(--primary-rgb),0.12);border:1px solid rgba(var(--primary-rgb),0.28);border-radius:12px;padding:6px 14px;cursor:pointer;font-family:inherit;white-space:nowrap;max-width:200px;overflow:hidden;text-overflow:ellipsis;" onclick="scOpenCardPicker()">‚Äî ‚ñæ</button>
        <div id="scPageTimer" style="display:none;font-size:0.72rem;color:rgba(var(--primary-rgb),0.65);background:rgba(var(--primary-rgb),0.1);padding:5px 12px;border-radius:14px;white-space:nowrap;"></div>
      </div>

      <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ (—Å–∏–Ω–∞—Å—Ç—Ä–∏—è) -->
      <div id="scCardPickerModal" style="display:none;position:fixed;inset:0;z-index:9000;background:rgba(0,0,0,0.65);" onclick="if(event.target===this)scCloseCardPicker()">
        <div style="position:absolute;bottom:0;left:0;right:0;background:#0f0e24;border-radius:20px 20px 0 0;padding:20px 16px calc(env(safe-area-inset-bottom)+20px);max-height:82vh;display:flex;flex-direction:column;">
          <div style="display:flex;align-items:center;margin-bottom:16px;">
            <div style="font-size:1rem;font-weight:700;color:var(--primary-color);flex:1;">–ö–æ–Ω—Ç–µ–∫—Å—Ç —á–∞—Ç–∞</div>
            <button type="button" onclick="scCloseCardPicker()" style="background:none;border:none;color:rgba(255,255,255,0.4);font-size:1.3rem;cursor:pointer;padding:0;line-height:1;">√ó</button>
          </div>
          <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–∞ -->
          <div id="scPickerModeTabs" style="display:flex;gap:8px;margin-bottom:16px;">
            <button id="scPickerTabSingle" type="button" class="btn-magic" onclick="scSetPickerMode('single')" style="flex:1;padding:8px;border-radius:10px;font-size:0.82rem;font-weight:600;cursor:pointer;font-family:inherit;background:rgba(var(--primary-rgb),0.18);color:var(--primary-color);">–û–¥–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞</button>
            <button id="scPickerTabSynastry" type="button" class="btn-magic" onclick="scSetPickerMode('synastry')" style="flex:1;padding:8px;border-radius:10px;font-size:0.82rem;font-weight:600;cursor:pointer;font-family:inherit;background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);">–°–∏–Ω–∞—Å—Ç—Ä–∏—è (2 –∫–∞—Ä—Ç–æ—á–∫–∏)</button>
          </div>
          <!-- –†–µ–∂–∏–º: –æ–¥–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ -->
          <div id="scPickerSinglePane" style="flex:1;overflow-y:auto;display:flex;flex-direction:column;gap:8px;min-height:0;">
            <div id="scPickerSingleList" style="display:flex;flex-direction:column;gap:8px;"></div>
          </div>
          <!-- –†–µ–∂–∏–º: —Å–∏–Ω–∞—Å—Ç—Ä–∏—è -->
          <div id="scPickerSynastryPane" style="display:none;flex:1;overflow-y:auto;display:none;flex-direction:column;gap:12px;min-height:0;">
            <div>
              <div style="font-size:0.75rem;color:rgba(255,255,255,0.4);margin-bottom:6px;text-transform:uppercase;letter-spacing:0.06em;">–ö–∞—Ä—Ç–æ—á–∫–∞ A</div>
              <div id="scPickerSynListA" style="display:flex;flex-direction:column;gap:6px;"></div>
            </div>
            <div>
              <div style="font-size:0.75rem;color:rgba(255,255,255,0.4);margin-bottom:6px;text-transform:uppercase;letter-spacing:0.06em;">–ö–∞—Ä—Ç–æ—á–∫–∞ B</div>
              <div id="scPickerSynListB" style="display:flex;flex-direction:column;gap:6px;"></div>
            </div>
          </div>
          <!-- –ö–Ω–æ–ø–∫–∞ –ø—Ä–∏–º–µ–Ω–∏—Ç—å -->
          <button id="scPickerApplyBtn" type="button" class="btn-pay" onclick="scApplyCardPicker()" style="margin-top:16px;width:100%;padding:13px;border-radius:13px;background:linear-gradient(135deg,rgba(0,255,163,0.15),rgba(0,255,163,0.08));color:#00FFA3;font-size:0.92rem;font-weight:700;cursor:pointer;font-family:inherit;">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
        </div>
      </div>

      <!-- –°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π ‚Äî flex:1 + overflow-y:auto -->
      <div id="scPageChat" style="display:none;flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:10px;background:linear-gradient(180deg,transparent 0%,rgba(8,7,26,0.3) 100%);">
        <!-- –ï—Å–ª–∏ –Ω–µ—Ç –Ω–∏ –∑–∞—è–≤–∫–∏, –Ω–∏ –ø—Ä–æ—Ñ–∏–ª—è -->
        <div id="scPageNoRequest" style="display:none;background:linear-gradient(135deg,rgba(var(--primary-rgb),0.08),rgba(var(--secondary-rgb),0.05));border:1px solid rgba(var(--primary-rgb),0.25);border-radius:16px;padding:18px;text-align:center;">
          <div style="font-size:1.4rem;margin-bottom:8px;">üéµ</div>
          <div style="font-weight:700;color:var(--primary-color);margin-bottom:6px;font-size:0.92rem;">–ù—É–∂–Ω—ã —Ç–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ</div>
          <div style="font-size:0.82rem;color:rgba(255,255,255,0.55);line-height:1.6;margin-bottom:14px;">Soul Chat —Å—Ç—Ä–æ–∏—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ–Ω–∏ –∏ –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è. –ó–∞–ø–æ–ª–Ω–∏ –ø—Ä–æ—Ñ–∏–ª—å –∏–ª–∏ —Å–æ–∑–¥–∞–π –ø–µ—Ä–≤—É—é –∑–∞—è–≤–∫—É –Ω–∞ –ø–µ—Å–Ω—é.</div>
          <div style="display:flex;flex-direction:column;gap:9px;">
            <button type="button" onclick="goToPage('profilePage')" style="width:100%;padding:11px;border-radius:12px;background:linear-gradient(135deg,rgba(var(--primary-rgb),0.25),rgba(var(--secondary-rgb),0.2));border:1px solid rgba(var(--primary-rgb),0.4);color:var(--primary-color);font-size:0.9rem;font-weight:700;cursor:pointer;font-family:inherit;box-shadow:none;animation:none;">
              –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å ‚Üí
            </button>
            <button type="button" onclick="goToPage('formPage')" style="width:100%;padding:11px;border-radius:12px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.12);color:rgba(255,255,255,0.6);font-size:0.86rem;font-weight:500;cursor:pointer;font-family:inherit;box-shadow:none;animation:none;">
              –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –ø–µ—Å–Ω—é ‚Üí
            </button>
          </div>
        </div>
        <!-- –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π -->
        <div id="scPageHistory" aria-live="polite" aria-label="–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ Soul Chat"></div>
        <!-- –¢–∏–∑–µ—Ä —Å–∏–Ω–∞—Å—Ç—Ä–∏–∏ –¥–ª—è Basic/Plus (–Ω–µ Master) -->
        <div id="scSynastryTeaser" style="display:none;margin-top:12px;padding:12px 14px;border-radius:14px;background:rgba(var(--primary-rgb),0.07);border:1px solid rgba(var(--primary-rgb),0.18);font-size:0.82rem;color:rgba(255,255,255,0.6);line-height:1.5;">
          <span style="color:rgba(var(--primary-rgb),0.8);">‚ú¶</span> –°–∏–Ω–∞—Å—Ç—Ä–∏—è ‚Äî –≥–ª—É–±–æ–∫–∏–π –¥–∏–∞–ª–æ–≥ –Ω–∞ –ª—é–±—ã–µ —Ç–µ–º—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–≤—É—Ö –∫–∞—Ä—Ç —Å—Ä–∞–∑—É ‚Äî –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ç–∞—Ä–∏—Ñ–µ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è
          <button type="button" onclick="goToMasterPlanFrom('soulChatPage')" style="display:inline-block;margin-left:8px;padding:3px 10px;border-radius:8px;background:rgba(var(--primary-rgb),0.15);border:1px solid rgba(var(--primary-rgb),0.3);color:var(--primary-color);font-size:0.78rem;font-weight:600;cursor:pointer;font-family:inherit;box-shadow:none;animation:none;min-height:unset;">–û—Ç–∫—Ä—ã—Ç—å —Ç–∞—Ä–∏—Ñ ‚Üí</button>
        </div>
        <div id="scPageStatus" style="display:none;text-align:center;font-size:0.8rem;color:rgba(255,255,255,0.45);padding:8px 0;"></div>
      </div>

      <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ ‚Äî –ø—Ä–∏–ª–∏–ø–∞–µ—Ç –∫ –Ω–∏–∑—É, –≤–Ω–µ –∑–æ–Ω—ã —Å–∫—Ä–æ–ª–ª–∞ -->
      <div id="scInputArea" style="display:none;flex-shrink:0;padding:12px 14px calc(env(safe-area-inset-bottom)+12px);border-top:1px solid rgba(var(--primary-rgb),0.1);background:linear-gradient(180deg,#0a091e 0%,#08071a 100%);">
        <div class="request-input-box">
          <textarea id="scPageQuestion" class="request-textarea" rows="2"
            placeholder="–ó–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å —Å–≤–æ–µ–π –¥—É—à–µ‚Ä¶" aria-label="–í–æ–ø—Ä–æ—Å"></textarea>
          <div class="sc-send-bar">
            <span class="sc-char-hint" id="scPageCharHint"></span>
            <button id="scPageSendBtn" type="button" style="padding:9px 18px;border-radius:10px;background:linear-gradient(135deg,rgba(var(--primary-rgb),0.28),rgba(var(--secondary-rgb),0.18));border:1px solid rgba(var(--primary-rgb),0.38);color:var(--primary-color);font-size:0.85rem;font-weight:700;cursor:pointer;font-family:inherit;letter-spacing:0.02em;box-shadow:none;animation:none;min-height:unset;white-space:nowrap;">
              –°–ø—Ä–æ—Å–∏—Ç—å ‚ú®
            </button>
          </div>
        </div>
      </div>

    </div>
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ ¬´–°–ø–∞—Å–∏–±–æ –∑–∞ –æ–ø–ª–∞—Ç—É¬ª (—Ä–µ–¥–∏—Ä–µ–∫—Ç —Å HOT) -->
    <div class="page" id="paymentThanksPage">
      <header class="page-header">
        <div style="font-size:0.78rem;font-weight:400;letter-spacing:0.12em;color:rgba(var(--primary-rgb),0.5);margin:2px 0 0;text-transform:uppercase">–ú—É–∑—ã–∫–∞ —Ç–≤–æ–µ–π –¥—É—à–∏</div>
        <div id="paymentThanksSubtitle" class="subtitle">–∑–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞</div>
      </header>
      <div class="section page-scroll" style="text-align:center; padding-top:40px">
        <div id="paymentThanksIcon" style="width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,rgba(var(--primary-rgb),0.2),rgba(var(--primary-rgb),0.06));border:1.5px solid rgba(var(--primary-rgb),0.35);display:flex;align-items:center;justify-content:center;margin:0 auto 20px;font-size:1.8rem;color:var(--primary-color);font-weight:300">‚úì</div>
        <h2 id="paymentThanksTitle" class="success-title" style="font-size:1.5rem; margin:0 0 12px 0">–û–ø–ª–∞—Ç–∞ –ø—Ä–æ—à–ª–∞</h2>
        <p class="success-text" id="paymentThanksMessage" style="margin:0 0 24px 0; font-size:0.92rem; color:rgba(255,255,255,0.6); line-height:1.65">
          –ü–µ—Å–Ω—è —Å–æ–∑–¥–∞—ë—Ç—Å—è. –ü—Ä–∏–¥—ë—Ç –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º. –ú–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ.
        </p>
        <button id="paymentThanksBackBtn" class="primary" style="margin-bottom:12px">–°–æ–∑–¥–∞—Ç—å —Å–≤–æ—é –ø–µ—Å–Ω—é</button>
        <p id="paymentThanksHint" style="font-size:0.72rem;color:rgba(255,255,255,0.3);line-height:1.5;margin:0;">–ù–µ –ø—Ä–∏—à–ª–∞ –∑–∞ 20 –º–∏–Ω—É—Ç? –ù–∞–ø–∏—à–∏ –±–æ—Ç—É ¬´–ø–µ—Å–Ω—è –Ω–µ –ø—Ä–∏—à–ª–∞¬ª</p>
      </div>
  </div>

  <script>
    // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ ¬´–∑–∞–≤–∏—Å–∞–µ—Ç¬ª –±–µ–∑ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
    (function() {
      var errorMsg = '–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫. –ü–æ–ø—Ä–æ–±—É–π –æ–±–Ω–æ–≤–∏—Ç—å.';
      function showErrorToast() {
        try {
          var toast = document.createElement('div');
          toast.setAttribute('role', 'alert');
          toast.style.cssText = 'position:fixed;inset:0;z-index:99999;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.7);color:#fff;font-family:inherit;font-size:1rem;padding:24px;text-align:center;';
          toast.textContent = errorMsg;
          document.body.appendChild(toast);
          setTimeout(function() { if (toast.parentNode) toast.parentNode.removeChild(toast); }, 8000);
        } catch (_) {}
      }
      window.onerror = function(msg, url, line, col, err) {
        console.error('[YupSoul]', msg, url, line, col, err);
        showErrorToast();
        return true;
      };
      window.addEventListener('unhandledrejection', function(e) {
        console.error('[YupSoul] unhandledrejection', e.reason);
        showErrorToast();
        e.preventDefault();
      });
    })();
    document.addEventListener('DOMContentLoaded', function() {
      (function removeBotNameHeaders() {
        document.querySelectorAll('.header-title, .page-header-title, .app-title').forEach(function(el) { el.remove(); });
        document.querySelectorAll('#homeTopBar, .page-header, .form-header-bar').forEach(function(header) {
          [].slice.call(header.childNodes).forEach(function(node) {
            if (node.nodeType === 1 && node.textContent && node.textContent.trim() === 'YupSoul Personal Music') node.remove();
          });
        });
      })();
      var tg = null;
      var INIT_DATA_STORAGE_KEY = 'tg_init_data';
      var LANG_STORAGE_KEY = 'yupsoul_lang';
      var BOT_USERNAME = 'Yup_Soul_bot'; // –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –∏–º–µ–Ω–∏ –±–æ—Ç–∞
      var LANG = {
        ru: {
          tagline: '–ú—É–∑—ã–∫–∞ —Ç–≤–æ–µ–π –¥—É—à–∏',
          startBtn: '–°–æ–∑–¥–∞—Ç—å —Å–≤–æ—é –ø–µ—Å–Ω—é', myProfile: 'üë§ –ü—Ä–æ—Ñ–∏–ª—å', myHeroes: '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è', myHelp: '–ü–æ–º–æ—â—å', admin: 'üëë –ê–¥–º–∏–Ω–∫–∞',
          profileTitle: '–ü—Ä–æ—Ñ–∏–ª—å', profileSubtitle: '–¢–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏',
          profileFreeCredits: '–ë–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π', profileInviteFriend: '–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞', profileShare: '–ü–æ–¥–µ–ª–∏—Ç—å—Å—è',
          profileInvited: '–ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ', profileActivated: '–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ', profileCreateSong: '–°–æ–∑–¥–∞—Ç—å –ø–µ—Å–Ω—é',
          heroesTitle: '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è', heroesSubtitle: '–ö–∞—Ä—Ç–æ—Ç–µ–∫–∞ –ª—é–¥–µ–π',
          searchByName: '–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏', searchPlaceholder: '–í–≤–µ–¥–∏—Ç–µ –∏–º—è...', searchBtn: '–ò—Å–∫–∞—Ç—å',
          addHero: '‚ûï –î–æ–±–∞–≤–∏—Ç—å –≥–µ—Ä–æ—è', heroName: '–ò–º—è *', heroBirthdate: '–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è', heroBirthtime: '–í—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è',
          heroBirthplace: '–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è', heroBirthplacePh: '–ì–æ—Ä–æ–¥, —Å—Ç—Ä–∞–Ω–∞', heroNotes: '–î–æ—Å—å–µ / –∑–∞–º–µ—Ç–∫–∏', heroNotesPh: '–ó–∞–º–µ—Ç–∫–∏ –æ –∫–ª–∏–µ–Ω—Ç–µ',
          unknownTime: '–ù–µ –∑–Ω–∞—é —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è', cancel: '–û—Ç–º–µ–Ω–∞', save: '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å', back: '‚Üê –ù–∞–∑–∞–¥',
          gender: '–ü–æ–ª', genderSelect: '–í—ã–±–µ—Ä–∏', male: '–ú—É–∂—Å–∫–æ–π', female: '–ñ–µ–Ω—Å–∫–∏–π', other: '–î—Ä—É–≥–æ–π',
          modeType: '–§–æ—Ä–º–∞—Ç –ø–µ—Å–Ω–∏', modeSubtitle: '–î–ª—è –∫–æ–≥–æ —Å–æ–∑–¥–∞—ë–º?',
          modeSingle: '–û–±–æ –º–Ω–µ', modeSingleDesc: '–ü–µ—Å–Ω—è –ø–æ —Ç–≤–æ–µ–π –¥–∞—Ç–µ —Ä–æ–∂–¥–µ–Ω–∏—è',
          modeCouple: '–ü—Ä–æ –¥–≤–æ–∏—Ö', modeCoupleDesc: '–ü–µ—Å–Ω—è –¥–ª—è –¥–≤—É—Ö –ª—é–¥–µ–π',
          modeTransit: '–≠–Ω–µ—Ä–≥–∏—è<br>–º–æ–º–µ–Ω—Ç–∞', modeTransitDesc: '–ü–µ—Å–Ω—è –æ —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–º –¥–Ω–µ',
          namePh: '–ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?', birthdateLabel: '–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è', birthplacePh: '–ì–æ—Ä–æ–¥ –∏–ª–∏ —Å—Ç—Ä–∞–Ω–∞ ‚Äî –≤—ã–±–µ—Ä–∏ –∏–∑ –ø–æ–¥—Å–∫–∞–∑–æ–∫',
          birthplaceHint: '–ù–∞—á–Ω–∏ –≤–≤–æ–¥–∏—Ç—å –≥–æ—Ä–æ–¥ –∏ –≤—ã–±–µ—Ä–∏ –∏–∑ –≤—ã–ø–∞–≤—à–µ–≥–æ —Å–ø–∏—Å–∫–∞.',
          unknownTimeShort: '–ù–µ –∑–Ω–∞—é', secondPersonTitle: '–î–ª—è –¥–≤–æ–∏—Ö', name2Ph: '–ò–º—è –≤—Ç–æ—Ä–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞',
          birthplace2Ph: '–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è –≤—Ç–æ—Ä–æ–≥–æ', birthtime2Ph: '–í—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è',
          transitTitle: '–≠–Ω–µ—Ä–≥–∏—è –º–æ–º–µ–Ω—Ç–∞', transitDatePh: '–î–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è', transitTimePh: '–í—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è',
          transitLocationPh: '–ì–æ—Ä–æ–¥ –¥–ª—è —ç–Ω–µ—Ä–≥–∏–∏ –º–æ–º–µ–Ω—Ç–∞', transitLocationOk: '–õ–æ–∫–∞—Ü–∏—è —É–∫–∞–∑–∞–Ω–∞ –≤–µ—Ä–Ω–æ',
          transitIntentPh: '–ù–∞–º–µ—Ä–µ–Ω–∏–µ –º–æ–º–µ–Ω—Ç–∞',
          sendRequest: '–ß—Ç–æ –±—É–¥–µ—à—å –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è?', quickRequests: '–ë—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã', hide: '–°–∫—Ä—ã—Ç—å',
          requestDesc: '–û —á—ë–º –ø–µ—Å–Ω—è? –õ—é–±–æ–π –∑–∞–ø—Ä–æ—Å ‚Äî –æ—Ç —é–º–æ—Ä–∞ –¥–æ –≥–ª—É–±–æ–∫–æ–π —Ç–µ–º—ã',
          requestQuickHint: '–í—ã–±–µ—Ä–∏ –≥–æ—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –Ω–∞–ø–∏—à–∏ —Å–≤–æ–π',
          requestPh: '–ù–∞–ø–∏—à–∏ –ª—é–±–æ–π –∑–∞–ø—Ä–æ—Å', toPayment: '–ö –æ–ø–ª–∞—Ç–µ',
          paymentSubtitle: '–¢–≤–æ—è –ø–µ—Å–Ω—è', paymentAndAccess: '–û–ø–ª–∞—Ç–∞ –∏ –¥–æ—Å—Ç—É–ø',
          paymentIntro: '–ü–µ—Ä–≤–∞—è –ø–µ—Å–Ω—è ‚Äî –≤ –ø–æ–¥–∞—Ä–æ–∫. –î–∞–ª—å—à–µ –º–æ–∂–Ω–æ –æ–ø–ª–∞—Ç–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏–ª–∏ –æ—Ñ–æ—Ä–º–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø.',
          loadingPricing: '–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞—Ä–∏—Ñ–æ–≤...', currentItem: '–¢–µ–∫—É—â–∏–π —ç–ª–µ–º–µ–Ω—Ç',
          promoCode: '–ü—Ä–æ–º–æ–∫–æ–¥', apply: '–ü—Ä–∏–º–µ–Ω–∏—Ç—å', backFromPayment: '‚Üê –ù–∞–∑–∞–¥',
          submitAndContinue: '–û—Ñ–æ—Ä–º–∏—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å', submitRequest: '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É',
          submitHint: '–ü–µ—Å–Ω—è –ø—Ä–∏–¥—ë—Ç –≤ —ç—Ç–æ—Ç —á–∞—Ç —Å –±–æ—Ç–æ–º. –ï—Å–ª–∏ –≤—ã –µ—â—ë –Ω–µ –Ω–∞–∂–∏–º–∞–ª–∏ ¬´–°—Ç–∞—Ä—Ç¬ª –≤ –±–æ—Ç–µ ‚Äî –Ω–∞–∂–º–∏—Ç–µ –µ–≥–æ —Å–µ–π—á–∞—Å.',
          paymentPageIntroAfterSubmit: '–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞. –í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –¥–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ HOT Pay.',
          paymentPageIntroOrPay: '–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥, –∏–ª–∏ –æ–ø–ª–∞—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ HOT Pay.',
          paymentPageTagline: '–ü—Ä–æ–º–æ–∫–æ–¥ –∏–ª–∏ –æ–ø–ª–∞—Ç–∞',
          payWithHot: '–û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ HOT Pay',
          firstFree: '–ü–µ—Ä–≤–∞—è –ø–µ—Å–Ω—è –¥–æ—Å—Ç—É–ø–Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ.',
          paymentRequired: '–û–ø–ª–∞—Ç–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫.',
          subscriptionActive: '–£ –≤–∞—Å –∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ ‚Äî –º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å.',
          catalogLoadFailed: '–¢–∞—Ä–∏—Ñ—ã –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å. –ù–∞–∂–º–∏—Ç–µ ¬´–û—Ñ–æ—Ä–º–∏—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å¬ª ‚Äî —Å—Ç–æ–∏–º–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –±—ç–∫–µ–Ω–¥.',
          promoApplied: '–ü—Ä–æ–º–æ–∫–æ–¥ {code}: -{amount} {currency}',
          creatingKey: '–°–æ–∑–¥–∞—é —Ç–≤–æ—é –ø–µ—Å–Ω—é...',
          creatingKeyDesc: '–ú–∞–≥–∏—è —Ç–≤–æ—Ä–∏—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –¢–≤–æ—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –ø–µ—Å–Ω—è —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö.',
          keyActivated: '–ü–µ—Å–Ω—è —Å–æ–∑–¥–∞–Ω–∞!', done: '–ì–æ—Ç–æ–≤–æ!',
          successText: '–¢–≤–æ—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –ø–µ—Å–Ω—è —Å–æ–∑–¥–∞–Ω–∞! –£–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç—Ä–µ–∫ –ø–æ —Ç–≤–æ–∏–º –¥–∞–Ω–Ω—ã–º ‚Äî —Å–ª—É—à–∞–π –∫–æ–≥–¥–∞ –∑–∞—Ö–æ—á–µ—à—å.',
          yourSong: 'üéµ –¢–≤–æ—è –ø–µ—Å–Ω—è',
          songPreviewText: '–¢–≤–æ—è —É–Ω–∏–∫–∞–ª—å–Ω–∞—è –∞—É–¥–∏–æ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è —É–∂–µ –∂–¥—ë—Ç —Ç–µ–±—è –≤ –±–æ—Ç–µ. –°–ª—É—à–∞–π –µ—ë –∫–∞–∂–¥–æ–µ —É—Ç—Ä–æ, —á—Ç–æ–±—ã –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å—Å—è –Ω–∞ –≤–æ–ª–Ω—É —É—Å–ø–µ—Ö–∞.',
          whatNext: '–ß—Ç–æ –¥–∞–ª—å—à–µ:', openBot: '–û—Ç–∫—Ä–æ–π –±–æ—Ç–∞',
          soulChat: '–ü–æ–≥–æ–≤–æ—Ä–∏—Ç—å —Å –¥—É—à–æ–π', soulChatPay: '–ö –æ–ø–ª–∞—Ç–µ ‚Äî Soul Basic / Soul Plus',
          newKey: '–°–æ–∑–¥–∞—Ç—å –µ—â—ë –æ–¥–Ω—É –ø–µ—Å–Ω—é',
          paymentThanks: '–°–ø–∞—Å–∏–±–æ –∑–∞ –æ–ø–ª–∞—Ç—É', thanksSubtitle: '–∑–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞', paymentThanksBackToForm: '–°–æ–∑–¥–∞—Ç—å —Å–≤–æ—é –ø–µ—Å–Ω—é',
          songInProgress: '–ü–µ—Å–Ω—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –ø—Ä–∏–¥—ë—Ç –≤ —ç—Ç–æ—Ç —á–∞—Ç —Å –±–æ—Ç–æ–º. –ú–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–ø–∞–¥—ë—Ç. –°–ø–∞—Å–∏–±–æ ‚ù§Ô∏è',
          songInProgressConfirmed: '–ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞. –ü–µ—Å–Ω—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –Ω–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ ‚Äî –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞, –ø—Ä–∏–¥—ë—Ç —Å—é–¥–∞ –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º. –ú–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–ø–∞–¥—ë—Ç. –°–ø–∞—Å–∏–±–æ, —á—Ç–æ –æ—Å—Ç–∞—ë—à—å—Å—è —Å –Ω–∞–º–∏ ‚ù§Ô∏è',
          thanksDone: '–ì–æ—Ç–æ–≤–æ',
          notFromTelegram: '–û—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ —á–∞—Ç–∞ —Å –±–æ—Ç–æ–º –≤ Telegram (–∫–Ω–æ–ø–∫–∞ –º–µ–Ω—é) ‚Äî –∏–Ω–∞—á–µ –∑–∞—è–≤–∫–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è.',
          notFound: '–ù–µ –Ω–∞–π–¥–µ–Ω–æ', searchError: '–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞',
          soulChatLoad: '–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶',
          soulChatHasAccess: '–£ —Ç–µ–±—è –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ Soul Chat. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ ‚Äî –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –±–æ—Ç. –í –±–æ—Ç–µ –Ω–∞–ø–∏—à–∏ /soulchat –∏ –∑–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å —Å–≤–æ–µ–π –¥—É—à–µ.',
          soulChatNoAccess: 'Soul Chat ‚Äî –¥–∏–∞–ª–æ–≥–∏ —Å –¥—É—à–æ–π. –î–æ—Å—Ç—É–ø –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ Soul Basic (–¥–æ 50 —Å–æ–æ–±—â–µ–Ω–∏–π/–º–µ—Å) –∏–ª–∏ Soul Plus (–±–µ–∑ –ª–∏–º–∏—Ç–∞).',
          soulChatDefault: 'Soul Chat ‚Äî –¥–∏–∞–ª–æ–≥–∏ —Å –¥—É—à–æ–π –ø–æ –∑–∞—è–≤–∫–µ. –î–æ—Å—Ç—É–ø –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ.',
          soulChatNoApi: 'Soul Chat ‚Äî –¥–∏–∞–ª–æ–≥–∏ —Å –¥—É—à–æ–π –ø–æ –∑–∞—è–≤–∫–µ. –î–æ—Å—Ç—É–ø –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ Soul Basic –∏–ª–∏ Soul Plus. –û—Ñ–æ—Ä–º–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏: ¬´–ö –æ–ø–ª–∞—Ç–µ¬ª.',
          greeting: '–ü—Ä–∏–≤–µ—Ç, {name}!',
          greetingDefault: '–ú—É–∑—ã–∫–∞ —Ç–≤–æ–µ–π –¥—É—à–∏',
          onboardingSlide1Title: '–ï—Å—Ç—å –ø–µ—Å–Ω—è ‚Äî –æ —Ç–µ–±–µ',
          onboardingSlide1Text: '–ù–∞–ø–∏—Å–∞–Ω–Ω–∞—è –ø–æ –¥–∞—Ç–µ —Ä–æ–∂–¥–µ–Ω–∏—è. –ù–µ —à–∞–±–ª–æ–Ω ‚Äî –∂–∏–≤–æ–π —Ç–µ–∫—Å—Ç –æ —Ç–≤–æ—ë–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–µ, —Å–∏–ª–µ –∏ –ø—É—Ç–∏.',
          onboardingSlide2Title: '–¢–æ–ª—å–∫–æ –æ —Ç–µ–±–µ',
          onboardingSlide2Text: '–ö–∞–∂–¥–∞—è ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω–∞. –ï—ë –±–æ–ª—å—à–µ –Ω–µ—Ç –Ω–∏ —É –∫–æ–≥–æ. –ù–∏ –æ–¥–Ω–∞ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è.',
          onboardingSlide3Title: '–ü–µ—Ä–≤–∞—è ‚Äî –≤ –ø–æ–¥–∞—Ä–æ–∫',
          onboardingSlide3Text: '–í–≤–µ–¥–∏ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è ‚Äî –∏ –ø–æ–ª—É—á–∏ —Å–≤–æ—é –ø–µ—Å–Ω—é –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º.',
          onboardingBtnStart: '–ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ—é –ø–µ—Å–Ω—é',
          alertNameShort: '–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞', alertBirthdate: '–í—ã–±–µ—Ä–∏ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è',
          alertBirthplace: '–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞', alertBirthplaceHint: '–í—ã–±–µ—Ä–∏ –ª–æ–∫–∞—Ü–∏—é –∏–∑ —Å–ø–∏—Å–∫–∞ –ø–æ–¥—Å–∫–∞–∑–æ–∫',
          alertBirthtime: '–£–∫–∞–∂–∏ –≤—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è –∏–ª–∏ –æ—Ç–º–µ—Ç—å "–ù–µ –∑–Ω–∞—é"', alertGender: '–£–∫–∞–∂–∏ –ø–æ–ª', alertLanguage: '–í—ã–±–µ—Ä–∏ —è–∑—ã–∫',
          alertName2Short: '–ò–º—è –≤—Ç–æ—Ä–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ ‚Äî –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞', alertBirthdate2: '–£–∫–∞–∂–∏ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è –≤—Ç–æ—Ä–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞',
          alertBirthplace2: '–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è –≤—Ç–æ—Ä–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞',
          alertBirthtime2: '–£–∫–∞–∂–∏ –≤—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è –≤—Ç–æ—Ä–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞', alertGender2: '–í—ã–±–µ—Ä–∏ –ø–æ–ª –≤—Ç–æ—Ä–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞',
          alertTransitDate: '–£–∫–∞–∂–∏ –¥–∞—Ç—É —Å–æ–±—ã—Ç–∏—è', alertTransitLocation: '–£–∫–∞–∂–∏ –ª–æ–∫–∞—Ü–∏—é —Å–æ–±—ã—Ç–∏—è', alertTransitConfirm: '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏, —á—Ç–æ –ª–æ–∫–∞—Ü–∏—è —É–∫–∞–∑–∞–Ω–∞ –≤–µ—Ä–Ω–æ',
          alertRequestShort: '–î–æ–±–∞–≤—å –∑–∞–ø—Ä–æ—Å (5+ —Å–∏–º–≤–æ–ª–æ–≤)', alertRequestLong: '–†–∞—Å—Å–∫–∞–∂–∏ –í—Å–µ–ª–µ–Ω–Ω–æ–π –ø–æ–¥—Ä–æ–±–Ω–µ–µ (–º–∏–Ω–∏–º—É–º 15 —Å–∏–º–≤–æ–ª–æ–≤)',
          alertYourPath: '–í—ã–±–µ—Ä–∏ —Å–≤–æ–π –ø—É—Ç—å', alertNoApi: '–ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∞–¥—Ä–µ—Å API.', alertOpenFromBot: '–û—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ —á–∞—Ç–∞ —Å –±–æ—Ç–æ–º –≤ Telegram ‚Äî –∏–Ω–∞—á–µ –∑–∞—è–≤–∫—É –Ω–µ–ª—å–∑—è –ø—Ä–∏–Ω—è—Ç—å.',
          alertServerSleep: '–°–µ—Ä–≤–µ—Ä –ø—Ä–æ—Å–Ω—É–ª—Å—è –Ω–µ —Å—Ä–∞–∑—É. –ü–æ–¥–æ–∂–¥–∏ –æ–∫–æ–ª–æ –º–∏–Ω—É—Ç—ã –∏ –Ω–∞–∂–º–∏ ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É¬ª —Å–Ω–æ–≤–∞.',
          sending: '–û—Ç–ø—Ä–∞–≤–ª—è—é‚Ä¶',
          universeHeard: '‚ú® {name}, –í—Å–µ–ª–µ–Ω–Ω–∞—è —É—Å–ª—ã—à–∞–ª–∞ —Ç–≤–æ–π –∑–∞–ø—Ä–æ—Å.\n\n–¢–≤–æ—è –ø–µ—Å–Ω—è —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏ –ø—Ä–∏–¥—ë—Ç –≤ —ç—Ç–æ—Ç —á–∞—Ç, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞.',
          universeHeardCouple: '‚ú® {name} –∏ {name2}, –í—Å–µ–ª–µ–Ω–Ω–∞—è —É—Å–ª—ã—à–∞–ª–∞ –≤–∞—à –∑–∞–ø—Ä–æ—Å.\n\n–í–∞—à–∞ –ø–µ—Å–Ω—è —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏ –ø—Ä–∏–¥—ë—Ç –≤ —ç—Ç–æ—Ç —á–∞—Ç, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞.',
          universeHeardTransit: '‚ú® {name}, –í—Å–µ–ª–µ–Ω–Ω–∞—è —É—Å–ª—ã—à–∞–ª–∞ —Ç–≤–æ–π –∑–∞–ø—Ä–æ—Å.\n\n–ü–µ—Å–Ω—è ¬´–≠–Ω–µ—Ä–≥–∏—è –î–Ω—è¬ª —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏ –ø—Ä–∏–¥—ë—Ç –≤ —ç—Ç–æ—Ç —á–∞—Ç, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞.',
          langSong: '–Ø–∑—ã–∫ –ø–µ—Å–Ω–∏', langRu: '–†—É—Å—Å–∫–∏–π', langEn: 'English', langDe: 'Deutsch', langFr: 'Fran√ßais', langUk: '–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞',
          quick1: '–ì–∞—Ä–º–æ–Ω–∏—è –∏ –ª—é–±–æ–≤—å –∫ —Å–µ–±–µ', quick2: '–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ', quick3: '–¢–≤–æ—Ä—á–µ—Å–∫–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª', quick4: '–û—Ç–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—à–ª–æ–µ',
          quick5: '–ë–∞–ª–∞–Ω—Å –∂–∏–∑–Ω–∏', quick6: '–î–æ–≤–µ—Ä–∏–µ –∏ –ø—Ä–∏–Ω—è—Ç–∏–µ', quick7: '–ò—Å—Ü–µ–ª–µ–Ω–∏–µ –∏ —Å–≤–æ–±–æ–¥–∞', quick8: '–ü—É—Ç—å –∫ —Å—á–∞—Å—Ç—å—é',
          quick9: '–°–∏–ª–∞ –∏ –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–µ', quick10: '–ì–ª—É–±–∏–Ω–∞ –∏ —Ç–∏—à–∏–Ω–∞', quick11: '–ù–µ–∂–Ω–æ—Å—Ç—å –∏ –∑–∞–±–æ—Ç–∞', quick12: '–Æ–º–æ—Ä –∏ –ª—ë–≥–∫–æ—Å—Ç—å',
          quick1t: '–ì–∞—Ä–º–æ–Ω–∏—è –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö –∏ –ª—é–±–æ–≤—å –∫ —Å–µ–±–µ', quick2t: '–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ –æ–ø–æ—Ä–∞ –Ω–∞ —Å–µ–±—è',
          quick3t: '–†–∞—Å–∫—Ä—ã—Ç—å —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –±–µ–∑ —Å—Ç—Ä–∞—Ö–∞', quick4t: '–û—Ç–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—à–ª–æ–µ –∏ –æ—Ç–∫—Ä—ã—Ç—å –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏',
          quick5t: '–ë–∞–ª–∞–Ω—Å —Ä–∞–±–æ—Ç—ã –∏ –ª–∏—á–Ω–æ–π –∂–∏–∑–Ω–∏', quick6t: '–î–æ–≤–µ—Ä—è—Ç—å –∂–∏–∑–Ω–∏ –∏ –æ—Ç–ø—É—Å–∫–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å',
          quick7t: '–ò—Å—Ü–µ–ª–∏—Ç—å –¥–µ—Ç—Å–∫–∏–µ —Ç—Ä–∞–≤–º—ã –∏ –æ–±—Ä–µ—Å—Ç–∏ —Å–≤–æ–±–æ–¥—É', quick8t: '–ù–∞–π—Ç–∏ —Å–≤–æ–π –ø—É—Ç—å –∫ —Å—á–∞—Å—Ç—å—é –∏ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—é',
          quick9t: '–ú–æ—â–Ω–∞—è –ø–µ—Å–Ω—è –æ –º–æ–µ–π —Å–∏–ª–µ –∏ –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–∏', quick10t: '–ú–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω–∞—è –ø–µ—Å–Ω—è –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ –∏—Å—Ü–µ–ª–µ–Ω–∏—è',
          quick11t: '–¢—ë–ø–ª–∞—è –ø–µ—Å–Ω—è –æ –∑–∞–±–æ—Ç–µ –∏ –Ω–µ–∂–Ω–æ—Å—Ç–∏', quick12t: '–í–µ—Å—ë–ª–∞—è –ø–µ—Å–Ω—è —Å —Å–∞–º–æ–∏—Ä–æ–Ω–∏–µ–π –ø—Ä–æ –º–æ–∏ —Å–ª–∞–±–æ—Å—Ç–∏',
          promoError: '–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥',
          promoCleared: '–ü—Ä–æ–º–æ–∫–æ–¥ –æ—á–∏—â–µ–Ω.', promoApplied: '–ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–º–µ–Ω—ë–Ω: –∏—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ {amount} {currency}',
          promoAppliedHint: '–ü—Ä–æ–º–æ–∫–æ–¥ {code}: -{amount} {currency}',
          paymentRequiredOpening: '–¢—Ä–µ–±—É–µ—Ç—Å—è –æ–ø–ª–∞—Ç–∞. –û—Ç–∫—Ä—ã–≤–∞—é HOT Checkout...',
          promoFreeGen: '–ü—Ä–æ–º–æ–∫–æ–¥ –¥–∞–ª –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é. –ó–∞–ø—É—Å–∫...',
          hotCheckoutOpened: '–û—Ç–∫—Ä—ã—Ç HOT Checkout. –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –≤–µ—Ä–Ω–∏—Å—å –≤ Mini App ‚Äî —Å—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.',
          paymentNotConfirmed: '–û–ø–ª–∞—Ç–∞ –ø–æ–∫–∞ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞. –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å –ø–æ–∑–∂–µ –∏–ª–∏ –æ—Ç–∫—Ä–æ–π –æ–ø–ª–∞—Ç—É –ø–æ–≤—Ç–æ—Ä–Ω–æ.',
          paymentConfirmed: '–û–ø–ª–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞. –ó–∞–ø—É—Å–∫–∞—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é...',
          paymentReceivedNoStart: '–û–ø–ª–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∞, –Ω–æ –∞–≤—Ç–æ‚Äë—Å—Ç–∞—Ä—Ç –Ω–µ —É–¥–∞–ª—Å—è. –ó–∞–ø—É—Å—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –≤ –∞–¥–º–∏–Ω–∫–µ –ø–æ request_id: {id}',
          submitFailed: '–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É. –ü–æ–¥–æ–∂–¥–∏ –º–∏–Ω—É—Ç—É –∏ –Ω–∞–∂–º–∏ ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É¬ª —Å–Ω–æ–≤–∞ –∏–ª–∏ –æ—Ç–∫—Ä–æ–π Mini App –∑–∞–Ω–æ–≤–æ –∏–∑ —á–∞—Ç–∞ —Å –±–æ—Ç–æ–º.',
          errorOp: '–û—à–∏–±–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ–ø–ª–∞—Ç—ã/–∑–∞—è–≤–∫–∏',
          alertTransitLocation: '–£–∫–∞–∂–∏ –ª–æ–∫–∞—Ü–∏—é —Å–æ–±—ã—Ç–∏—è', alertTransitConfirm: '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏, —á—Ç–æ –ª–æ–∫–∞—Ü–∏—è —É–∫–∞–∑–∞–Ω–∞ –≤–µ—Ä–Ω–æ',
          alertNoApi: '–ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∞–¥—Ä–µ—Å API.', alertOpenFromBot: '–û—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ —á–∞—Ç–∞ —Å –±–æ—Ç–æ–º –≤ Telegram ‚Äî –∏–Ω–∞—á–µ –∑–∞—è–≤–∫—É –Ω–µ–ª—å–∑—è –ø—Ä–∏–Ω—è—Ç—å.',
          alertOpenFromBotShort: '–û—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ —á–∞—Ç–∞ —Å –±–æ—Ç–æ–º –≤ Telegram.',
          alertPaymentFirst: '–°–Ω–∞—á–∞–ª–∞ –Ω–∞–∂–º–∏—Ç–µ ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É¬ª –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —à–∞–≥–µ.',
          alertLinkCopied: '‚úì –°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞. –í—Å—Ç–∞–≤—å—Ç–µ –µ—ë –≤ Safari –∏–ª–∏ Chrome –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ.',
          alertHeroName: '–í–≤–µ–¥–∏—Ç–µ –∏–º—è', alertError: '–û—à–∏–±–∫–∞', alertDeleteConfirm: '–£–¥–∞–ª–∏—Ç—å ¬´{name}¬ª? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.',
          alertSubmitError: '–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ',
          copyLinkPrompt: '–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:',
          songFormingText: '–¢–≤–æ—è –ø–µ—Å–Ω—è —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏ –ø—Ä–∏–¥—ë—Ç –≤ —ç—Ç–æ—Ç —á–∞—Ç, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞.',
          heroesLoading: '–ó–∞–≥—Ä—É–∑–∫–∞...', heroesEmpty: '–ü–æ–∫–∞ –Ω–µ—Ç –≥–µ—Ä–æ–µ–≤. –ù–∞–∂–º–∏ ¬´–î–æ–±–∞–≤–∏—Ç—å –≥–µ—Ä–æ—è¬ª.',
          heroesLoadError: '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É API.',
          loading: '–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶', noCardsYet: '–ù–µ—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫', heroHistLoading: '–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏‚Ä¶', heroHistEmpty: '–ì–µ–Ω–µ—Ä–∞—Ü–∏–π –ø–æ–∫–∞ –Ω–µ—Ç', heroHistLoadError: '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é', heroesPageLoadError: '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –≥–µ—Ä–æ–µ–≤', retry: '–ü–æ–≤—Ç–æ—Ä–∏—Ç—å',
          forMyself: '–î–ª—è —Å–µ–±—è', forHero: '–î–ª—è: {name}',
          previewHome: '–ì–ª–∞–≤–Ω–∞—è', previewForm: '–§–æ—Ä–º–∞', previewPayment: '–û–ø–ª–∞—Ç–∞', previewLoading: '–ó–∞–≥—Ä—É–∑–∫–∞', previewSuccess: '–£—Å–ø–µ—Ö',
          supportBtn: 'üí¨ –ù–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É',
          subActivated: 'üéâ –ü–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞!', subBtnProfile: 'üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å',
          helpPageTitle: '–ü–æ–º–æ—â—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞', helpPageSubtitle: '–í—Å—ë –æ YupSoul ‚Äî –ø—Ä–æ—Å—Ç–æ –∏ –ø–æ –¥–µ–ª—É',
          profileHelpBtn: '–ü–æ–º–æ—â—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞',
          profilePageTitle: '–ü—Ä–æ—Ñ–∏–ª—å', profileSectionMyData: '–ú–æ–∏ –¥–∞–Ω–Ω—ã–µ', profileSectionPlans: '–¢–∞—Ä–∏—Ñ—ã',
          profileLoadError: '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.', profileLoadRetry: '–ü–æ–≤—Ç–æ—Ä–∏—Ç—å',
          profileEditBtn: '–ò–∑–º–µ–Ω–∏—Ç—å ‚Üí', profileBalanceHintText: '–ü—Ä–∏–≥–ª–∞—à–∞–π –¥—Ä—É–∑–µ–π ‚Äî –ø–æ–ª—É—á–∞–π —Ç—Ä–µ–∫–∏ –≤ –ø–æ–¥–∞—Ä–æ–∫',
          profileSectionTracks: '–†–∞–∑–æ–≤—ã–µ —Ç—Ä–µ–∫–∏', profileRefTagline: '–ü—Ä–∏–≥–ª–∞—à–∞–π –¥—Ä—É–∑–µ–π ‚Äî –ø–æ–ª—É—á–∞–π –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø–µ—Å–Ω–∏ –ø–æ –Ω–∞—Ä–∞—Å—Ç–∞—é—â–µ–π',
          profileRefInvited: '–ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ', profileRefActivated: '–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ',
          planCurrentBadge: '–¢–µ–∫—É—â–∏–π', planFreeYours: '–£–∂–µ —É —Ç–µ–±—è', planSubscribeBtn: '–û—Ñ–æ—Ä–º–∏—Ç—å',
          planDetailsBtn: '–ü–æ–¥—Ä–æ–±–Ω–µ–µ', planPopularBadge: '‚ú¶ –ü–æ–ø—É–ª—è—Ä–Ω—ã–π', planMasterBadgeText: '–ú–∞—Å—Ç–µ—Ä',
          planMasterNameText: '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è', planOpenMasterBtn: '–û—Ç–∫—Ä—ã—Ç—å –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—é',
          ptiSingleName: '–î–ª—è —Å–µ–±—è', ptiSingleDesc: '–¢–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å –≤ –∑–≤—É–∫–µ',
          ptiCoupleName: '–î–ª—è –¥–≤–æ–∏—Ö', ptiCoupleDesc: '–í–∞—à–∞ —Å–≤—è–∑—å –∏ —Ä–µ–∑–æ–Ω–∞–Ω—Å',
          ptiTransitName: '–≠–Ω–µ—Ä–≥–∏—è –¥–Ω—è', ptiTransitDesc: '–ü–µ—Å–Ω—è –ø–æ–¥ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å',
          successTitle: '–ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞!', successDesc: '–¢–≤–æ—è –ø–µ—Å–Ω—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞ ‚Äî –ø—Ä–∏–¥—ë—Ç –≤ –±–æ—Ç. –û–±—ã—á–Ω–æ 10‚Äì20 –º–∏–Ω—É—Ç.',
          successHint: '–ù–µ –ø—Ä–∏—à–ª–∞ —á–µ—Ä–µ–∑ 20 –º–∏–Ω? –ù–∞–ø–∏—à–∏ –±–æ—Ç—É ¬´–ø–µ—Å–Ω—è –Ω–µ –ø—Ä–∏—à–ª–∞¬ª.', successToProfile: '–ü–µ—Ä–µ–π—Ç–∏ –≤ –ø—Ä–æ—Ñ–∏–ª—å',
          loadingTitle: '–ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞',
          heroesPageTitle: '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è', heroesPromoHeading: '–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –¥–ª—è –º–∞—Å—Ç–µ—Ä–æ–≤',
          heroesPromoDesc: '–î–æ–±–∞–≤–ª—è–π –ª—é–¥–µ–π –æ–¥–∏–Ω —Ä–∞–∑ ‚Äî –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–π –¥–ª—è –Ω–∏—Ö –ø–µ—Å–Ω–∏ –≤ –æ–¥–∏–Ω —Ç–∞–ø. –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —Å —Ç–µ–∫—Å—Ç–∞–º–∏.',
          heroesPromoFeaturesTitle: '–ß—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ —Ç–∞—Ä–∏—Ñ:',
          heroesF1: '‚ú¶ –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ –≥–µ—Ä–æ–µ–≤', heroesF2: '‚ú¶ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ —Å–æ–ª–æ –∏ —Å–æ–≤–º–µ—Å—Ç–Ω—ã—Ö –ø–µ—Å–µ–Ω',
          heroesF3: '‚ú¶ –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ —Å—Ç–∏–ª—é –º—É–∑—ã–∫–∏', heroesF4: '‚ú¶ –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–π —Å —Ç–µ–∫—Å—Ç–∞–º–∏ –∏ –∞–Ω–∞–ª–∏–∑–æ–º',
          heroesF5: '‚ú¶ –ê—É–¥–∏–æ –ø—Ä—è–º–æ –∏–∑ –∫–∞—Ä—Ç–æ—á–∫–∏ –≥–µ—Ä–æ—è',
          heroesTrialBtn: '1 –¥–µ–Ω—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ ‚Äî –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å', heroesSubBtn: '–û—Ñ–æ—Ä–º–∏—Ç—å –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—é ‚Äî $39.99/–º–µ—Å',
          heroesSubNote: '30 —Ç—Ä–µ–∫–æ–≤ –≤ –º–µ—Å—è—Ü ¬∑ –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ HOT Pay',
          heroFormTitle: '–î–æ–±–∞–≤–∏—Ç—å –≥–µ—Ä–æ—è', heroRelLabel: '–ö—Ç–æ –¥–ª—è —Ç–µ–±—è', heroBirthdateHint: '–í—ã–±–µ—Ä–∏ –¥–µ–Ω—å, –º–µ—Å—è—Ü –∏ –≥–æ–¥',
          heroTimeBirthLabel: '–í—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è', heroStyleLabel: '–õ—é–±–∏–º—ã–µ —Å—Ç–∏–ª–∏ –º—É–∑—ã–∫–∏', heroStylePh: '–ø–æ–ø, –¥–∂–∞–∑, —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è‚Ä¶',
          heroRelOpt0: '‚Äî –≤—ã–±–µ—Ä–∏ ‚Äî', heroRelOpt1: '–ú–∞—Ç—å', heroRelOpt2: '–û—Ç–µ—Ü', heroRelOpt3: '–î–æ—á—å', heroRelOpt4: '–°—ã–Ω',
          heroRelOpt5: '–°–µ—Å—Ç—Ä–∞', heroRelOpt6: '–ë—Ä–∞—Ç', heroRelOpt7: '–ë–∞–±—É—à–∫–∞', heroRelOpt8: '–î–µ–¥—É—à–∫–∞',
          heroRelOpt9: '–ú—É–∂', heroRelOpt10: '–ñ–µ–Ω–∞', heroRelOpt11: '–õ—é–±–∏–º—ã–π —á–µ–ª–æ–≤–µ–∫',
          heroRelOpt12: '–î—Ä—É–≥', heroRelOpt13: '–ü–æ–¥—Ä—É–≥–∞', heroRelOpt14: '–ö–æ–ª–ª–µ–≥–∞', heroRelOpt15: '–ù–∞—Å—Ç–∞–≤–Ω–∏–∫', heroRelOpt16: '–î—Ä—É–≥–æ–µ',
          dateDay: '–î–µ–Ω—å', dateMonth: '–ú–µ—Å—è—Ü', dateYear: '–ì–æ–¥',
          scLoading: '‚ú® –ó–∞–≥—Ä—É–∂–∞—é‚Ä¶', scPromoIntro: 'Soul Chat ‚Äî —Ç–≤–æ–π –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–Ω–∏–º–∞–µ—Ç —Ç–µ–±—è —Å–ª–æ–≤–Ω–æ –ª—É—á—à–∏–π –¥—Ä—É–≥ –∏–ª–∏ –í—ã—Å—à–µ–µ –Ø. –û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–µ, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ –∏ –ø—É—Ç–∏.',
          scPromoErrorText: '–í—Ä–µ–º–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏. –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ –∏–ª–∏ –∫—É–ø–∏—Ç—å —Å—É—Ç–∫–∏.', scPromoRetryBtn: '–ü–æ–≤—Ç–æ—Ä–∏—Ç—å',
          scMoreBtnText: '–ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üì', scMoreBtnCollapse: '–°–≤–µ—Ä–Ω—É—Ç—å ‚Üë', scStat1: '–æ—Ç–º–µ—á–∞—é—Ç —Å–Ω–∏–∂–µ–Ω–∏–µ —Ç—Ä–µ–≤–æ–≥–∏', scStat2: '—á—É–≤—Å—Ç–≤—É—é—Ç —Å–µ–±—è –ø–æ–Ω—è—Ç—ã–º–∏',
          scStat3: '–±—ã—Å—Ç—Ä–µ–µ –Ω–∞—Ö–æ–¥—è—Ç –æ—Ç–≤–µ—Ç', scStat4: '–≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Å–Ω–æ–≤–∞',
          scExamplesTitle: '–ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤',
          scEx1: '¬´–ü–æ—á–µ–º—É –º–Ω–µ —Ç–∞–∫ —Å–ª–æ–∂–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—å –æ —Å–≤–æ–∏—Ö —á—É–≤—Å—Ç–≤–∞—Ö?¬ª', scEx2: '¬´–ö–∞–∫–æ–π –º–æ–π –≥–ª–∞–≤–Ω—ã–π —Å—Ç—Ä–∞—Ö –∏ –∫–∞–∫ —Å –Ω–∏–º —Ä–∞–±–æ—Ç–∞—Ç—å?¬ª',
          scEx3: '¬´–í —á—ë–º –º–æ—ë –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ –∫–∞–∫ –∫ –Ω–µ–º—É –ø—Ä–∏–π—Ç–∏?¬ª',
          scSubIncluded: 'Soul Chat –≤–∫–ª—é—á—ë–Ω –≤ –ø–æ–¥–ø–∏—Å–∫—É', scChoosePlanBtn: '–í—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ ‚Üí',
          scGiftHeading: '–ü–æ–ø—Ä–æ–±—É–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ ‚Äî 24 —á–∞—Å–∞', scGiftNote: '–û–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
          scGiftBtnText: 'üéÅ –ü–æ–ª—É—á–∏—Ç—å 24 —á–∞—Å–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ', scBuyDayNote: '–ù–µ –≥–æ—Ç–æ–≤ –∫ –ø–æ–¥–ø–∏—Å–∫–µ? –ü–æ–ø—Ä–æ–±—É–π —Ä–∞–∑–æ–≤—ã–π –¥–æ—Å—Ç—É–ø',
          scBuyDayBtnText: '‚ö° –û—Ç–∫—Ä—ã—Ç—å Soul Chat –Ω–∞ 24—á ‚Äî $2.99', scToastPaymentReceived: '–û–ø–ª–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∞, –¥–æ—Å—Ç—É–ø –æ—Ç–∫—Ä—ã—Ç',
          helpT1: '–ß—Ç–æ —Ç–∞–∫–æ–µ YupSoul', helpB1: '<p>YupSoul —Å–æ–∑–¥–∞—ë—Ç <strong>–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –ø–µ—Å–Ω—é –∏–º–µ–Ω–Ω–æ –¥–ª—è —Ç–µ–±—è</strong> ‚Äî –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞—Ç—ã, –≤—Ä–µ–º–µ–Ω–∏ –∏ –º–µ—Å—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è. –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–≤–æ—é –ª–∏—á–Ω–æ—Å—Ç—å –∏ –ø–∏—à–µ—Ç –ø–µ—Å–Ω—é –æ —Ç–≤–æ–∏—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–∞—á–µ—Å—Ç–≤–∞—Ö, –ø—É—Ç–∏ –∏ —Å–∏–ª–µ.</p><p>–≠—Ç–æ –Ω–µ —à–∞–±–ª–æ–Ω –∏ –Ω–µ —Å–ª—É—á–∞–π–Ω—ã–π —Ç–µ–∫—Å—Ç ‚Äî –∫–∞–∂–¥–∞—è –ø–µ—Å–Ω—è —É–Ω–∏–∫–∞–ª—å–Ω–∞ –∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–µ–±–µ.</p>',
          helpT2: '–ß—Ç–æ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å', helpB2: '<ul><li><strong>–ü–µ—Å–Ω—è –æ —Å–µ–±–µ</strong> ‚Äî —Ç–≤–æ–π –ª–∏—á–Ω—ã–π –∑–≤—É–∫–æ–≤–æ–π –ø–æ—Ä—Ç—Ä–µ—Ç: –∫—Ç–æ —Ç—ã, —Ç–≤–æ—è —Å–∏–ª–∞ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—É—Ç—å</li><li><strong>–ü–µ—Å–Ω—è –¥–ª—è –ø–∞—Ä—ã</strong> ‚Äî –¥–ª—è –¥–≤–æ–∏—Ö (–≤–ª—é–±–ª—ë–Ω–Ω—ã—Ö, –¥—Ä—É–∑–µ–π, –ø–æ–¥—Ä—É–≥). –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ–±–µ –∫–∞—Ä—Ç—ã –∏ –æ—Ç—Ä–∞–∂–∞–µ—Ç —Å–æ—é–∑</li><li><strong>–≠–Ω–µ—Ä–≥–∏—è –¥–Ω—è</strong> ‚Äî –ø–µ—Å–Ω—è –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É –∏ –º–µ—Å—Ç–æ. –ö–∞–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å</li></ul><p>–¢–∞–∫–∂–µ –µ—Å—Ç—å <strong>–±—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã</strong> ‚Äî –≥–æ—Ç–æ–≤—ã–µ –∏–¥–µ–∏: –ø–µ—Å–Ω—è —Å–∏–ª—ã, –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è, –º–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω–∞—è, –ø—Ä–æ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ –ø—Ä–æ—à–ª–æ–≥–æ –∏ –¥—Ä—É–≥–∏–µ.</p>',
          helpT3: '–°–∫–æ–ª—å–∫–æ –∂–¥–∞—Ç—å –ø–µ—Å–Ω—é', helpB3: '<p>–û–±—ã—á–Ω–æ <strong>5‚Äì15 –º–∏–Ω—É—Ç</strong>. –ë–æ—Ç –ø—Ä–∏—à–ª—ë—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ —á–∞—Ç, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –ø–µ—Å–Ω—è –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞.</p><p>–ú–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏–¥—ë—Ç —Å–∞–º, —Ç—ã –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ—Ç–µ—Ä—è–µ—à—å.</p>',
          helpT4: '–ù–µ –∑–Ω–∞—é —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è', helpB4: '<p>–ù–µ —Å—Ç—Ä–∞—à–Ω–æ. –û—Ç–º–µ—Ç—å <strong>¬´–í—Ä–µ–º—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ¬ª</strong> ‚Äî —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—Å—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –ø–µ—Å–Ω—é –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.</p>',
          helpT5: '–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏', helpB5: '<p><strong>–ü–µ—Ä–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω–æ.</strong></p><p>–ü–æ–ª—É—á–∏—Ç—å –µ—â—ë –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É: –ø–æ–¥–µ–ª–∏—Å—å —Å–≤–æ–µ–π —Å—Å—ã–ª–∫–æ–π. –ö–æ–≥–¥–∞ 5 –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω—ã—Ö —Ç–æ–±–æ–π –¥—Ä—É–∑–µ–π —Å–æ–∑–¥–∞–¥—É—Ç –ø–µ—Ä–≤—É—é –ø–µ—Å–Ω—é ‚Äî —Ç–µ–±–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏—Å–ª–∏—Ç—Å—è 1 –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è.</p><p>–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ ‚Äî –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´–ü—Ä–æ—Ñ–∏–ª—å¬ª, –±–ª–æ–∫ ¬´–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞¬ª.</p>',
          helpT6: '–û–ø–ª–∞—Ç–∞ –∏ –ø—Ä–æ–º–æ–∫–æ–¥—ã', helpB6: '<p>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–ø–ª–∞—á–∏–≤–∞—é—Ç—Å—è –ø–æ —Ç–∞—Ä–∏—Ñ—É. –°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞—è–≤–∫–∏.</p><p>–ï—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å <strong>–ø—Ä–æ–º–æ–∫–æ–¥</strong> ‚Äî –≤–≤–µ–¥–∏ –µ–≥–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –æ–ø–ª–∞—Ç—ã. –ü—Ä–æ–º–æ–∫–æ–¥—ã —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É, –≤–≤–æ–¥–∏ —Ç–æ—á–Ω–æ –∫–∞–∫ –Ω–∞–ø–∏—Å–∞–Ω–æ.</p>',
          helpT7: '–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫', helpB7: '<p><strong>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–∫—Ä—ã–ª–æ—Å—å –∏–ª–∏ –ø–æ–∫–∞–∑–∞–ª–æ –æ—à–∏–±–∫—É</strong> ‚Äî –ø–æ–ø—Ä–æ–±—É–π –æ—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞ –∑–∞–Ω–æ–≤–æ. –ù–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</p><p><strong>–û–ø–ª–∞—Ç–∏–ª, –Ω–æ –ø–µ—Å–Ω–∏ –Ω–µ—Ç</strong> ‚Äî –ø–æ–¥–æ–∂–¥–∏ 15‚Äì20 –º–∏–Ω—É—Ç. –ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–µ—Ç ‚Äî –Ω–∞–ø–∏—à–∏ –±–æ—Ç—É ¬´–ø–µ—Å–Ω—è –Ω–µ –ø—Ä–∏—à–ª–∞¬ª. –ò–ª–∏ –Ω–∞–ø–∏—à–∏ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.</p><p><strong>–ü—Ä–æ–º–æ–∫–æ–¥ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è</strong> ‚Äî –ø—Ä–æ–≤–µ—Ä—å —Ä–µ–≥–∏—Å—Ç—Ä –±—É–∫–≤. –ï—Å–ª–∏ –≤—Å—ë –≤–µ—Ä–Ω–æ ‚Äî –Ω–∞–ø–∏—à–∏ –Ω–∞–º —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–¥–∞.</p>',
          profileBalanceLbl: '–ë–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π',
          planFreeF1: '‚ú¶ 1 —Ç—Ä–µ–∫ –≤ –ø–æ–¥–∞—Ä–æ–∫', planFreeF2: '‚ú¶ –í—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã',
          planBasicF1: '‚ú¶ 5 —Ç—Ä–µ–∫–æ–≤/–º–µ—Å', planBasicF2: '‚ú¶ Soul Chat (–¥–æ 50 —Å–æ–æ–±—â/–º–µ—Å)', planBasicF3: '‚ú¶ –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤', planBasicSave: '‚àí50% vs —Ä–∞–∑–æ–≤—ã—Ö',
          planPlusF1: '‚ú¶ 10 —Ç—Ä–µ–∫–æ–≤/–º–µ—Å', planPlusF2: '‚ú¶ Soul Chat –±–µ–∑ –ª–∏–º–∏—Ç–∞', planPlusF3: '‚ú¶ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏', planPlusF4: '‚ú¶ –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–µ–∫–æ–≤', planPlusSave: '‚àí58% vs —Ä–∞–∑–æ–≤—ã—Ö',
          planMasterF1: '‚ú¶ 30 —Ç—Ä–µ–∫–æ–≤/–º–µ—Å', planMasterF2: '‚ú¶ –ö–∞—Ä—Ç–æ—Ç–µ–∫–∞ –ª—é–¥–µ–π', planMasterF3: '‚ú¶ –ò—Å—Ç–æ—Ä–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–π', planMasterF4: '‚ú¶ Soul Chat –±–µ–∑ –ª–∏–º–∏—Ç–∞', planMasterSave: '‚àí83% vs —Ä–∞–∑–æ–≤—ã—Ö',
          refFriend1: '–¥—Ä—É–≥', refFriend2: '–¥—Ä—É–≥–∞', refFriend5: '–¥—Ä—É–∑–µ–π', refLinkLoading: '–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶',
          quickPickerLabel: '‚ú¶ –ë—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã',
          forWhoLabel: '–î–ª—è –∫–æ–≥–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º?', nameLbl: '–ò–º—è', birthdateLbl: '–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è', birthplaceLbl: '–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è', birthtimeLbl: '–í—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è',
          payOvCardTitleDefault: '–û–ø–ª–∞—Ç–∞ –∑–∞—è–≤–∫–∏', payOvTrialText: '–ü–µ—Ä–≤–∞—è –ø–µ—Å–Ω—è ‚Äî –≤ –ø–æ–¥–∞—Ä–æ–∫!', payOvFreeClaimBtn: 'üéÅ –ü–æ–ª—É—á–∏—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ',
          payOvPromoToggle: '‚ñ∏ –ï—Å—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥?', orPay: '–ò–ª–∏ –æ–ø–ª–∞—Ç–∏:', priceLabel: '–¶–µ–Ω–∞:',
          payOvLinkHint: '–ï—Å–ª–∏ –æ–∫–Ω–æ –Ω–µ –æ—Ç–∫—Ä—ã–ª–æ—Å—å ‚Äî —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä:',
          payOvCopyBtn: 'üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –æ–ø–ª–∞—Ç—ã', payOvCheckBtn: '‚úÖ –Ø —É–∂–µ –æ–ø–ª–∞—Ç–∏–ª ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å',
          payOvPromoConfirmBtn: 'üéÅ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å',
          paymentThanksTitle: '–û–ø–ª–∞—Ç–∞ –ø—Ä–æ—à–ª–∞', paymentThanksMsg: '–ü–µ—Å–Ω—è —Å–æ–∑–¥–∞—ë—Ç—Å—è. –ü—Ä–∏–¥—ë—Ç –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º. –ú–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ.',
          paymentThanksHintText: '–ù–µ –ø—Ä–∏—à–ª–∞ –∑–∞ 20 –º–∏–Ω—É—Ç? –ù–∞–ø–∏—à–∏ –±–æ—Ç—É ¬´–ø–µ—Å–Ω—è –Ω–µ –ø—Ä–∏—à–ª–∞¬ª'
        },
        en: {
          tagline: 'Music of your soul',
          startBtn: 'Create My Song', myProfile: 'üë§ Profile', myHeroes: 'Lab', myHelp: 'Help', admin: 'üëë Admin',
          profileTitle: 'Profile', profileSubtitle: 'Your data and free generations',
          profileFreeCredits: 'Free generations', profileInviteFriend: 'Invite a friend', profileShare: 'Share',
          profileInvited: 'Invited', profileActivated: 'Activated', profileCreateSong: 'Create song',
          heroesTitle: 'Laboratory', heroesSubtitle: 'People directory',
          searchByName: 'Search by name', searchPlaceholder: 'Enter name...', searchBtn: 'Search',
          addHero: '‚ûï Add Hero', heroName: 'Name *', heroBirthdate: 'Date of birth', heroBirthtime: 'Time of birth',
          heroBirthplace: 'Place of birth', heroBirthplacePh: 'City, country', heroNotes: 'Notes', heroNotesPh: 'Client notes',
          unknownTime: "I don't know exact time", cancel: 'Cancel', save: 'Save', back: '‚Üê Back',
          gender: 'Gender', genderSelect: 'Choose', male: 'Male', female: 'Female', other: 'Other',
          modeType: 'Song format', modeSubtitle: 'Who is it for?',
          modeSingle: 'About me', modeSingleDesc: 'A song by your date of birth',
          modeCouple: 'About us', modeCoupleDesc: 'A song for two people',
          modeTransit: 'This<br>moment', modeTransitDesc: "A song about today",
          namePh: "What's your name?", birthdateLabel: 'Date of birth', birthplacePh: 'City or country ‚Äî choose from suggestions',
          birthplaceHint: 'Start typing your city and pick from the list.',
          unknownTimeShort: "Don't know", secondPersonTitle: 'For two', name2Ph: "Second person's name",
          birthplace2Ph: "Second person's place of birth", birthtime2Ph: 'Time of birth',
          transitTitle: 'Energy of the moment', transitDatePh: 'Event date', transitTimePh: 'Event time',
          transitLocationPh: 'City for the moment energy', transitLocationOk: 'Location is correct',
          transitIntentPh: 'Intention for this moment',
          sendRequest: 'What will you explore today?', quickRequests: 'Quick requests', hide: 'Hide',
          requestDesc: 'What\'s the song about? Any request ‚Äî from humor to deep themes.',
          requestQuickHint: 'Pick a ready-made request or write your own',
          requestPh: 'Write any request', toPayment: 'To payment',
          paymentSubtitle: 'Your sound key', paymentAndAccess: 'Payment & access',
          paymentIntro: 'First song is free. You can pay for individual items or subscribe for full access.',
          loadingPricing: 'Loading plans...', currentItem: 'Current item',
          promoCode: 'Promo code', apply: 'Apply', backFromPayment: '‚Üê Back',
          submitAndContinue: 'Checkout & continue', submitRequest: 'Submit request',
          submitHint: 'The song will arrive in this chat with the bot. If you haven\'t pressed ¬´Start¬ª in the bot yet ‚Äî do it now.',
          paymentPageIntroAfterSubmit: 'Request submitted. Enter a promo code or tap the button below to pay via HOT Pay.',
          paymentPageTagline: 'Promo code or payment',
          payWithHot: 'Pay via HOT Pay',
          firstFree: 'Your first sound key is free.',
          paymentRequired: 'Payment required for new requests.',
          subscriptionActive: 'You have an active subscription ‚Äî continue.',
          catalogLoadFailed: 'Pricing failed to load. Press ¬´Continue¬ª ‚Äî backend will determine cost.',
          promoApplied: 'Promo {code}: -{amount} {currency}',
          creatingKey: 'Creating your key...',
          creatingKeyDesc: 'Magic happens in real time. Your personal sound key is being formed from your unique data.',
          keyActivated: 'Key activated!', done: 'Done!',
          successText: 'Your personal sound key is created! Your unique artifact of strength for the game of life.',
          yourSong: 'üéµ Your song',
          songPreviewText: 'Your unique audio piece is waiting for you in the bot. Listen every morning to tune into success.',
          whatNext: 'What next:', openBot: 'Open the bot',
          soulChat: 'Talk to your soul', soulChatPay: 'To payment ‚Äî Soul Basic / Soul Plus',
          newKey: 'Create another key',
          paymentThanks: 'Thank you for payment', thanksSubtitle: 'request accepted', paymentThanksBackToForm: 'Create your song',
          songInProgress: 'Song is being generated and will arrive in the bot chat when ready.',
          songInProgressConfirmed: 'Request accepted. Song is being generated ‚Äî no need to pay again. It will arrive in the bot chat when ready.',
          thanksDone: 'Done',
          notFromTelegram: 'Open the app from the bot chat in Telegram (menu button) ‚Äî otherwise the request cannot be sent.',
          notFound: 'Not found', searchError: 'Search error',
          soulChatLoad: 'Loading‚Ä¶',
          soulChatHasAccess: "You have Soul Chat access. Tap below ‚Äî the bot will open. In the bot, type /soulchat and ask your soul a question.",
          soulChatNoAccess: 'Soul Chat ‚Äî dialogues with your soul. Available with Soul Basic (up to 50 messages/month) or Soul Plus (unlimited) subscription.',
          soulChatDefault: 'Soul Chat ‚Äî dialogues with your soul per request. Available by subscription.',
          soulChatNoApi: 'Soul Chat ‚Äî dialogues with your soul. Available with Soul Basic or Soul Plus subscription. Go to ¬´To payment¬ª in the app.',
          greeting: "Hi, {name}! Come back whenever you want to remember who you are.",
          greetingDefault: "Come back whenever you want to remember who you are.",
          onboardingSlide1Title: 'There is a song ‚Äî about you',
          onboardingSlide1Text: 'Written from your date of birth. Not a template ‚Äî a real text about your character, strength and path.',
          onboardingSlide2Title: 'Only about you',
          onboardingSlide2Text: 'A smart analysis of your personality becomes a living song ‚Äî unique, only yours.',
          onboardingSlide3Title: 'First one ‚Äî as a gift',
          onboardingSlide3Text: 'Enter your date of birth. Your song will arrive right here in chat.',
          onboardingBtnStart: 'Get my song',
          alertNameShort: 'Name must be at least 2 characters', alertBirthdate: 'Choose date of birth',
          alertBirthplace: 'Place of birth must be at least 3 characters', alertBirthplaceHint: 'Pick a location from the suggestions',
          alertBirthtime: 'Enter time of birth or check "Don\'t know"', alertGender: 'Select gender', alertLanguage: 'Choose language',
          alertName2Short: "Second person's name ‚Äî at least 2 characters", alertBirthdate2: "Enter second person's date of birth",
          alertBirthplace2: "Second person's place of birth must be at least 3 characters",
          alertBirthtime2: "Enter second person's time of birth", alertGender2: "Select second person's gender",
          alertTransitDate: 'Enter event date', alertTransitLocation: 'Enter event location', alertTransitConfirm: 'Confirm the location is correct',
          alertRequestShort: 'Add a request (5+ characters)', alertRequestLong: 'Tell the Universe more (at least 15 characters)',
          alertYourPath: 'Choose your path', alertNoApi: 'API address not configured.', alertOpenFromBot: 'Open the app from the bot chat in Telegram ‚Äî otherwise the request cannot be accepted.',
          alertServerSleep: 'Server was slow to wake up. Wait about a minute and tap ¬´Submit request¬ª again.',
          sending: 'Sending‚Ä¶',
          universeHeard: '‚ú® {name}, the Universe heard your request.\n\nYour sound key is being created and will arrive in this chat when ready.',
          universeHeardCouple: '‚ú® {name} and {name2}, the Universe heard your request.\n\nYour sound key is being created and will arrive in this chat when ready.',
          universeHeardTransit: '‚ú® {name}, the Universe heard your request.\n\nYour Day Energy sound key is being created and will arrive in this chat when ready.',
          langSong: 'Song language', langRu: 'Russian', langEn: 'English', langDe: 'German', langFr: 'French', langUk: 'Ukrainian',
          quick1: 'Harmony and self-love', quick2: 'Confidence and purpose', quick3: 'Creative potential', quick4: 'Let go of the past',
          quick5: 'Life balance', quick6: 'Trust and acceptance', quick7: 'Healing and freedom', quick8: 'Path to happiness',
          quick9: 'Strength and overcoming', quick10: 'Depth and silence', quick11: 'Tenderness and care', quick12: 'Humor and lightness',
          quick1t: 'Harmony in relationships and self-love', quick2t: 'Confidence, purpose, and self-reliance',
          quick3t: 'Unlock creative potential without fear', quick4t: 'Let go of the past and open to new possibilities',
          quick5t: 'Balance of work and personal life', quick6t: 'Trust life and release control',
          quick7t: 'Heal childhood wounds and find freedom', quick8t: 'Find your path to happiness and peace',
          quick9t: 'Powerful song about my strength and overcoming', quick10t: 'Meditative song for practice and healing',
          quick11t: 'Warm song about care and tenderness', quick12t: 'Playful song with self-irony about my quirks',
          promoError: 'Could not apply promo code',
          promoCleared: 'Promo code cleared.', promoApplied: 'Promo applied: final amount {amount} {currency}',
          promoAppliedHint: 'Promo {code}: -{amount} {currency}',
          paymentRequiredOpening: 'Payment required. Opening HOT Checkout...',
          promoFreeGen: 'Promo gives free generation. Starting...',
          hotCheckoutOpened: 'HOT Checkout opened. After payment, return to the Mini App ‚Äî status will update automatically.',
          paymentNotConfirmed: 'Payment not yet confirmed. Check status later or open payment again.',
          paymentConfirmed: 'Payment confirmed. Starting generation...',
          paymentReceivedNoStart: 'Payment received, but auto-start failed. Start generation in admin by request_id: {id}',
          submitFailed: 'Could not submit request. Wait a minute and tap ¬´Submit request¬ª again or reopen the Mini App from the bot chat.',
          errorOp: 'Payment/request operation error',
          alertTransitLocation: 'Enter event location', alertTransitConfirm: 'Confirm the location is correct',
          alertNoApi: 'API address not configured.', alertOpenFromBot: 'Open the app from the bot chat in Telegram ‚Äî otherwise the request cannot be accepted.',
          alertOpenFromBotShort: 'Open the app from the bot chat in Telegram.',
          alertPaymentFirst: 'First tap ¬´Submit request¬ª on the previous step.',
          alertLinkCopied: '‚úì Link copied. Paste it in Safari or Chrome and open.',
          alertHeroName: 'Enter name', alertError: 'Error', alertDeleteConfirm: 'Delete ¬´{name}¬ª? This action cannot be undone.',
          alertSubmitError: 'Submit error',
          copyLinkPrompt: 'Copy this link and open it in browser:',
          songFormingText: 'Your sound key is being created and will arrive in this chat when ready.',
          heroesLoading: 'Loading...', heroesEmpty: 'No heroes yet. Tap ¬´Add Hero¬ª.',
          heroesLoadError: 'Failed to load list. Check API settings.',
          loading: 'Loading‚Ä¶', noCardsYet: 'No completed cards yet', heroHistLoading: 'Loading history‚Ä¶', heroHistEmpty: 'No generations yet', heroHistLoadError: 'Could not load history', heroesPageLoadError: 'Could not load heroes', retry: 'Retry',
          forMyself: 'For myself', forHero: 'For: {name}',
          previewHome: 'Home', previewForm: 'Form', previewPayment: 'Payment', previewLoading: 'Loading', previewSuccess: 'Success',
          supportBtn: 'üí¨ Contact support',
          subActivated: 'üéâ Subscription activated!', subBtnProfile: 'üë§ My profile',
          helpPageTitle: 'Help & Support', helpPageSubtitle: 'Everything about YupSoul ‚Äî clear and simple',
          profileHelpBtn: 'Help & support',
          profilePageTitle: 'Profile', profileSectionMyData: 'My data', profileSectionPlans: 'Plans',
          profileLoadError: 'Could not load subscription. Check your connection.', profileLoadRetry: 'Retry',
          profileEditBtn: 'Edit ‚Üí', profileBalanceHintText: 'Invite friends ‚Äî get free tracks',
          profileSectionTracks: 'Single tracks', profileRefTagline: 'Invite friends ‚Äî earn free songs',
          profileRefInvited: 'Invited', profileRefActivated: 'Activated',
          planCurrentBadge: 'Current', planFreeYours: 'Already yours', planSubscribeBtn: 'Subscribe',
          planDetailsBtn: 'Details', planPopularBadge: '‚ú¶ Popular', planMasterBadgeText: 'Master',
          planMasterNameText: 'Laboratory', planOpenMasterBtn: 'Open Laboratory',
          ptiSingleName: 'For myself', ptiSingleDesc: 'Your personality in sound',
          ptiCoupleName: 'For two', ptiCoupleDesc: 'Your bond and resonance',
          ptiTransitName: 'Day energy', ptiTransitDesc: 'A song for today',
          successTitle: 'Request accepted!', successDesc: 'Your song is being generated. When ready ‚Äî it\'ll arrive in the bot. Usually 10‚Äì20 minutes.',
          successHint: 'Not arrived in 20 min? Tell the bot "song not arrived".', successToProfile: 'Go to profile',
          loadingTitle: 'Request accepted',
          heroesPageTitle: 'Laboratory', heroesPromoHeading: 'Master\'s Dashboard',
          heroesPromoDesc: 'Add people once ‚Äî and generate songs for them in one tap. Full history with lyrics.',
          heroesPromoFeaturesTitle: 'What\'s included:',
          heroesF1: '‚ú¶ Unlimited number of people', heroesF2: '‚ú¶ Quick solo & duo song generation',
          heroesF3: '‚ú¶ Music style preferences', heroesF4: '‚ú¶ Full history with lyrics & analysis',
          heroesF5: '‚ú¶ Audio straight from the person\'s card',
          heroesTrialBtn: '1 day free ‚Äî try it out', heroesSubBtn: 'Subscribe to Laboratory ‚Äî $39.99/mo',
          heroesSubNote: '30 tracks/month ¬∑ Payment via HOT Pay',
          heroFormTitle: 'Add person', heroRelLabel: 'Relationship', heroBirthdateHint: 'Select day, month and year',
          heroTimeBirthLabel: 'Time of birth', heroStyleLabel: 'Favourite music styles', heroStylePh: 'pop, jazz, electronic‚Ä¶',
          heroRelOpt0: '‚Äî select ‚Äî', heroRelOpt1: 'Mother', heroRelOpt2: 'Father', heroRelOpt3: 'Daughter', heroRelOpt4: 'Son',
          heroRelOpt5: 'Sister', heroRelOpt6: 'Brother', heroRelOpt7: 'Grandmother', heroRelOpt8: 'Grandfather',
          heroRelOpt9: 'Husband', heroRelOpt10: 'Wife', heroRelOpt11: 'Loved one',
          heroRelOpt12: 'Friend', heroRelOpt13: 'Girlfriend', heroRelOpt14: 'Colleague', heroRelOpt15: 'Mentor', heroRelOpt16: 'Other',
          dateDay: 'Day', dateMonth: 'Month', dateYear: 'Year',
          scLoading: '‚ú® Loading‚Ä¶', scPromoIntro: 'Soul Chat is your AI assistant that understands you like a best friend or your Higher Self. Answers questions about your character, purpose and path.',
          scPromoErrorText: 'Temporary loading error. You can choose a plan or buy 24h access.', scPromoRetryBtn: 'Retry',
          scMoreBtnText: 'More ‚Üì', scMoreBtnCollapse: 'Collapse ‚Üë', scStat1: 'report reduced anxiety', scStat2: 'feel understood',
          scStat3: 'find answers faster', scStat4: 'come back again',
          scExamplesTitle: 'Example questions',
          scEx1: '"Why is it so hard for me to talk about my feelings?"', scEx2: '"What is my main fear and how to work with it?"',
          scEx3: '"What is my purpose and how do I get there?"',
          scSubIncluded: 'Soul Chat included in subscription', scChoosePlanBtn: 'Choose a plan ‚Üí',
          scGiftHeading: 'Try free ‚Äî 24 hours', scGiftNote: 'One time per user',
          scGiftBtnText: 'üéÅ Get 24 hours free', scBuyDayNote: 'Not ready for a subscription? Try single access',
          scBuyDayBtnText: '‚ö° Open Soul Chat for 24h ‚Äî $2.99', scToastPaymentReceived: 'Payment received, access granted',
          helpT1: 'What is YupSoul', helpB1: '<p>YupSoul creates a <strong>personal song just for you</strong> ‚Äî based on your date, time and place of birth. The system analyses your personality and writes a song about your real qualities, path and strength.</p><p>This is not a template ‚Äî each song is unique and belongs only to you.</p>',
          helpT2: 'What can be created', helpB2: '<ul><li><strong>Song about me</strong> ‚Äî your personal sonic portrait: who you are, your strength and inner path</li><li><strong>Song for two</strong> ‚Äî for a couple (lovers, friends). Analyses both charts and reflects the union</li><li><strong>Day energy</strong> ‚Äî a song for a specific date and place. What opportunities are opening right now</li></ul><p>There are also <strong>quick requests</strong> ‚Äî ready-made ideas: power song, birthday song, meditative, about letting go of the past, and more.</p>',
          helpT3: 'How long to wait', helpB3: '<p>Usually <strong>5‚Äì15 minutes</strong>. The bot will send a notification when your song is ready.</p><p>You can close the app ‚Äî the result will arrive on its own, nothing will be lost.</p>',
          helpT4: "I don't know my exact birth time", helpB4: '<p>No problem. Check <strong>"Time unknown"</strong> ‚Äî the system will create a full song based on the other data.</p>',
          helpT5: 'Free generations', helpB5: '<p><strong>The first generation is free.</strong></p><p>Get more free ones through the referral programme: share your link. When 5 of your invited friends create their first song ‚Äî you automatically receive 1 free generation.</p><p>Your referral link is in the "Profile" section, "Invite a friend" block.</p>',
          helpT6: 'Payment & promo codes', helpB6: '<p>Additional generations are paid according to the tariff. Payment options are shown on screen when placing an order.</p><p>If you have a <strong>promo code</strong> ‚Äî enter it on the payment screen. Promo codes are case-sensitive.</p>',
          helpT7: 'Something went wrong', helpB7: '<p><strong>App closed or showed an error</strong> ‚Äî try reopening the bot. Unfinished orders are restored automatically.</p><p><strong>Paid but no song</strong> ‚Äî wait 15‚Äì20 minutes. If nothing arrives ‚Äî tell the bot "song not arrived". Or contact support.</p><p><strong>Promo code not accepted</strong> ‚Äî check the letter case. If everything is correct ‚Äî write to us with the code.</p>',
          profileBalanceLbl: 'Free generations',
          planFreeF1: '‚ú¶ 1 free track', planFreeF2: '‚ú¶ All formats',
          planBasicF1: '‚ú¶ 5 tracks/mo', planBasicF2: '‚ú¶ Soul Chat (up to 50 msg/mo)', planBasicF3: '‚ú¶ Order history', planBasicSave: '‚àí50% vs singles',
          planPlusF1: '‚ú¶ 10 tracks/mo', planPlusF2: '‚ú¶ Soul Chat unlimited', planPlusF3: '‚ú¶ Priority processing', planPlusF4: '‚ú¶ Full track history', planPlusSave: '‚àí58% vs singles',
          planMasterF1: '‚ú¶ 30 tracks/mo', planMasterF2: '‚ú¶ People directory', planMasterF3: '‚ú¶ Generation history', planMasterF4: '‚ú¶ Soul Chat unlimited', planMasterSave: '‚àí83% vs singles',
          refFriend1: 'friend', refFriend2: 'friends', refFriend5: 'friends', refLinkLoading: 'Loading‚Ä¶',
          quickPickerLabel: '‚ú¶ Quick requests',
          forWhoLabel: 'Who are we generating for?', nameLbl: 'Name', birthdateLbl: 'Date of birth', birthplaceLbl: 'Place of birth', birthtimeLbl: 'Time of birth',
          payOvCardTitleDefault: 'Payment', payOvTrialText: 'First song ‚Äî free gift!', payOvFreeClaimBtn: 'üéÅ Get for free',
          payOvPromoToggle: '‚ñ∏ Have a promo code?', orPay: 'Or pay:', priceLabel: 'Price:',
          payOvLinkHint: "If the window didn't open ‚Äî copy the link and paste in your browser:",
          payOvCopyBtn: 'üìã Copy payment link', payOvCheckBtn: "‚úÖ I've already paid ‚Äî verify",
          payOvPromoConfirmBtn: 'üéÅ Confirm and submit',
          paymentThanksTitle: 'Payment successful', paymentThanksMsg: 'Song is being created. It will arrive in the bot chat. You can close the window.',
          paymentThanksHintText: "Not arrived in 20 minutes? Message the bot 'song not received'"
        },
        de: {
          tagline: 'Musik deiner Seele',
          startBtn: 'Mein Lied erschaffen', myProfile: 'üë§ Profil', myHeroes: 'Labor', myHelp: 'Hilfe', admin: 'üëë Admin',
          profileTitle: 'Profil', profileSubtitle: 'Deine Daten und kostenlose Generierungen',
          profileFreeCredits: 'Kostenlose Generierungen', profileInviteFriend: 'Freund einladen', profileShare: 'Teilen',
          profileInvited: 'Eingeladen', profileActivated: 'Aktiviert', profileCreateSong: 'Lied erstellen',
          heroesTitle: 'Labor', heroesSubtitle: 'Personen-Kartei',
          searchByName: 'Suche nach Name', searchPlaceholder: 'Name eingeben...', searchBtn: 'Suchen',
          addHero: '‚ûï Held hinzuf√ºgen', heroName: 'Name *', heroBirthdate: 'Geburtsdatum', heroBirthtime: 'Geburtszeit',
          heroBirthplace: 'Geburtsort', heroBirthplacePh: 'Stadt, Land', heroNotes: 'Notizen', heroNotesPh: 'Klientennotizen',
          unknownTime: 'Exakte Zeit unbekannt', cancel: 'Abbrechen', save: 'Speichern', back: '‚Üê Zur√ºck',
          gender: 'Geschlecht', genderSelect: 'W√§hlen', male: 'M√§nnlich', female: 'Weiblich', other: 'Divers',
          modeType: 'Song-Format', modeSubtitle: 'F√ºr wen erstellen wir?',
          modeSingle: '√úber mich', modeSingleDesc: 'Ein Lied nach deinem Geburtsdatum.',
          modeCouple: '√úber uns zwei', modeCoupleDesc: 'Ein Lied f√ºr zwei Menschen.',
          modeTransit: 'Energie<br>des Moments', modeTransitDesc: 'Ein Lied √ºber den heutigen Tag.',
          namePh: 'Wie hei√üt du?', birthdateLabel: 'Geburtsdatum', birthplacePh: 'Stadt oder Land ‚Äî w√§hle aus den Vorschl√§gen',
          birthplaceHint: 'Stadt eintippen und aus der Liste ausw√§hlen.',
          unknownTimeShort: 'Unbekannt', secondPersonTitle: 'Zu zweit', name2Ph: 'Name der zweiten Person',
          birthplace2Ph: 'Geburtsort der zweiten Person', birthtime2Ph: 'Geburtszeit',
          transitTitle: 'Energie des Augenblicks', transitDatePh: 'Ereignisdatum', transitTimePh: 'Ereigniszeit',
          transitLocationPh: 'Stadt f√ºr die Momentenergie', transitLocationOk: 'Ort ist korrekt',
          transitIntentPh: 'Absicht f√ºr diesen Moment',
          sendRequest: 'Was wirst du heute erkunden?', quickRequests: 'Schnellanfragen', hide: 'Ausblenden',
          requestDesc: 'Worum geht das Lied? Jede Anfrage ‚Äî von Humor bis tiefe Themen.',
          requestQuickHint: 'W√§hle eine Vorlage oder schreib deine eigene',
          requestPh: 'Schreib eine beliebige Anfrage', toPayment: 'Zur Kasse',
          paymentSubtitle: 'Dein Klangschl√ºssel', paymentAndAccess: 'Zahlung & Zugang',
          paymentIntro: 'Das erste Lied ist gratis. Du kannst Einzelelemente kaufen oder ein Abo f√ºr vollen Zugang abschlie√üen.',
          loadingPricing: 'Tarife laden...', currentItem: 'Aktuelles Element',
          promoCode: 'Gutscheincode', apply: 'Anwenden', backFromPayment: '‚Üê Zur√ºck',
          submitAndContinue: 'Zur Kasse & weiter', submitRequest: 'Anfrage senden',
          submitHint: 'Das Lied kommt in diesen Chat mit dem Bot. Falls Sie im Bot noch nicht auf ¬´Start¬ª geklickt haben ‚Äî tun Sie es jetzt.',
          paymentPageIntroAfterSubmit: 'Anfrage gesendet. Gutscheincode eingeben oder unten tippen f√ºr Zahlung via HOT Pay.',
          paymentPageTagline: 'Gutscheincode oder Zahlung',
          payWithHot: 'Zahlen via HOT Pay',
          firstFree: 'Dein erster Klangschl√ºssel ist kostenlos.',
          subscriptionActive: 'Du hast ein aktives Abo ‚Äî fahre fort.',
          catalogLoadFailed: 'Tarife konnten nicht geladen werden. Tippe ¬´Zur Kasse¬ª ‚Äî der Backend bestimmt den Preis.',
          paymentRequired: 'Zahlung f√ºr neue Anfragen erforderlich.',
          promoApplied: 'Gutschein {code}: -{amount} {currency}',
          creatingKey: 'Dein Schl√ºssel wird erstellt...',
          creatingKeyDesc: 'Magie passiert in Echtzeit. Dein pers√∂nlicher Klangschl√ºssel wird aus deinen einzigartigen Daten geformt.',
          keyActivated: 'Schl√ºssel aktiviert!', done: 'Fertig!',
          successText: 'Dein pers√∂nlicher Klangschl√ºssel ist erstellt! Dein einzigartiges Kraftartefakt f√ºr das Spiel des Lebens.',
          yourSong: 'üéµ Dein Lied',
          songPreviewText: 'Deine einzigartige Komposition wartet im Bot. H√∂re sie jeden Morgen, um dich auf Erfolg einzustimmen.',
          whatNext: 'Was weiter:', openBot: 'Bot √∂ffnen',
          soulChat: 'Mit deiner Seele sprechen', soulChatPay: 'Zur Kasse ‚Äî Soul Basic / Soul Plus',
          newKey: 'Weiteren Schl√ºssel erstellen',
          paymentThanks: 'Danke f√ºr die Zahlung', thanksSubtitle: 'Anfrage angenommen', paymentThanksBackToForm: 'Dein Lied erstellen',
          songInProgress: 'Das Lied wird generiert und kommt im Bot-Chat, wenn es fertig ist.',
          songInProgressConfirmed: 'Anfrage angenommen. Lied wird generiert ‚Äî erneute Zahlung nicht n√∂tig. Es kommt im Bot-Chat, wenn es fertig ist.',
          thanksDone: 'Fertig',
          notFromTelegram: '√ñffne die App aus dem Bot-Chat in Telegram (Men√º) ‚Äî sonst kann die Anfrage nicht gesendet werden.',
          notFound: 'Nicht gefunden', searchError: 'Suchfehler',
          soulChatLoad: 'Laden‚Ä¶',
          soulChatHasAccess: 'Du hast Soul Chat. Tippe unten ‚Äî der Bot √∂ffnet sich. Im Bot: /soulchat und stelle deiner Seele eine Frage.',
          soulChatNoAccess: 'Soul Chat ‚Äî Dialoge mit deiner Seele. Mit Soul Basic (bis 50 Nachrichten/Monat) oder Soul Plus (unbegrenzt) Abo.',
          soulChatDefault: 'Soul Chat ‚Äî Dialoge mit deiner Seele pro Anfrage. Per Abo.',
          soulChatNoApi: 'Soul Chat ‚Äî Dialoge mit deiner Seele. Mit Soul Basic oder Soul Plus Abo. Gehe zu ¬´Zur Kasse¬ª in der App.',
          greeting: 'Hallo, {name}! Komm zur√ºck, wann immer du dich erinnern willst, wer du bist.',
          greetingDefault: 'Komm zur√ºck, wann immer du dich erinnern willst, wer du bist.',
          onboardingSlide1Title: 'Es gibt ein Lied ‚Äî √ºber dich',
          onboardingSlide1Text: 'Geschrieben nach deinem Geburtsdatum. Kein Template ‚Äî ein echter Text √ºber deinen Charakter und Weg.',
          onboardingSlide2Title: 'Nur √ºber dich',
          onboardingSlide2Text: 'Eine smarte Analyse deiner Pers√∂nlichkeit wird zu einem lebendigen Lied ‚Äî einzigartig, nur deins.',
          onboardingSlide3Title: 'Das erste ‚Äî als Geschenk',
          onboardingSlide3Text: 'Gib dein Geburtsdatum ein. Dein Lied kommt in den Bot-Chat.',
          onboardingBtnStart: 'Mein Lied h√∂ren',
          alertNameShort: 'Name muss mindestens 2 Zeichen haben', alertBirthdate: 'W√§hle Geburtsdatum',
          alertBirthplace: 'Geburtsort muss mindestens 3 Zeichen haben', alertBirthplaceHint: 'W√§hle einen Ort aus den Vorschl√§gen',
          alertBirthtime: 'Geburtszeit eingeben oder "Unbekannt" w√§hlen', alertGender: 'Geschlecht w√§hlen', alertLanguage: 'Sprache w√§hlen',
          alertName2Short: 'Name der zweiten Person ‚Äî mindestens 2 Zeichen', alertBirthdate2: 'Geburtsdatum der zweiten Person eingeben',
          alertBirthplace2: 'Geburtsort der zweiten Person muss mindestens 3 Zeichen haben',
          alertBirthtime2: 'Geburtszeit der zweiten Person eingeben', alertGender2: 'Geschlecht der zweiten Person w√§hlen',
          alertTransitDate: 'Ereignisdatum eingeben', alertTransitLocation: 'Ereignisort eingeben', alertTransitConfirm: 'Best√§tige, dass der Ort korrekt ist',
          alertRequestShort: 'Anfrage hinzuf√ºgen (5+ Zeichen)', alertRequestLong: 'Erz√§hle dem Universum mehr (mindestens 15 Zeichen)',
          alertYourPath: 'W√§hle deinen Weg', alertNoApi: 'API-Adresse nicht konfiguriert.', alertOpenFromBot: '√ñffne die App aus dem Bot-Chat in Telegram ‚Äî sonst wird die Anfrage nicht angenommen.',
          alertServerSleep: 'Server brauchte etwas zum Aufwachen. Warte etwa eine Minute und tippe erneut auf ¬´Anfrage senden¬ª.',
          sending: 'Sende‚Ä¶',
          universeHeard: '‚ú® {name}, das Universum hat deine Anfrage geh√∂rt.\n\nDein Klangschl√ºssel wird erstellt und kommt in diesen Chat, wenn er fertig ist.',
          universeHeardCouple: '‚ú® {name} und {name2}, das Universum hat eure Anfrage geh√∂rt.\n\nEuer Klangschl√ºssel wird erstellt und kommt in diesen Chat, wenn er fertig ist.',
          universeHeardTransit: '‚ú® {name}, das Universum hat deine Anfrage geh√∂rt.\n\nDein Tagesenergie-Klangschl√ºssel wird erstellt und kommt in diesen Chat, wenn er fertig ist.',
          langSong: 'Liedsprache', langRu: 'Russisch', langEn: 'Englisch', langDe: 'Deutsch', langFr: 'Franz√∂sisch', langUk: 'Ukrainisch',
          quick1: 'Harmonie und Selbstliebe', quick2: 'Selbstvertrauen und Bestimmung', quick3: 'Kreatives Potenzial', quick4: 'Vergangenheit loslassen',
          quick5: 'Lebensbalance', quick6: 'Vertrauen und Akzeptanz', quick7: 'Heilung und Freiheit', quick8: 'Weg zum Gl√ºck',
          quick9: 'Kraft und √úberwindung', quick10: 'Tiefe und Stille', quick11: 'Z√§rtlichkeit und F√ºrsorge', quick12: 'Humor und Leichtigkeit',
          quick1t: 'Harmonie in Beziehungen und Selbstliebe', quick2t: 'Selbstvertrauen, Bestimmung und Selbstst√§ndigkeit',
          quick3t: 'Kreatives Potenzial ohne Angst entfalten', quick4t: 'Vergangenheit loslassen und neue M√∂glichkeiten √∂ffnen',
          quick5t: 'Balance von Arbeit und Privatleben', quick6t: 'Dem Leben vertrauen und Kontrolle loslassen',
          quick7t: 'Kindheitstraumen heilen und Freiheit finden', quick8t: 'Deinen Weg zu Gl√ºck und Frieden finden',
          quick9t: 'Kraftvolles Lied √ºber meine St√§rke und √úberwindung', quick10t: 'Meditatives Lied f√ºr Praxis und Heilung',
          quick11t: 'Warmes Lied √ºber F√ºrsorge und Z√§rtlichkeit', quick12t: 'Verspieltes Lied mit Selbstironie √ºber meine Eigenheiten',
          promoError: 'Gutscheincode konnte nicht angewendet werden',
          promoCleared: 'Gutscheincode entfernt.', promoApplied: 'Gutschein angewendet: Endsumme {amount} {currency}',
          promoAppliedHint: 'Gutschein {code}: -{amount} {currency}',
          paymentRequiredOpening: 'Zahlung erforderlich. √ñffne HOT Checkout...',
          promoFreeGen: 'Gutschein erm√∂glicht kostenlose Generierung. Starte...',
          hotCheckoutOpened: 'HOT Checkout ge√∂ffnet. Nach der Zahlung kehre zur Mini App zur√ºck ‚Äî der Status wird automatisch aktualisiert.',
          paymentNotConfirmed: 'Zahlung noch nicht best√§tigt. Sp√§ter pr√ºfen oder Zahlung erneut √∂ffnen.',
          paymentConfirmed: 'Zahlung best√§tigt. Generierung startet...',
          paymentReceivedNoStart: 'Zahlung erhalten, aber Auto-Start fehlgeschlagen. Starte Generierung in der Admin per request_id: {id}',
          submitFailed: 'Anfrage konnte nicht gesendet werden. Warte eine Minute und tippe erneut auf ¬´Anfrage senden¬ª oder √∂ffne die Mini App neu aus dem Bot-Chat.',
          errorOp: 'Fehler bei Zahlung/Anfrage',
          alertTransitLocation: 'Ereignisort eingeben', alertTransitConfirm: 'Best√§tige, dass der Ort korrekt ist',
          alertNoApi: 'API-Adresse nicht konfiguriert.', alertOpenFromBot: '√ñffne die App aus dem Bot-Chat in Telegram ‚Äî sonst wird die Anfrage nicht angenommen.',
          alertOpenFromBotShort: '√ñffne die App aus dem Bot-Chat in Telegram.',
          alertPaymentFirst: 'Tippe zuerst auf ¬´Anfrage senden¬ª im vorherigen Schritt.',
          alertLinkCopied: '‚úì Link kopiert. F√ºge ihn in Safari oder Chrome ein und √∂ffne ihn.',
          alertHeroName: 'Name eingeben', alertError: 'Fehler', alertDeleteConfirm: '¬´{name}¬ª l√∂schen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.',
          alertSubmitError: 'Sendefehler',
          copyLinkPrompt: 'Kopiere diesen Link und √∂ffne ihn im Browser:',
          songFormingText: 'Dein Klangschl√ºssel wird erstellt und kommt in diesen Chat, wenn er fertig ist.',
          heroesLoading: 'Laden...', heroesEmpty: 'Noch keine Helden. Tippe auf ¬´Held hinzuf√ºgen¬ª.',
          heroesLoadError: 'Liste konnte nicht geladen werden. API-Einstellungen pr√ºfen.',
          loading: 'Laden‚Ä¶', noCardsYet: 'Noch keine abgeschlossenen Karten', heroHistLoading: 'Verlauf wird geladen‚Ä¶', heroHistEmpty: 'Noch keine Generierungen', heroHistLoadError: 'Verlauf konnte nicht geladen werden', heroesPageLoadError: 'Helden konnten nicht geladen werden', retry: 'Wiederholen',
          forMyself: 'F√ºr mich', forHero: 'F√ºr: {name}',
          previewHome: 'Startseite', previewForm: 'Formular', previewPayment: 'Zahlung', previewLoading: 'Laden', previewSuccess: 'Erfolg',
          supportBtn: 'üí¨ Support kontaktieren',
          subActivated: 'üéâ Abo aktiviert!', subBtnProfile: 'üë§ Mein Profil',
          helpPageTitle: 'Hilfe & Support', helpPageSubtitle: 'Alles √ºber YupSoul ‚Äî klar und kurz',
          profileHelpBtn: 'Hilfe & Support',
          profilePageTitle: 'Profil', profileSectionMyData: 'Meine Daten', profileSectionPlans: 'Tarife',
          profileLoadError: 'Abo konnte nicht geladen werden. Verbindung pr√ºfen.', profileLoadRetry: 'Wiederholen',
          profileEditBtn: 'Bearbeiten ‚Üí', profileBalanceHintText: 'Freunde einladen ‚Äî Gratistracks erhalten',
          profileSectionTracks: 'Einzeltracks', profileRefTagline: 'Freunde einladen ‚Äî kostenlose Songs erhalten',
          profileRefInvited: 'Eingeladen', profileRefActivated: 'Aktiviert',
          planCurrentBadge: 'Aktuell', planFreeYours: 'Bereits deins', planSubscribeBtn: 'Abonnieren',
          planDetailsBtn: 'Details', planPopularBadge: '‚ú¶ Beliebt', planMasterBadgeText: 'Meister',
          planMasterNameText: 'Labor', planOpenMasterBtn: 'Labor √∂ffnen',
          ptiSingleName: 'F√ºr mich', ptiSingleDesc: 'Deine Pers√∂nlichkeit im Klang',
          ptiCoupleName: 'F√ºr zwei', ptiCoupleDesc: 'Eure Verbindung und Resonanz',
          ptiTransitName: 'Tagesenergie', ptiTransitDesc: 'Ein Lied f√ºr heute',
          successTitle: 'Anfrage angenommen!', successDesc: 'Dein Song wird erstellt. Wenn er fertig ist ‚Äî kommt er im Bot an. Normalerweise 10‚Äì20 Minuten.',
          successHint: 'Nicht angekommen nach 20 Min? Schreib dem Bot "Song nicht angekommen".', successToProfile: 'Zum Profil',
          loadingTitle: 'Anfrage angenommen',
          heroesPageTitle: 'Labor', heroesPromoHeading: 'Meister-Dashboard',
          heroesPromoDesc: 'Personen einmal hinzuf√ºgen ‚Äî und Songs f√ºr sie in einem Tipp erstellen. Komplette Geschichte mit Texten.',
          heroesPromoFeaturesTitle: 'Was ist enthalten:',
          heroesF1: '‚ú¶ Unbegrenzte Personenanzahl', heroesF2: '‚ú¶ Schnelle Solo- & Duo-Song-Erstellung',
          heroesF3: '‚ú¶ Musikstil-Pr√§ferenzen', heroesF4: '‚ú¶ Komplette Geschichte mit Texten & Analyse',
          heroesF5: '‚ú¶ Audio direkt aus der Personenkarte',
          heroesTrialBtn: '1 Tag kostenlos ‚Äî ausprobieren', heroesSubBtn: 'Labor abonnieren ‚Äî $39.99/Mon.',
          heroesSubNote: '30 Tracks/Monat ¬∑ Zahlung via HOT Pay',
          heroFormTitle: 'Person hinzuf√ºgen', heroRelLabel: 'Beziehung', heroBirthdateHint: 'Tag, Monat und Jahr w√§hlen',
          heroTimeBirthLabel: 'Geburtszeit', heroStyleLabel: 'Lieblingsmusikstile', heroStylePh: 'Pop, Jazz, Elektronisch‚Ä¶',
          heroRelOpt0: '‚Äî ausw√§hlen ‚Äî', heroRelOpt1: 'Mutter', heroRelOpt2: 'Vater', heroRelOpt3: 'Tochter', heroRelOpt4: 'Sohn',
          heroRelOpt5: 'Schwester', heroRelOpt6: 'Bruder', heroRelOpt7: 'Gro√ümutter', heroRelOpt8: 'Gro√üvater',
          heroRelOpt9: 'Ehemann', heroRelOpt10: 'Ehefrau', heroRelOpt11: 'Geliebte Person',
          heroRelOpt12: 'Freund', heroRelOpt13: 'Freundin', heroRelOpt14: 'Kollege', heroRelOpt15: 'Mentor', heroRelOpt16: 'Anderes',
          dateDay: 'Tag', dateMonth: 'Monat', dateYear: 'Jahr',
          scLoading: '‚ú® Lade‚Ä¶', scPromoIntro: 'Soul Chat ist dein KI-Assistent, der dich versteht wie ein bester Freund oder dein H√∂heres Selbst. Beantwortet Fragen zu Charakter, Bestimmung und Weg.',
          scPromoErrorText: 'Tempor√§rer Lade Fehler. Du kannst einen Tarif w√§hlen oder 24h-Zugang kaufen.', scPromoRetryBtn: 'Wiederholen',
          scMoreBtnText: 'Mehr ‚Üì', scMoreBtnCollapse: 'Einklappen ‚Üë', scStat1: 'berichten von weniger Angst', scStat2: 'f√ºhlen sich verstanden',
          scStat3: 'finden Antworten schneller', scStat4: 'kommen wieder',
          scExamplesTitle: 'Beispielfragen',
          scEx1: '‚ÄûWarum f√§llt es mir so schwer, √ºber meine Gef√ºhle zu reden?"', scEx2: '‚ÄûWas ist meine gr√∂√üte Angst und wie gehe ich damit um?"',
          scEx3: '‚ÄûWas ist mein Lebensweg und wie komme ich dahin?"',
          scSubIncluded: 'Soul Chat im Abo enthalten', scChoosePlanBtn: 'Tarif w√§hlen ‚Üí',
          scGiftHeading: 'Kostenlos testen ‚Äî 24 Stunden', scGiftNote: 'Einmalig pro Nutzer',
          scGiftBtnText: 'üéÅ 24 Stunden kostenlos', scBuyDayNote: 'Noch nicht bereit f√ºr ein Abo? Teste den Einzelzugang',
          scBuyDayBtnText: '‚ö° Soul Chat 24h √∂ffnen ‚Äî $2.99', scToastPaymentReceived: 'Zahlung erhalten, Zugang aktiv',
          helpT1: 'Was ist YupSoul', helpB1: '<p>YupSoul erstellt ein <strong>pers√∂nliches Lied genau f√ºr dich</strong> ‚Äî basierend auf Datum, Uhrzeit und Geburtsort. Das System analysiert deine Pers√∂nlichkeit und schreibt ein Lied √ºber deine echten Qualit√§ten, Weg und St√§rke.</p><p>Dies ist kein Template ‚Äî jedes Lied ist einzigartig und geh√∂rt nur dir.</p>',
          helpT2: 'Was kann erstellt werden', helpB2: '<ul><li><strong>Lied √ºber mich</strong> ‚Äî dein pers√∂nliches Klangportrait: wer du bist, deine St√§rke und innerer Weg</li><li><strong>Lied f√ºr zwei</strong> ‚Äî f√ºr ein Paar (Verliebte, Freunde). Analysiert beide Karten und spiegelt die Verbindung wider</li><li><strong>Tagesenergie</strong> ‚Äî ein Lied f√ºr ein bestimmtes Datum und Ort. Welche M√∂glichkeiten √∂ffnen sich gerade jetzt</li></ul><p>Es gibt auch <strong>Schnellanfragen</strong> ‚Äî fertige Ideen: Kraftlied, Geburtstagslied, meditativ, √ºber das Loslassen der Vergangenheit und mehr.</p>',
          helpT3: 'Wie lange warten', helpB3: '<p>Normalerweise <strong>5‚Äì15 Minuten</strong>. Der Bot schickt eine Benachrichtigung, wenn dein Lied fertig ist.</p><p>Du kannst die App schlie√üen ‚Äî das Ergebnis kommt von selbst, nichts geht verloren.</p>',
          helpT4: 'Ich kenne meine genaue Geburtszeit nicht', helpB4: '<p>Kein Problem. W√§hle <strong>‚ÄûZeit unbekannt"</strong> ‚Äî das System erstellt ein vollst√§ndiges Lied anhand der anderen Daten.</p>',
          helpT5: 'Kostenlose Generierungen', helpB5: '<p><strong>Die erste Generierung ist kostenlos.</strong></p><p>Weitere kostenlose gibt es √ºber das Empfehlungsprogramm: Teile deinen Link. Wenn 5 deiner eingeladenen Freunde ihr erstes Lied erstellen ‚Äî erh√§ltst du automatisch 1 kostenlose Generierung.</p><p>Dein Empfehlungslink ist im Bereich ‚ÄûProfil", Block ‚ÄûFreund einladen".</p>',
          helpT6: 'Zahlung & Gutscheincodes', helpB6: '<p>Zus√§tzliche Generierungen werden nach Tarif bezahlt. Zahlungsoptionen werden beim Aufgeben einer Bestellung angezeigt.</p><p>Wenn du einen <strong>Gutscheincode</strong> hast ‚Äî gib ihn auf dem Zahlungsbildschirm ein. Codes sind Gro√ü-/Kleinschreibung-sensitiv.</p>',
          helpT7: 'Etwas ist schiefgelaufen', helpB7: '<p><strong>App geschlossen oder Fehler</strong> ‚Äî versuche den Bot neu zu √∂ffnen. Unfertige Bestellungen werden automatisch wiederhergestellt.</p><p><strong>Bezahlt aber kein Lied</strong> ‚Äî warte 15‚Äì20 Minuten. Wenn nichts kommt ‚Äî schreib dem Bot ‚ÄûLied nicht angekommen". Oder kontaktiere den Support.</p><p><strong>Gutscheincode nicht akzeptiert</strong> ‚Äî Gro√ü-/Kleinschreibung pr√ºfen. Falls alles korrekt ‚Äî schreib uns mit dem Code.</p>',
          profileBalanceLbl: 'Kostenlose Generierungen',
          planFreeF1: '‚ú¶ 1 kostenloses Lied', planFreeF2: '‚ú¶ Alle Formate',
          planBasicF1: '‚ú¶ 5 Lieder/Mo.', planBasicF2: '‚ú¶ Soul Chat (bis 50 Nachr./Mo.)', planBasicF3: '‚ú¶ Bestellhistorie', planBasicSave: '‚àí50% vs Einzelkauf',
          planPlusF1: '‚ú¶ 10 Lieder/Mo.', planPlusF2: '‚ú¶ Soul Chat unbegrenzt', planPlusF3: '‚ú¶ Priorit√§tsverarbeitung', planPlusF4: '‚ú¶ Vollst√§ndige Titel-Historie', planPlusSave: '‚àí58% vs Einzelkauf',
          planMasterF1: '‚ú¶ 30 Lieder/Mo.', planMasterF2: '‚ú¶ Personenverzeichnis', planMasterF3: '‚ú¶ Generierungshistorie', planMasterF4: '‚ú¶ Soul Chat unbegrenzt', planMasterSave: '‚àí83% vs Einzelkauf',
          refFriend1: 'Freund', refFriend2: 'Freunde', refFriend5: 'Freunde', refLinkLoading: 'Laden‚Ä¶',
          quickPickerLabel: '‚ú¶ Schnellanfragen',
          forWhoLabel: 'F√ºr wen generieren wir?', nameLbl: 'Name', birthdateLbl: 'Geburtsdatum', birthplaceLbl: 'Geburtsort', birthtimeLbl: 'Geburtszeit',
          payOvCardTitleDefault: 'Zahlung', payOvTrialText: 'Erstes Lied ‚Äî Geschenk!', payOvFreeClaimBtn: 'üéÅ Kostenlos erhalten',
          payOvPromoToggle: '‚ñ∏ Haben Sie einen Code?', orPay: 'Oder bezahle:', priceLabel: 'Preis:',
          payOvLinkHint: 'Wenn sich das Fenster nicht √∂ffnete ‚Äî Link kopieren und im Browser einf√ºgen:',
          payOvCopyBtn: 'üìã Zahlungslink kopieren', payOvCheckBtn: '‚úÖ Ich habe bezahlt ‚Äî pr√ºfen',
          payOvPromoConfirmBtn: 'üéÅ Best√§tigen und senden',
          paymentThanksTitle: 'Zahlung erfolgreich', paymentThanksMsg: 'Lied wird erstellt. Kommt im Bot-Chat an. Fenster kann geschlossen werden.',
          paymentThanksHintText: 'Nicht in 20 Min. angekommen? Schreib dem Bot ‚ÄûLied nicht angekommen"'
        },
        fr: {
          tagline: 'La musique de ton √¢me',
          startBtn: 'Cr√©er ma chanson', myProfile: 'üë§ Profil', myHeroes: 'Labo', myHelp: 'Aide', admin: 'üëë Admin',
          profileTitle: 'Profil', profileSubtitle: 'Tes donn√©es et g√©n√©rations gratuites',
          profileFreeCredits: 'G√©n√©rations gratuites', profileInviteFriend: 'Inviter un ami', profileShare: 'Partager',
          profileInvited: 'Invit√©s', profileActivated: 'Activ√©s', profileCreateSong: 'Cr√©er une chanson',
          heroesTitle: 'Laboratoire', heroesSubtitle: 'R√©pertoire des personnes',
          searchByName: 'Rechercher par nom', searchPlaceholder: 'Entrer le nom...', searchBtn: 'Rechercher',
          addHero: '‚ûï Ajouter un h√©ros', heroName: 'Nom *', heroBirthdate: 'Date de naissance', heroBirthtime: 'Heure de naissance',
          heroBirthplace: 'Lieu de naissance', heroBirthplacePh: 'Ville, pays', heroNotes: 'Notes', heroNotesPh: 'Notes client',
          unknownTime: "Heure exacte inconnue", cancel: 'Annuler', save: 'Enregistrer', back: '‚Üê Retour',
          gender: 'Genre', genderSelect: 'Choisir', male: 'Homme', female: 'Femme', other: 'Autre',
          modeType: "Format de chanson", modeSubtitle: 'Pour qui cr√©ons-nous ?',
          modeSingle: '√Ä mon sujet', modeSingleDesc: 'Une chanson selon ta date de naissance.',
          modeCouple: 'Nous deux', modeCoupleDesc: 'Une chanson pour deux personnes.',
          modeTransit: "√ânergie<br>du moment", modeTransitDesc: "Une chanson sur la journ√©e d'aujourd'hui.",
          namePh: "Comment tu t'appelles ?", birthdateLabel: 'Date de naissance', birthplacePh: 'Ville ou pays ‚Äî choisis parmi les suggestions',
          birthplaceHint: 'Tape ta ville et choisis dans la liste.',
          unknownTimeShort: 'Inconnu', secondPersonTitle: '√Ä deux', name2Ph: "Nom de la deuxi√®me personne",
          birthplace2Ph: "Lieu de naissance de la deuxi√®me personne", birthtime2Ph: 'Heure de naissance',
          transitTitle: "√ânergie du moment", transitDatePh: 'Date de l\'√©v√©nement', transitTimePh: "Heure de l'√©v√©nement",
          transitLocationPh: 'Ville pour l\'√©nergie du moment', transitLocationOk: 'Le lieu est correct',
          transitIntentPh: 'Intention pour ce moment',
          sendRequest: 'Que vas-tu explorer aujourd\'hui ?', quickRequests: 'Demandes rapides', hide: 'Masquer',
          requestDesc: 'De quoi parle la chanson ? Toute demande ‚Äî de l\'humour aux th√®mes profonds.',
          requestQuickHint: 'Choisis une demande pr√™te ou √©cris la tienne',
          requestPh: '√âcris n\'importe quelle demande', toPayment: 'Paiement',
          paymentSubtitle: 'Ta cl√© sonore', paymentAndAccess: 'Paiement et acc√®s',
          paymentIntro: 'La premi√®re chanson est offerte. Tu peux payer des √©l√©ments individuels ou t\'abonner pour un acc√®s complet.',
          loadingPricing: 'Chargement des tarifs...', currentItem: '√âl√©ment actuel',
          promoCode: 'Code promo', apply: 'Appliquer', backFromPayment: '‚Üê Retour',
          submitAndContinue: 'Payer et continuer', submitRequest: 'Envoyer la demande',
          submitHint: 'La chanson arrivera dans ce chat avec le bot. Si vous n\'avez pas encore appuy√© sur ¬´D√©marrer¬ª dans le bot ‚Äî faites-le maintenant.',
          paymentPageIntroAfterSubmit: 'Demande envoy√©e. Entre le code promo ou appuie ci-dessous pour payer via HOT Pay.',
          paymentPageTagline: 'Code promo ou paiement',
          payWithHot: 'Payer via HOT Pay',
          firstFree: 'Ta premi√®re cl√© sonore est gratuite.',
          subscriptionActive: 'Tu as un abonnement actif ‚Äî continue.',
          catalogLoadFailed: 'Tarifs non charg√©s. Appuie sur ¬´Payer¬ª ‚Äî le backend d√©terminera le prix.',
          paymentRequired: 'Paiement requis pour les nouvelles demandes.',
          promoApplied: 'Code promo {code}: -{amount} {currency}',
          creatingKey: 'Cr√©ation de ta cl√©...',
          creatingKeyDesc: 'La magie op√®re en temps r√©el. Ta cl√© sonore personnelle se forme √† partir de tes donn√©es uniques.',
          keyActivated: 'Cl√© activ√©e !', done: 'Termin√© !',
          successText: 'Ta cl√© sonore personnelle est cr√©√©e ! Ton artefact unique de force pour le jeu de la vie.',
          yourSong: 'üéµ Ta chanson',
          songPreviewText: 'Ta composition unique t\'attend dans le bot. √âcoute-la chaque matin pour te mettre sur la voie du succ√®s.',
          whatNext: 'Et apr√®s :', openBot: 'Ouvre le bot',
          soulChat: 'Parler √† ton √¢me', soulChatPay: 'Paiement ‚Äî Soul Basic / Soul Plus',
          newKey: 'Cr√©er une autre cl√©',
          paymentThanks: 'Merci pour le paiement', thanksSubtitle: 'demande accept√©e', paymentThanksBackToForm: 'Cr√©er ta chanson',
          songInProgress: 'La chanson est en cours de g√©n√©ration et arrivera dans le chat du bot quand elle sera pr√™te.',
          songInProgressConfirmed: 'Demande accept√©e. Chanson en g√©n√©ration ‚Äî pas besoin de payer √† nouveau. Elle arrivera dans le chat du bot quand elle sera pr√™te.',
          thanksDone: 'Termin√©',
          notFromTelegram: 'Ouvre l\'app depuis le chat du bot dans Telegram (bouton menu) ‚Äî sinon la demande ne peut pas √™tre envoy√©e.',
          notFound: 'Non trouv√©', searchError: 'Erreur de recherche',
          soulChatLoad: 'Chargement‚Ä¶',
          soulChatHasAccess: "Tu as acc√®s √† Soul Chat. Appuie ci-dessous ‚Äî le bot s'ouvrira. Dans le bot, tape /soulchat et pose une question √† ton √¢me.",
          soulChatNoAccess: 'Soul Chat ‚Äî dialogues avec ton √¢me. Avec abonnement Soul Basic (jusqu\'√† 50 messages/mois) ou Soul Plus (illimit√©).',
          soulChatDefault: 'Soul Chat ‚Äî dialogues avec ton √¢me par demande. Sur abonnement.',
          soulChatNoApi: 'Soul Chat ‚Äî dialogues avec ton √¢me. Avec abonnement Soul Basic ou Soul Plus. Va dans ¬´Paiement¬ª dans l\'app.',
          greeting: 'Salut, {name} ! Reviens quand tu veux te souvenir de qui tu es.',
          greetingDefault: 'Reviens quand tu veux te souvenir de qui tu es.',
          onboardingSlide1Title: 'Il y a une chanson ‚Äî sur toi',
          onboardingSlide1Text: '√âcrite selon ta date de naissance. Pas un mod√®le ‚Äî un vrai texte sur ton caract√®re et ton chemin.',
          onboardingSlide2Title: 'Seulement sur toi',
          onboardingSlide2Text: 'Une analyse intelligente de ta personnalit√© devient une chanson vivante ‚Äî unique, rien qu\'√† toi.',
          onboardingSlide3Title: 'La premi√®re ‚Äî en cadeau',
          onboardingSlide3Text: 'Saisis ta date de naissance. Ta chanson arrivera dans le chat du bot.',
          onboardingBtnStart: 'Recevoir ma chanson',
          alertNameShort: 'Le nom doit contenir au moins 2 caract√®res', alertBirthdate: 'Choisis la date de naissance',
          alertBirthplace: 'Le lieu de naissance doit contenir au moins 3 caract√®res', alertBirthplaceHint: 'Choisis un lieu dans les suggestions',
          alertBirthtime: 'Entre l\'heure de naissance ou coche "Inconnu"', alertGender: 'Choisis le genre', alertLanguage: 'Choisis la langue',
          alertName2Short: 'Le nom de la 2e personne ‚Äî au moins 2 caract√®res', alertBirthdate2: 'Entre la date de naissance de la 2e personne',
          alertBirthplace2: 'Le lieu de naissance de la 2e personne doit contenir au moins 3 caract√®res',
          alertBirthtime2: 'Entre l\'heure de naissance de la 2e personne', alertGender2: 'Choisis le genre de la 2e personne',
          alertTransitDate: 'Entre la date de l\'√©v√©nement', alertTransitLocation: 'Entre le lieu de l\'√©v√©nement', alertTransitConfirm: 'Confirme que le lieu est correct',
          alertRequestShort: 'Ajoute une demande (5+ caract√®res)', alertRequestLong: 'Dis-en plus √† l\'Univers (au moins 15 caract√®res)',
          alertYourPath: 'Choisis ton chemin', alertNoApi: 'Adresse API non configur√©e.', alertOpenFromBot: 'Ouvre l\'app depuis le chat du bot dans Telegram ‚Äî sinon la demande ne peut pas √™tre accept√©e.',
          alertServerSleep: 'Le serveur s\'est r√©veill√© lentement. Attends environ une minute et appuie √† nouveau sur ¬´Envoyer la demande¬ª.',
          sending: 'Envoi‚Ä¶',
          universeHeard: '‚ú® {name}, l\'Univers a entendu ta demande.\n\nTa cl√© sonore est en cours de cr√©ation et arrivera dans ce chat quand elle sera pr√™te.',
          universeHeardCouple: '‚ú® {name} et {name2}, l\'Univers a entendu votre demande.\n\nVotre cl√© sonore est en cours de cr√©ation et arrivera dans ce chat quand elle sera pr√™te.',
          universeHeardTransit: '‚ú® {name}, l\'Univers a entendu ta demande.\n\nTa cl√© sonore √ânergie du jour est en cours de cr√©ation et arrivera dans ce chat quand elle sera pr√™te.',
          langSong: 'Langue de la chanson', langRu: 'Russe', langEn: 'Anglais', langDe: 'Allemand', langFr: 'Fran√ßais', langUk: 'Ukrainien',
          quick1: 'Harmonie et amour de soi', quick2: 'Confiance et but', quick3: 'Potentiel cr√©atif', quick4: 'L√¢cher le pass√©',
          quick5: '√âquilibre de vie', quick6: 'Confiance et acceptation', quick7: 'Gu√©rison et libert√©', quick8: 'Chemin vers le bonheur',
          quick9: 'Force et d√©passement', quick10: 'Profondeur et silence', quick11: 'Tendresse et soin', quick12: 'Humor et l√©g√®ret√©',
          quick1t: 'Harmonie dans les relations et amour de soi', quick2t: 'Confiance, but et autonomie',
          quick3t: 'Lib√©rer ton potentiel cr√©atif sans peur', quick4t: 'L√¢cher le pass√© et ouvrir de nouvelles possibilit√©s',
          quick5t: '√âquilibre travail et vie personnelle', quick6t: 'Faire confiance √† la vie et l√¢cher le contr√¥le',
          quick7t: 'Gu√©rir les blessures d\'enfance et trouver la libert√©', quick8t: 'Trouver ton chemin vers le bonheur et la paix',
          quick9t: 'Chanson puissante sur ma force et mon d√©passement', quick10t: 'Chanson m√©ditative pour la pratique et la gu√©rison',
          quick11t: 'Chanson chaleureuse sur le soin et la tendresse', quick12t: 'Chanson ludique avec auto-ironie sur mes travers',
          promoError: 'Code promo non appliqu√©',
          promoCleared: 'Code promo effac√©.', promoApplied: 'Code promo appliqu√©: montant final {amount} {currency}',
          promoAppliedHint: 'Code promo {code}: -{amount} {currency}',
          paymentRequiredOpening: 'Paiement requis. Ouverture de HOT Checkout...',
          promoFreeGen: 'Le code promo donne une g√©n√©ration gratuite. D√©marrage...',
          hotCheckoutOpened: 'HOT Checkout ouvert. Apr√®s paiement, reviens dans la Mini App ‚Äî le statut se mettra √† jour automatiquement.',
          paymentNotConfirmed: 'Paiement pas encore confirm√©. V√©rifie plus tard ou rouvre le paiement.',
          paymentConfirmed: 'Paiement confirm√©. D√©marrage de la g√©n√©ration...',
          paymentReceivedNoStart: 'Paiement re√ßu, mais d√©marrage auto √©chou√©. Lance la g√©n√©ration dans l\'admin par request_id: {id}',
          submitFailed: 'Demande non envoy√©e. Attends une minute et appuie √† nouveau sur ¬´Envoyer la demande¬ª ou rouvre la Mini App depuis le chat du bot.',
          errorOp: 'Erreur op√©ration paiement/demande',
          alertTransitLocation: 'Entre le lieu de l\'√©v√©nement', alertTransitConfirm: 'Confirme que le lieu est correct',
          alertNoApi: 'Adresse API non configur√©e.', alertOpenFromBot: 'Ouvre l\'app depuis le chat du bot dans Telegram ‚Äî sinon la demande ne peut pas √™tre accept√©e.',
          alertOpenFromBotShort: 'Ouvre l\'app depuis le chat du bot dans Telegram.',
          alertPaymentFirst: 'Appuie d\'abord sur ¬´Envoyer la demande¬ª √† l\'√©tape pr√©c√©dente.',
          alertLinkCopied: '‚úì Lien copi√©. Colle-le dans Safari ou Chrome et ouvre-le.',
          alertHeroName: 'Entre le nom', alertError: 'Erreur', alertDeleteConfirm: 'Supprimer ¬´{name}¬ª ? Cette action ne peut pas √™tre annul√©e.',
          alertSubmitError: 'Erreur d\'envoi',
          copyLinkPrompt: 'Copie ce lien et ouvre-le dans le navigateur:',
          songFormingText: 'Ta cl√© sonore est en cours de cr√©ation et arrivera dans ce chat quand elle sera pr√™te.',
          heroesLoading: 'Chargement...', heroesEmpty: 'Pas encore de h√©ros. Appuie sur ¬´Ajouter un h√©ros¬ª.',
          heroesLoadError: 'Impossible de charger la liste. V√©rifier les param√®tres API.',
          loading: 'Chargement‚Ä¶', noCardsYet: 'Pas encore de cartes termin√©es', heroHistLoading: 'Chargement de l\'historique‚Ä¶', heroHistEmpty: 'Pas encore de g√©n√©rations', heroHistLoadError: 'Impossible de charger l\'historique', heroesPageLoadError: 'Impossible de charger les h√©ros', retry: 'R√©essayer',
          forMyself: 'Pour moi', forHero: 'Pour: {name}',
          previewHome: 'Accueil', previewForm: 'Formulaire', previewPayment: 'Paiement', previewLoading: 'Chargement', previewSuccess: 'Succ√®s',
          supportBtn: 'üí¨ Contacter le support',
          subActivated: 'üéâ Abonnement activ√© !', subBtnProfile: 'üë§ Mon profil',
          helpPageTitle: 'Aide & Support', helpPageSubtitle: 'Tout sur YupSoul ‚Äî simple et concis',
          profileHelpBtn: 'Aide & support',
          profilePageTitle: 'Profil', profileSectionMyData: 'Mes donn√©es', profileSectionPlans: 'Abonnements',
          profileLoadError: 'Impossible de charger l\'abonnement. V√©rifie ta connexion.', profileLoadRetry: 'R√©essayer',
          profileEditBtn: 'Modifier ‚Üí', profileBalanceHintText: 'Invite des amis ‚Äî re√ßois des titres gratuits',
          profileSectionTracks: 'Titres individuels', profileRefTagline: 'Invite des amis ‚Äî gagne des chansons gratuites',
          profileRefInvited: 'Invit√©s', profileRefActivated: 'Activ√©s',
          planCurrentBadge: 'Actuel', planFreeYours: 'D√©j√† le tien', planSubscribeBtn: "S'abonner",
          planDetailsBtn: 'D√©tails', planPopularBadge: '‚ú¶ Populaire', planMasterBadgeText: 'Ma√Ætre',
          planMasterNameText: 'Laboratoire', planOpenMasterBtn: 'Ouvrir le Laboratoire',
          ptiSingleName: 'Pour moi', ptiSingleDesc: 'Ta personnalit√© en sons',
          ptiCoupleName: 'Pour deux', ptiCoupleDesc: 'Votre lien et r√©sonance',
          ptiTransitName: "√ânergie du jour", ptiTransitDesc: "Une chanson pour aujourd'hui",
          successTitle: 'Demande accept√©e !', successDesc: "Ta chanson est en cours de cr√©ation. Quand elle sera pr√™te ‚Äî elle arrivera dans le bot. G√©n√©ralement 10‚Äì20 minutes.",
          successHint: 'Pas re√ßue en 20 min ? Dis au bot ¬´ chanson non re√ßue ¬ª.', successToProfile: 'Aller au profil',
          loadingTitle: 'Demande accept√©e',
          heroesPageTitle: 'Laboratoire', heroesPromoHeading: 'Espace Ma√Ætre',
          heroesPromoDesc: "Ajoute des personnes une fois ‚Äî et g√©n√®re des chansons pour elles en un tap. Historique complet avec paroles.",
          heroesPromoFeaturesTitle: 'Ce qui est inclus :',
          heroesF1: '‚ú¶ Nombre illimit√© de personnes', heroesF2: '‚ú¶ G√©n√©ration solo & duo rapide',
          heroesF3: '‚ú¶ Pr√©f√©rences de style musical', heroesF4: '‚ú¶ Historique complet avec paroles & analyse',
          heroesF5: '‚ú¶ Audio directement depuis la fiche personne',
          heroesTrialBtn: '1 jour gratuit ‚Äî essayer', heroesSubBtn: "S'abonner au Laboratoire ‚Äî $39.99/mois",
          heroesSubNote: '30 titres/mois ¬∑ Paiement via HOT Pay',
          heroFormTitle: 'Ajouter une personne', heroRelLabel: 'Relation', heroBirthdateHint: 'S√©lectionne jour, mois et ann√©e',
          heroTimeBirthLabel: 'Heure de naissance', heroStyleLabel: 'Styles musicaux pr√©f√©r√©s', heroStylePh: 'pop, jazz, √©lectronique‚Ä¶',
          heroRelOpt0: '‚Äî choisir ‚Äî', heroRelOpt1: 'M√®re', heroRelOpt2: 'P√®re', heroRelOpt3: 'Fille', heroRelOpt4: 'Fils',
          heroRelOpt5: 'S≈ìur', heroRelOpt6: 'Fr√®re', heroRelOpt7: 'Grand-m√®re', heroRelOpt8: 'Grand-p√®re',
          heroRelOpt9: 'Mari', heroRelOpt10: 'Femme', heroRelOpt11: '√ätre aim√©',
          heroRelOpt12: 'Ami', heroRelOpt13: 'Amie', heroRelOpt14: 'Coll√®gue', heroRelOpt15: 'Mentor', heroRelOpt16: 'Autre',
          dateDay: 'Jour', dateMonth: 'Mois', dateYear: 'Ann√©e',
          scLoading: '‚ú® Chargement‚Ä¶', scPromoIntro: "Soul Chat est ton assistant IA qui te comprend comme un meilleur ami ou ton Moi Sup√©rieur. R√©pond aux questions sur ton caract√®re, ta vocation et ton chemin.",
          scPromoErrorText: 'Erreur de chargement temporaire. Tu peux choisir un abonnement ou acheter 24h.', scPromoRetryBtn: 'R√©essayer',
          scMoreBtnText: 'Plus ‚Üì', scMoreBtnCollapse: 'R√©duire ‚Üë', scStat1: "signalent moins d'anxi√©t√©", scStat2: 'se sentent compris',
          scStat3: 'trouvent des r√©ponses plus vite', scStat4: 'reviennent',
          scExamplesTitle: 'Exemples de questions',
          scEx1: '¬´ Pourquoi est-il si difficile pour moi de parler de mes sentiments ? ¬ª', scEx2: '¬´ Quelle est ma principale peur et comment y faire face ? ¬ª',
          scEx3: '¬´ Quelle est ma vocation et comment y parvenir ? ¬ª',
          scSubIncluded: "Soul Chat inclus dans l'abonnement", scChoosePlanBtn: 'Choisir un abonnement ‚Üí',
          scGiftHeading: 'Essayer gratuitement ‚Äî 24 heures', scGiftNote: 'Une fois par utilisateur',
          scGiftBtnText: 'üéÅ Obtenir 24 heures gratuitement', scBuyDayNote: "Pas pr√™t pour un abonnement ? Essaie l'acc√®s individuel",
          scBuyDayBtnText: '‚ö° Ouvrir Soul Chat 24h ‚Äî $2.99', scToastPaymentReceived: 'Paiement re√ßu, acc√®s activ√©',
          helpT1: 'Qu\'est-ce que YupSoul', helpB1: '<p>YupSoul cr√©e une <strong>chanson personnelle rien que pour toi</strong> ‚Äî bas√©e sur ta date, heure et lieu de naissance. Le syst√®me analyse ta personnalit√© et √©crit une chanson sur tes vraies qualit√©s, ton chemin et ta force.</p><p>Ce n\'est pas un mod√®le ‚Äî chaque chanson est unique et t\'appartient.</p>',
          helpT2: 'Ce qu\'on peut cr√©er', helpB2: '<ul><li><strong>Chanson sur moi</strong> ‚Äî ton portrait sonore personnel : qui tu es, ta force et ton chemin int√©rieur</li><li><strong>Chanson pour deux</strong> ‚Äî pour un couple (amoureux, amis). Analyse les deux cartes et refl√®te l\'union</li><li><strong>√ânergie du jour</strong> ‚Äî une chanson pour une date et un lieu pr√©cis. Quelles opportunit√©s s\'ouvrent en ce moment</li></ul><p>Il y a aussi des <strong>requ√™tes rapides</strong> ‚Äî id√©es pr√™tes : chanson de force, d\'anniversaire, m√©ditative, sur le l√¢cher-prise, et plus.</p>',
          helpT3: 'Combien de temps attendre', helpB3: '<p>G√©n√©ralement <strong>5‚Äì15 minutes</strong>. Le bot enverra une notification quand ta chanson sera pr√™te.</p><p>Tu peux fermer l\'appli ‚Äî le r√©sultat arrivera tout seul, rien ne sera perdu.</p>',
          helpT4: 'Je ne connais pas mon heure de naissance exacte', helpB4: '<p>Pas de probl√®me. Coche <strong>¬´ Heure inconnue ¬ª</strong> ‚Äî le syst√®me cr√©era une chanson compl√®te avec les autres donn√©es.</p>',
          helpT5: 'G√©n√©rations gratuites', helpB5: '<p><strong>La premi√®re g√©n√©ration est gratuite.</strong></p><p>Obtiens-en d\'autres gratuitement via le programme de parrainage : partage ton lien. Quand 5 de tes amis invit√©s cr√©ent leur premi√®re chanson ‚Äî tu re√ßois automatiquement 1 g√©n√©ration gratuite.</p><p>Ton lien de parrainage est dans la section ¬´ Profil ¬ª, bloc ¬´ Inviter un ami ¬ª.</p>',
          helpT6: 'Paiement & codes promo', helpB6: '<p>Les g√©n√©rations suppl√©mentaires sont payantes selon le tarif. Les options de paiement s\'affichent lors de la commande.</p><p>Si tu as un <strong>code promo</strong> ‚Äî saisis-le sur l\'√©cran de paiement. Les codes sont sensibles √† la casse.</p>',
          helpT7: 'Quelque chose a mal tourn√©', helpB7: '<p><strong>L\'appli s\'est ferm√©e ou a affich√© une erreur</strong> ‚Äî essaie de rouvrir le bot. Les commandes inachev√©es sont restaur√©es automatiquement.</p><p><strong>Pay√© mais pas de chanson</strong> ‚Äî attends 15‚Äì20 minutes. Si rien n\'arrive ‚Äî dis au bot ¬´ chanson non re√ßue ¬ª. Ou contacte le support.</p><p><strong>Code promo non accept√©</strong> ‚Äî v√©rifie la casse. Si tout est correct ‚Äî √©cris-nous avec le code.</p>',
          profileBalanceLbl: 'G√©n√©rations gratuites',
          planFreeF1: '‚ú¶ 1 chanson gratuite', planFreeF2: '‚ú¶ Tous les formats',
          planBasicF1: '‚ú¶ 5 titres/mois', planBasicF2: '‚ú¶ Soul Chat (50 messages/mois)', planBasicF3: '‚ú¶ Historique commandes', planBasicSave: '‚àí50% vs s√©par√©s',
          planPlusF1: '‚ú¶ 10 titres/mois', planPlusF2: '‚ú¶ Soul Chat illimit√©', planPlusF3: '‚ú¶ Traitement prioritaire', planPlusF4: '‚ú¶ Historique complet', planPlusSave: '‚àí58% vs s√©par√©s',
          planMasterF1: '‚ú¶ 30 titres/mois', planMasterF2: '‚ú¶ R√©pertoire de personnes', planMasterF3: '‚ú¶ Historique des g√©n√©rations', planMasterF4: '‚ú¶ Soul Chat illimit√©', planMasterSave: '‚àí83% vs s√©par√©s',
          refFriend1: 'ami', refFriend2: 'amis', refFriend5: 'amis', refLinkLoading: 'Chargement‚Ä¶',
          quickPickerLabel: '‚ú¶ Demandes rapides',
          forWhoLabel: 'Pour qui g√©n√©rons-nous?', nameLbl: 'Pr√©nom', birthdateLbl: 'Date de naissance', birthplaceLbl: 'Lieu de naissance', birthtimeLbl: 'Heure de naissance',
          payOvCardTitleDefault: 'Paiement', payOvTrialText: 'Premi√®re chanson ‚Äî cadeau!', payOvFreeClaimBtn: 'üéÅ Obtenir gratuitement',
          payOvPromoToggle: '‚ñ∏ Vous avez un code promo?', orPay: 'Ou payez:', priceLabel: 'Prix:',
          payOvLinkHint: "Si la fen√™tre ne s'est pas ouverte ‚Äî copiez le lien et collez dans votre navigateur:",
          payOvCopyBtn: 'üìã Copier le lien de paiement', payOvCheckBtn: "‚úÖ J'ai d√©j√† pay√© ‚Äî v√©rifier",
          payOvPromoConfirmBtn: 'üéÅ Confirmer et envoyer',
          paymentThanksTitle: 'Paiement effectu√©', paymentThanksMsg: 'Chanson en cours de cr√©ation. Arrivera dans le chat du bot. Vous pouvez fermer.',
          paymentThanksHintText: "Pas arriv√©e en 20 min? √âcrivez au bot ¬´chanson non re√ßue¬ª"
        }
      };
      var currentLang = 'ru';
      function detectLang() {
        try {
          var stored = localStorage.getItem(LANG_STORAGE_KEY);
          if (stored === 'ru' || stored === 'en' || stored === 'de' || stored === 'fr') return stored;
          var lc = (tg && tg.initDataUnsafe && tg.initDataUnsafe.user && tg.initDataUnsafe.user.language_code) || (typeof navigator !== 'undefined' && navigator.language) || '';
          lc = (lc || '').toLowerCase();
          if (/^en/.test(lc)) return 'en';
          if (/^de/.test(lc)) return 'de';
          if (/^fr/.test(lc)) return 'fr';
          if (/^uk/.test(lc)) return 'ru';
          return 'ru';
        } catch (_) { return 'ru'; }
      }
      function t(k, vars) {
        // –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —è–∑—ã–∫–æ–≤
        if (!LANG[currentLang]) {
          console.warn('[i18n] –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —è–∑—ã–∫:', currentLang, '- –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Å—å –Ω–∞ —Ä—É—Å—Å–∫–∏–π');
          currentLang = 'ru';
          try { localStorage.setItem(LANG_STORAGE_KEY, 'ru'); } catch (_) {}
        }
        var s = (LANG[currentLang] && LANG[currentLang][k]) || (LANG.ru && LANG.ru[k]) || k;
        if (vars && typeof s === 'string') {
          Object.keys(vars).forEach(function(key) { s = s.replace(new RegExp('\\{' + key + '\\}', 'g'), vars[key]); });
        }
        return s;
      }
      function applyTranslations() {
        document.documentElement.lang = currentLang || 'ru';
        var map = [
          ['tagline','#homeTagline'], ['startBtn','#startBtn'], ['myProfile','#goProfileBtn'], ['myHeroes','#goHeroesBtn'], ['myHelp','#goHelpBtn'], ['admin','#adminLinkBtn'],
          ['profileShare','#profileRefShareBtn'], ['profileCreateSong','#profileCreateSongBtn'],
          ['heroesTitle','#heroesPage header h1'], ['heroesSubtitle','#heroesPage .subtitle'],
          ['searchByName','#heroesPage label[for="heroesSearch"]'], ['searchPlaceholder','#heroesSearch'], ['searchBtn','#heroesSearchBtn'],
          ['addHero','#addHeroBtn'], ['heroName','#heroFormWrap label[for="heroName"]'], ['heroBirthdate','#heroFormWrap label[for="heroBirthdate"]'],
          ['heroBirthtime','#heroFormWrap label[for="heroBirthtime"]'], ['heroBirthplace','#heroFormWrap label[for="heroBirthplace"]'],
          ['heroNotes','#heroFormWrap label[for="heroNotes"]'], ['unknownTime','#heroFormWrap label[for="heroBirthtimeUnknown"]'],
          ['cancel','#heroFormCancel'], ['save','#heroFormSave'], ['back','#heroesBackBtn'],
          ['modeType','.mode-selector h3'], ['modeSubtitle','.mode-subtitle'],
          ['modeSingle','.mode-btn[data-mode="single"] .mode-label'], ['modeSingleDesc','.mode-btn[data-mode="single"] .mode-desc'],
          ['modeCouple','.mode-btn[data-mode="couple"] .mode-label'], ['modeCoupleDesc','.mode-btn[data-mode="couple"] .mode-desc'],
          ['modeTransitDesc','.mode-btn[data-mode="transit"] .mode-desc'],
          ['secondPersonTitle','#secondPersonForm h3'], ['transitTitle','#transitForm h3'],
          ['sendRequest','.request-label'], ['requestDesc','#requestDesc'], ['requestQuickHint','#requestQuickHint'], ['submitRequest','#stepNext'], ['submitHint','#submitHint'],
          ['paymentSubtitle','#paymentPage .subtitle'], ['paymentPageTagline','#paymentPage .tagline'],
          ['promoCode','#promoCodeInput'], ['apply','#promoApplyBtn'], ['backFromPayment','#backFromPaymentBtn'],
          ['paymentPageIntroAfterSubmit','#paymentIntro'], ['loadingDesc','#loadingDesc'], ['priceSummaryLabel','#priceSummaryLabel'],
          ['payWithHot','#payBtn'], ['creatingKey','.loading-text'], ['keyActivated','#successPage .subtitle'],
          ['done','.success-title'], ['soulChat','#soulChatBtn'], ['soulChatPay','#soulChatPayBtn'], ['newKey','#newKeyBtn'],
          ['paymentThanks','#paymentThanksPage .success-title'], ['thanksSubtitle','#paymentThanksPage .subtitle'],
          ['thanksDone','#paymentThanksBackBtn'], ['gender','#genderLabel'], ['genderSelect','#gender option[value=""]'],
          ['previewHome','button[data-page="home"]'], ['previewForm','button[data-page="form"]'], 
          ['previewPayment','button[data-page="payment"]'], ['previewLoading','button[data-page="loading"]'], ['previewSuccess','button[data-page="success"]'],
          ['supportBtn','#helpSupportBtn'],
          ['helpPageTitle','#helpPageTitle'], ['helpPageSubtitle','#helpPageSubtitle'],
          ['profileHelpBtn','#profileHelpBtn'],
          ['helpT1','#helpT1'], ['helpT2','#helpT2'], ['helpT3','#helpT3'], ['helpT4','#helpT4'],
          ['helpT5','#helpT5'], ['helpT6','#helpT6'], ['helpT7','#helpT7'],
          ['forWhoLabel','#forWhoLabel'], ['nameLbl','#nameLabel'],
          ['birthdateLbl','#birthdateLbl'], ['birthplaceLbl','#birthplaceLbl'], ['birthtimeLbl','#birthtimeLbl']
        ];
        // innerHTML ‚Äî –¥–ª—è –ø–æ–¥–ø–∏—Å–µ–π —Å –ø–µ—Ä–µ–Ω–æ—Å–æ–º (–Ω–∞–ø—Ä. ¬´–≠–Ω–µ—Ä–≥–∏—è¬ª + ¬´–º–æ–º–µ–Ω—Ç–∞¬ª –Ω–∞ –¥–≤—É—Ö —Å—Ç—Ä–æ–∫–∞—Ö)
        var htmlMap = [
          ['modeTransit','.mode-btn[data-mode="transit"] .mode-label'],
          ['helpB1','#helpB1'], ['helpB2','#helpB2'], ['helpB3','#helpB3'], ['helpB4','#helpB4'],
          ['helpB5','#helpB5'], ['helpB6','#helpB6'], ['helpB7','#helpB7']
        ];
        map.forEach(function(pair) {
          var el = document.querySelector(pair[1]);
          if (el) {
            if (pair[1].indexOf('placeholder') === -1 && (pair[1].indexOf('#') === 0 || pair[1].indexOf('label') >= 0 || pair[1].indexOf('h3') >= 0 || pair[1].indexOf('.') >= 0)) {
              if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') el.placeholder = t(pair[0]);
              else el.textContent = t(pair[0]);
            } else if (pair[1].indexOf('placeholder') >= 0 || (el.tagName === 'INPUT' && pair[0] === 'searchPlaceholder')) el.placeholder = t(pair[0]);
            else el.textContent = t(pair[0]);
          }
        });
        var phMap = [
          ['namePh','#name'], ['birthplacePh','#birthplace'], ['name2Ph','#name2'], ['birthplace2Ph','#birthplace2'],
          ['transitDatePh','#transitDate'], ['transitTimePh','#transitTime'], ['transitLocationPh','#transitLocation'],
          ['transitIntentPh','#transitIntent'], ['requestPh','#request'], ['heroBirthplacePh','#heroBirthplace'],
          ['heroNotesPh','#heroNotes'], ['heroName','#heroName'], ['promoCode','#promoCodeInput']
        ];
        phMap.forEach(function(p) { var e = document.querySelector(p[1]); if (e) e.placeholder = t(p[0]); });
        htmlMap.forEach(function(p) { var e = document.querySelector(p[1]); if (e) e.innerHTML = t(p[0]); });
        var selectOpts = [['genderSelect','gender'],['male','male'],['female','female'],['other','other'],['langSong','language'],['langRu','ru'],['langEn','en'],['langDe','de'],['langFr','fr'],['langUk','uk']];
        var genderSelect = document.getElementById('gender'); if (genderSelect) {
          var opts = genderSelect.querySelectorAll('option'); if (opts[0]) opts[0].textContent = t('genderSelect');
          if (opts[1]) opts[1].textContent = t('male'); if (opts[2]) opts[2].textContent = t('female');
          var o3 = genderSelect.querySelector('option[value="other"]'); if (o3) o3.textContent = t('other');
        }
        var gender2 = document.getElementById('gender2'); if (gender2) {
          var o2 = gender2.querySelectorAll('option'); if (o2[0]) o2[0].textContent = t('genderSelect');
          if (o2[1]) o2[1].textContent = t('female'); if (o2[2]) o2[2].textContent = t('male');
          var o23 = gender2.querySelector('option[value="other"]'); if (o23) o23.textContent = t('other');
        }
        var heroGender = document.getElementById('heroGender'); if (heroGender) {
          var hOpts = heroGender.querySelectorAll('option'); if (hOpts[0]) hOpts[0].textContent = t('genderSelect');
          if (hOpts[1]) hOpts[1].textContent = t('male'); if (hOpts[2]) hOpts[2].textContent = t('female');
          var hO3 = heroGender.querySelector('option[value="other"]'); if (hO3) hO3.textContent = t('other');
        }
        var langSelect = document.getElementById('language'); if (langSelect) {
          var lOpts = langSelect.querySelectorAll('option');
          if (lOpts[0]) lOpts[0].textContent = t('langSong');
          var lRu = langSelect.querySelector('option[value="ru"]'); if (lRu) lRu.textContent = t('langRu');
          var lEn = langSelect.querySelector('option[value="en"]'); if (lEn) lEn.textContent = t('langEn');
          var lDe = langSelect.querySelector('option[value="de"]'); if (lDe) lDe.textContent = t('langDe');
          var lFr = langSelect.querySelector('option[value="fr"]'); if (lFr) lFr.textContent = t('langFr');
          var lUk = langSelect.querySelector('option[value="uk"]'); if (lUk) lUk.textContent = t('langUk');
        }
        var heroOpt = document.querySelector('#heroGender option[value=""]'); if (heroOpt) heroOpt.textContent = t('genderSelect');
        var heroMale = document.querySelector('#heroGender option[value="male"]'); if (heroMale) heroMale.textContent = t('male');
        var heroFemale = document.querySelector('#heroGender option[value="female"]'); if (heroFemale) heroFemale.textContent = t('female');
        document.getElementById('birthplaceHint') && (document.getElementById('birthplaceHint').textContent = t('birthplaceHint'));
        document.getElementById('birthplace2Hint') && (document.getElementById('birthplace2Hint').textContent = t('birthplaceHint'));
        document.querySelector('label[for="unknown"]') && (document.querySelector('label[for="unknown"]').textContent = t('unknownTime'));
        document.querySelector('label[for="unknown2"]') && (document.querySelector('label[for="unknown2"]').textContent = t('unknownTimeShort'));
        var quickBtns = document.querySelectorAll('.example-btn'); var quickK = ['quick1','quick2','quick3','quick4','quick5','quick6','quick7','quick8','quick9','quick10','quick11','quick12']; var quickT = ['quick1t','quick2t','quick3t','quick4t','quick5t','quick6t','quick7t','quick8t','quick9t','quick10t','quick11t','quick12t'];
        quickBtns.forEach(function(btn, i) { if (btn) { btn.textContent = t(quickK[i]); btn.setAttribute('data-text', t(quickT[i])); } });
        var gh = document.getElementById('homeGreeting');
        if (gh) gh.textContent = (userProfile && userProfile.name) ? t('greeting', { name: userProfile.name }) : t('greetingDefault');
        var langCurrentEl = document.getElementById('langSwitcherCurrent');
        if (langCurrentEl) { var codes = { ru: 'RU', en: 'EN', de: 'DE', fr: 'FR' }; langCurrentEl.textContent = codes[currentLang] || 'RU'; }
        // –û–Ω–±–æ—Ä–¥–∏–Ω–≥ (–ø—Ä–µ–≤—å—é-—Å—Ç–æ—Ä–∏—Å) ‚Äî –Ω–∞ —è–∑—ã–∫–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        // –ü–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è 3 —Å–ª–∞–π–¥–æ–≤ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
        var obTitle1 = document.getElementById('obTitle1'); var obText1 = document.getElementById('obText1');
        var obTitle2 = document.getElementById('obTitle2'); var obText2 = document.getElementById('obText2');
        var obTitle3 = document.getElementById('obTitle3'); var obText3 = document.getElementById('obText3');
        if (obTitle1) obTitle1.textContent = t('onboardingSlide1Title');
        if (obText1)  obText1.textContent  = t('onboardingSlide1Text');
        if (obTitle2) obTitle2.textContent = t('onboardingSlide2Title');
        if (obText2)  obText2.textContent  = t('onboardingSlide2Text');
        if (obTitle3) obTitle3.textContent = t('onboardingSlide3Title');
        if (obText3)  obText3.textContent  = t('onboardingSlide3Text');
        var startBtn = document.getElementById('onboardingStartBtn'); if (startBtn) startBtn.textContent = t('onboardingBtnStart');
        // ‚îÄ‚îÄ –ù–æ–≤—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        var newMap = [
          // heroes page
          ['heroesPageTitle','#heroesPageTitle'], ['heroesPromoHeading','#heroesPromoHeading'],
          ['heroesPromoDesc','#heroesPromoDesc'], ['heroesPromoFeaturesTitle','#heroesPromoFeaturesTitle'],
          ['heroesF1','#heroesF1'], ['heroesF2','#heroesF2'], ['heroesF3','#heroesF3'],
          ['heroesF4','#heroesF4'], ['heroesF5','#heroesF5'],
          ['heroesTrialBtn','#masterTrialBtn'], ['heroesSubBtn','#masterSubBtn'],
          ['heroesSubNote','#heroesSubNote'],
          ['heroFormTitle','#heroFormTitle'], ['heroRelLabel','#heroRelLabel'],
          ['heroBirthdateHint','#heroBirthdateHint'],
          ['heroTimeBirthLabel','#heroTimeBirthLabel'], ['heroStyleLabel','#heroStyleLabel'],
          // profile page
          ['profilePageTitle','#profilePageTitle'], ['profileSectionMyData','#profileSectionMyData'],
          ['profileSectionPlans','#profileSectionPlans'], ['profileLoadError','#profileLoadErrorText'], ['profileLoadRetry','#profileLoadRetryBtn'],
          ['profileEditBtn','#profileEditBtn'],
          ['profileBalanceHintText','#profileBalanceHintText'],
          ['profileSectionTracks','#profileSectionTracks'],
          ['profileRefTagline','#profileRefTagline'],
          ['profileInviteFriend','#profileInviteFriendTitle'],
          ['profileRefInvited','#profileRefInvitedLabel'], ['profileRefActivated','#profileRefActivatedLabel'],
          ['planCurrentBadge','#planFreeBadge'], ['planFreeYours','#planFreePrice'],
          ['planSubscribeBtn','#planBtnBasic'], ['planDetailsBtn','#planDetailsBasic'],
          ['planPopularBadge','#planPlusBadge'],
          ['planSubscribeBtn','#planBtnPlus'], ['planDetailsBtn','#planDetailsPlus'],
          ['planMasterBadgeText','#planMasterBadge'], ['planMasterNameText','#planMasterName'],
          ['planOpenMasterBtn','#planBtnMaster'], ['planDetailsBtn','#planDetailsMaster'],
          ['ptiSingleName','#ptiSingleName'], ['ptiSingleDesc','#ptiSingleDesc'],
          ['ptiCoupleName','#ptiCoupleName'], ['ptiCoupleDesc','#ptiCoupleDesc'],
          ['ptiTransitName','#ptiTransitName'], ['ptiTransitDesc','#ptiTransitDesc'],
          // success page
          ['successTitle','#successTitle'], ['successHint','#successHint'],
          ['successToProfile','#successToProfileBtn'], ['openBot','#openBotBtn'],
          // loading page
          ['loadingTitle','#loadingTitle'],
          // soul chat promo
          ['scLoading','#scGlobalLoadingText'], ['scPromoIntro','#scPromoIntro'],
          ['scMoreBtnText','#scMoreBtnText'], ['scStat1','#scStat1'], ['scStat2','#scStat2'],
          ['scStat3','#scStat3'], ['scStat4','#scStat4'], ['scExamplesTitle','#scExamplesTitle'],
          ['scEx1','#scEx1'], ['scEx2','#scEx2'], ['scEx3','#scEx3'],
          ['scPromoErrorText','#scPromoErrorText'], ['scPromoRetryBtn','#scPromoRetryBtn'],
          ['scSubIncluded','#scSubIncluded'], ['scChoosePlanBtn','#scChoosePlanBtn'],
          ['scGiftHeading','#scGiftHeading'], ['scGiftNote','#scGiftNote'],
          ['scGiftBtnText','#scPageGiftBtn'], ['scBuyDayNote','#scBuyDayNote'],
          ['scBuyDayBtnText','#scPageBuyDayBtn'],
          // payment overlay
          ['payOvCardTitleDefault','#payOvCardTitle'], ['payOvTrialText','#payOvTrialText'],
          ['payOvFreeClaimBtn','#payOvFreeClaimBtn'], ['payOvPromoToggle','#payOvPromoToggle'],
          ['apply','#payOvPromoBtn'], ['orPay','#payOvOrPayText'], ['priceLabel','#payOvPriceLabel'],
          ['payWithHot','#payOvPayBtn'], ['payOvLinkHint','#payOvLinkHint'],
          ['payOvCopyBtn','#payOvCopyBtn'], ['payOvCheckBtn','#payOvCheckBtn'],
          ['payOvPromoConfirmBtn','#payOvPromoConfirmBtn'], ['backFromPayment','#payOvBackBtn'],
          // payment thanks page
          ['paymentThanksTitle','#paymentThanksTitle'],
          ['paymentThanksMsg','#paymentThanksMessage'],
          ['paymentThanksHintText','#paymentThanksHint'],
          // profile plan features
          ['profileBalanceLbl','#profileBalanceLabel'],
          ['planFreeF1','#planFreeF1'], ['planFreeF2','#planFreeF2'],
          ['planBasicF1','#planBasicF1'], ['planBasicF2','#planBasicF2'], ['planBasicF3','#planBasicF3'], ['planBasicSave','#planBasicSave'],
          ['planPlusF1','#planPlusF1'], ['planPlusF2','#planPlusF2'], ['planPlusF3','#planPlusF3'], ['planPlusF4','#planPlusF4'], ['planPlusSave','#planPlusSave'],
          ['planMasterF1','#planMasterF1'], ['planMasterF2','#planMasterF2'], ['planMasterF3','#planMasterF3'], ['planMasterF4','#planMasterF4'], ['planMasterSave','#planMasterSave'],
          // quick picker label
          ['quickPickerLabel','#quickPickerLabel']
        ];
        newMap.forEach(function(pair) {
          var el = document.querySelector(pair[1]);
          if (el) {
            if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') el.placeholder = t(pair[0]);
            else el.textContent = t(pair[0]);
          }
        });
        // –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –º–µ—Ç–∫–∏ (1 –¥—Ä—É–≥ / 3 –¥—Ä—É–≥–∞ / 5+ –¥—Ä—É–∑–µ–π)
        document.querySelectorAll('.ref-milestone[data-n]').forEach(function(m) {
          var n = parseInt(m.getAttribute('data-n'));
          var lbl = m.querySelector('.ref-mi-label');
          if (lbl) {
            if (n === 1) lbl.textContent = t('refFriend1');
            else if (n === 3) lbl.textContent = t('refFriend2');
            else lbl.textContent = t('refFriend5');
          }
        });
        var refLink = document.getElementById('profileRefLinkInput');
        if (refLink && !refLink.value) refLink.placeholder = t('refLinkLoading');
        // successDesc ‚Äî innerHTML —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å <br>
        var sdEl = document.getElementById('successDesc');
        if (sdEl) sdEl.innerHTML = t('successDesc').replace(/\n/g,'<br>');
        // –ü–µ—Ä–µ–≤–æ–¥ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
        var newPh = [['heroStylePh','#heroStyle']];
        newPh.forEach(function(p){ var e = document.querySelector(p[1]); if(e) e.placeholder = t(p[0]); });
        // –ü–µ—Ä–µ–≤–æ–¥ –æ–ø—Ü–∏–π heroRelationship
        var relSel = document.getElementById('heroRelationship');
        if (relSel) {
          var relOpts = relSel.querySelectorAll('option');
          var relKeys = ['heroRelOpt0','heroRelOpt1','heroRelOpt2','heroRelOpt3','heroRelOpt4','heroRelOpt5','heroRelOpt6','heroRelOpt7','heroRelOpt8','heroRelOpt9','heroRelOpt10','heroRelOpt11','heroRelOpt12','heroRelOpt13','heroRelOpt14','heroRelOpt15','heroRelOpt16'];
          relOpts.forEach(function(opt, i) { if (relKeys[i]) opt.textContent = t(relKeys[i]); });
        }
        // –ü–µ—Ä–µ–≤–æ–¥ –æ–ø—Ü–∏–π dateDay/dateMonth/dateYear –≤–æ –≤—Å–µ—Ö date-group select
        document.querySelectorAll('.date-group-day option[value=""]').forEach(function(o){ o.textContent = t('dateDay'); });
        document.querySelectorAll('.date-group-month option[value=""]').forEach(function(o){ o.textContent = t('dateMonth'); });
        document.querySelectorAll('.date-group-year option[value=""]').forEach(function(o){ o.textContent = t('dateYear'); });
        // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –∫–Ω–æ–ø–∫–∞ –æ–ø–ª–∞—Ç—ã –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
        ensurePayButtonText();
      }
      function setLang(lang) {
        // –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —è–∑—ã–∫–æ–≤
        var supportedLangs = ['ru', 'en', 'de', 'fr'];
        if (supportedLangs.indexOf(lang) === -1) {
          console.warn('[i18n] –ü–æ–ø—ã—Ç–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —è–∑—ã–∫:', lang, '- –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä—É—Å—Å–∫–∏–π');
          lang = 'ru';
        }
        currentLang = lang;
        try { localStorage.setItem(LANG_STORAGE_KEY, lang); } catch (_) {}
        // –Ø–∑—ã–∫ –ø–µ—Å–Ω–∏ –Ω–µ –º–µ–Ω—è–µ–º –ø—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ ‚Äî —ç—Ç–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        applyTranslations();
        // –§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã –≤ Chromium/WebView –∑–∞–≤–∏—Å–∏—Ç –æ—Ç lang —Å–∞–º–æ–≥–æ input ‚Äî –æ–±–Ω–æ–≤–ª—è–µ–º
        document.querySelectorAll('input[type="date"]').forEach(function(el) { el.lang = lang; });
        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –æ–ø–ª–∞—Ç—ã –ø–æ—Å–ª–µ —Å–º–µ–Ω—ã —è–∑—ã–∫–∞
        ensurePayButtonText();
      }
      function ensurePayButtonText() {
        var payBtn = document.getElementById('payOvPayBtn');
        if (!payBtn || payBtn.disabled) return;
        var isFree = activePromo && Number(activePromo.amount_after) === 0;
        if (isFree) return;
        var sku = pendingPaymentSku || getCurrentSku();
        var item = pricingCatalog && pricingCatalog.find(function(x) { return x && x.sku === sku; });
        var priceStr = item ? (String(item.price) + ' ' + (item.currency || 'USDT')) : '';
        payBtn.textContent = priceStr ? ('üí≥ –û–ø–ª–∞—Ç–∏—Ç—å ' + priceStr) : 'üí≥ –û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ HOT Pay';
        payBtn.style.background = 'linear-gradient(135deg,var(--primary-color),var(--secondary-color))';
      }
      function isTelegramWebApp() {
        return !!(window.Telegram && window.Telegram.WebApp);
      }
      function getInitData() {
        var current = '';
        try {
          var wa = window.Telegram && window.Telegram.WebApp;
          current = (wa && wa.initData) ? String(wa.initData) : (tg && tg.initData) ? String(tg.initData) : '';
          console.log('[initData] Telegram WebApp –¥–æ—Å—Ç—É–ø–µ–Ω:', !!(wa));
          console.log('[initData] initData –∏–∑ WebApp:', current ? '–µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ (' + current.length + ' —Å–∏–º–≤–æ–ª–æ–≤)' : '–ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ');
        } catch (e) { 
          console.error('[initData] –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è initData:', e);
          current = ''; 
        }
        if (current) {
          try { localStorage.setItem(INIT_DATA_STORAGE_KEY, current); } catch (_) {}
          console.log('[initData] –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ Telegram');
          return current;
        }
        try { 
          var stored = localStorage.getItem(INIT_DATA_STORAGE_KEY) || '';
          console.log('[initData] –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:', stored ? '–µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ (' + stored.length + ' —Å–∏–º–≤–æ–ª–æ–≤)' : '–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö');
          if (!stored) {
            console.warn('[initData] –ö–†–ò–¢–ò–ß–ù–û: –ù–µ—Ç initData! –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –Ω–µ –∏–∑ Telegram –∏–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –¥–µ–º–æ-—Ä–µ–∂–∏–º
            setTimeout(function() {
              var message = '‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π Telegram!\n\n' +
                           'üîß –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:\n' +
                           '1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ –±–æ—Ç–∞ @YupSoul_bot (–∫–Ω–æ–ø–∫–∞ –º–µ–Ω—é ‚ò∞)\n' +
                           '2. –û–±–Ω–æ–≤–∏—Ç–µ Telegram –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏\n' +
                           '3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Telegram\n' +
                           '4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ web.telegram.org\n\n' +
                           'üí° –ò–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ (–±–µ–∑ –æ–ø–ª–∞—Ç—ã)';
              
              if (confirm(message + '\n\n–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ?')) {
                console.log('[Demo] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª –¥–µ–º–æ-—Ä–µ–∂–∏–º');
                window.demoMode = true;
                // –°–æ–∑–¥–∞–µ–º —Ñ–∏–∫—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ
                window.fallbackUserData = {
                  id: 'demo_user',
                  first_name: 'Demo User',
                  username: 'demo'
                };
              }
            }, 3000);
          }
          return stored;
        } catch (_) { 
          console.error('[initData] –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è –∏–∑ localStorage');
          return ''; 
        }
      }
      function initApp() {
        try {
          console.log('[App] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è');
          console.log('[App] window.Telegram –¥–æ—Å—Ç—É–ø–µ–Ω:', !!(window.Telegram));
          console.log('[App] window.Telegram.WebApp –¥–æ—Å—Ç—É–ø–µ–Ω:', !!(window.Telegram && window.Telegram.WebApp));
          
      if (window.Telegram && window.Telegram.WebApp) {
            tg = window.Telegram.WebApp;
            console.log('[Telegram] WebApp –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
            console.log('[Telegram] –í–µ—Ä—Å–∏—è:', tg.version);
            console.log('[Telegram] –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:', tg.platform);
            console.log('[Telegram] initData –¥–ª–∏–Ω–∞:', tg.initData ? tg.initData.length : 0);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Ä—Å–∏—é Telegram WebApp
            var version = parseFloat(tg.version) || 0;
            if (version < 6.1) {
              console.warn('[Telegram] –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è WebApp (' + tg.version + ') –º–æ–∂–µ—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å initData');
              console.warn('[Telegram] –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å Telegram –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏');
            }
            
        tg.ready();
            tg.expand();
            // –ó–∞–∫—Ä–∞—à–∏–≤–∞–µ–º —à–∞–ø–∫—É Telegram –≤ —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ ‚Äî —É–±–∏—Ä–∞–µ—Ç –∑–æ–ª–æ—Ç–∏—Å—Ç—É—é –ø–æ–ª–æ—Å–∫—É
            try {
              if (tg.setHeaderColor) tg.setHeaderColor('#08071a');
              if (tg.setBackgroundColor) tg.setBackgroundColor('#08071a');
            } catch(e) {}
            console.log('[Telegram] ready() –∏ expand() –≤—ã–ø–æ–ª–Ω–µ–Ω—ã');
            // –ö–µ—à–∏—Ä—É–µ–º photo_url –≤ localStorage ‚Äî –∏–Ω–æ–≥–¥–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ—Å–ª–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ HOT Pay
            try {
              var _u = tg.initDataUnsafe && tg.initDataUnsafe.user;
              if (_u && _u.photo_url) localStorage.setItem('tg_photo_url', _u.photo_url);
              if (_u && _u.id) localStorage.setItem('tg_user_id', String(_u.id));
            } catch(e) {}
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º tg_username –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ ‚Äî –Ω—É–∂–Ω–æ –¥–ª—è —Å–≤—è–∑–∏ —Å –∫–ª–∏–µ–Ω—Ç–æ–º –∏–∑ –∞–¥–º–∏–Ω–∫–∏
            try {
              var _initD = tg.initData;
              if (_initD) {
                var _base = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
                fetch(_base + '/api/user/sync', {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': _initD }
                }).catch(function(){});
              }
            } catch(e) {}
            
            if (tg.enableClosingConfirmation) {
              tg.enableClosingConfirmation();
              console.log('[Telegram] enableClosingConfirmation –≤–∫–ª—é—á–µ–Ω');
            } else {
              console.warn('[Telegram] enableClosingConfirmation –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏');
            }
            getInitData();
            
            // –î–ª—è —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π Telegram –ø—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å —Ö–æ—Ç—è –±—ã –±–∞–∑–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
            if ((!tg.initData || tg.initData.length < 10) && tg.initDataUnsafe && tg.initDataUnsafe.user) {
              console.log('[Telegram] –ò—Å–ø–æ–ª—å–∑—É–µ–º initDataUnsafe –∫–∞–∫ fallback –¥–ª—è —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏');
              console.log('[Telegram] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:', tg.initDataUnsafe.user.first_name, tg.initDataUnsafe.user.id);
              
              // –°–æ–∑–¥–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã (—Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è, –Ω–µ –¥–ª—è API)
              window.fallbackUserData = {
                id: tg.initDataUnsafe.user.id,
                first_name: tg.initDataUnsafe.user.first_name,
                username: tg.initDataUnsafe.user.username
              };
            }
            
            return true;
          } else {
            console.error('[Telegram] WebApp –ù–ï –î–û–°–¢–£–ü–ï–ù!');
            console.error('[Telegram] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –Ω–µ –∏–∑ Telegram –∏–ª–∏ –≤ –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–º –±—Ä–∞—É–∑–µ—Ä–µ');
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
            setTimeout(function() {
              if (!tg) {
                alert('‚ö†Ô∏è –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω–æ –∏–∑ Telegram!\n\n' +
                      '1. –û—Ç–∫—Ä–æ–π—Ç–µ @YupSoul_bot –≤ Telegram\n' +
                      '2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é (‚ò∞) –∏–ª–∏ "–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"\n' +
                      '3. –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –æ–±–Ω–æ–≤–∏—Ç–µ Telegram –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏');
              }
            }, 2000);
          }
        } catch (e) { 
          console.error('[Telegram] –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', e); 
        }
        return false;
      }
      if (!initApp()) {
        var attempts = 0;
        var t = setInterval(function() {
          attempts++;
          if (initApp() || attempts >= 50) {
            clearInterval(t);
            if (!tg) showNotFromTelegramBanner();
          }
        }, 100);
      }
      function showNotFromTelegramBanner() {
        var banner = document.createElement('div');
        banner.id = 'not-telegram-banner';
        banner.style.cssText = 'position:fixed;top:0;left:0;right:0;z-index:9999;background:#fef3c7;color:#92400e;padding:12px 16px;text-align:center;font-size:0.95rem;border-bottom:1px solid #f59e0b;';
        banner.textContent = t('notFromTelegram');
        document.body.insertBefore(banner, document.body.firstChild);
      }
      function getPlacesSearchUrl(q) {
        var base = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
        if (base) return base + '/api/places?q=' + encodeURIComponent(q);
        return 'https://nominatim.openstreetmap.org/search?q=' + encodeURIComponent(q) + '&format=json&limit=8&addressdetails=1';
      }
      async function showLocationSuggestions(inputElement, suggestionsContainerId, confirmCheckboxId) {
        var value = inputElement.value.trim();
        var suggestionsContainer = document.getElementById(suggestionsContainerId);
        if (value.length < 2) {
          if (suggestionsContainer) suggestionsContainer.style.display = 'none';
          return;
        }
        try {
          var url = getPlacesSearchUrl(value);
          var headers = { 'Accept': 'application/json' };
          if (url.indexOf('nominatim') !== -1) { headers['User-Agent'] = 'YupSoulMiniApp/1.0'; }
          var response = await fetch(url, { headers: headers });
          var locations = await response.json();
          if (locations.length === 0) {
            if (suggestionsContainer) {
              suggestionsContainer.innerHTML = '<div style="padding: 10px; color: var(--tg-theme-hint-color, rgba(255,255,255,0.6)); text-align: center;">' + t('notFound') + '</div>';
              suggestionsContainer.style.display = 'block';
            }
            return;
          }
          if (suggestionsContainer) {
            suggestionsContainer.innerHTML = locations.map(function(loc) {
              var display = (loc.display_name || '')
                .replace(', –†–æ—Å—Å–∏—è', '').replace(', –ë–µ–ª–∞—Ä—É—Å—å', '').replace(', –†–æ—Å—Å–∏–π—Å–∫–∞—è –§–µ–¥–µ—Ä–∞—Ü–∏—è', '').replace(', Republic of Belarus', '');
              var safe = typeof escHtml === 'function' ? escHtml(display) : String(display).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
              return '<div class="location-suggestion" data-value="' + safe + '">' + safe + '</div>';
            }).join('');
            suggestionsContainer.style.display = 'block';
            suggestionsContainer.querySelectorAll('.location-suggestion').forEach(function(item) {
              item.addEventListener('click', function() {
                inputElement.value = item.getAttribute('data-value');
                suggestionsContainer.style.display = 'none';
                if (confirmCheckboxId) {
                  var checkbox = document.getElementById(confirmCheckboxId);
                  if (checkbox) checkbox.checked = true;
                }
              });
            });
          }
        } catch (err) {
          console.error('–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è:', err);
          if (suggestionsContainer) {
            suggestionsContainer.innerHTML = '<div style="padding: 10px; color: #ef4444; text-align: center;">' + t('searchError') + '</div>';
            suggestionsContainer.style.display = 'block';
          }
        }
      }
      document.addEventListener('click', function(e) {
        if (!e.target.closest('.location-input-wrapper')) {
          document.querySelectorAll('.location-suggestions').forEach(function(el) { el.style.display = 'none'; });
        }
      });
      var userTariff = 'basic';
      var userProfile = null;
      var heroesCache = [];
      var editingHeroId = null;
      var pricingCatalog = [];
      var freeTrialAvailable = true;
      var hasSubscriptionActive = false;
      var catalogLoadError = false;
      var activePromo = null;
      var pendingPaymentRequestId = null;
      var pendingPaymentSku = null;
      var selectedMode = 'single';

      function getCurrentSku() {
        var modeSku = (typeof selectedMode !== 'undefined' && selectedMode) ? selectedMode : 'single';
        if (modeSku === 'couple') return 'couple_song';
        if (modeSku === 'transit') return 'transit_energy_song';
        return 'single_song';
      }
      // ‚îÄ‚îÄ Payment Overlay helpers ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      function showPaymentOverlay() {
        var ov = document.getElementById('paymentOverlay');
        if (!ov) return;
        console.log('[Payment Overlay] –û—Ç–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ –æ–ø–ª–∞—Ç—ã');
        console.log('[Payment Overlay] pendingPaymentRequestId:', pendingPaymentRequestId);
        console.log('[Payment Overlay] freeTrialAvailable:', freeTrialAvailable);
        
        ov.style.display = 'flex';
        if (tg && tg.expand) try { tg.expand(); } catch(e) {}
        
        // –°–±—Ä–æ—Å UI
        setPaymentStatus('', '');
        hidePromoConfirmButton();
        showPaymentSection();
        
        var pi = document.getElementById('payOvPromoInput');
        if (pi) pi.value = '';
        var promoSection = document.getElementById('payOvPromoSection');
        if (promoSection) promoSection.style.display = 'none';
        var promoToggle = document.getElementById('payOvPromoToggle');
        if (promoToggle) promoToggle.textContent = '‚ñ∏ –ï—Å—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥?';
        
        var lr = document.getElementById('payOvLinkRow');
        if (lr) lr.style.display = 'none';
        
        var cb = document.getElementById('payOvCheckBtn');
        if (cb) cb.style.display = 'none';
        
        ov.scrollTop = 0;
        
        // Free trial –±–ª–æ–∫
        var freeClaimBtn = document.getElementById('payOvFreeClaimBtn');
        var hint = document.getElementById('payOvTrialHint');
        if (freeTrialAvailable) {
          if (freeClaimBtn) freeClaimBtn.style.display = '';
          if (hint) hint.style.display = '';
        } else {
          if (freeClaimBtn) freeClaimBtn.style.display = 'none';
          if (hint) hint.style.display = 'none';
        }
        
        updatePaymentUiFromCatalog();
      }
      function hidePaymentOverlay() {
        console.log('[Payment Overlay] –ó–∞–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ –æ–ø–ª–∞—Ç—ã');
        var ov = document.getElementById('paymentOverlay');
        if (ov) ov.style.display = 'none';
        
        // –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
        setPaymentStatus('', '');
        activePromo = null;
        resetPaymentUI();
        
        var pi = document.getElementById('payOvPromoInput');
        if (pi) pi.value = '';
        
        var lr = document.getElementById('payOvLinkRow');
        if (lr) lr.style.display = 'none';
        
        var cb = document.getElementById('payOvCheckBtn');
        if (cb) cb.style.display = 'none';
      }
      // ‚îÄ‚îÄ –ù–∞–¥—ë–∂–Ω—ã–π —ç–∫—Ä–∞–Ω "–ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞" ‚Äî position:fixed, z-index:10000 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      function showConfirm(title, desc) {
        hidePaymentOverlay();
        showConfirmOverlay(title, desc, function() { goToPage('successPage'); });
      }
      // –≠–∫—Ä–∞–Ω—ã ¬´–ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞¬ª ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π, –≤—Å–µ–≥–¥–∞ –≤–∏–¥–µ–Ω –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ
      var _confirmAutoTimer = null;
      function showConfirmOverlay(title, desc, onDone) {
        hidePaymentOverlay();
        var ov = document.getElementById('confirmOverlay');
        if (!ov) { if (onDone) onDone(); return; }
        var tEl = document.getElementById('confirmTitle');
        var dEl = document.getElementById('confirmDesc');
        if (tEl) tEl.textContent = title || '‚ú® –ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞!';
        if (dEl) dEl.innerHTML = desc || '–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é —Ç–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ–∑–¥–∞—é —É–Ω–∏–∫–∞–ª—å–Ω—É—é –ø–µ—Å–Ω—é.<br><br>üéµ –ü–µ—Å–Ω—è –ø—Ä–∏–¥—ë—Ç –≤ —ç—Ç–æ—Ç —á–∞—Ç. –ú–æ–∂–µ—à—å –∑–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–ø–∞–¥—ë—Ç.';
        ov.style.display = 'block';
        // –¢–æ–ª—å–∫–æ —Ä—É—á–Ω–æ–π –∫–ª–∏–∫ ‚Äî –±–µ–∑ –∞–≤—Ç–æ-—Å–∫—Ä—ã—Ç–∏—è
        var btn = document.getElementById('confirmContinueBtn');
        if (btn) {
          btn.onclick = function() { if (onDone) onDone(); hideConfirmOverlay(); };
        }
      }
      function hideConfirmOverlay() {
        if (_confirmAutoTimer) { clearTimeout(_confirmAutoTimer); _confirmAutoTimer = null; }
        var ov = document.getElementById('confirmOverlay');
        if (ov) ov.style.display = 'none';
        var btn = document.getElementById('confirmContinueBtn');
        if (btn) btn.onclick = null;
      }
      var _toastTimer = null;
      function showToast(message) {
        var el = document.getElementById('scToast');
        if (!el) return;
        if (_toastTimer) clearTimeout(_toastTimer);
        el.textContent = message || '';
        el.style.display = 'block';
        _toastTimer = setTimeout(function() { el.style.display = 'none'; _toastTimer = null; }, 3000);
      }
      function setPaymentStatus(text, tone) {
        var el = document.getElementById('payOvStatus');
        if (!el) return;
        if (!text) { el.style.display = 'none'; return; }
        el.style.display = 'block';
        el.textContent = text;
        el.style.color = 'rgba(255,255,255,.95)';
        if (tone === 'ok')    { el.style.border = '1px solid rgba(var(--primary-rgb),.5)';  el.style.background = 'rgba(var(--primary-rgb),.18)'; return; }
        if (tone === 'warn')  { el.style.border = '1px solid rgba(var(--primary-rgb),.45)'; el.style.background = 'rgba(var(--primary-rgb),.12)'; return; }
        if (tone === 'error') { el.style.border = '1px solid rgba(var(--secondary-rgb),.5)';  el.style.background = 'rgba(var(--secondary-rgb),.12)'; return; }
        el.style.border = '1px solid rgba(var(--primary-rgb),.35)';
        el.style.background = 'rgba(var(--primary-rgb),.1)';
      }
      var DEFAULT_PRICES = { single_song: { title: 'Single song', price: '5.99', currency: 'USDT' }, couple_song: { title: 'Couple song', price: '8.99', currency: 'USDT' }, transit_energy_song: { title: 'Transit energy song', price: '6.99', currency: 'USDT' } };
      function updatePaymentUiFromCatalog() {
        try {
          var sku = getCurrentSku();
          var item = pricingCatalog.find(function(x) { return x && x.sku === sku; }) || DEFAULT_PRICES[sku] || null;
          
          var priceLabel = document.getElementById('priceLabel');
          var priceValue = document.getElementById('priceValue');
          var priceHint = document.getElementById('priceHint');
          var notice = document.getElementById('pricingNotice');
          
          if (priceLabel) priceLabel.textContent = item ? (item.title || sku) : sku;
          if (priceValue) {
            if (activePromo) {
              priceValue.textContent = String(activePromo.amount_after) + ' ' + (activePromo.currency || (item && item.currency) || 'USDT');
            } else {
              priceValue.textContent = item ? (String(item.price) + ' ' + (item.currency || 'USDT')) : '‚Äî';
            }
          }
          if (priceHint) {
            if (activePromo) {
              priceHint.textContent = t('promoAppliedHint', { code: activePromo.code, amount: activePromo.discount_amount, currency: activePromo.currency || (item && item.currency) || 'USDT' });
            } else {
              priceHint.textContent = '';
            }
          }
          if (notice) {
            if (catalogLoadError) {
              notice.textContent = t('catalogLoadFailed');
              notice.style.borderColor = 'rgba(var(--primary-rgb),.4)';
              notice.style.background = 'rgba(var(--primary-rgb),.12)';
              notice.style.color = 'rgba(255,255,255,.95)';
            } else if (hasSubscriptionActive) {
              notice.textContent = t('subscriptionActive');
              notice.style.borderColor = 'rgba(16,185,129,.4)';
              notice.style.background = 'rgba(16,185,129,.12)';
              notice.style.color = 'rgba(255,255,255,.95)';
            } else if (freeTrialAvailable) {
              notice.textContent = t('firstFree');
              notice.style.borderColor = 'rgba(var(--primary-rgb),.4)';
              notice.style.background = 'rgba(var(--primary-rgb),.12)';
              notice.style.color = 'rgba(255,255,255,.95)';
            } else {
              notice.textContent = t('paymentRequired');
              notice.style.borderColor = 'rgba(var(--primary-rgb),.35)';
              notice.style.background = 'rgba(var(--primary-rgb),.1)';
              notice.style.color = 'rgba(255,255,255,.95)';
            }
          }
          // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—É –≤ overlay (–Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç payOvPriceDisplay)
          var priceDisplay = document.getElementById('payOvPriceDisplay');
          var priceHintOv = document.getElementById('payOvPriceHint');
          if (priceDisplay) {
            if (activePromo) {
              priceDisplay.textContent = String(activePromo.amount_after) + ' ' + (activePromo.currency || (item && item.currency) || 'USDT');
            } else {
              priceDisplay.textContent = item ? (String(item.price) + ' ' + (item.currency || 'USDT')) : '5.99 USDT';
            }
          }
          if (priceHintOv) {
            if (activePromo && Number(activePromo.amount_after) > 0) {
              priceHintOv.textContent = 'üíö –°–∫–∏–¥–∫–∞: ' + activePromo.discount_amount + ' ' + (activePromo.currency || 'USDT');
            } else {
              priceHintOv.textContent = '';
            }
          }
          var subEl = document.getElementById('payOvSubtitle');
          if (subEl) subEl.textContent = item ? (item.title || '–¢–≤–æ—è –ø–µ—Å–Ω—è') : '–¢–≤–æ—è –ø–µ—Å–Ω—è';
          var cardTitleEl = document.getElementById('payOvCardTitle');
          if (cardTitleEl) cardTitleEl.textContent = item ? (item.title || '–û–ø–ª–∞—Ç–∞') : '–û–ø–ª–∞—Ç–∞ –∑–∞—è–≤–∫–∏';
        } catch (e) {
          console.warn('[updatePaymentUiFromCatalog]', e);
          var n = document.getElementById('pricingNotice');
          if (n) { n.textContent = t('catalogLoadFailed'); n.style.display = 'block'; }
        }
      }
      async function loadPricingCatalog() {
        var apiBase = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
        var initData = (tg && tg.initData) ? tg.initData : (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.initData) || '';
        catalogLoadError = false;
        if (!apiBase) {
          catalogLoadError = true;
          updatePaymentUiFromCatalog();
          return;
        }
        try {
          var url = apiBase + '/api/pricing/catalog';
          var sep = url.indexOf('?') >= 0 ? '&' : '?';
          if (initData) url += sep + 'initData=' + encodeURIComponent(initData);
          var resp = await fetch(url, { headers: { 'X-Telegram-Init': initData } });
          var json = await resp.json().catch(function() { return {}; });
          if (resp.ok && json.success) {
            pricingCatalog = Array.isArray(json.catalog) ? json.catalog : [];
            freeTrialAvailable = !!(json.free_trial && json.free_trial.available);
            hasSubscriptionActive = !!(json.subscription_active);
            catalogLoadError = false;
            updatePaymentUiFromCatalog();
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≤–∏—Å—à—É—é –∑–∞—è–≤–∫—É (–Ω–µ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ —Å HOT Pay ‚Äî —Ç–∞–º –∑–∞—è–≤–∫–∞ —É–∂–µ –æ–ø–ª–∞—á–µ–Ω–∞)
            var _curSearch = typeof window.location !== 'undefined' ? (window.location.search || '') : '';
            if (_curSearch.indexOf('payment=success') === -1) {
              checkPendingRequestOnStart();
            }
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            loadReferralStats();
          } else {
            catalogLoadError = true;
            updatePaymentUiFromCatalog();
          }
        } catch (e) {
          console.warn('[loadPricingCatalog]', e);
          catalogLoadError = true;
          updatePaymentUiFromCatalog();
        }
      }
      // –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–ª–æ–∫ ¬´–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞¬ª
      async function loadReferralStats() {
        var apiBase = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
        var initData = getInitData();
        if (!apiBase || !initData) return;
        try {
          var resp = await fetch(apiBase + '/api/referral/stats', { headers: { 'X-Telegram-Init': initData } });
          if (!resp.ok) return;
          var data = await resp.json().catch(function() { return null; });
          if (!data || !data.code || !data.link) return;
          var inp = document.getElementById('referralLinkInput');
          if (inp) inp.value = data.link || '';
          var inv = document.getElementById('refInvitedCount');
          if (inv) inv.textContent = data.invited_count || 0;
          var rew = document.getElementById('refRewardedCount');
          if (rew) rew.textContent = data.rewarded_count || 0;
          var crd = document.getElementById('refCreditsCount');
          if (crd) crd.textContent = data.credits || 0;
          var card = document.getElementById('referralCard');
          if (card) card.style.display = 'block';
        } catch (e) { console.warn('[Referral] –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:', e); }
      }

      // –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É ¬´–ü—Ä–æ—Ñ–∏–ª—å¬ª
      async function loadProfilePage() {
        var apiBase = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
        var initData = getInitData();
        var avatarEl = document.getElementById('profileAvatar');
        var avatarInitialEl = document.getElementById('profileAvatarInitial');
        var nameEl = document.getElementById('profileName');
        var planBadgeEl = document.getElementById('profilePlanBadge');
        var creditsEl = document.getElementById('profileCreditsCount');
        var refLinkEl = document.getElementById('profileRefLinkInput');
        var refInvEl = document.getElementById('profileRefInvited');
        var refRewEl = document.getElementById('profileRefRewarded');
        var errorWrap = document.getElementById('profileLoadErrorWrap');
        if (errorWrap) errorWrap.style.display = 'none';
        if (nameEl) nameEl.textContent = (typeof t === 'function' ? t('loading') : '–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶');
        if (creditsEl) creditsEl.textContent = '‚Äî';
        if (refLinkEl) refLinkEl.value = '';
        if (refInvEl) refInvEl.textContent = '0';
        if (refRewEl) refRewEl.textContent = '0';
        var tgUser = tg && tg.initDataUnsafe && tg.initDataUnsafe.user;
        var displayName = (tgUser && tgUser.first_name) ? tgUser.first_name : '–ì–æ—Å—Ç—å';

        function setAvatarPhoto(src) {
          if (!avatarEl) return;
          var existing = avatarEl.querySelector('img');
          if (!existing) {
            var img = document.createElement('img');
            img.alt = 'avatar';
            avatarEl.insertBefore(img, avatarEl.firstChild);
            existing = img;
          }
          existing.src = src;
          existing.style.display = 'block';
          if (avatarInitialEl) avatarInitialEl.style.display = 'none';
        }

        // –°–Ω–∞—á–∞–ª–∞ ‚Äî –∏–Ω–∏—Ü–∏–∞–ª
        if (avatarInitialEl) avatarInitialEl.textContent = displayName.charAt(0).toUpperCase();
        // Telegram photo_url: –±–µ—Ä—ë–º –∏–∑ initDataUnsafe –∏–ª–∏ –∏–∑ –∫–µ—à–∞ localStorage
        var photoUrl = (tgUser && tgUser.photo_url) || '';
        if (!photoUrl) { try { photoUrl = localStorage.getItem('tg_photo_url') || ''; } catch(e) {} }
        if (photoUrl) setAvatarPhoto(photoUrl);
        if (!initData || !apiBase) {
          if (nameEl) nameEl.textContent = displayName;
          return;
        }
        try {
          var profileResp = await fetch(apiBase + '/api/user/profile', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData },
            body: JSON.stringify({ initData: initData })
          });
          var profileJson = await profileResp.json().catch(function() { return {}; });
          if (!profileResp.ok) {
            if (nameEl) nameEl.textContent = displayName;
            var errWrap = document.getElementById('profileLoadErrorWrap');
            var errText = document.getElementById('profileLoadErrorText');
            if (errWrap) errWrap.style.display = 'block';
            if (errText) errText.textContent = (typeof t === 'function' ? t('profileLoadError') : '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.');
            return;
          }
          if (profileJson.profile && profileJson.profile.name) displayName = profileJson.profile.name;

          // –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ–º referral + pricing
          var [refResp, pricingResp] = await Promise.allSettled([
            fetch(apiBase + '/api/referral/stats', { headers: { 'X-Telegram-Init': initData } }),
            fetch(apiBase + '/api/pricing/catalog', { headers: { 'X-Telegram-Init': initData } })
          ]);
          var refData = (refResp.status === 'fulfilled') ? await refResp.value.json().catch(function(){ return null; }) : null;
          var pricingData = (pricingResp.status === 'fulfilled') ? await pricingResp.value.json().catch(function(){ return null; }) : null;

          if (nameEl) nameEl.textContent = displayName;
          if (avatarInitialEl) avatarInitialEl.textContent = displayName.charAt(0).toUpperCase();

          // –ö–∞—Ä—Ç–æ—á–∫–∞ ¬´–ú–æ–∏ –¥–∞–Ω–Ω—ã–µ¬ª
          var pdName     = document.getElementById('profileDataName');
          var pdDate     = document.getElementById('profileDataDate');
          var pdSep      = document.getElementById('profileDataSep');
          var pdCity     = document.getElementById('profileDataCity');
          var pdCitySep  = document.getElementById('profileDataCitySep');
          if (pdName) pdName.textContent = displayName || '‚Äî';
          if (pdDate && profileJson.profile && profileJson.profile.birthdate) {
            var bd = new Date(profileJson.profile.birthdate + 'T00:00:00');
            pdDate.textContent = bd.toLocaleDateString('ru-RU', { day: '2-digit', month: '2-digit', year: 'numeric' });
            if (pdSep) pdSep.style.display = '';
          } else if (pdDate) {
            pdDate.textContent = '';
            if (pdSep) pdSep.style.display = 'none';
          }
          var cityVal = profileJson.profile && (profileJson.profile.birthplace || profileJson.profile.birth_city || '');
          if (pdCity && cityVal) {
            pdCity.textContent = cityVal;
            if (pdCitySep) pdCitySep.style.display = '';
          } else if (pdCity) {
            pdCity.textContent = '';
            if (pdCitySep) pdCitySep.style.display = 'none';
          }

          // –§–æ—Ç–æ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã—à–µ Telegram photo_url)
          if (profileJson.profile && profileJson.profile.avatar_url) {
            setAvatarPhoto(profileJson.profile.avatar_url);
          }


          // –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏
          if (refLinkEl) refLinkEl.value = (refData && refData.link) ? refData.link : '';
          var invCount = (refData && typeof refData.invited_count === 'number') ? refData.invited_count : 0;
          if (refInvEl) refInvEl.textContent = invCount;
          if (refRewEl) refRewEl.textContent = (refData && typeof refData.rewarded_count === 'number') ? refData.rewarded_count : 0;

          // –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ milestone-–ø–æ—Ä–æ–≥–∞–º: 1‚Üí3‚Üí5‚Üí10‚Üí15
          var refThresholds = [1, 3, 5, 10, 15];
          function nextRefThreshold(n) {
            for (var i = 0; i < refThresholds.length; i++) { if (refThresholds[i] > n) return refThresholds[i]; }
            return 15 + Math.ceil((n - 14) / 5) * 5;
          }
          document.querySelectorAll('.ref-milestone').forEach(function(el) {
            var n = parseInt(el.getAttribute('data-n'), 10);
            el.classList.remove('reached', 'next');
            if (invCount >= n) el.classList.add('reached');
          });
          var nextN = nextRefThreshold(invCount);
          var nextEl = document.querySelector('.ref-milestone[data-n="' + nextN + '"]');
          if (nextEl) nextEl.classList.add('next');
          var hintEl = document.getElementById('profileRefNextHint');
          if (hintEl) {
            var rem = nextN - invCount;
            hintEl.textContent = invCount === 0
              ? '–ü—Ä–∏–≥–ª–∞—Å–∏ –ø–µ—Ä–≤–æ–≥–æ –¥—Ä—É–≥–∞ ‚Äî –ø–æ–ª—É—á–∏ –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –ø–µ—Å–Ω—é üéÅ'
              : '–î–æ —Å–ª–µ–¥—É—é—â–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –ø–µ—Å–Ω–∏: –µ—â—ë ' + rem + ' ' + (rem === 1 ? '–¥—Ä—É–≥' : rem < 5 ? '–¥—Ä—É–≥–∞' : '–¥—Ä—É–∑–µ–π');
          }

          // --- –°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏ (–Ω–æ–≤—ã–π API) ---
          var subData = null;
          try {
            var subResp = await fetch(apiBase + '/api/subscription/status', { headers: { 'X-Telegram-Init': initData } });
            subData = await subResp.json().catch(function(){ return null; });
          } catch (subErr) {
            console.warn('[Profile] –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏:', subErr);
          }

          var balanceLabelEl = document.getElementById('profileBalanceLabel');
          var balanceHintEl = document.getElementById('profileBalanceHint');
          var renewalDateEl = document.getElementById('profileRenewalDate');

          // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–∞—Ä–∏—Ñ–æ–≤ –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
          var allPlanCards = ['planCardFree','planCardBasic','planCardPlus','planCardMaster'];
          var allPlanBtns = {
            planCardBasic: { btnId: 'planBtnBasic', origText: '–û—Ñ–æ—Ä–º–∏—Ç—å' },
            planCardPlus:  { btnId: 'planBtnPlus',  origText: '–û—Ñ–æ—Ä–º–∏—Ç—å' },
            planCardMaster:{ btnId: 'planBtnMaster', origText: '–û—Ç–∫—Ä—ã—Ç—å –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—é' },
          };
          allPlanCards.forEach(function(id) {
            var card = document.getElementById(id);
            if (card) card.classList.remove('current');
          });
          Object.values(allPlanBtns).forEach(function(b) {
            var btn = document.getElementById(b.btnId);
            if (btn) { btn.textContent = b.origText; btn.disabled = false; btn.style.opacity = ''; }
          });

          var subActive = subData && subData.subscription_active;
          var planSku = subData && subData.plan_sku;
          var planName = (subData && subData.plan_name) || 'Free';

          // –ö–∞—Ä—Ç–∞ SKU ‚Üí ID –∫–∞—Ä—Ç–æ—á–∫–∏ –∏ —Ü–≤–µ—Ç
          var planCardMap = {
            soul_basic_sub: { cardId: 'planCardBasic', btnId: 'planBtnBasic', color: 'var(--primary-color)', bg: 'rgba(var(--primary-rgb),0.12)', border: 'rgba(var(--primary-rgb),0.45)' },
            soul_plus_sub:  { cardId: 'planCardPlus',  btnId: 'planBtnPlus',  color: 'var(--secondary-color)', bg: 'rgba(var(--secondary-rgb),0.12)', border: 'rgba(var(--secondary-rgb),0.45)' },
            master_monthly: { cardId: 'planCardMaster', btnId: 'planBtnMaster', color: '#a78bfa', bg: 'rgba(167,139,250,0.12)', border: 'rgba(167,139,250,0.45)' },
          };

          if (subActive && planSku && planCardMap[planSku]) {
            var pm = planCardMap[planSku];
            var tracksUsed = subData.tracks_used_this_month || 0;
            var tracksLimit = subData.tracks_limit || 0;
            var tracksRemaining = subData.tracks_remaining || 0;
            var renewAt = subData.renew_at;
            var renewDateStr = renewAt
              ? new Date(renewAt).toLocaleDateString('ru-RU', { day: 'numeric', month: 'long' })
              : null;

            // –ë–µ–π–¥–∂ –ø–ª–∞–Ω–∞
            if (planBadgeEl) {
              planBadgeEl.textContent = '‚ú¶ ' + planName;
              planBadgeEl.style.background = pm.bg;
              planBadgeEl.style.borderColor = pm.border;
              planBadgeEl.style.color = pm.color;
              planBadgeEl.title = (typeof t === 'function' ? t('planCurrentBadge') : '–¢–µ–∫—É—â–∏–π —Ç–∞—Ä–∏—Ñ');
            }

            // –ë–∞–ª–∞–Ω—Å-–∫–∞—Ä—Ç–æ—á–∫–∞: —Å—á—ë—Ç—á–∏–∫ —Ç—Ä–µ–∫–æ–≤
            if (balanceLabelEl) balanceLabelEl.textContent = '–¢—Ä–µ–∫–æ–≤ –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ';
            if (creditsEl) creditsEl.textContent = tracksUsed + ' / ' + tracksLimit;
            if (balanceHintEl) balanceHintEl.textContent = tracksRemaining + ' —Ç—Ä–µ–∫–æ–≤ –µ—â—ë –¥–æ—Å—Ç—É–ø–Ω–æ';
            if (renewalDateEl && renewDateStr) {
              renewalDateEl.textContent = '–û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è ' + renewDateStr;
              renewalDateEl.style.display = '';
            }

            // –í—ã–¥–µ–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É
            var cardFree = document.getElementById('planCardFree');
            if (cardFree) cardFree.classList.remove('current');
            var activeCard = document.getElementById(pm.cardId);
            if (activeCard) { activeCard.classList.add('current'); activeCard.style.borderColor = pm.border; }
            var activeBtn = document.getElementById(pm.btnId);
            if (activeBtn) { activeBtn.textContent = '‚úì –ê–∫—Ç–∏–≤–µ–Ω'; activeBtn.disabled = true; activeBtn.style.opacity = '0.5'; }


          } else {
            // Free –ø–ª–∞–Ω
            if (planBadgeEl) { planBadgeEl.textContent = '‚ú¶ YupSoul Free'; planBadgeEl.style.background = ''; planBadgeEl.style.borderColor = ''; planBadgeEl.style.color = ''; planBadgeEl.title = (typeof t === 'function' ? t('planCurrentBadge') : '–¢–µ–∫—É—â–∏–π —Ç–∞—Ä–∏—Ñ'); }
            var credits = (refData && typeof refData.credits === 'number') ? refData.credits : 0;
            if (creditsEl) creditsEl.textContent = credits;
            if (balanceLabelEl) balanceLabelEl.textContent = '–ë–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π';
            if (balanceHintEl) balanceHintEl.textContent = '–ü—Ä–∏–≥–ª–∞—à–∞–π –¥—Ä—É–∑–µ–π ‚Äî –ø–æ–ª—É—á–∞–π —Ç—Ä–µ–∫–∏ –≤ –ø–æ–¥–∞—Ä–æ–∫';
            if (renewalDateEl) renewalDateEl.style.display = 'none';
            // –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ ‚Äî —Ç–µ–∫—É—â–∞—è
            var cardFree2 = document.getElementById('planCardFree');
            if (cardFree2) cardFree2.classList.add('current');
          }
        } catch (e) {
          console.warn('[Profile] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', e);
          if (nameEl) nameEl.textContent = displayName;
          if (creditsEl) creditsEl.textContent = '‚Äî';
          var errWrap = document.getElementById('profileLoadErrorWrap');
          var errText = document.getElementById('profileLoadErrorText');
          if (errWrap) errWrap.style.display = 'block';
          if (errText) errText.textContent = (typeof t === 'function' ? t('profileLoadError') : '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.');
        }
      }

      (function bindProfileLoadRetry() {
        var btn = document.getElementById('profileLoadRetryBtn');
        if (btn) btn.addEventListener('click', function() { if (typeof loadProfilePage === 'function') loadProfilePage(); });
      })();

      // –ê–∫–∫–æ—Ä–¥–µ–æ–Ω: –æ—Ç–∫—Ä—ã—Ç—å/–∑–∞–∫—Ä—ã—Ç—å –ø–æ–ª—è —Ñ–æ—Ä–º—ã
      function toggleProfileAccordion() {
        var wrap = document.getElementById('formFieldsWrap');
        var chevron = document.getElementById('pfaChevron');
        if (!wrap) return;
        var isCollapsed = wrap.classList.contains('pfw-collapsed');
        if (isCollapsed) {
          wrap.classList.remove('pfw-collapsed');
          if (chevron) chevron.classList.remove('open');
        } else {
          wrap.classList.add('pfw-collapsed');
          if (chevron) chevron.classList.add('open');
        }
      }
      window.toggleProfileAccordion = toggleProfileAccordion;

      // ‚îÄ‚îÄ –ê–∫–∫–æ—Ä–¥–µ–æ–Ω –≤—Ç–æ—Ä–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      var p2AccOpen = false;
      function toggleSecondPersonAccordion() {
        var wrap = document.getElementById('secondPersonFormWrap');
        var chevron = document.getElementById('p2AccChevron');
        if (!wrap) return;
        p2AccOpen = !p2AccOpen;
        if (p2AccOpen) {
          wrap.style.maxHeight = '2000px';
          wrap.style.opacity = '1';
          if (chevron) chevron.style.transform = 'rotate(180deg)';
        } else {
          wrap.style.maxHeight = '0';
          wrap.style.opacity = '0';
          if (chevron) chevron.style.transform = '';
        }
      }
      window.toggleSecondPersonAccordion = toggleSecondPersonAccordion;

      function openSecondPersonAccordion() {
        if (!p2AccOpen) toggleSecondPersonAccordion();
      }

      function updateP2AccordionSummary() {
        var name2 = (document.getElementById('name2') || {}).value || '';
        var bd2 = (document.getElementById('birthdate2') || {}).value || '';
        var nameEl = document.getElementById('p2AccName');
        var dateEl = document.getElementById('p2AccDate');
        var sepEl  = document.getElementById('p2AccSep');
        if (!nameEl) return;
        if (name2) {
          nameEl.textContent = name2;
          if (bd2 && dateEl) {
            var parts = bd2.split('-');
            dateEl.textContent = parts.length === 3 ? parts[2] + '.' + parts[1] + '.' + parts[0] : bd2;
            if (sepEl) sepEl.style.display = '';
          } else {
            if (dateEl) dateEl.textContent = '';
            if (sepEl) sepEl.style.display = 'none';
          }
        } else {
          nameEl.textContent = '–î–∞–Ω–Ω—ã–µ –≤—Ç–æ—Ä–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞';
          if (dateEl) dateEl.textContent = '';
          if (sepEl) sepEl.style.display = 'none';
        }
      }
      window.updateP2AccordionSummary = updateP2AccordionSummary;

      // ‚îÄ‚îÄ –ê–∫–∫–æ—Ä–¥–µ–æ–Ω —ç–Ω–µ—Ä–≥–∏–∏ –º–æ–º–µ–Ω—Ç–∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      var transitAccOpen = false;
      function toggleTransitAccordion() {
        var wrap = document.getElementById('transitFormWrap');
        var chevron = document.getElementById('transitAccChevron');
        if (!wrap) return;
        transitAccOpen = !transitAccOpen;
        if (transitAccOpen) {
          wrap.style.maxHeight = '2000px';
          wrap.style.opacity = '1';
          if (chevron) chevron.style.transform = 'rotate(180deg)';
        } else {
          wrap.style.maxHeight = '0';
          wrap.style.opacity = '0';
          if (chevron) chevron.style.transform = '';
        }
      }
      window.toggleTransitAccordion = toggleTransitAccordion;

      function openTransitAccordion() {
        if (!transitAccOpen) toggleTransitAccordion();
      }

      function updateTransitAccordionSummary() {
        var transitDate = (document.getElementById('transitDate') || {}).value || '';
        var transitLocation = (document.getElementById('transitLocation') || {}).value || '';
        var dateEl = document.getElementById('transitAccDate');
        var sepEl  = document.getElementById('transitAccSep');
        if (!dateEl) return;
        var parts = [];
        if (transitDate) {
          var dateParts = transitDate.split('-');
          if (dateParts.length === 3) {
            parts.push(dateParts[2] + '.' + dateParts[1] + '.' + dateParts[0]);
          } else {
            parts.push(transitDate);
          }
        }
        if (transitLocation) {
          parts.push(transitLocation);
        }
        if (parts.length > 0) {
          dateEl.textContent = parts.join(' ¬∑ ');
          if (sepEl) sepEl.style.display = '';
        } else {
          dateEl.textContent = '';
          if (sepEl) sepEl.style.display = 'none';
        }
      }
      window.updateTransitAccordionSummary = updateTransitAccordionSummary;

      // –°–ª–µ–¥–∏–º –∑–∞ –ø–æ–ª—è–º–∏ –≤—Ç–æ—Ä–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–≤–æ–¥–∫–∏ –≤ —à–∞–ø–∫–µ
      document.addEventListener('DOMContentLoaded', function() {
        ['name2', 'birthdate2'].forEach(function(id) {
          var el = document.getElementById(id);
          if (el) el.addEventListener('change', updateP2AccordionSummary);
          if (el && el.tagName === 'INPUT') el.addEventListener('input', updateP2AccordionSummary);
        });
        // –°–ª–µ–¥–∏–º –∑–∞ –ø–æ–ª—è–º–∏ —ç–Ω–µ—Ä–≥–∏–∏ –º–æ–º–µ–Ω—Ç–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–≤–æ–¥–∫–∏ –≤ —à–∞–ø–∫–µ
        ['transitDate', 'transitLocation'].forEach(function(id) {
          var el = document.getElementById(id);
          if (el) el.addEventListener('change', updateTransitAccordionSummary);
          if (el && el.tagName === 'INPUT') el.addEventListener('input', updateTransitAccordionSummary);
        });
      });

      // –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è + –∞–∫–∫–æ—Ä–¥–µ–æ–Ω –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤–∏–∑–∏—Ç–æ–≤
      async function loadSavedProfileForForm() {
        var accordion = document.getElementById('profileAccordion');
        var formWrap = document.getElementById('formFieldsWrap');
        // –°–±—Ä–æ—Å: —Å–∫—Ä—ã–≤–∞–µ–º –∞–∫–∫–æ—Ä–¥–µ–æ–Ω, —Ñ–æ—Ä–º—É –¥–µ—Ä–∂–∏–º —Å–≤—ë—Ä–Ω—É—Ç–æ–π –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
        if (accordion) accordion.style.display = 'none';
        // –£–±–∏—Ä–∞–µ–º transition –Ω–∞ –≤—Ä–µ–º—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ ‚Äî –±–µ–∑ –≤–∏–¥–∏–º–æ–≥–æ –ø—Ä—ã–∂–∫–∞
        if (formWrap) { formWrap.classList.add('no-anim'); formWrap.classList.add('pfw-collapsed'); }

        var apiBase = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
        var initData = getInitData();
        if (!apiBase || !initData) {
          // –ù–µ—Ç –±—ç–∫–µ–Ω–¥–∞ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –æ—Ç–∫—Ä—ã—Ç–æ–π —Å—Ä–∞–∑—É, –±–µ–∑ –∞–Ω–∏–º–∞—Ü–∏–∏
          if (formWrap) { formWrap.classList.remove('pfw-collapsed'); formWrap.classList.remove('no-anim'); }
          return;
        }
        try {
          var resp = await fetch(apiBase + '/api/user/profile', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData },
            body: JSON.stringify({ initData: initData })
          });
          var json = await resp.json().catch(function() { return {}; });
          var p = json && json.profile;
          if (!p) {
            // –ü—Ä–æ—Ñ–∏–ª—è –Ω–µ—Ç ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –±–µ–∑ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä—ã–∂–∫–∞
            if (formWrap) {
              formWrap.classList.add('no-anim');
              formWrap.classList.remove('pfw-collapsed');
              // –í–∫–ª—é—á–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –æ–±—Ä–∞—Ç–Ω–æ –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∞
              requestAnimationFrame(function() { requestAnimationFrame(function() { if (formWrap) formWrap.classList.remove('no-anim'); }); });
            }
            return;
          }

          // –ü—Ä–µ–¥–∑–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è —Ñ–æ—Ä–º—ã
          var nameEl = document.getElementById('name');
          var birthdateEl = document.getElementById('birthdate');
          var birthplaceEl = document.getElementById('birthplace');
          var birthtimeEl = document.getElementById('birthtime');
          var unknownEl = document.getElementById('unknown');
          if (nameEl && p.name) nameEl.value = p.name;
          if (birthdateEl && p.birthdate) {
            birthdateEl.value = p.birthdate;
            var parts = p.birthdate.split('-');
            if (parts.length === 3) {
              var dayEl = document.getElementById('birthdateDay');
              var monEl = document.getElementById('birthdateMonth');
              var yrEl  = document.getElementById('birthdateYear');
              if (dayEl) dayEl.value = parseInt(parts[2], 10);
              if (monEl) monEl.value = parseInt(parts[1], 10);
              if (yrEl)  yrEl.value  = parts[0];
              var checkEl = document.getElementById('birthdateCheck');
              if (checkEl) { checkEl.style.display = 'flex'; checkEl.style.opacity = '1'; }
            }
          }
          if (birthplaceEl && p.birthplace) birthplaceEl.value = p.birthplace;
          if (birthtimeEl && p.birthtime) birthtimeEl.value = p.birthtime;
          if (unknownEl && p.birthtime_unknown) unknownEl.checked = true;

          // –Ø–∑—ã–∫ –ø–µ—Å–Ω–∏
          var langEl = document.getElementById('language');
          if (langEl) {
            var tgLc = ((tg && tg.initDataUnsafe && tg.initDataUnsafe.user && tg.initDataUnsafe.user.language_code) || '').toLowerCase();
            var telegramSongLang = /^uk/.test(tgLc) ? 'uk' : /^en/.test(tgLc) ? 'en' : /^de/.test(tgLc) ? 'de' : /^fr/.test(tgLc) ? 'fr' : 'ru';
            var profileLang = p.language || '';
            if (profileLang && !(profileLang === 'ru' && telegramSongLang !== 'ru')) {
              langEl.value = profileLang;
            } else {
              langEl.value = telegramSongLang;
            }
          }

          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–∫–∫–æ—Ä–¥–µ–æ–Ω –µ—Å–ª–∏ –µ—Å—Ç—å –∏–º—è –ò –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è (–º–∏–Ω–∏–º—É–º –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏)
          if (p.name && p.birthdate) {
            var pfaNameEl = document.getElementById('pfaName');
            var pfaDateEl = document.getElementById('pfaDate');
            var pfaSepEl  = document.getElementById('pfaSep');
            var chevronEl = document.getElementById('pfaChevron');
            if (pfaNameEl) pfaNameEl.textContent = p.name;
            var d = new Date(p.birthdate + 'T00:00:00');
            var dateStr = d.toLocaleDateString('ru-RU', { day: '2-digit', month: '2-digit', year: 'numeric' });
            if (pfaDateEl) pfaDateEl.textContent = dateStr;
            if (pfaSepEl) pfaSepEl.style.display = 'inline';
            if (accordion) accordion.style.display = 'block';
            // –°–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –ø–æ–ª—è ‚Äî —Ñ–æ—Ä–º–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å—Ä–∞–∑—É –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
            if (formWrap) formWrap.classList.add('pfw-collapsed');
            if (chevronEl) chevronEl.classList.add('open');
            // –°–Ω–∏–º–∞–µ–º no-anim –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ ‚Äî –¥–∞–ª—å—à–µ transitions —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
            requestAnimationFrame(function() { requestAnimationFrame(function() { if (formWrap) formWrap.classList.remove('no-anim'); }); });
          } else {
            // –ü—Ä–æ—Ñ–∏–ª—å –µ—Å—Ç—å, –Ω–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ–ø–æ–ª–Ω—ã–µ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –æ—Ç–∫—Ä—ã—Ç–æ–π
            if (formWrap) {
              formWrap.classList.add('no-anim');
              formWrap.classList.remove('pfw-collapsed');
              requestAnimationFrame(function() { requestAnimationFrame(function() { if (formWrap) formWrap.classList.remove('no-anim'); }); });
            }
          }
        } catch(e) {
          console.warn('[Form] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:', e);
          // –ü—Ä–∏ –æ—à–∏–±–∫–µ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –æ—Ç–∫—Ä—ã—Ç–æ–π, –∏–Ω–∞—á–µ pointer-events:none –∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å—ë
          if (formWrap) { formWrap.classList.remove('pfw-collapsed'); formWrap.classList.remove('no-anim'); }
        }
        // –î–µ—Ñ–æ–ª—Ç–Ω—ã–π —è–∑—ã–∫ –ø–æ Telegram
        var langElFallback = document.getElementById('language');
        if (langElFallback && !langElFallback.value) {
          var tgLcFb = ((tg && tg.initDataUnsafe && tg.initDataUnsafe.user && tg.initDataUnsafe.user.language_code) || '').toLowerCase();
          langElFallback.value = /^uk/.test(tgLcFb) ? 'uk' : /^en/.test(tgLcFb) ? 'en' : /^de/.test(tgLcFb) ? 'de' : /^fr/.test(tgLcFb) ? 'fr' : 'ru';
        }
      }

      // –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –µ—Å—Ç—å –ª–∏ –∑–∞–≤–∏—Å—à–∞—è –∑–∞—è–≤–∫–∞ (—Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤ –∏ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö)
      async function checkPendingRequestOnStart() {
        var apiBase = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
        var initData = getInitData();
        if (!apiBase || !initData) return;
        try {
          var resp = await fetch(apiBase + '/api/my/pending-request', { headers: { 'X-Telegram-Init': initData } });
          var json = await resp.json().catch(function() { return {}; });
          if (!resp.ok || !json.ok || !json.pending || !json.request_id) return;
          // –ï—Å—Ç—å –∑–∞–≤–∏—Å—à–∞—è –∑–∞—è–≤–∫–∞ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ–ª—å–Ω—ã–π –±–∞–Ω–Ω–µ—Ä –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
          pendingPaymentRequestId = json.request_id;
          pendingPaymentSku = json.sku || null;
          var banner = document.getElementById('recoveryBanner');
          var bannerText = document.getElementById('recoveryBannerText');
          var rb = document.getElementById('recoveryClaimBtn');
          if (banner) {
            if (freeTrialAvailable) {
              // –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫–ª—é—á
              if (bannerText) bannerText.innerHTML = 'üéÅ <strong style="color:#6ee7b7;">–¢–≤–æ—è –∑–∞—è–≤–∫–∞ –∂–¥—ë—Ç!</strong><br>–ü–æ–ª—É—á–∏ –ø–µ—Ä–≤—É—é –ø–µ—Å–Ω—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ.';
              if (rb) rb.textContent = 'üéÅ –ü–æ–ª—É—á–∏—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ';
            } else {
              // –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî —É –Ω–µ–≥–æ –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–∞—è –æ–ø–ª–∞—Ç–∞
              if (bannerText) bannerText.innerHTML = '‚è≥ <strong style="color:#6ee7b7;">–ù–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π –∑–∞–∫–∞–∑</strong><br>–£ —Ç–µ–±—è –µ—Å—Ç—å –∑–∞—è–≤–∫–∞, –æ–∂–∏–¥–∞—é—â–∞—è –æ–ø–ª–∞—Ç—ã.';
              if (rb) rb.textContent = 'üí≥ –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ';
            }
            banner.style.display = 'block';
            // –ö–æ–≥–¥–∞ –±–∞–Ω–Ω–µ—Ä –∑–∞–∫–∞–∑–∞ –ø–æ–∫–∞–∑–∞–Ω ‚Äî —Å–∫—Ä—ã–≤–∞–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –±–ª–æ–∫ (–Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–µ–º —ç–∫—Ä–∞–Ω)
            var refCard = document.getElementById('referralCard');
            if (refCard) refCard.style.display = 'none';
            var dismissBtn = document.getElementById('recoveryDismissBtn');
            if (dismissBtn) dismissBtn.addEventListener('click', function() {
              banner.style.display = 'none';
              if (refCard) refCard.style.display = 'block';
              // –û—Ç–º–µ–Ω—è–µ–º –∑–∞—è–≤–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ ‚Äî –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –≤—Ö–æ–¥–µ –±–∞–Ω–Ω–µ—Ä –Ω–µ –ø–æ—è–≤–∏—Ç—Å—è
              var apiBase = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
              var initData = getInitData();
              if (apiBase && initData && pendingPaymentRequestId) {
                fetch(apiBase + '/api/my/pending-request/dismiss', {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData },
                  body: JSON.stringify({ request_id: pendingPaymentRequestId })
                }).catch(function() {});
              }
            });
            if (rb) rb.addEventListener('click', function() {
              banner.style.display = 'none';
              showPaymentOverlay();
            });
          }
        } catch (e) { /* –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ */ }
      }

      // ‚îÄ‚îÄ –¢–æ–≥–ª —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      (function() {
        var toggle = document.getElementById('refStatsToggle');
        var block = document.getElementById('refStatsBlock');
        if (!toggle || !block) return;
        toggle.addEventListener('click', function() {
          var open = block.style.display !== 'none';
          block.style.display = open ? 'none' : 'flex';
          toggle.textContent = open ? '‚ñ∏ –º–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞' : '‚ñæ –º–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞';
          toggle.style.color = open ? 'rgba(var(--primary-rgb),0.4)' : 'rgba(var(--primary-rgb),0.7)';
          if (!open && typeof loadReferralStats === 'function') loadReferralStats();
        });
      })();

      // ‚îÄ‚îÄ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ ¬´–ü–æ–¥–µ–ª–∏—Ç—å—Å—è¬ª ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      (function() {
        var shareBtn = document.getElementById('referralShareBtn');
        if (!shareBtn) return;
        shareBtn.addEventListener('click', function() {
          var link = (document.getElementById('referralLinkInput') || {}).value || '';
          if (!link) return;
          var tgWeb = window.Telegram && window.Telegram.WebApp;
          if (tgWeb && tgWeb.openTelegramLink) {
            tgWeb.openTelegramLink('https://t.me/share/url?url=' + encodeURIComponent(link) +
              '&text=' + encodeURIComponent('–ü–æ–ª—É—á–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –ø–µ—Å–Ω—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ –≤ YupSoul!'));
          } else if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(link).then(function() {
              shareBtn.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
              setTimeout(function() { shareBtn.textContent = '–ü–æ–¥–µ–ª–∏—Ç—å—Å—è'; }, 2000);
            });
          } else {
            shareBtn.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
            setTimeout(function() { shareBtn.textContent = '–ü–æ–¥–µ–ª–∏—Ç—å—Å—è'; }, 2000);
          }
        });
      })();

      // ‚îÄ‚îÄ Helper-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è UI –ø—Ä–æ–º–æ–∫–æ–¥–∞ –∏ –æ–ø–ª–∞—Ç—ã ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      function showPromoConfirmButton() {
        var hint = document.getElementById('payOvPromoSuccessHint');
        var btn = document.getElementById('payOvPromoConfirmBtn');
        if (hint) hint.style.display = '';
        if (btn) btn.style.display = '';
      }

      function hidePromoConfirmButton() {
        var hint = document.getElementById('payOvPromoSuccessHint');
        var btn = document.getElementById('payOvPromoConfirmBtn');
        if (hint) hint.style.display = 'none';
        if (btn) btn.style.display = 'none';
      }

      function hidePaymentSection() {
        var section = document.getElementById('payOvPaymentSection');
        if (section) section.style.display = 'none';
      }

      function showPaymentSection() {
        var section = document.getElementById('payOvPaymentSection');
        if (section) section.style.display = '';
      }

      function updatePaymentSectionWithDiscount() {
        var priceDisplay = document.getElementById('payOvPriceDisplay');
        var priceHint = document.getElementById('payOvPriceHint');
        
        if (activePromo && priceDisplay) {
          priceDisplay.textContent = activePromo.amount_after + ' ' + activePromo.currency;
        }
        
        if (activePromo && priceHint) {
          priceHint.textContent = 'üíö –°–∫–∏–¥–∫–∞: ' + activePromo.discount_amount + ' ' + activePromo.currency;
        }
        
        showPaymentSection();
      }

      function resetPaymentUI() {
        hidePromoConfirmButton();
        showPaymentSection();
        
        var priceDisplay = document.getElementById('payOvPriceDisplay');
        var priceHint = document.getElementById('payOvPriceHint');
        
        // –°–±—Ä–æ—Å —Ü–µ–Ω—ã –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π (–∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞)
        if (priceDisplay && pricingCatalog && pricingCatalog.length) {
          var item = pricingCatalog.find(function(x) { return x && x.sku === pendingPaymentSku; });
          if (item) {
            priceDisplay.textContent = item.price + ' ' + (item.currency || 'USDT');
          }
        }
        
        if (priceHint) priceHint.textContent = '';
      }

      async function applyPromoCode() {
        var input = document.getElementById('payOvPromoInput') || document.getElementById('promoCodeInput');
        if (!input) return;
        var code = String(input.value || '').trim().toUpperCase();
        if (!code) {
          activePromo = null;
          resetPaymentUI();
          setPaymentStatus(t('promoCleared'), 'warn');
          return;
        }
        var sku = pendingPaymentSku;
        if (!sku) {
          setPaymentStatus('–°–Ω–∞—á–∞–ª–∞ –æ—Ç–ø—Ä–∞–≤—å –∑–∞—è–≤–∫—É', 'error');
          return;
        }
        
        var apiBase = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
        var initData = getInitData();
        if (!apiBase || !initData) {
          setPaymentStatus('–ù–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º', 'error');
          return;
        }
        
        setPaymentStatus('–ü—Ä–æ–≤–µ—Ä—è—é –ø—Ä–æ–º–æ–∫–æ–¥...', 'warn');
        
        try {
          var resp = await fetch(apiBase + '/api/promos/validate', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData },
            body: JSON.stringify({ code: code, sku: sku, initData: initData })
          });
          var json = await resp.json().catch(function() { return {}; });
          
          if (!resp.ok || !json.valid) {
            activePromo = null;
            resetPaymentUI();
            var reasonMap = {
              not_found: '–ü—Ä–æ–º–æ–∫–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω',
              expired: '–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–∞ –∏—Å—Ç—ë–∫',
              not_started: '–ü—Ä–æ–º–æ–∫–æ–¥ –µ—â—ë –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω',
              inactive: '–ü—Ä–æ–º–æ–∫–æ–¥ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω',
              user_limit_reached: '–í—ã —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —ç—Ç–æ—Ç –ø—Ä–æ–º–æ–∫–æ–¥',
              global_limit_reached: '–ü—Ä–æ–º–æ–∫–æ–¥ –±–æ–ª—å—à–µ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–ª–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω)',
              sku_mismatch: '–≠—Ç–æ—Ç –ø—Ä–æ–º–æ–∫–æ–¥ –Ω–µ –¥–µ–π—Å—Ç–≤—É–µ—Ç –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –∑–∞—è–≤–∫–∏',
              empty: '–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥'
            };
            var errMsg = json.error || reasonMap[json.reason] || '–ü—Ä–æ–º–æ–∫–æ–¥ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω';
            throw new Error(errMsg);
          }
          
          activePromo = {
            code: code,
            sku: sku,
            amount_before: json.amount_before,
            amount_after: json.amount_after,
            discount_amount: json.discount_amount,
            currency: json.currency || 'USDT'
          };
          
          var isFree = Number(activePromo.amount_after) === 0;
          
          if (isFree) {
            // –ü—Ä–æ–º–æ–∫–æ–¥ –¥–∞—ë—Ç 100% —Å–∫–∏–¥–∫—É
            setPaymentStatus('‚úÖ –ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–º–µ–Ω—ë–Ω! –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ—Å–ø–ª–∞—Ç–Ω–∞.', 'ok');
            showPromoConfirmButton();
            hidePaymentSection();
          } else {
            // –ü—Ä–æ–º–æ–∫–æ–¥ –¥–∞—ë—Ç —á–∞—Å—Ç–∏—á–Ω—É—é —Å–∫–∏–¥–∫—É
            setPaymentStatus('‚úÖ –ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–º–µ–Ω—ë–Ω! –°–∫–∏–¥–∫–∞: ' + activePromo.discount_amount + ' ' + activePromo.currency, 'ok');
            updatePaymentSectionWithDiscount();
            hidePromoConfirmButton();
          }
          
        } catch (e) {
          setPaymentStatus('‚ùå ' + (e.message || '–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞'), 'error');
        }
      }
      function fetchWithTimeout(url, options, timeoutMs) {
        timeoutMs = timeoutMs || 18000;
        var controller = new AbortController();
        var timeoutId = setTimeout(function() { controller.abort(); }, timeoutMs);
        var opts = options || {};
        opts.signal = controller.signal;
        return fetch(url, opts).then(function(r) {
          clearTimeout(timeoutId);
          return r;
        }, function(err) {
          clearTimeout(timeoutId);
          if (err && err.name === 'AbortError') throw new Error('–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è. –ü—Ä–æ–≤–µ—Ä—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∏ –ø–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞.');
          throw err;
        });
      }
      function heroesApi(path, opts) {
        var base = (window.HEROES_API_BASE || '').replace(/\/$/, '');
        if (!base) return Promise.reject(new Error('API –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω'));
        var initData = (tg && tg.initData) ? tg.initData : '';
        var url = base + '/api' + path;
        var sep = path.indexOf('?') >= 0 ? '&' : '?';
        if (initData && (!opts || opts.method === 'GET')) url += sep + 'initData=' + encodeURIComponent(initData);
        if (opts && opts.query) url += (url.indexOf('?') >= 0 ? '&' : '?') + opts.query;
        var options = { headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData } };
        if (opts && opts.method) options.method = opts.method;
        if (opts && opts.body) options.body = JSON.stringify(opts.body);
        return fetchWithTimeout(url, options, 18000).then(function(r) {
          if (r.status === 204) return null;
          return r.json().then(function(j) { if (!r.ok) throw new Error(j.error || r.statusText); return j; });
        });
      }
      function loadMe() {
        if (!(window.HEROES_API_BASE || '').replace(/\/$/, '')) return;
        heroesApi('/me', { method: 'POST', body: { initData: (tg && tg.initData) || '' } }).then(function(d) {
          userTariff = (d && d.tariff) || 'basic';
          var masterNav = document.getElementById('masterNav');
          if (masterNav && userTariff === 'master') masterNav.style.display = 'block';
        }).catch(function() {});
      }
      async function fetchUserProfile() {
        var base = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
        if (!base || !tg || !tg.initData) return null;
        try {
          var res = await fetchWithTimeout(base + '/api/user/profile', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': tg.initData },
            body: JSON.stringify({ initData: tg.initData })
          }, 18000);
          var json = await res.json().catch(function() { return {}; });
          return json.profile || null;
        } catch (e) { return null; }
      }
      if (tg) loadMe();
      currentLang = detectLang();
      applyTranslations();
      
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      // –û–ù–ë–û–†–î–ò–ù–ì ‚Äî —Ñ–æ—Ä–º–∞—Ç —Å—Ç–æ—Ä–∏—Å (–ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã + —Ç–∞–ø –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏)
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      (function() {
        var ONBOARDING_KEY = 'yupsoul_onboarding_seen';
        var TOTAL_SLIDES = 3;
        var SLIDE_DURATION = 4500;

        var onboardingPage = document.getElementById('onboardingPage');
        var homePage = document.getElementById('homePage');
        var slides = document.querySelectorAll('.onboarding-slide');
        var skipBtn = document.getElementById('onboardingSkip');
        var startBtn = document.getElementById('onboardingStartBtn');
        var tapPrev = document.getElementById('storiesTapPrev');
        var tapNext = document.getElementById('storiesTapNext');

        var currentStep = 1;
        var autoTimer = null;

        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∞–Ω–∏–º–∞—Ü–∏–∏
        if (onboardingPage) onboardingPage.style.setProperty('--story-dur', (SLIDE_DURATION / 1000) + 's');

        // –ü–æ–ª—É—á–∞–µ–º fill-—ç–ª–µ–º–µ–Ω—Ç—ã –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–≤
        function getBar(i) { return document.getElementById('storyBar' + i); }

        function updateBars(activeStep) {
          for (var i = 1; i <= TOTAL_SLIDES; i++) {
            var fill = getBar(i);
            if (!fill) continue;
            // –°–±—Ä–æ—Å –∞–Ω–∏–º–∞—Ü–∏–∏
            fill.style.transition = 'none';
            if (i < activeStep) {
              fill.style.width = '100%'; // —É–∂–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω
            } else if (i === activeStep) {
              fill.style.width = '0%';
              // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π reflow —á—Ç–æ–±—ã transition —Å—Ä–∞–±–æ—Ç–∞–ª
              void fill.offsetWidth;
              fill.style.transition = 'width ' + (SLIDE_DURATION / 1000) + 's linear';
              fill.style.width = '100%';
            } else {
              fill.style.width = '0%'; // –µ—â—ë –Ω–µ —Å–º–æ—Ç—Ä–µ–ª–∏
            }
          }
        }

        function showOnboarding() {
          if (onboardingPage) onboardingPage.style.display = 'flex';
          if (homePage) homePage.classList.remove('active');
          goToStep(1);
        }

        function hideOnboarding() {
          if (autoTimer) clearTimeout(autoTimer);
          if (onboardingPage) onboardingPage.style.display = 'none';
          var alreadyActive = document.querySelector('.page.active');
          if (!alreadyActive && homePage) homePage.classList.add('active');
          try { localStorage.setItem(ONBOARDING_KEY, 'true'); } catch(_) {}
        }

        function goToStep(step) {
          if (step < 1) { hideOnboarding(); return; }
          if (step > TOTAL_SLIDES) { hideOnboarding(); return; }

          if (autoTimer) clearTimeout(autoTimer);
          currentStep = step;

          slides.forEach(function(s) {
            s.classList.toggle('active', parseInt(s.dataset.step) === step);
          });

          updateBars(step);

          // –ê–≤—Ç–æ–ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —Å–ª–∞–π–¥ (–ø–æ—Å–ª–µ–¥–Ω–∏–π ‚Äî –∑–∞–∫—Ä—ã—Ç—å)
          autoTimer = setTimeout(function() {
            goToStep(currentStep + 1);
          }, SLIDE_DURATION);
        }

        // –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç—å (X)
        if (skipBtn) skipBtn.addEventListener('click', function(e) {
          e.stopPropagation();
          hideOnboarding();
        });

        // –ö–Ω–æ–ø–∫–∞ ¬´–ù–∞—á–∞—Ç—å¬ª –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º —Å–ª–∞–π–¥–µ
        if (startBtn) startBtn.addEventListener('click', function(e) {
          e.stopPropagation();
          hideOnboarding();
        });

        // –¢–∞–ø-–∑–æ–Ω—ã: –≤–ª–µ–≤–æ = –ø—Ä–µ–¥—ã–¥—É—â–∏–π, –≤–ø—Ä–∞–≤–æ = —Å–ª–µ–¥—É—é—â–∏–π
        if (tapPrev) tapPrev.addEventListener('click', function() { goToStep(currentStep - 1); });
        if (tapNext) tapNext.addEventListener('click', function() { goToStep(currentStep + 1); });

        // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–≤–∞–π–ø–∞ (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∫ –∑–æ–Ω–∞–º —Ç–∞–ø–∞)
        var touchStartX = 0;
        if (onboardingPage) {
          onboardingPage.addEventListener('touchstart', function(e) {
            touchStartX = e.changedTouches[0].screenX;
          }, { passive: true });
          onboardingPage.addEventListener('touchend', function(e) {
            var dx = e.changedTouches[0].screenX - touchStartX;
            if (Math.abs(dx) > 60) {
              if (dx < 0) goToStep(currentStep + 1);
              else goToStep(currentStep - 1);
            }
          }, { passive: true });
        }

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ –∏–ª–∏ –≥–µ–π—Ç
        var _urlParams = typeof window.location !== 'undefined' ? (window.location.search || '') : '';
        var _isPaymentReturn = _urlParams.indexOf('payment=success') !== -1;

        function _hasSeenOnboarding() {
          try { return !!localStorage.getItem(ONBOARDING_KEY); } catch(_) { return false; }
        }

        window.startApp = function() {
          if (_isPaymentReturn || _hasSeenOnboarding()) {
            // –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤–∏–∑–∏—Ç –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—Ç —Å –æ–ø–ª–∞—Ç—ã ‚Äî —Å—Ä–∞–∑—É –Ω–∞ –≥–ª–∞–≤–Ω—É—é
            if (homePage) homePage.classList.add('active');
            try { localStorage.setItem(ONBOARDING_KEY, 'true'); } catch(_) {}
          } else {
            showOnboarding();
          }
        };
        var startApp = window.startApp;

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞–∂–∞–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å /start –≤ –±–æ—Ç–µ
        // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É: –±–µ–∑ initData (–±—Ä–∞—É–∑–µ—Ä/–ø—Ä–µ–≤—å—é) –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—Ç —Å –æ–ø–ª–∞—Ç—ã
        var _initDataForGate = getInitData ? getInitData() : '';
        var _apiBaseForGate = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
        if (_initDataForGate && _apiBaseForGate && !_isPaymentReturn) {
          (function checkBotStarted() {
            var gateEl = document.getElementById('botGatePage');
            fetch(_apiBaseForGate + '/api/user/bot-status', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': _initDataForGate },
              body: JSON.stringify({ initData: _initDataForGate })
            })
            .then(function(r) { return r.json(); })
            .then(function(data) {
              if (data && data.started === false) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–µ–π—Ç
                if (gateEl) { gateEl.style.display = 'flex'; }
              } else {
                if (gateEl) gateEl.style.display = 'none';
                startApp();
              }
            })
            .catch(function() {
              // –û—à–∏–±–∫–∞ —Å–µ—Ç–∏ ‚Äî –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ–º, –ø—É—Å–∫–∞–µ–º –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
              if (gateEl) gateEl.style.display = 'none';
              startApp();
            });
          })();
        } else {
          startApp();
        }
      })();

      // ‚îÄ‚îÄ –õ–æ–≥–∏–∫–∞ –≥–µ–π—Ç-—ç–∫—Ä–∞–Ω–∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      (function initGateScreen() {
        var gateOpenBtn = document.getElementById('gateOpenBotBtn');
        var gateCheckBtn = document.getElementById('gateCheckBtn');
        var BOT_UN = window.BOT_USERNAME || 'Yup_Soul_bot';
        if (gateOpenBtn) {
          gateOpenBtn.addEventListener('click', function() {
            var botUrl = 'https://t.me/' + BOT_UN + '?start=mini_init';
            if (tg && tg.openTelegramLink) {
              tg.openTelegramLink(botUrl);
            } else {
              window.open(botUrl, '_blank');
            }
          });
        }
        if (gateCheckBtn) {
          gateCheckBtn.addEventListener('click', function() {
            gateCheckBtn.textContent = '–ü—Ä–æ–≤–µ—Ä—è–µ–º‚Ä¶';
            gateCheckBtn.disabled = true;
            var initData = getInitData ? getInitData() : '';
            var apiBase = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
            if (!initData || !apiBase) { gateCheckBtn.textContent = '–£–∂–µ –Ω–∞–∂–∞–ª –°—Ç–∞—Ä—Ç ‚Üí –≤–æ–π—Ç–∏'; gateCheckBtn.disabled = false; return; }
            fetch(apiBase + '/api/user/bot-status', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData },
              body: JSON.stringify({ initData: initData })
            })
            .then(function(r) { return r.json(); })
            .then(function(data) {
              if (data && data.started) {
                var gateEl = document.getElementById('botGatePage');
                if (gateEl) gateEl.style.display = 'none';
                if (window.startApp) window.startApp();
              } else {
                gateCheckBtn.textContent = '–ï—â—ë –Ω–µ –Ω–∞–∂–∞—Ç –°—Ç–∞—Ä—Ç :(';
                setTimeout(function() { gateCheckBtn.textContent = '–£–∂–µ –Ω–∞–∂–∞–ª –°—Ç–∞—Ä—Ç ‚Üí –≤–æ–π—Ç–∏'; gateCheckBtn.disabled = false; }, 2000);
              }
            })
            .catch(function() {
              gateCheckBtn.textContent = '–£–∂–µ –Ω–∞–∂–∞–ª –°—Ç–∞—Ä—Ç ‚Üí –≤–æ–π—Ç–∏';
              gateCheckBtn.disabled = false;
            });
          });
        }
      })();

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–µ–º–æ-—Ä–µ–∂–∏–º –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
      function checkDemoMode() {
        if (window.demoMode || (!getInitData() && tg && tg.version)) {
          var demoIndicator = document.createElement('div');
          demoIndicator.id = 'demoIndicator';
          demoIndicator.style.cssText = 'position:fixed;top:10px;left:10px;background:rgba(255,165,0,0.9);color:white;padding:8px 12px;border-radius:6px;font-size:12px;z-index:9999;font-weight:600;';
          demoIndicator.textContent = 'üí° –î–ï–ú–û-–†–ï–ñ–ò–ú';
          document.body.appendChild(demoIndicator);
          console.log('[Demo] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–µ–º–æ-—Ä–µ–∂–∏–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω');
        }
      }
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–µ–º–æ-—Ä–µ–∂–∏–º —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
      setTimeout(checkDemoMode, 2000);
      (function initLangSwitcher() {
        var btn = document.getElementById('langSwitcherBtn');
        var dropdown = document.getElementById('langSwitcherDropdown');
        var opts = document.querySelectorAll('.lang-opt');
        function closeDropdown() { if (dropdown) dropdown.setAttribute('hidden', ''); }
        if (btn && dropdown) {
          btn.addEventListener('click', function(e) {
            e.stopPropagation();
            if (dropdown.getAttribute('hidden') !== null) dropdown.removeAttribute('hidden');
            else closeDropdown();
          });
          document.addEventListener('click', function() { closeDropdown(); });
          dropdown.addEventListener('click', function(e) { e.stopPropagation(); });
        }
        opts.forEach(function(o) {
          o.addEventListener('click', function() {
            var lang = o.getAttribute('data-lang');
            if (lang) { setLang(lang); closeDropdown(); }
          });
        });
      })();

      setTimeout(function() {
        try {
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–∞—Ç–∞–ª–æ–≥ —Ü–µ–Ω, free trial, —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≤–∏—Å—à–∏–µ –∑–∞—è–≤–∫–∏
        loadPricingCatalog();
        (function initProfile() {
          if (!tg || !tg.initData) return;
          fetchUserProfile().then(function(p) {
            userProfile = p;
            var greetEl = document.getElementById('homeGreeting');
            if (greetEl) {
              greetEl.textContent = (p && p.name) ? t('greeting', { name: p.name }) : t('greetingDefault');
              greetEl.style.display = 'block';
            }
          });
        })();
        if (!tg) {
          var p = document.getElementById('previewNav');
          if (p) p.classList.add('show');
          document.body.classList.add('preview-mode');
        }
        var todayStr = new Date().toISOString().split('T')[0];
        var minDate = new Date();
        minDate.setFullYear(minDate.getFullYear() - 100);
        var minDateStr = minDate.toISOString().split('T')[0];
        var birthdateEl = document.getElementById('birthdate');
        if (birthdateEl) {
          birthdateEl.max = todayStr;
          birthdateEl.min = minDateStr;
        }
        var birthdate2El = document.getElementById('birthdate2');
        if (birthdate2El) {
          birthdate2El.max = todayStr;
          birthdate2El.min = minDateStr;
        }
        var unknown = document.getElementById('unknown');
        var birthtime = document.getElementById('birthtime');
        if (unknown && birthtime) unknown.addEventListener('change', function() {
          birthtime.required = !unknown.checked;
        });
        var birthdateWrap = document.getElementById('birthdateWrap');
        var birthdateCheck = document.getElementById('birthdateCheck');
        var birthdateInput = document.getElementById('birthdate');
        var birthplaceInput = document.getElementById('birthplace');
        var monthsRu = ['—è–Ω–≤–∞—Ä—è','—Ñ–µ–≤—Ä–∞–ª—è','–º–∞—Ä—Ç–∞','–∞–ø—Ä–µ–ª—è','–º–∞—è','–∏—é–Ω—è','–∏—é–ª—è','–∞–≤–≥—É—Å—Ç–∞','—Å–µ–Ω—Ç—è–±—Ä—è','–æ–∫—Ç—è–±—Ä—è','–Ω–æ—è–±—Ä—è','–¥–µ–∫–∞–±—Ä—è'];
        var monthsRuNom = ['–Ø–Ω–≤–∞—Ä—å','–§–µ–≤—Ä–∞–ª—å','–ú–∞—Ä—Ç','–ê–ø—Ä–µ–ª—å','–ú–∞–π','–ò—é–Ω—å','–ò—é–ª—å','–ê–≤–≥—É—Å—Ç','–°–µ–Ω—Ç—è–±—Ä—å','–û–∫—Ç—è–±—Ä—å','–ù–æ—è–±—Ä—å','–î–µ–∫–∞–±—Ä—å'];
        function formatDateRu(dateStr) {
          if (!dateStr) return '';
          var d = new Date(dateStr + 'T12:00:00');
          if (isNaN(d.getTime())) return dateStr;
          return d.getDate() + ' ' + monthsRu[d.getMonth()] + ' ' + d.getFullYear() + ' –≥.';
        }
        (function initDateGroups() {
          var yearEnd = new Date().getFullYear();
          var yearStart = yearEnd - 100;
          function fillOneDateGroup(dayId, monthId, yearId, yearMax) {
            yearMax = yearMax || yearEnd;
            var dSel = document.getElementById(dayId);
            var mSel = document.getElementById(monthId);
            var ySel = document.getElementById(yearId);
            if (dSel) { dSel.innerHTML = '<option value="">–î–µ–Ω—å</option>'; for (var i = 1; i <= 31; i++) dSel.innerHTML += '<option value="' + i + '">' + i + '</option>'; }
            if (mSel) { mSel.innerHTML = '<option value="">–ú–µ—Å—è—Ü</option>'; for (var j = 1; j <= 12; j++) mSel.innerHTML += '<option value="' + j + '">' + monthsRuNom[j - 1] + '</option>'; }
            if (ySel) { ySel.innerHTML = '<option value="">–ì–æ–¥</option>'; for (var k = yearMax; k >= yearStart; k--) ySel.innerHTML += '<option value="' + k + '">' + k + '</option>'; }
          }
          function selectsToInput(dayId, monthId, yearId, inputId, wrapId, checkId) {
            var d = document.getElementById(dayId);
            var m = document.getElementById(monthId);
            var y = document.getElementById(yearId);
            var inp = document.getElementById(inputId);
            var wrap = wrapId ? document.getElementById(wrapId) : null;
            var chk = checkId ? document.getElementById(checkId) : null;
            if (!inp || !d || !m || !y) return;
            var day = parseInt(d.value, 10); var month = parseInt(m.value, 10); var year = parseInt(y.value, 10);
            if (!day || !month || !year) { inp.value = ''; if (wrap) wrap.classList.remove('has-date'); if (chk) chk.setAttribute('aria-hidden', 'true'); return; }
            var lastDay = new Date(year, month, 0).getDate();
            if (day > lastDay) day = lastDay;
            var yyyy = year; var mm = month < 10 ? '0' + month : '' + month; var dd = day < 10 ? '0' + day : '' + day;
            inp.value = yyyy + '-' + mm + '-' + dd;
            if (wrap) wrap.classList.add('has-date');
            if (chk) chk.setAttribute('aria-hidden', 'false');
          }
          function inputToSelects(inputId, dayId, monthId, yearId, wrapId, checkId) {
            var inp = document.getElementById(inputId);
            var d = document.getElementById(dayId);
            var m = document.getElementById(monthId);
            var y = document.getElementById(yearId);
            var wrap = wrapId ? document.getElementById(wrapId) : null;
            var chk = checkId ? document.getElementById(checkId) : null;
            if (!inp || !d || !m || !y) return;
            var v = (inp.value || '').trim();
            if (!v) { d.value = ''; m.value = ''; y.value = ''; if (wrap) wrap.classList.remove('has-date'); if (chk) chk.setAttribute('aria-hidden', 'true'); return; }
            var parts = v.split(/[-T]/);
            var yyyy = parseInt(parts[0], 10); var mm = parseInt(parts[1], 10); var dd = parseInt(parts[2], 10);
            if (isNaN(yyyy) || isNaN(mm) || isNaN(dd)) return;
            d.value = dd; m.value = mm; y.value = yyyy;
            if (wrap) wrap.classList.add('has-date');
            if (chk) chk.setAttribute('aria-hidden', 'false');
          }
          // yearEnd = —Ç–µ–∫—É—â–∏–π –≥–æ–¥: –º–æ–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è –≤–ø–ª–æ—Ç—å –¥–æ —Å–µ–≥–æ–¥–Ω—è (–≤ —Ç.—á. –¥–µ—Ç–µ–π)
          fillOneDateGroup('birthdateDay', 'birthdateMonth', 'birthdateYear', yearEnd);
          fillOneDateGroup('birthdate2Day', 'birthdate2Month', 'birthdate2Year', yearEnd);
          fillOneDateGroup('heroBirthdateDay', 'heroBirthdateMonth', 'heroBirthdateYear', yearEnd);
          [['birthdateDay','birthdateMonth','birthdateYear','birthdate','birthdateWrap','birthdateCheck'],
           ['birthdate2Day','birthdate2Month','birthdate2Year','birthdate2','birthdate2Wrap',null],
           ['heroBirthdateDay','heroBirthdateMonth','heroBirthdateYear','heroBirthdate','heroBirthdateWrap',null]].forEach(function(ids) {
            var dayId = ids[0], monthId = ids[1], yearId = ids[2], inputId = ids[3], wrapId = ids[4], checkId = ids[5];
            var onCh = function() { selectsToInput(dayId, monthId, yearId, inputId, wrapId, checkId); };
            var d = document.getElementById(dayId), m = document.getElementById(monthId), y = document.getElementById(yearId);
            if (d) d.addEventListener('change', onCh);
            if (m) m.addEventListener('change', onCh);
            if (y) y.addEventListener('change', onCh);
            inputToSelects(inputId, dayId, monthId, yearId, wrapId, checkId);
          });
          window.updateDateSelectsFromInput = function(inputId) {
            var map = { birthdate: ['birthdate','birthdateDay','birthdateMonth','birthdateYear','birthdateWrap','birthdateCheck'], birthdate2: ['birthdate2','birthdate2Day','birthdate2Month','birthdate2Year','birthdate2Wrap',null], heroBirthdate: ['heroBirthdate','heroBirthdateDay','heroBirthdateMonth','heroBirthdateYear','heroBirthdateWrap',null] };
            var cfg = map[inputId];
            if (cfg) inputToSelects(cfg[0], cfg[1], cfg[2], cfg[3], cfg[4], cfg[5]);
          };
        })();
        if (birthplaceInput) {
          var suggestionsEl = document.getElementById('birthplaceSuggestions');
          var wrap = document.getElementById('birthplaceWrap');
          var checkEl = document.getElementById('birthplaceCheck');
          var hintEl = document.getElementById('birthplaceHint');
          var debounceTimer = null;
          var lastSearch = '';
          function hideSuggestions() {
            if (suggestionsEl) { suggestionsEl.innerHTML = ''; suggestionsEl.setAttribute('aria-hidden', 'true'); suggestionsEl.style.display = 'none'; }
          }
          function showPlaceConfirm(displayName) {}
          function selectPlace(displayName, lat, lon) {
            var full = (displayName || '').trim();
            birthplaceInput.value = full;
            birthplaceInput.setAttribute('title', full);
            birthplaceInput.setAttribute('data-place-selected', '1');
            if (lat != null && lon != null) {
              birthplaceInput.setAttribute('data-lat', String(lat));
              birthplaceInput.setAttribute('data-lon', String(lon));
            }
            if (wrap) wrap.classList.add('has-place');
            if (checkEl) checkEl.setAttribute('aria-hidden', 'false');
            if (hintEl) hintEl.style.display = 'none';
            showPlaceConfirm(displayName);
            hideSuggestions();
          }
          function clearPlaceSelection() {
            birthplaceInput.removeAttribute('data-place-selected');
            birthplaceInput.removeAttribute('data-lat');
            birthplaceInput.removeAttribute('data-lon');
            if (wrap) wrap.classList.remove('has-place');
            if (checkEl) checkEl.setAttribute('aria-hidden', 'true');
            if (hintEl) hintEl.style.display = 'none';
          }
          function fetchPlaces(q) {
            if (!q || q.length < 2) { hideSuggestions(); return; }
            var url = typeof getPlacesSearchUrl === 'function' ? getPlacesSearchUrl(q) : ('https://nominatim.openstreetmap.org/search?q=' + encodeURIComponent(q) + '&format=json&limit=8&addressdetails=1');
            var headers = { 'Accept': 'application/json' };
            if (url.indexOf('nominatim') !== -1) { headers['Accept-Language'] = 'ru'; headers['User-Agent'] = 'YupSoulMiniApp/1.0 (contact@yupsoul.com)'; }
            fetch(url, { headers: headers })
              .then(function(r) { return r.json(); })
              .then(function(list) {
                if (lastSearch !== q) return;
                if (!suggestionsEl) return;
                suggestionsEl.innerHTML = '';
                (list || []).forEach(function(item) {
                  var li = document.createElement('li');
                  var main = item.display_name || (item.address && (item.address.city || item.address.town || item.address.village || item.address.state || item.address.country));
                  var sub = item.address && item.address.country ? (item.address.country + (item.address.country_code ? ' (' + item.address.country_code.toUpperCase() + ')' : '')) : '';
                  li.textContent = main;
                  if (sub) { var sp = document.createElement('div'); sp.className = 'place-type'; sp.textContent = sub; li.appendChild(sp); }
                  var lat = item.lat; var lon = item.lon;
                  li.addEventListener('click', function() { selectPlace(item.display_name || main, lat, lon); });
                  suggestionsEl.appendChild(li);
                });
                suggestionsEl.style.display = (list && list.length) ? 'block' : 'none';
                suggestionsEl.setAttribute('aria-hidden', list && list.length ? 'false' : 'true');
              })
              .catch(function() { hideSuggestions(); });
          }
          birthplaceInput.addEventListener('input', function() {
            var v = birthplaceInput.value.trim();
            clearPlaceSelection();
            if (v) {
              lastSearch = v;
              clearTimeout(debounceTimer);
              debounceTimer = setTimeout(function() { fetchPlaces(v); }, 320);
            } else {
              hideSuggestions();
            }
          });
          birthplaceInput.addEventListener('focus', function() {
            var v = birthplaceInput.value.trim();
            var isSelected = !!birthplaceInput.getAttribute('data-place-selected');
            if (hintEl) hintEl.style.display = (!v && !isSelected) ? 'block' : 'none';
            if (v && v.length >= 2) { lastSearch = v; fetchPlaces(v); }
          });
          birthplaceInput.addEventListener('blur', function() {
            setTimeout(hideSuggestions, 200);
            if (hintEl) hintEl.style.display = 'none';
          });
          if (birthplaceInput.value.trim() && birthplaceInput.getAttribute('data-place-selected') && wrap) {
            wrap.classList.add('has-place');
            if (checkEl) checkEl.setAttribute('aria-hidden', 'false');
          }
        }
        var birthplace2Input = document.getElementById('birthplace2');
        if (birthplace2Input) {
          var sugg2El = document.getElementById('birthplaceSuggestions2');
          var wrap2El = document.getElementById('birthplace2Wrap');
          var check2El = document.getElementById('birthplace2Check');
          var hint2El = document.getElementById('birthplace2Hint');
          var debounce2 = null;
          var lastSearch2 = '';
          function hideSuggestions2() {
            if (sugg2El) { sugg2El.innerHTML = ''; sugg2El.setAttribute('aria-hidden', 'true'); sugg2El.style.display = 'none'; }
          }
          function selectPlace2(displayName, lat, lon) {
            var full = (displayName || '').trim();
            birthplace2Input.value = full;
            birthplace2Input.setAttribute('data-place-selected', '1');
            if (lat != null && lon != null) {
              birthplace2Input.setAttribute('data-lat', String(lat));
              birthplace2Input.setAttribute('data-lon', String(lon));
            }
            if (wrap2El) wrap2El.classList.add('has-place');
            if (check2El) check2El.setAttribute('aria-hidden', 'false');
            if (hint2El) hint2El.style.display = 'none';
            hideSuggestions2();
          }
          function clearPlace2Selection() {
            birthplace2Input.removeAttribute('data-place-selected');
            birthplace2Input.removeAttribute('data-lat');
            birthplace2Input.removeAttribute('data-lon');
            if (wrap2El) wrap2El.classList.remove('has-place');
            if (check2El) check2El.setAttribute('aria-hidden', 'true');
          }
          function fetchPlaces2(q) {
            if (!q || q.length < 2) { hideSuggestions2(); return; }
            var url = typeof getPlacesSearchUrl === 'function' ? getPlacesSearchUrl(q) : ('https://nominatim.openstreetmap.org/search?q=' + encodeURIComponent(q) + '&format=json&limit=8&addressdetails=1');
            var headers = { 'Accept': 'application/json' };
            if (url.indexOf('nominatim') !== -1) { headers['Accept-Language'] = 'ru'; headers['User-Agent'] = 'YupSoulMiniApp/1.0 (contact@yupsoul.com)'; }
            fetch(url, { headers: headers })
              .then(function(r) { return r.json(); })
              .then(function(list) {
                if (lastSearch2 !== q) return;
                if (!sugg2El) return;
                sugg2El.innerHTML = '';
                (list || []).forEach(function(item) {
                  var li = document.createElement('li');
                  var main = item.display_name || (item.address && (item.address.city || item.address.town || item.address.village || item.address.state || item.address.country));
                  var sub = item.address && item.address.country ? (item.address.country + (item.address.country_code ? ' (' + item.address.country_code.toUpperCase() + ')' : '')) : '';
                  li.textContent = main;
                  if (sub) { var sp = document.createElement('div'); sp.className = 'place-type'; sp.textContent = sub; li.appendChild(sp); }
                  var lat = item.lat; var lon = item.lon;
                  li.addEventListener('click', function() { selectPlace2(item.display_name || main, lat, lon); });
                  sugg2El.appendChild(li);
                });
                sugg2El.style.display = (list && list.length) ? 'block' : 'none';
                sugg2El.setAttribute('aria-hidden', (list && list.length) ? 'false' : 'true');
              })
              .catch(function() { hideSuggestions2(); });
          }
          birthplace2Input.addEventListener('input', function() {
            var v = birthplace2Input.value.trim();
            clearPlace2Selection();
            if (v) { lastSearch2 = v; clearTimeout(debounce2); debounce2 = setTimeout(function() { fetchPlaces2(v); }, 320); }
            else { hideSuggestions2(); }
          });
          birthplace2Input.addEventListener('focus', function() {
            var v = birthplace2Input.value.trim();
            var isSelected2 = !!birthplace2Input.getAttribute('data-place-selected');
            if (hint2El) hint2El.style.display = (!v && !isSelected2) ? 'block' : 'none';
            if (v && v.length >= 2) { lastSearch2 = v; fetchPlaces2(v); }
          });
          birthplace2Input.addEventListener('blur', function() {
            setTimeout(hideSuggestions2, 200);
            if (hint2El) hint2El.style.display = 'none';
          });
        }
        var transitLocationInput = document.getElementById('transitLocation');
        if (transitLocationInput) {
          var debounceTransit = null;
          transitLocationInput.addEventListener('input', function() {
            var self = this;
            clearTimeout(debounceTransit);
            debounceTransit = setTimeout(function() { showLocationSuggestions(self, 'transitLocationSuggestions', null); }, 320);
          });
        }
        var formPage = document.getElementById('formPage');
        if (formPage && userTariff === 'master') loadForWhoSelect();
      
      // ‚îÄ‚îÄ Soul Chat: –ø–æ–ª–Ω—ã–π UI –Ω–∞ soulChatPage (initSoulChatPage). –°—Ç–∞—Ä—ã–π –±–ª–æ–∫ –∫–∞—Ä—Ç–æ—á–∫–∏ —É–¥–∞–ª—ë–Ω. ‚îÄ‚îÄ
      var scCurrentRequestId = null;
      window._scLastRequestId = null;
      window._scHasProfile    = false;
      window._scIsMaster      = false;
      window._scRequestId2    = null;
      window._scUserCards     = [];
      window._scPickerMode    = 'single';
      window._scPickerSelA    = null;
      window._scPickerSelB    = null;

      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SOUL CHAT PAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
      function goToSoulChat() {
        window.returnToPage = 'homePage';
        window._scHistoryLoaded = false; // –ü—Ä–∏ –∫–∞–∂–¥–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏—Å—Ç–æ—Ä–∏—è –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ
        goToPage('soulChatPage');
      }
      window.goToSoulChat = goToSoulChat;

      async function initSoulChatPage() {
        var scHeader    = document.getElementById('scHeader');
        var scChatHdr   = document.getElementById('scChatHeader');
        var promoArea   = document.getElementById('scPromoArea');
        var chatEl      = document.getElementById('scPageChat');
        var inputArea   = document.getElementById('scInputArea');
        var loadEl      = document.getElementById('scPageLoading');
        var globalLoad  = document.getElementById('scGlobalLoading');
        var giftWrap    = document.getElementById('scPageGiftWrap');
        var buyDayWrap  = document.getElementById('scPageBuyDayWrap');
        var errorWrap   = document.getElementById('scPromoErrorWrap');
        var retryBtn    = document.getElementById('scPromoRetryBtn');

        function hideGlobalLoading() {
          if (globalLoad) globalLoad.style.display = 'none';
          if (loadEl) loadEl.style.display = 'none';
        }

        // –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏—è: —á–µ—Ä–µ–∑ 3 —Å–µ–∫ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É–±–∏—Ä–∞–µ–º ¬´–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø¬ª –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ–º–æ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ
        var accessTimeout = setTimeout(function() {
          var stillChecking = (loadEl && loadEl.style.display !== 'none') || (globalLoad && globalLoad.style.display !== 'none');
          if (stillChecking) {
            hideGlobalLoading();
            if (scHeader) scHeader.style.display = '';
            if (scChatHdr) scChatHdr.style.display = 'none';
            if (promoArea) promoArea.style.display = '';
            if (chatEl) chatEl.style.display = 'none';
            if (inputArea) inputArea.style.display = 'none';
            if (giftWrap) giftWrap.style.display = 'none';
            if (buyDayWrap) buyDayWrap.style.display = '';
            if (errorWrap) errorWrap.style.display = '';
          }
        }, 3000);

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –ø—Ä–æ–º–æ-—Ä–µ–∂–∏–º–æ–º –∏ —á–∞—Ç-—Ä–µ–∂–∏–º–æ–º. isLoadError = true –ø—Ä–∏ —Ç–∞–π–º–∞—É—Ç–µ/—Å–µ—Ç–∏/–æ—à–∏–±–∫–µ
        function showPromo(isLoadError) {
          if (accessTimeout) { clearTimeout(accessTimeout); accessTimeout = null; }
          hideGlobalLoading();
          if (scHeader)   scHeader.style.display   = '';
          if (scChatHdr)  scChatHdr.style.display  = 'none';
          if (promoArea)  promoArea.style.display   = '';
          if (chatEl)     chatEl.style.display      = 'none';
          if (inputArea)  inputArea.style.display   = 'none';
          if (errorWrap)  errorWrap.style.display   = (isLoadError ? '' : 'none');
        }
        function showChat() {
          if (accessTimeout) { clearTimeout(accessTimeout); accessTimeout = null; }
          hideGlobalLoading();
          if (scHeader)   scHeader.style.display   = 'none';
          if (scChatHdr)  { scChatHdr.style.display = 'flex'; }
          if (promoArea)  promoArea.style.display   = 'none';
          if (chatEl)     { chatEl.style.display = 'flex'; chatEl.scrollTop = 0; }
          if (inputArea)  inputArea.style.display   = '';
        }

        // –°—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –ø–æ–¥–ø–∏—Å–∫–∏ (—à–∞–ø–∫–∞ + –ø—Ä–æ–º–æ), –≤–Ω—É—Ç—Ä–∏ ‚Äî ¬´–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø‚Ä¶¬ª. –¢–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏—Å–∏—Ç –Ω–∞ –ø–æ–ª–Ω–æ–º —ç–∫—Ä–∞–Ω–µ –∑–∞–≥—Ä—É–∑–∫–∏.
        if (scHeader)   scHeader.style.display   = '';
        if (promoArea)  promoArea.style.display  = '';
        if (loadEl)     loadEl.style.display     = 'block';
        if (globalLoad) globalLoad.style.display = 'none';
        if (chatEl)     chatEl.style.display     = 'none';
        if (inputArea)  inputArea.style.display  = 'none';
        if (scChatHdr)  scChatHdr.style.display  = 'none';
        if (giftWrap)   giftWrap.style.display   = 'none';
        if (buyDayWrap) buyDayWrap.style.display  = 'none';
        if (errorWrap)  errorWrap.style.display   = 'none';

        try {
          var apiBase  = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
          var initData = typeof getInitData === 'function' ? getInitData() : '';
          if (!apiBase || !initData) {
            showPromo(true);
            return;
          }

          var resp = await fetchWithTimeout(apiBase + '/api/soul-chat/access', {
            method: 'GET',
            headers: { 'X-Telegram-Init': initData }
          }, 15000);
          var json = await resp.json().catch(function(){ return {}; });

          // –ü—Ä–∏ –ª—é–±–æ–π –æ—à–∏–±–∫–µ HTTP (401, 403, 5xx) ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–∫–Ω–æ —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–¥–ø–∏—Å–∫–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ
          if (!resp.ok) {
            showPromo(true);
            return;
          }

          window._scLastRequestId = (json && json.last_request_id) || null;
          window._scHasProfile   = !!(json && json.has_profile);
          window._scIsMaster     = !!(json && json.is_master);

          if (json && json.allowed === true) {
            var hadReturnFlag = false;
            try {
              var ts = sessionStorage.getItem('soul_chat_return_from_payment');
              if (ts && (Date.now() - parseInt(ts, 10)) < 5 * 60 * 1000) { hadReturnFlag = true; sessionStorage.removeItem('soul_chat_return_from_payment'); }
            } catch(_) {}
            if (hadReturnFlag && typeof showToast === 'function') showToast(typeof t === 'function' ? t('scToastPaymentReceived') : '–û–ø–ª–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∞, –¥–æ—Å—Ç—É–ø –æ—Ç–∫—Ä—ã—Ç');
            showChat();
            // –ï—Å–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫-–ø–æ–¥—Å–∫–∞–∑–∫—É, —Å–∫—Ä—ã–≤–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
            var noReqEl  = document.getElementById('scPageNoRequest');
            var hasData  = window._scLastRequestId || window._scHasProfile;
            if (!hasData) {
              if (noReqEl)   noReqEl.style.display   = '';
              if (inputArea) inputArea.style.display  = 'none';
            } else {
              if (noReqEl)   noReqEl.style.display   = 'none';
            }
            // –ö–Ω–æ–ø–∫–∞ –≤—ã–±–æ—Ä–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è Master
            var cardPickerBtn = document.getElementById('scCardPickerBtn');
            if (window._scIsMaster) {
              if (cardPickerBtn) cardPickerBtn.style.display = '';
              scLoadUserCards(apiBase, initData);
            } else {
              if (cardPickerBtn) cardPickerBtn.style.display = 'none';
              // –¢–∏–∑–µ—Ä —Å–∏–Ω–∞—Å—Ç—Ä–∏–∏ –¥–ª—è Basic/Plus
              var teaserEl = document.getElementById('scSynastryTeaser');
              if (teaserEl) teaserEl.style.display = '';
            }
            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∫–Ω–æ–ø–∫–∏ –∫–∞—Ä—Ç–æ—á–∫–∏
            scUpdateCardPickerLabel();
            // –¢–∞–π–º–µ—Ä –¥–æ—Å—Ç—É–ø–∞
            var timerEl = document.getElementById('scPageTimer');
            if (timerEl && json.expires_at) {
              timerEl.style.display = 'inline-block';
              var exp = new Date(json.expires_at);
              var updateTimer = function() {
                var diff = Math.max(0, exp - Date.now());
                var h = Math.floor(diff/3600000), m = Math.floor((diff%3600000)/60000);
                timerEl.textContent = '–î–æ—Å—Ç—É–ø: –µ—â—ë ' + h + '—á ' + m + '–º–∏–Ω';
                if (diff > 0) setTimeout(updateTimer, 60000);
              };
              updateTimer();
            }
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–æ–≤
            scLoadHistory(apiBase, initData);
          } else {
            // –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ–º–æ (—à–∞–ø–∫–∞ + –∑–æ–Ω–∞ —Å —Ç–∞—Ä–∏—Ñ–∞–º–∏/–ø–æ–¥–∞—Ä–∫–æ–º), —É–±–∏—Ä–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É (–Ω–µ –æ—à–∏–±–∫–∞)
            showPromo(false);
            if (json && json.trial_available) {
              if (giftWrap)   giftWrap.style.display   = '';
              if (buyDayWrap) buyDayWrap.style.display  = 'none';
            } else {
              if (giftWrap)   giftWrap.style.display   = 'none';
              if (buyDayWrap) buyDayWrap.style.display  = '';
            }
          }
        } catch(e) {
          // –û—à–∏–±–∫–∞ (—Å–µ—Ç—å, getInitData, —Ä–∞–∑–±–æ—Ä –æ—Ç–≤–µ—Ç–∞) ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ–º–æ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ
          showPromo(true);
        }
      }

      (function bindScPromoRetry() {
        var btn = document.getElementById('scPromoRetryBtn');
        if (btn) btn.addEventListener('click', function() { initSoulChatPage(); });
      })();

      // –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤ Soul Chat
      window._scHistoryLoaded = false;
      async function scLoadHistory(apiBase, initData) {
        if (window._scHistoryLoaded) return; // –£–∂–µ –∑–∞–≥—Ä—É–∂–∞–ª–∏ –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏
        var historyEl = document.getElementById('scPageHistory');
        if (!historyEl) return;

        // –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫—ç—à –∏–∑ localStorage
        var cacheKey = 'scHistory_' + (window._tgUserId || 'anon');
        try {
          var cached = localStorage.getItem(cacheKey);
          if (cached) {
            var cachedMsgs = JSON.parse(cached);
            if (Array.isArray(cachedMsgs) && cachedMsgs.length > 0) {
              scRenderHistory(historyEl, cachedMsgs);
              window._scHistoryLoaded = true;
            }
          }
        } catch(e) {}

        // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é —Å —Å–µ—Ä–≤–µ—Ä–∞
        try {
          var r = await fetchWithTimeout(apiBase + '/api/soul-chat/history', {
            headers: { 'X-Telegram-Init': initData }
          }, 15000);
          var d = await r.json().catch(function(){ return {}; });
          if (d.success && Array.isArray(d.messages)) {
            // –ï—Å–ª–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞ –±–æ–ª—å—à–µ —Å–æ–æ–±—â–µ–Ω–∏–π ‚Äî –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º
            scRenderHistory(historyEl, d.messages);
            window._scHistoryLoaded = true;
            try { localStorage.setItem(cacheKey, JSON.stringify(d.messages.slice(-50))); } catch(e) {}
          }
        } catch(e) {}

        // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –≤–Ω–∏–∑
        var chatEl = document.getElementById('scPageChat');
        if (chatEl) setTimeout(function(){ chatEl.scrollTop = chatEl.scrollHeight; }, 100);
      }

      function scRenderHistory(historyEl, messages) {
        historyEl.innerHTML = '';
        if (!messages || messages.length === 0) return;
        // –ú–µ—Ç–∫–∞ ¬´–Ω–∞—á–∞–ª–æ –∏—Å—Ç–æ—Ä–∏–∏¬ª
        var divider = document.createElement('div');
        divider.style.cssText = 'text-align:center;font-size:0.72rem;color:rgba(255,255,255,0.25);padding:6px 0 10px;';
        divider.textContent = '‚ú¶ –∏—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏ ‚ú¶';
        historyEl.appendChild(divider);
        messages.forEach(function(msg) {
          scPageAddMsg('user', msg.question);
          scPageAddMsg('soul', msg.answer);
        });
      }

      // ‚îÄ‚îÄ Card Picker (—Å–∏–Ω–∞—Å—Ç—Ä–∏—è) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      async function scLoadUserCards(apiBase, initData) {
        try {
          var r = await fetch(apiBase + '/api/user/cards', {
            headers: { 'X-Telegram-Init': initData }
          });
          var d = await r.json().catch(function(){ return {}; });
          if (d.success && Array.isArray(d.cards)) {
            window._scUserCards = d.cards;
            // –ï—Å–ª–∏ —Ç–µ–∫—É—â–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –µ—Å—Ç—å ‚Äî –ø—Ä–µ–¥–≤—ã–±—Ä–∞—Ç—å –µ—ë
            if (!window._scPickerSelA && window._scLastRequestId) {
              window._scPickerSelA = window._scLastRequestId;
            }
            scUpdateCardPickerLabel();
          }
        } catch(e) {}
      }

      function scCardLabel(card) {
        if (!card) return '‚Äî';
        var icon = card.mode === 'couple' ? ' ‚ô•' : '';
        if (card.mode === 'couple' && card.person2_name) {
          return card.name + ' & ' + card.person2_name + icon;
        }
        return card.name + (card.birthdate ? ', ' + card.birthdate : '') + icon;
      }

      function scUpdateCardPickerLabel() {
        var btn = document.getElementById('scCardPickerBtn');
        if (!btn) return;
        var cards = window._scUserCards || [];
        var selA = window._scPickerSelA || window._scLastRequestId;
        var selB = window._scRequestId2;
        var cardA = cards.find(function(c){ return c.id === selA; });
        var cardB = selB ? cards.find(function(c){ return c.id === selB; }) : null;
        if (cardA && cardB) {
          var nameA = cardA.name || '?';
          var nameB = cardB.name || '?';
          btn.textContent = nameA + ' ‚Üî ' + nameB + ' ‚ñæ';
        } else if (cardA) {
          btn.textContent = scCardLabel(cardA) + ' ‚ñæ';
        } else {
          btn.textContent = '–í—ã–±—Ä–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É ‚ñæ';
        }
      }

      function scBuildPickerList(containerId, selectedId, onSelect) {
        var container = document.getElementById(containerId);
        if (!container) return;
        container.innerHTML = '';
        var cards = window._scUserCards || [];
        if (cards.length === 0) {
          container.innerHTML = '<div style="color:rgba(255,255,255,0.35);font-size:0.82rem;text-align:center;padding:12px 0;">' + (typeof t === 'function' ? t('noCardsYet') : '–ù–µ—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫') + '</div>';
          return;
        }
        cards.forEach(function(card) {
          var isSelected = card.id === selectedId;
          var item = document.createElement('button');
          item.type = 'button';
          item.className = 'btn-secondary';
          item.style.cssText = 'width:100%;text-align:left;padding:9px 12px;border-radius:10px;font-family:inherit;font-size:0.84rem;cursor:pointer;border:1px solid ' +
            (isSelected ? 'rgba(var(--primary-rgb),0.5)' : 'rgba(255,255,255,0.1)') + ';background:' +
            (isSelected ? 'rgba(var(--primary-rgb),0.14)' : 'rgba(255,255,255,0.04)') + ';color:' +
            (isSelected ? 'var(--primary-color)' : 'rgba(255,255,255,0.75)') + ';';
          item.textContent = scCardLabel(card);
          item.setAttribute('data-id', card.id);
          item.addEventListener('click', function() { onSelect(card.id); });
          container.appendChild(item);
        });
      }

      function scSetPickerMode(mode) {
        window._scPickerMode = mode;
        var singlePane = document.getElementById('scPickerSinglePane');
        var synPane = document.getElementById('scPickerSynastryPane');
        var tabSingle = document.getElementById('scPickerTabSingle');
        var tabSyn = document.getElementById('scPickerTabSynastry');
        var activeTab = 'border:1px solid rgba(var(--primary-rgb),0.5);background:rgba(var(--primary-rgb),0.18);color:var(--primary-color);';
        var inactiveTab = 'border:1px solid rgba(255,255,255,0.12);background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.5);';
        if (mode === 'single') {
          if (singlePane) singlePane.style.display = 'flex';
          if (synPane)    synPane.style.display    = 'none';
          if (tabSingle)  tabSingle.style.cssText  += activeTab;
          if (tabSyn)     tabSyn.style.cssText     += inactiveTab;
          scBuildPickerList('scPickerSingleList', window._scPickerSelA || window._scLastRequestId, function(id) {
            window._scPickerSelA = id;
            window._scRequestId2 = null;
            scBuildPickerList('scPickerSingleList', id, arguments.callee);
          });
        } else {
          if (singlePane) singlePane.style.display = 'none';
          if (synPane)    synPane.style.display    = 'flex';
          if (tabSingle)  tabSingle.style.cssText  += inactiveTab;
          if (tabSyn)     tabSyn.style.cssText     += activeTab;
          var rebuildA = function(selId) {
            window._scPickerSelA = selId;
            scBuildPickerList('scPickerSynListA', selId, rebuildA);
          };
          var rebuildB = function(selId) {
            window._scPickerSelB = selId;
            scBuildPickerList('scPickerSynListB', selId, rebuildB);
          };
          scBuildPickerList('scPickerSynListA', window._scPickerSelA || window._scLastRequestId, rebuildA);
          scBuildPickerList('scPickerSynListB', window._scPickerSelB, rebuildB);
        }
      }

      function scOpenCardPicker() {
        var modal = document.getElementById('scCardPickerModal');
        if (!modal) return;
        modal.style.display = '';
        // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º —á—Ç–æ–±—ã –æ—Ç—Ä–∏—Å–æ–≤–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫
        scSetPickerMode(window._scPickerMode || 'single');
      }
      window.scOpenCardPicker = scOpenCardPicker;

      function scCloseCardPicker() {
        var modal = document.getElementById('scCardPickerModal');
        if (modal) modal.style.display = 'none';
      }
      window.scCloseCardPicker = scCloseCardPicker;

      function scApplyCardPicker() {
        if (window._scPickerMode === 'single') {
          var selA = window._scPickerSelA || window._scLastRequestId;
          window._scLastRequestId = selA || window._scLastRequestId;
          window._scRequestId2 = null;
        } else {
          var selA2 = window._scPickerSelA || window._scLastRequestId;
          var selB2 = window._scPickerSelB;
          if (selA2) window._scLastRequestId = selA2;
          window._scRequestId2 = (selB2 && selB2 !== selA2) ? selB2 : null;
        }
        scUpdateCardPickerLabel();
        scCloseCardPicker();
      }
      window.scApplyCardPicker = scApplyCardPicker;
      // ‚îÄ‚îÄ /Card Picker ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

      // –ö–Ω–æ–ø–∫–∞ ¬´–ü–æ–¥—Ä–æ–±–Ω–µ–µ¬ª –≤ –ø—Ä–æ–º–æ Soul Chat
      (function() {
        var btn = document.getElementById('scMoreBtn');
        var content = document.getElementById('scMoreContent');
        var textEl = document.getElementById('scMoreBtnText');
        if (!btn || !content) return;
        btn.addEventListener('click', function() {
          if (content.style.display === 'none') {
            content.style.display = 'block';
            if (textEl) textEl.textContent = (typeof t === 'function' ? t('scMoreBtnCollapse') : '–°–≤–µ—Ä–Ω—É—Ç—å ‚Üë');
          } else {
            content.style.display = 'none';
            if (textEl) textEl.textContent = (typeof t === 'function' ? t('scMoreBtnText') : '–ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üì');
          }
        });
      })();

      // –ö–Ω–æ–ø–∫–∞ ¬´–ö—É–ø–∏—Ç—å 24—á –¥–æ—Å—Ç—É–ø¬ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Soul Chat
      (function() {
        var btn = document.getElementById('scPageBuyDayBtn');
        var statusEl = document.getElementById('scPageBuyDayStatus');
        if (!btn) return;
        btn.addEventListener('click', async function() {
          btn.disabled = true; btn.textContent = '‚è≥ –°–æ–∑–¥–∞—é —Å—Å—ã–ª–∫—É‚Ä¶';
          var apiBase  = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
          var initData = getInitData();
          if (!apiBase || !initData) { btn.disabled = false; btn.textContent = '‚ö° –û—Ç–∫—Ä—ã—Ç—å Soul Chat –Ω–∞ 24—á ‚Äî $2.99'; return; }
          try {
            var r = await fetch(apiBase + '/api/soul-chat/buy-day', {
              method: 'POST', headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData },
              body: JSON.stringify({ initData: initData })
            });
            var j = await r.json().catch(function(){ return {}; });
            if (j && j.checkout_url) {
              try { sessionStorage.setItem('soul_chat_return_from_payment', Date.now().toString()); } catch(_) {}
              window.open(j.checkout_url, '_blank');
              if (statusEl) { statusEl.textContent = '–°—Å—ã–ª–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∞ ‚Äî –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –≤–µ—Ä–Ω–∏—Å—å —Å—é–¥–∞'; statusEl.style.display = ''; }
              btn.disabled = false; btn.textContent = '‚ö° –û—Ç–∫—Ä—ã—Ç—å Soul Chat –Ω–∞ 24—á ‚Äî $2.99';
            } else {
              btn.disabled = false; btn.textContent = '‚ö° –û—Ç–∫—Ä—ã—Ç—å Soul Chat –Ω–∞ 24—á ‚Äî $2.99';
              if (statusEl) { statusEl.textContent = j && j.error ? j.error : '–û—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.'; statusEl.style.display = ''; }
            }
          } catch(e) { btn.disabled = false; btn.textContent = '‚ö° –û—Ç–∫—Ä—ã—Ç—å Soul Chat –Ω–∞ 24—á ‚Äî $2.99'; }
        });
      })();

      // –ö–Ω–æ–ø–∫–∞ ¬´–ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫¬ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Soul Chat
      (function() {
        var btn = document.getElementById('scPageGiftBtn');
        if (!btn) return;
        btn.addEventListener('click', async function() {
          btn.disabled = true; btn.textContent = '‚è≥ –ê–∫—Ç–∏–≤–∏—Ä—É—é‚Ä¶';
          var apiBase  = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
          var initData = getInitData();
          if (!apiBase || !initData) { btn.disabled = false; btn.textContent = 'üéÅ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å'; return; }
          try {
            var r = await fetch(apiBase + '/api/soul-chat/activate-gift', {
              method:'POST', headers:{'Content-Type':'application/json'},
              body: JSON.stringify({ initData: initData })
            });
            var j = await r.json().catch(function(){ return {}; });
            if (j && (j.ok || j.success)) {
              initSoulChatPage();
            } else {
              btn.disabled = false; btn.textContent = 'üéÅ –ü–æ–ª—É—á–∏—Ç—å 24 —á–∞—Å–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ';
              alert(j && j.error ? j.error : '–û—à–∏–±–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏');
            }
          } catch(e) { btn.disabled = false; btn.textContent = 'üéÅ –ü–æ–ª—É—á–∏—Ç—å 24 —á–∞—Å–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ'; }
        });
      })();

      // –î–æ–±–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é Soul Chat (–≥–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è)
      function scPageAddMsg(role, text) {
        var historyEl = document.getElementById('scPageHistory');
        if (!historyEl) return;
        var isUser = (role === 'user');
        var wrap = document.createElement('div');
        wrap.className = isUser ? 'sc-msg-user' : 'sc-msg-soul';
        var bubble = document.createElement('div');
        bubble.className = isUser ? 'sc-bubble-user' : 'sc-bubble-soul';
        bubble.textContent = text;
        wrap.appendChild(bubble);
        historyEl.appendChild(wrap);
        var chatEl = document.getElementById('scPageChat');
        if (chatEl) chatEl.scrollTop = chatEl.scrollHeight;
      }

      // –ö–Ω–æ–ø–∫–∞ ¬´–°–ø—Ä–æ—Å–∏—Ç—å¬ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Soul Chat
      (function() {
        var sendBtn   = document.getElementById('scPageSendBtn');
        var questionEl = document.getElementById('scPageQuestion');
        var statusEl   = document.getElementById('scPageStatus');
        if (!sendBtn || !questionEl) return;

        sendBtn.addEventListener('click', async function() {
          var question = questionEl.value.trim();
          if (!question) return;
          var apiBase  = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
          var initData = getInitData();
          if (!apiBase || !initData) return;

          scPageAddMsg('user', question);
          questionEl.value = '';
          questionEl.blur();
          sendBtn.disabled = true;
          if (statusEl) { statusEl.textContent = 'üßò –°–ª—É—à–∞—é –¥—É—à—É‚Ä¶'; statusEl.style.display = ''; }

          try {
            var resp = await fetchWithTimeout(apiBase + '/api/soul-chat', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData },
              body: JSON.stringify({
                initData: initData,
                question: question,
                request_id: window._scLastRequestId || '',
                request_id_2: window._scRequestId2 || ''
              })
            }, 20000);
            var json = await resp.json().catch(function(){ return {}; });
            var answer = (json && json.data && json.data.answer) || (json && json.answer) || null;
            if (answer) {
              scPageAddMsg('soul', answer);
              // –û–±–Ω–æ–≤–ª—è–µ–º –∫—ç—à –∏—Å—Ç–æ—Ä–∏–∏ –≤ localStorage
              try {
                var cacheKey = 'scHistory_' + (window._tgUserId || 'anon');
                var cached = JSON.parse(localStorage.getItem(cacheKey) || '[]');
                cached.push({ question: question, answer: answer, created_at: new Date().toISOString() });
                localStorage.setItem(cacheKey, JSON.stringify(cached.slice(-50)));
              } catch(ex) {}
            } else if (json && json.error) {
              scPageAddMsg('soul', '‚ùå ' + json.error);
              if (!json.success) setTimeout(function(){ initSoulChatPage(); }, 1200);
            } else {
              scPageAddMsg('soul', '‚ùå –û—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.');
            }
          } catch(e) {
            scPageAddMsg('soul', '‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.');
          } finally {
            sendBtn.disabled = false;
            if (statusEl) statusEl.style.display = 'none';
          }
        });

        // –°—á—ë—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤
        var charHintEl = document.getElementById('scPageCharHint');
        questionEl.addEventListener('input', function() {
          var len = questionEl.value.length;
          if (charHintEl) charHintEl.textContent = len > 10 ? len + ' —Å–∏–º–≤.' : '';
        });

        // Ctrl+Enter/Cmd+Enter –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
        questionEl.addEventListener('keydown', function(e) {
          if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') sendBtn.click();
        });
      })();
      // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

      // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
      function goToPage(pageId) {
        if (!pageId) {
          console.warn('[goToPage] pageId –ø—É—Å—Ç–æ–π ‚Äî –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ homePage');
          pageId = 'homePage';
        }
        var currentPage = document.querySelector('.page.active');
        
        if (tg && tg.MainButton && tg.MainButton.hide) tg.MainButton.hide();
        // –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–Ω–æ–ø–∫—É –æ–ø–ª–∞—Ç—ã –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
        ensurePayButtonText();
        
        var target = document.getElementById(pageId);
        if (!target) {
          console.warn('[goToPage] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞:', pageId, '‚Äî –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ homePage');
          target = document.getElementById('homePage');
          if (!target) return;
        }
        // –°–Ω–∞—á–∞–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ü–µ–ª–µ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Äî –±–µ–∑ –∫–∞–¥—Ä–∞ ¬´–≤—Å–µ —Å–∫—Ä—ã—Ç—ã¬ª (—É–±–∏—Ä–∞–µ—Ç –ø—Ä—ã–∂–æ–∫ –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ Soul Chat –∏ –¥—Ä.)
        target.classList.add('active');
        target.setAttribute('role', 'main');
        document.querySelectorAll('.page').forEach(function(page) {
          if (page !== target) {
            page.classList.remove('active');
            page.removeAttribute('role');
          }
        });
        // –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π —Å–∫—Ä—ã–≤–∞–µ–º –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ –µ—Å–ª–∏ –æ–Ω –æ—Å—Ç–∞–ª—Å—è –≤–∏–¥–∏–º—ã–º
        var obp = document.getElementById('onboardingPage');
        if (obp && obp.style.display !== 'none') obp.style.display = 'none';
        // –°–±—Ä–æ—Å —Å–∫—Ä–æ–ª–ª–∞ —É .page-scroll —Ü–µ–ª–µ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ—Å–ª–µ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏, —á—Ç–æ–±—ã –Ω–µ –¥–µ—Ä–≥–∞–ª–æ)
        try {
          var scrollArea = document.querySelector('#' + pageId + ' .page-scroll');
          if (scrollArea) {
            scrollArea.scrollTop = 0;
          }
          if (pageId === 'soulChatPage') {
            var scChat = document.getElementById('scPageChat');
            if (scChat) scChat.scrollTop = 0;
          }
        } catch(e) {}
        if (pageId === 'formPage' && userTariff === 'master') loadForWhoSelect();
        if (pageId === 'formPage') loadSavedProfileForForm();
        if (pageId === 'homePage' && typeof loadReferralStats === 'function') loadReferralStats();
        if (pageId === 'profilePage' && typeof loadProfilePage === 'function') loadProfilePage();
        // paymentPage —Ç–µ–ø–µ—Ä—å overlay ‚Äî –∑–¥–µ—Å—å –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
        // Soul Chat –±–ª–æ–∫ —É–¥–∞–ª—ë–Ω —Å–æ successPage ‚Äî initSoulChat –≤—ã–∑—ã–≤–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ
        if (pageId === 'soulChatPage') initSoulChatPage();
        if (document.getElementById('previewNav') && document.getElementById('previewNav').classList.contains('show')) {
          document.querySelectorAll('.preview-nav button').forEach(function(btn) {
            btn.classList.remove('active');
          });
          var pageMap = { 'homePage': 'home', 'formPage': 'form', 'paymentPage': 'payment', 'loadingPage': 'loading', 'successPage': 'success', 'heroesPage': 'heroes', 'paymentThanksPage': 'payment' };
          var activeBtn = document.querySelector('.preview-nav button[data-page="' + (pageMap[pageId] || '') + '"]');
          if (activeBtn) activeBtn.classList.add('active');
        }
      }
      // –î–µ–ª–∞–µ–º goToPage –≥–ª–æ–±–∞–ª—å–Ω–æ–π ‚Äî –Ω—É–∂–Ω–æ –¥–ª—è onclick-–∞—Ç—Ä–∏–±—É—Ç–æ–≤ (–∫–Ω–æ–ø–∫–∞ –ü–æ–º–æ—â—å, –∫–Ω–æ–ø–∫–∏ –Ω–∞–∑–∞–¥)
      window.goToPage = goToPage;
      window.returnToPage = null;
      function goBack() {
        var target = window.returnToPage || 'homePage';
        window.returnToPage = null;
        goToPage(target);
      }
      window.goBack = goBack;
      function goToProfileFrom(from) { window.returnToPage = from; goToPage('profilePage'); }
      function goToMasterPlanFrom(from) {
        window.returnToPage = from;
        goToPage('profilePage');
        setTimeout(function() {
          var el = document.getElementById('planCardMaster');
          if (el) el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }, 200);
      }
      window.goToMasterPlanFrom = goToMasterPlanFrom;
      function goToHeroesFrom(from) { window.returnToPage = from; goToPage('heroesPage'); initHeroesPage(); }
      function goToHelpFrom(from) { window.returnToPage = from; goToPage('helpPage'); }
      window.goToProfileFrom = goToProfileFrom;
      window.goToHeroesFrom = goToHeroesFrom;
      window.goToHelpFrom = goToHelpFrom;

      // –°–≤–æ—Ä–∞—á–∏–≤–∞–µ–º—ã–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –±–ª–æ–∫
      var referralToggleBtn = document.getElementById('referralToggleBtn');
      if (referralToggleBtn) {
        referralToggleBtn.addEventListener('click', function() {
          var body = document.getElementById('referralBody');
          var chevron = document.getElementById('referralToggleChevron');
          if (!body) return;
          var isOpen = body.style.display !== 'none';
          body.style.display = isOpen ? 'none' : 'block';
          if (chevron) chevron.style.transform = isOpen ? '' : 'rotate(90deg)';
          if (!isOpen && typeof loadReferralStats === 'function') loadReferralStats();
        });
      }

      // –†–µ–¥–∏—Ä–µ–∫—Ç —Å HOT: –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å ?payment=success –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É ¬´–°–ø–∞—Å–∏–±–æ –∑–∞ –æ–ø–ª–∞—Ç—É¬ª
      var search = typeof window.location !== 'undefined' && window.location.search ? window.location.search : '';
      var paymentThanksMsg = document.getElementById('paymentThanksMessage');
      if (search.indexOf('payment=success') !== -1) {
        goToPage('paymentThanksPage');
        var requestIdMatch = search.match(/request_id=([^&\s]+)/);
        var thanksRequestId = requestIdMatch ? decodeURIComponent(requestIdMatch[1]) : null;

        // –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –æ–ø–ª–∞—Ç—ã –∏–∑ localStorage (—Å–æ—Ö—Ä–∞–Ω–∏–ª–∏ –ø–µ—Ä–µ–¥ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º –Ω–∞ HOT)
        var pendingPayment = null;
        try {
          var _pp = localStorage.getItem('pending_payment_type');
          if (_pp) { pendingPayment = JSON.parse(_pp); localStorage.removeItem('pending_payment_type'); }
        } catch(e) {}
        var isSubPaymentImmediate = pendingPayment && pendingPayment.type === 'subscription'
          && pendingPayment.ts && (Date.now() - pendingPayment.ts) < 30 * 60 * 1000; // –Ω–µ —Å—Ç–∞—Ä—à–µ 30 –º–∏–Ω

        if (isSubPaymentImmediate) {
          // –°—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –ø–æ–¥–ø–∏—Å–∫–∏ ‚Äî –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è API
          var subName = pendingPayment.plan_name || (
            pendingPayment.plan_key === 'plan_basic' ? 'Basic' :
            pendingPayment.plan_key === 'plan_plus' ? 'Plus' : '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è');
          var ptTitle = document.getElementById('paymentThanksTitle');
          var ptSubtitle = document.getElementById('paymentThanksSubtitle');
          var ptHint = document.getElementById('paymentThanksHint');
          var ptBackBtn = document.getElementById('paymentThanksBackBtn');
          if (ptTitle) ptTitle.textContent = t('subActivated');
          if (ptSubtitle) ptSubtitle.textContent = subName;
          if (paymentThanksMsg) paymentThanksMsg.innerHTML =
            t('subscriptionActive').replace('‚Äî', '<br>').replace('–ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å', '–ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å üé∂') ||
            ('–¢–≤–æ–π –ø–ª–∞–Ω <strong>' + subName + '</strong> –∞–∫—Ç–∏–≤–µ–Ω.<br><span style="opacity:0.7">–¢—Ä–µ–∫–∏ –∏ Soul Chat –¥–æ—Å—Ç—É–ø–Ω—ã.</span>');
          if (ptHint) {
            ptHint.style.display = '';
            ptHint.textContent = '–ï—Å–ª–∏ —Ç–∞—Ä–∏—Ñ –Ω–µ –æ–±–Ω–æ–≤–∏–ª—Å—è ‚Äî –æ–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–ª–∏ –∑–∞–∫—Ä–æ–π –∏ –æ—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.';
          }
          if (ptBackBtn) {
            ptBackBtn.textContent = t('subBtnProfile');
            ptBackBtn.onclick = function() {
              goToPage('profilePage');
              setTimeout(function() { if (typeof loadProfilePage === 'function') loadProfilePage(); }, 400);
            };
          }
        }

        (async function checkPaymentAndConfirm() {
          if (!thanksRequestId) {
            if (!isSubPaymentImmediate) {
              var ptTitle = document.getElementById('paymentThanksTitle');
              var ptSub = document.getElementById('paymentThanksSubtitle');
              var ptBack = document.getElementById('paymentThanksBackBtn');
              if (paymentThanksMsg) paymentThanksMsg.textContent = t('songInProgress');
              if (ptTitle) ptTitle.textContent = typeof t === 'function' ? t('paymentThanks') : '–°–ø–∞—Å–∏–±–æ –∑–∞ –æ–ø–ª–∞—Ç—É';
              if (ptSub) ptSub.textContent = typeof t === 'function' ? t('thanksSubtitle') : '–∑–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞';
              if (ptBack) { ptBack.textContent = (typeof t === 'function' ? t('paymentThanksBackToForm') : '–°–æ–∑–¥–∞—Ç—å —Å–≤–æ—é –ø–µ—Å–Ω—é'); ptBack.onclick = function() { goToPage('formPage'); }; }
            }
            return;
          }
          var apiBase = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
          var initData = (tg && tg.initData) ? tg.initData : (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.initData) || '';
          if (!apiBase || !initData) {
            if (paymentThanksMsg && !isSubPaymentImmediate) paymentThanksMsg.textContent = t('songInProgress');
            return;
          }
          try {
            var payStatus = '';
            var payMode = '';
            var isSub = isSubPaymentImmediate;

            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –æ–∂–∏–¥–∞–µ–º—ã–π plan_sku –ø–æ plan_key –∏–∑ localStorage
            var LOCAL_PLAN_SKU_MAP = { plan_basic: 'soul_basic_sub', plan_plus: 'soul_plus_sub', plan_master: 'master_monthly' };
            var expectedPlanSku = (pendingPayment && pendingPayment.plan_key)
              ? (LOCAL_PLAN_SKU_MAP[pendingPayment.plan_key] || null)
              : null;

            // ‚îÄ‚îÄ –î–ª—è –ø–æ–¥–ø–∏—Å–æ–∫: –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ–º claim (–±–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏) –∏ –ø–æ–≤—Ç–æ—Ä—è–µ–º –¥–æ —É—Å–ø–µ—Ö–∞ ‚îÄ‚îÄ
            if (isSubPaymentImmediate && thanksRequestId) {
              (async function runClaimLoop() {
                var maxClaimAttempts = 25;
                var claimIntervalMs = 1500;
                for (var ci = 0; ci < maxClaimAttempts; ci++) {
                  try {
                    var claimResp = await fetch(apiBase + '/api/subscription/claim', {
                      method: 'POST',
                      headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData },
                      body: JSON.stringify({ request_id: thanksRequestId, initData: initData })
                    });
                    var claimJson = await claimResp.json().catch(function(){ return {}; });
                    if (claimJson && claimJson.success) {
                      console.log('[sub] claim ok:', claimJson.status, 'plan:', claimJson.plan_sku);
                      var curPage = document.querySelector('.page.active');
                      if (curPage && curPage.id === 'profilePage' && typeof loadProfilePage === 'function') {
                        setTimeout(function() { loadProfilePage(); }, 200);
                      }
                      return;
                    }
                    if (claimResp.status !== 202) break;
                  } catch(claimErr) {
                    console.warn('[sub] claim attempt', ci, claimErr && claimErr.message);
                  }
                  if (ci < maxClaimAttempts - 1) await new Promise(function(r){ setTimeout(r, claimIntervalMs); });
                }
              })();
            }

            // ‚îÄ‚îÄ –ü–æ–ª–ª–∏–Ω–≥ payment_status (–≤–µ–±—Ö—É–∫ –ø—É—Ç—å) ‚îÄ‚îÄ
            var maxAttempts = isSubPaymentImmediate ? 20 : 5;
            var delayMs = 3000;
            for (var attempt = 0; attempt < maxAttempts; attempt++) {
              try {
                var statusResp = await fetchWithTimeout(apiBase + '/api/payments/hot/status?request_id=' + encodeURIComponent(thanksRequestId), {
                  headers: { 'X-Telegram-Init': initData }
                }, 10000);
                var statusJson = await statusResp.json().catch(function() { return {}; });
                payStatus = statusJson && statusJson.data && statusJson.data.payment_status ? String(statusJson.data.payment_status).toLowerCase() : '';
                payMode = statusJson && statusJson.data && statusJson.data.mode ? String(statusJson.data.mode) : '';
                if (payStatus === 'paid') break;
              } catch (statusErr) {
                console.warn('[payment/return] status attempt', attempt, statusErr && statusErr.message);
              }
              if (attempt < maxAttempts - 1) await new Promise(function(r) { setTimeout(r, delayMs); });
            }
            isSub = isSubPaymentImmediate || (payMode && payMode.startsWith('sub_'));

            if (payStatus === 'paid') {
              // –ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ: confirm + –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å subscription/status (–∑–∞–ø—É—Å–∫–∞–µ—Ç repair_on_read)
              fetch(apiBase + '/api/payments/hot/confirm', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData },
                body: JSON.stringify({ request_id: thanksRequestId, initData: initData })
              }).catch(function(){});
              if (isSub) {
                fetch(apiBase + '/api/subscription/status', { headers: { 'X-Telegram-Init': initData } }).catch(function(){});
              }
            } else if (isSub && thanksRequestId) {
              // –í–µ–±—Ö—É–∫ –Ω–µ –ø—Ä–∏—à—ë–ª –∑–∞ 60 —Å–µ–∫ ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ claim (—Å—Ç—Ä–∞—Ö–æ–≤–∫–∞)
              try {
                await fetch(apiBase + '/api/subscription/claim', {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData },
                  body: JSON.stringify({ request_id: thanksRequestId, initData: initData })
                });
              } catch(e) {}
            }

            // ‚îÄ‚îÄ –ñ–¥—ë–º –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω—É–∂–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ –≤ –ë–î, –æ–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É ‚îÄ‚îÄ
            // –í–∞–∂–Ω–æ: –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π plan_sku (–∑–∞—â–∏—Ç–∞ –æ—Ç –∞–ø–≥—Ä–µ–π–¥–∞ Basic‚ÜíPlus,
            // –∫–æ–≥–¥–∞ subscription_active=true –µ—â—ë –æ—Ç Basic, –Ω–æ Plus –µ—â—ë –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω)
            if (isSub) {
              var expectedSkuFromMode = payMode.startsWith('sub_') ? payMode.slice(4) : null;
              var targetPlanSku = expectedSkuFromMode || expectedPlanSku || null;
              var subCheckDelayMs = 800;
              for (var si = 0; si < 20; si++) {
                if (si > 0) await new Promise(function(r){ setTimeout(r, subCheckDelayMs); });
                try {
                  var subCheckResp = await fetch(apiBase + '/api/subscription/status', { headers: { 'X-Telegram-Init': initData } });
                  var subCheckJson = await subCheckResp.json().catch(function(){ return {}; });
                  // –ï—Å–ª–∏ –∑–Ω–∞–µ–º –æ–∂–∏–¥–∞–µ–º—ã–π –ø–ª–∞–Ω ‚Äî –∂–¥—ë–º –∏–º–µ–Ω–Ω–æ –µ–≥–æ (–∞–ø–≥—Ä–µ–π–¥ Basic‚ÜíPlus)
                  var planMatched = subCheckJson && subCheckJson.subscription_active &&
                    (!targetPlanSku || subCheckJson.plan_sku === targetPlanSku);
                  if (planMatched) {
                    var ptB2 = document.getElementById('paymentThanksBackBtn');
                    if (ptB2 && !ptB2._subConfirmed) {
                      ptB2._subConfirmed = true;
                      ptB2.textContent = '‚úì ' + t('subBtnProfile');
                    }
                    // –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è ‚Äî –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å –µ—Å–ª–∏ –æ–Ω –æ—Ç–∫—Ä—ã—Ç
                    var curPg = document.querySelector('.page.active');
                    if (curPg && curPg.id === 'profilePage' && typeof loadProfilePage === 'function') {
                      setTimeout(function() { loadProfilePage(); }, 300);
                    }
                    break;
                  }
                } catch(e2) {}
              }
            }
            // –ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–ª–∏ –ø—Ä–æ –ø–æ–¥–ø–∏—Å–∫—É –∏–∑ localStorage ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ mode
            if (!isSubPaymentImmediate) {
              var isSubFromMode = payMode.startsWith('sub_');
              if (isSubFromMode && paymentThanksMsg) {
                var sn = payMode.includes('basic') ? 'Basic' : payMode.includes('plus') ? 'Plus' : '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è';
                var ptT = document.getElementById('paymentThanksTitle');
                var ptS = document.getElementById('paymentThanksSubtitle');
                var ptH = document.getElementById('paymentThanksHint');
                var ptB = document.getElementById('paymentThanksBackBtn');
                if (ptT) ptT.textContent = t('subActivated');
                if (ptS) ptS.textContent = sn;
                paymentThanksMsg.innerHTML = 'Plan <strong>' + sn + '</strong> ‚Äî ' + t('subscriptionActive');
                if (ptH) ptH.style.display = 'none';
                if (ptB) { ptB.textContent = t('subBtnProfile'); ptB.onclick = function() { goToPage('profilePage'); setTimeout(function() { if(typeof loadProfilePage==='function') loadProfilePage(); }, 600); }; }
              } else if (paymentThanksMsg) {
                paymentThanksMsg.textContent = t('songInProgressConfirmed');
              }
            }
          } catch (e) {
            console.warn('[payment/return] –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–ø–ª–∞—Ç—ã:', e && e.message);
            if (paymentThanksMsg) {
              paymentThanksMsg.innerHTML = (isSubPaymentImmediate || (payMode && String(payMode).startsWith('sub_')))
                ? '–û–ø–ª–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∞. –ï—Å–ª–∏ —Ç–∞—Ä–∏—Ñ –Ω–µ –æ–±–Ω–æ–≤–∏–ª—Å—è ‚Äî <strong>–æ–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É</strong> –∏–ª–∏ –∑–∞–∫—Ä–æ–π –∏ –æ—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.'
                : t('songInProgress');
            }
            var ptHint = document.getElementById('paymentThanksHint');
            if (ptHint) { ptHint.style.display = ''; ptHint.textContent = '–î–µ–Ω—å–≥–∏ —Å–ø–∏—Å–∞–ª–∏—Å—å? –¢–∞—Ä–∏—Ñ –ø–æ–¥—Ç—è–Ω–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ –º–∏–Ω—É—Ç—ã. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –Ω–∞–ø–∏—à–∏ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.'; }
          }
        })().catch(function(err) {
          console.warn('[payment/return] –ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞:', err && err.message);
          var msg = document.getElementById('paymentThanksMessage');
          var hint = document.getElementById('paymentThanksHint');
          if (msg) msg.innerHTML = '–û–ø–ª–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∞. –ï—Å–ª–∏ —Ç–∞—Ä–∏—Ñ –Ω–µ –æ–±–Ω–æ–≤–∏–ª—Å—è ‚Äî <strong>–æ–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É</strong> –∏–ª–∏ –∑–∞–∫—Ä–æ–π –∏ –æ—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.';
          if (hint) { hint.style.display = ''; hint.textContent = '–î–µ–Ω—å–≥–∏ —Å–ø–∏—Å–∞–ª–∏—Å—å? –¢–∞—Ä–∏—Ñ –ø–æ–¥—Ç—è–Ω–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ –º–∏–Ω—É—Ç—ã. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –Ω–∞–ø–∏—à–∏ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.'; }
        });
        if (window.history && window.history.replaceState) {
          var cleanUrl = window.location.pathname + (window.location.hash || '');
          window.history.replaceState({}, '', cleanUrl);
        }
      }
      var paymentThanksBackBtn = document.getElementById('paymentThanksBackBtn');
      if (paymentThanksBackBtn) paymentThanksBackBtn.addEventListener('click', function() {
        goToPage('formPage');
      });

      // –û—Ç–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É ¬´–û–ø–ª–∞—Ç–∏—Ç—å —Å–µ–π—á–∞—Å¬ª –∏–∑ –±–æ—Ç–∞: ?request_id=X –±–µ–∑ payment=success
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—ã–π —ç–∫—Ä–∞–Ω
      if (search.indexOf('payment=success') === -1) {
        var botRidMatch = search.match(/request_id=([^&\s]+)/);
        var botRequestId = botRidMatch ? decodeURIComponent(botRidMatch[1]) : null;
        if (botRequestId) {
          (async function checkBotPendingRequest() {
            try {
              var apiBase = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
              var initData = (tg && tg.initData) ? tg.initData : '';
              if (!apiBase || !initData) return;
              var resp = await fetchWithTimeout(apiBase + '/api/payments/hot/status?request_id=' + encodeURIComponent(botRequestId), {
                headers: { 'X-Telegram-Init': initData }
              }, 10000);
              var json = await resp.json().catch(function() { return {}; });
              var gs = json && json.data ? String(json.data.generation_status || '').toLowerCase() : '';
              var ps = json && json.data ? String(json.data.payment_status || '').toLowerCase() : '';
              if (gs === 'pending_payment' || ps === 'requires_payment') {
                // –ó–∞—è–≤–∫–∞ –µ—â—ë –Ω–µ –æ–ø–ª–∞—á–µ–Ω–∞ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–≤–µ—Ä–ª–µ–π –æ–ø–ª–∞—Ç—ã
                pendingPaymentRequestId = botRequestId;
                var mode = json.data && json.data.mode ? String(json.data.mode) : 'single';
                if (mode === 'couple') pendingPaymentSku = 'couple_song';
                else if (mode === 'transit') pendingPaymentSku = 'transit_energy_song';
                else pendingPaymentSku = 'single_song';
                showPaymentOverlay();
              } else if (['completed', 'processing', 'suno_processing', 'lyrics_generated', 'astro_calculated'].includes(gs)
                         || ['paid', 'subscription_active', 'gift_used', 'promo_applied'].includes(ps)) {
                // –ó–∞—è–≤–∫–∞ —É–∂–µ –≤ —Ä–∞–±–æ—Ç–µ ‚Äî –Ω–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ, –æ—Å—Ç–∞—ë–º—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ
                console.log('[BotLink] –ó–∞—è–≤–∫–∞ —É–∂–µ –æ–ø–ª–∞—á–µ–Ω–∞/–≤ —Ä–∞–±–æ—Ç–µ:', gs, ps);
              }
            } catch (e) {
              console.warn('[BotLink] –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞—è–≤–∫–∏:', e.message);
            }
          })();
        }
      }

      // –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
      var startBtn = document.getElementById('startBtn');
      if (startBtn) startBtn.addEventListener('click', function() {
        fillFormFromProfile(userProfile || (tg && tg.initDataUnsafe && tg.initDataUnsafe.user));
        goToPage('formPage');
      });


      var stepNext = document.getElementById('stepNext');

      function applyTheme() {
        // –§–æ–Ω –∏ –∫–æ–Ω—Ç—Ä–∞—Å—Ç –∑–∞—Ç–æ—á–µ–Ω—ã –ø–æ–¥ —Ç—ë–º–Ω—É—é —Ç–µ–º—É; —Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ –¥–∞—ë—Ç –Ω–µ—á–∏—Ç–∞–µ–º—ã–µ —Ü–≤–µ—Ç–∞ ‚Äî –≤—Å–µ–≥–¥–∞ —Ç—ë–º–Ω–∞—è.
        document.body.classList.remove('theme-light', 'theme-dark');
        document.body.classList.add('theme-dark');
      }
      applyTheme();
      try {
        if (tg && tg.onEvent) tg.onEvent('themeChanged', applyTheme);
      } catch (_) {}

      function toggleFormsByMode(mode) {
        var p2Accordion = document.getElementById('secondPersonAccordion');
        var transitAccordion = document.getElementById('transitAccordion');
        if (p2Accordion) p2Accordion.style.display = 'none';
        if (transitAccordion) transitAccordion.style.display = 'none';
        if (mode === 'couple') {
          if (p2Accordion) {
            p2Accordion.style.display = 'block';
            // –ê–≤—Ç–æ-–æ—Ç–∫—Ä—ã—Ç—å –µ—Å–ª–∏ –µ—â—ë –∑–∞–∫—Ä—ã—Ç
            setTimeout(function() { openSecondPersonAccordion(); }, 80);
          }
        } else if (mode === 'transit') {
          if (transitAccordion) {
            transitAccordion.style.display = 'block';
            // –ê–≤—Ç–æ-–æ—Ç–∫—Ä—ã—Ç—å –µ—Å–ª–∏ –µ—â—ë –∑–∞–∫—Ä—ã—Ç
            setTimeout(function() { openTransitAccordion(); }, 80);
          }
        }
        if (mode !== 'couple') {
          var p2r = document.getElementById('person2Relationship');
          if (p2r) p2r.value = '';
          // –ó–∞–∫—Ä—ã—Ç—å –∞–∫–∫–æ—Ä–¥–µ–æ–Ω –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–µ–∂–∏–º–∞
          if (p2AccOpen) toggleSecondPersonAccordion();
        }
        if (mode !== 'transit') {
          // –ó–∞–∫—Ä—ã—Ç—å –∞–∫–∫–æ—Ä–¥–µ–æ–Ω —ç–Ω–µ—Ä–≥–∏–∏ –º–æ–º–µ–Ω—Ç–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–µ–∂–∏–º–∞
          if (transitAccOpen) toggleTransitAccordion();
        }
      }

      function updateStepUI() {
        document.querySelectorAll('.mode-btn').forEach(function(btn) { btn.style.display = ''; });
      }

      function setMode(mode) {
        selectedMode = mode || 'single';
        document.querySelectorAll('.mode-btn').forEach(function(btn) {
          btn.classList.toggle('active', btn.getAttribute('data-mode') === selectedMode);
        });
        toggleFormsByMode(selectedMode);
        // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ä–µ–∂–∏–º ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—è —Ñ–æ—Ä–º—ã, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ —Å—Ä–∞–∑—É –∑–∞–ø–æ–ª–Ω–∏—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
        try {
          var formWrap = document.getElementById('formFieldsWrap');
          if (formWrap && formWrap.classList.contains('pfw-collapsed')) {
            formWrap.classList.remove('pfw-collapsed');
            formWrap.classList.remove('no-anim');
          }
        } catch (e) { /* –±–µ–∑–æ–ø–∞—Å–Ω–æ */ }
        updatePaymentUiFromCatalog();
      }

      function validateStep(step) {
        if (step === 1) {
          selectedMode = selectedMode || 'single';
          return true;
        }
        if (step === 2) {
          var nameEl = document.getElementById('name');
          var name = (nameEl ? nameEl.value : '').trim();
          var birthdateEl = document.getElementById('birthdate');
          var birthdate = birthdateEl ? birthdateEl.value : '';
          var birthplaceEl = document.getElementById('birthplace');
          var birthplace = (birthplaceEl ? birthplaceEl.value : '').trim();
          var unknownEl = document.getElementById('unknown');
          var birthtimeEl = document.getElementById('birthtime');
          var birthtimeVal = (unknownEl && unknownEl.checked) ? 'ok' : (birthtimeEl ? birthtimeEl.value : '');
          var genderEl = document.getElementById('gender');
          var gender = genderEl ? genderEl.value : '';
          var langEl = document.getElementById('language');
          var language = langEl ? langEl.value : '';
          if (name.length < 2) { alert(t('alertNameShort')); return false; }
          if (!birthdate) { alert(t('alertBirthdate')); return false; }
          if (birthplace.length < 3) { alert(t('alertBirthplace')); return false; }
          var birthplaceField = document.getElementById('birthplace');
          var hasCoords = birthplaceField && birthplaceField.getAttribute('data-lat') && birthplaceField.getAttribute('data-lon');
          var hasPlaceSelected = birthplaceField && birthplaceField.getAttribute('data-place-selected');
          var fromProfile = birthplaceField && birthplaceField.getAttribute('data-from-profile') === '1';
          if (!hasCoords && !hasPlaceSelected && !fromProfile) {
            var birthplaceHint = document.getElementById('birthplaceHint');
            if (birthplaceHint) birthplaceHint.style.display = 'block';
            try { birthplaceField && birthplaceField.scrollIntoView({ behavior: 'smooth', block: 'center' }); } catch (_) {}
            alert(t('alertBirthplaceHint'));
            return false;
          }
          if (!birthtimeVal) { alert(t('alertBirthtime')); return false; }
          if (!gender) { alert(t('alertGender')); return false; }
          if (!language) { alert(t('alertLanguage')); return false; }
          if (selectedMode === 'couple') {
            var name2 = (document.getElementById('name2').value || '').trim();
            var birthdate2 = document.getElementById('birthdate2').value;
            var birthplace2El = document.getElementById('birthplace2');
            var birthplace2 = birthplace2El ? birthplace2El.value.trim() : '';
            var bp2PlaceSelected = birthplace2El && birthplace2El.getAttribute('data-place-selected');
            var bp2FromProfile = birthplace2El && birthplace2El.getAttribute('data-from-profile') === '1';
            if (name2.length < 2) { alert(t('alertName2Short')); return false; }
            if (!birthdate2) { alert(t('alertBirthdate2')); return false; }
            if (birthplace2.length < 3) { alert(t('alertBirthplace2')); return false; }
            if (!bp2PlaceSelected && !bp2FromProfile) {
              alert(t('alertBirthplaceHint'));
              try { birthplace2El && birthplace2El.scrollIntoView({ behavior: 'smooth', block: 'center' }); } catch (_) {}
              return false;
            }
            var birthtime2Val = (document.getElementById('unknown2') && document.getElementById('unknown2').checked) ? 'ok' : (document.getElementById('birthtime2') ? document.getElementById('birthtime2').value : '');
            if (!birthtime2Val) { alert(t('alertBirthtime2')); return false; }
            if (!(document.getElementById('gender2') && document.getElementById('gender2').value)) { alert(t('alertGender2')); return false; }
          }
          if (selectedMode === 'transit') {
            var tDate = document.getElementById('transitDate').value;
            var tLoc = document.getElementById('transitLocation').value.trim();
            if (!tDate) { alert(t('alertTransitDate')); return false; }
            if (!tLoc) { alert(t('alertTransitLocation')); return false; }
          }
          return true;
        }
        if (step === 3) {
          var request = document.getElementById('request').value.trim();
          if (request.length < 5) { alert(t('alertRequestShort')); return false; }
          return true;
        }
        return true;
      }

      document.querySelectorAll('.mode-btn').forEach(function(btn) {
        btn.addEventListener('click', function(e) {
          if (e.target.classList.contains('mode-info')) return;
          setMode(this.getAttribute('data-mode'));
        });
      });

      // –¢—É–ª—Ç–∏–ø –¥–ª—è –∫–Ω–æ–ø–æ–∫ —Ä–µ–∂–∏–º–∞
      (function() {
        var tooltip = document.getElementById('modeTooltip');
        var tooltipTimer = null;
        function hideTooltip() {
          if (tooltip) tooltip.style.display = 'none';
          clearTimeout(tooltipTimer);
        }
        document.querySelectorAll('.mode-info').forEach(function(icon) {
          icon.addEventListener('click', function(e) {
            e.stopPropagation();
            if (!tooltip) return;
            var descEl = this.closest('.mode-btn').querySelector('.mode-desc');
            var text = descEl ? descEl.textContent.trim() : '';
            if (!text) return;
            tooltip.textContent = text;
            var rect = this.getBoundingClientRect();
            tooltip.style.display = 'block';
            var tw = tooltip.offsetWidth || 180;
            var left = Math.min(rect.left, window.innerWidth - tw - 12);
            tooltip.style.left = Math.max(8, left) + 'px';
            tooltip.style.top = (rect.bottom + 8) + 'px';
            clearTimeout(tooltipTimer);
            tooltipTimer = setTimeout(hideTooltip, 3000);
          });
        });
        document.addEventListener('click', hideTooltip);
      })();

      function toggleQuickPicker(e) {
        if (e) e.stopPropagation();
        var btn = document.getElementById('quickPickerBtn');
        var sheet = document.getElementById('quickPickerSheet');
        var arrow = document.getElementById('quickPickerArrow');
        if (!btn || !sheet) return;
        var isOpen = sheet.style.display !== 'none';
        if (isOpen) {
          sheet.style.display = 'none';
          btn.classList.remove('open');
          if (arrow) arrow.style.transform = '';
        } else {
          sheet.style.display = 'block';
          btn.classList.add('open');
          if (arrow) arrow.style.transform = 'rotate(180deg)';
        }
      }
      // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–π scope ‚Äî onclick-–∞—Ç—Ä–∏–±—É—Ç —Ç—Ä–µ–±—É–µ—Ç window.*
      window.toggleQuickPicker = toggleQuickPicker;

      (function() {
        document.addEventListener('click', function(e) {
          var sheet = document.getElementById('quickPickerSheet');
          var btn = document.getElementById('quickPickerBtn');
          if (!sheet || sheet.style.display === 'none') return;
          var box = document.querySelector('.request-input-box');
          if (box && box.contains(e.target)) return;
          sheet.style.display = 'none';
          if (btn) btn.classList.remove('open');
          var arrow = document.getElementById('quickPickerArrow');
          if (arrow) arrow.style.transform = '';
        });

        setTimeout(function() {
          var sheet = document.getElementById('quickPickerSheet');
          if (!sheet) return;
          sheet.querySelectorAll('.quick-item').forEach(function(item) {
            item.addEventListener('click', function() {
              var requestField = document.getElementById('request');
              if (requestField) {
                requestField.value = this.getAttribute('data-text') || '';
                requestField.focus();
              }
              sheet.style.display = 'none';
              var btn = document.getElementById('quickPickerBtn');
              if (btn) btn.classList.remove('open');
              var arrow = document.getElementById('quickPickerArrow');
              if (arrow) arrow.style.transform = '';
            });
          });
        }, 300);
      })();

      if (stepNext) stepNext.addEventListener('click', async function() {
        if (!validateStep(1) || !validateStep(2) || !validateStep(3)) return;
        var mode = selectedMode || 'single';
        var name1 = document.getElementById('name').value.trim();
        var birthdate1 = document.getElementById('birthdate').value;
        var birthplace1 = document.getElementById('birthplace').value.trim();
        var birthtime1 = document.getElementById('birthtime').value;
        var birthtimeUnknown1 = document.getElementById('unknown').checked;
        var gender1 = document.getElementById('gender').value;
        var requestText = document.getElementById('request').value.trim();
        if (name1.length < 2) { alert(t('alertNameShort')); return; }
        if (!birthdate1) { alert(t('alertBirthdate')); return; }
        if (birthplace1.length < 3) { alert(t('alertBirthplace')); return; }
        if (!birthtimeUnknown1 && !birthtime1) { alert(t('alertBirthtime')); return; }
        if (!gender1) { alert(t('alertGender')); return; }
        if (requestText.length < 15) { alert(t('alertRequestLong')); return; }
        var songLangEl = document.getElementById('language');
        var songLanguage = (songLangEl && songLangEl.value) ? songLangEl.value : 'ru';
        var payload = {
          mode: mode,
          person1: { name: name1, birthdate: birthdate1, birthplace: birthplace1, birthtime: birthtimeUnknown1 ? null : birthtime1, birthtimeUnknown: birthtimeUnknown1, gender: gender1 },
          request: requestText,
          language: songLanguage
        };
        // –ï—Å–ª–∏ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥ ‚Äî –ø–µ—Ä–µ–¥–∞—ë–º –µ–≥–æ —Å–µ—Ä–≤–µ—Ä—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –î–û 402
        if (activePromo && activePromo.code) {
          payload.promo_code = activePromo.code;
        }
        var preferredStyleEl = document.getElementById('requestPreferredStyle');
        if (preferredStyleEl && preferredStyleEl.value.trim()) {
          payload.preferred_style = preferredStyleEl.value.trim();
        }
        var birthplaceField = document.getElementById('birthplace');
        if (birthplaceField && birthplaceField.getAttribute('data-lat') && birthplaceField.getAttribute('data-lon')) {
          payload.person1.birthplaceLat = parseFloat(birthplaceField.getAttribute('data-lat'));
          payload.person1.birthplaceLon = parseFloat(birthplaceField.getAttribute('data-lon'));
        }
        var forWho = document.getElementById('forWho');
        if (forWho && forWho.value && userTariff === 'master') payload.clientId = forWho.value;
        if (mode === 'couple') {
          var name2 = document.getElementById('name2').value.trim();
          var birthdate2 = document.getElementById('birthdate2').value;
          var birthplace2 = document.getElementById('birthplace2').value.trim();
          var birthtime2 = document.getElementById('birthtime2').value;
          var birthtimeUnknown2 = document.getElementById('unknown2').checked;
          var gender2 = document.getElementById('gender2').value;
          if (name2.length < 2) { alert(t('alertName2Short')); return; }
          if (!birthdate2) { alert(t('alertBirthdate2')); return; }
          if (birthplace2.length < 3) { alert(t('alertBirthplace2')); return; }
          if (!birthtimeUnknown2 && !birthtime2) { alert(t('alertBirthtime2')); return; }
          if (!gender2) { alert(t('alertGender2')); return; }
          var p2relField = document.getElementById('person2Relationship');
          var relationship2 = p2relField ? p2relField.value.trim() : '';
          payload.person2 = { name: name2, birthdate: birthdate2, birthplace: birthplace2, birthtime: birthtimeUnknown2 ? null : birthtime2, birthtimeUnknown: birthtimeUnknown2, gender: gender2 };
          if (relationship2) payload.person2.relationship = relationship2;
          var bp2Field = document.getElementById('birthplace2');
          if (bp2Field && bp2Field.getAttribute('data-lat') && bp2Field.getAttribute('data-lon')) {
            payload.person2.birthplaceLat = parseFloat(bp2Field.getAttribute('data-lat'));
            payload.person2.birthplaceLon = parseFloat(bp2Field.getAttribute('data-lon'));
          }
        }
        if (mode === 'transit') {
          var transitDate = document.getElementById('transitDate').value;
          var transitTime = document.getElementById('transitTime').value;
          var transitLocation = (document.getElementById('transitLocation') && document.getElementById('transitLocation').value) ? document.getElementById('transitLocation').value.trim() : '';
          var transitIntent = (document.getElementById('transitIntent') && document.getElementById('transitIntent').value) ? document.getElementById('transitIntent').value.trim() : null;
          if (!transitDate) { alert(t('alertTransitDate')); return; }
          if (!transitLocation) { alert(t('alertTransitLocation')); return; }
          payload.transit = { date: transitDate, time: transitTime || null, location: transitLocation, intent: transitIntent || null };
        }
        var apiBase = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
        if (!apiBase) { alert(t('alertNoApi')); return; }
        var initData = getInitData();
        if (!initData) { alert(t('alertOpenFromBot')); return; }
        payload.initData = initData;

        try {
          var checkRes = await fetch(apiBase + '/api/check-chat', { method: 'POST', headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData }, body: JSON.stringify({ initData: initData }) });
          var checkJson = await checkRes.json().catch(function() { return {}; });
          if (checkJson.chat_available === false) {
            alert(checkJson.error || '–°–Ω–∞—á–∞–ª–∞ –Ω–∞–∂–º–∏—Ç–µ ¬´–°—Ç–∞—Ä—Ç¬ª –≤ –±–æ—Ç–µ (–∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ), –∑–∞—Ç–µ–º –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É —Å–Ω–æ–≤–∞.');
            return;
          }
        } catch (checkErr) {
          // –µ—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ ‚Äî –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É
        }

        var stepNextOriginalText = stepNext.textContent;
        stepNext.disabled = true;
        stepNext.textContent = t('sending');
        try {
          var controller = new AbortController();
          var timeoutId = setTimeout(function() { controller.abort(); }, 90000);
          var response = await fetch(apiBase + '/api/submit-request', { method: 'POST', headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData }, body: JSON.stringify(payload), signal: controller.signal });
          clearTimeout(timeoutId);
          var result = await response.json().catch(function() { return {}; });

          if (response.ok && result.ok && result.requestId && !result.payment_required) {
            if (typeof scCurrentRequestId !== 'undefined') scCurrentRequestId = result.requestId;
            if (tg && tg.disableClosingConfirmation) try { tg.disableClosingConfirmation(); } catch (e) {}
            showConfirmOverlay('‚ú® –ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞, ' + name1 + '!', '–ü–µ—Å–Ω—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –Ω–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ. –ö–æ–≥–¥–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞ ‚Äî –ø—Ä–∏–¥—ë—Ç —Å—é–¥–∞ –≤ —ç—Ç–æ—Ç —á–∞—Ç —Å –±–æ—Ç–æ–º.<br><br>–ú–æ–∂–µ—à—å –∑–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–ø–∞–¥—ë—Ç. –°–ø–∞—Å–∏–±–æ, —á—Ç–æ –æ—Å—Ç–∞—ë—à—å—Å—è —Å –Ω–∞–º–∏ ‚ù§Ô∏è<br><br><span style="font-size:0.9em;color:rgba(255,255,255,0.6)">–ù–µ—Ç –ø–µ—Å–Ω–∏? –ù–∞–ø–∏—à–∏ –±–æ—Ç—É ¬´–ø–µ—Å–Ω—è –Ω–µ –ø—Ä–∏—à–ª–∞¬ª.</span>', function() { goToPage('successPage'); });
          } else if ((response.status === 402 || (result && result.payment_required)) && result.requestId) {
            console.log('[Submit] 402 Payment Required ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ–º –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã');
            console.log('[Submit] requestId:', result.requestId, 'sku:', result.sku);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º ID –∑–∞—è–≤–∫–∏ –∏ SKU –¥–ª—è –æ–ø–ª–∞—Ç—ã
            pendingPaymentRequestId = result.requestId;
            pendingPaymentSku = result.sku || getCurrentSku();
            activePromo = null; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø—Ä–æ–º–æ–∫–æ–¥ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–≤–µ—Å—Ç–∏ –Ω–æ–≤—ã–π)
            
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã –∏ –æ–±–Ω–æ–≤–ª—è–µ–º UI
            showPaymentOverlay();
            updatePaymentUiFromCatalog();
            setPaymentStatus('', '');
          } else {
            var errMsg = result.error || result.message || (typeof t === 'function' ? t('submitFailed') : '–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É.');
            if (response.status === 503) errMsg = t('alertServerSleep');
            stepNext.disabled = false;
            stepNext.textContent = stepNextOriginalText;
            alert(errMsg);
            return;
          }
        } catch (e) {
          stepNext.disabled = false;
          stepNext.textContent = stepNextOriginalText;
          if (e && e.name === 'AbortError') { alert(t('alertServerSleep')); return; }
          var catchMsg = (e && e.message) ? (typeof t === 'function' ? t('submitFailed') + ' ' + e.message : e.message) : (typeof t === 'function' ? t('submitFailed') : '–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É.');
          alert(catchMsg);
          return;
        }
        stepNext.disabled = false;
        stepNext.textContent = stepNextOriginalText;
      });
      setMode('single');
      updateStepUI();
      // ‚îÄ‚îÄ Overlay: –∫–Ω–æ–ø–∫–∞ ¬´–ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥¬ª ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      var payOvPromoBtn = document.getElementById('payOvPromoBtn');
      if (payOvPromoBtn) payOvPromoBtn.addEventListener('click', applyPromoCode);
      var payOvPromoToggle = document.getElementById('payOvPromoToggle');
      if (payOvPromoToggle) payOvPromoToggle.addEventListener('click', function() {
        var section = document.getElementById('payOvPromoSection');
        if (!section) return;
        var isOpen = section.style.display !== 'none';
        section.style.display = isOpen ? 'none' : 'block';
        payOvPromoToggle.textContent = isOpen ? '‚ñ∏ –ï—Å—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥?' : '‚ñæ –°–≤–µ—Ä–Ω—É—Ç—å';
      });

      // ‚îÄ‚îÄ Overlay: –∫–Ω–æ–ø–∫–∞ ¬´–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å¬ª (–ø—Ä–æ–º–æ–∫–æ–¥ 100%) ‚îÄ‚îÄ
      var payOvPromoConfirmBtn = document.getElementById('payOvPromoConfirmBtn');
      if (payOvPromoConfirmBtn) payOvPromoConfirmBtn.addEventListener('click', async function() {
        console.log('[Promo Confirm] –ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–∞');
        
        if (!pendingPaymentRequestId) {
          setPaymentStatus('‚ùå –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞—è–≤–∫–∏', 'error');
          return;
        }
        
        if (!activePromo || Number(activePromo.amount_after) !== 0) {
          setPaymentStatus('‚ùå –ü—Ä–æ–º–æ–∫–æ–¥ –Ω–µ –¥–∞—ë—Ç 100% —Å–∫–∏–¥–∫—É', 'error');
          return;
        }
        
        var apiBase = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
        var initData = getInitData();
        if (!apiBase || !initData) {
          setPaymentStatus('‚ùå –ù–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º', 'error');
          return;
        }
        
        payOvPromoConfirmBtn.disabled = true;
        payOvPromoConfirmBtn.textContent = '‚è≥ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é...';
        setPaymentStatus('üéÅ –ü—Ä–∏–º–µ–Ω—è—é –ø—Ä–æ–º–æ–∫–æ–¥...', 'ok');
        
        try {
          var resp = await fetch(apiBase + '/api/payments/hot/create', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData },
            body: JSON.stringify({
              request_id: pendingPaymentRequestId,
              promo_code: activePromo.code,
              initData: initData
            })
          });
          
          var json = await resp.json().catch(function() { return {}; });
          
          if (!resp.ok || !json.success) {
            throw new Error(json.error || json.message || '–û—à–∏–±–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–∞');
          }
          
          // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø—Ä–æ–º–æ–∫–æ–¥ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –¥–∞–ª –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø
          if (json.free_applied || (json.provider === 'promo' && Number(json.amount) === 0)) {
            console.log('[Promo Confirm] –ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–º–µ–Ω—ë–Ω —É—Å–ø–µ—à–Ω–æ');
            pendingPaymentRequestId = null;
            pendingPaymentSku = null;
            activePromo = null;
            
            hidePaymentOverlay();
            showConfirm(
              'üéÅ –ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–º–µ–Ω—ë–Ω!',
              '–¢–≤–æ—è –ø–µ—Å–Ω—è —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏ —Å–∫–æ—Ä–æ –ø—Ä–∏–¥—ë—Ç –≤ –±–æ—Ç.<br><br>üéµ –ü–µ—Å–Ω—è –ø—Ä–∏–¥—ë—Ç –≤ —ç—Ç–æ—Ç —á–∞—Ç. –ú–æ–∂–µ—à—å –∑–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–ø–∞–¥—ë—Ç.'
            );
          } else {
            throw new Error('–ü—Ä–æ–º–æ–∫–æ–¥ –Ω–µ –¥–∞–ª –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø');
          }
          
        } catch (e) {
          console.error('[Promo Confirm] –û—à–∏–±–∫–∞:', e);
          setPaymentStatus('‚ùå ' + (e.message || '–û—à–∏–±–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–∞'), 'error');
          payOvPromoConfirmBtn.disabled = false;
          payOvPromoConfirmBtn.textContent = 'üéÅ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å';
        }
      });

      // ‚îÄ‚îÄ Overlay: –∫–Ω–æ–ø–∫–∞ ¬´–ü–æ–ª—É—á–∏—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫–ª—é—á¬ª (–ø–µ—Ä–≤—ã–π –ø–æ–¥–∞—Ä–æ—á–Ω—ã–π –¥–æ—Å—Ç—É–ø) ‚îÄ‚îÄ
      var payOvFreeClaimBtn = document.getElementById('payOvFreeClaimBtn');
      if (payOvFreeClaimBtn) payOvFreeClaimBtn.addEventListener('click', async function() {
        console.log('[Free Trial] –ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ "–ü–æ–ª—É—á–∏—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫–ª—é—á"');
        console.log('[Free Trial] pendingPaymentRequestId:', pendingPaymentRequestId);
        
        if (!pendingPaymentRequestId) {
          setPaymentStatus('‚ùå –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞—è–≤–∫–∏. –ó–∞–ø–æ–ª–Ω–∏ —Ñ–æ—Ä–º—É –∑–∞–Ω–æ–≤–æ.', 'error');
          return;
        }
        
        var apiBase = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
        var initData = getInitData();
        if (!apiBase || !initData) {
          setPaymentStatus('‚ùå –ù–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º. –ü—Ä–æ–≤–µ—Ä—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.', 'error');
          return;
        }
        
        payOvFreeClaimBtn.disabled = true;
        payOvFreeClaimBtn.textContent = '‚è≥ –ê–∫—Ç–∏–≤–∏—Ä—É—é –ø–æ–¥–∞—Ä–æ–∫...';
        setPaymentStatus('üéÅ –ê–∫—Ç–∏–≤–∏—Ä—É—é –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø...', 'ok');
        
        try {
          var resp = await fetch(apiBase + '/api/free-trial/claim', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData },
            body: JSON.stringify({ request_id: pendingPaymentRequestId, initData: initData })
          });
          var json = await resp.json().catch(function() { return {}; });
          
          if (resp.ok && json.ok) {
            console.log('[Free Trial] –ü–æ–¥–∞—Ä–æ–∫ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ');
            pendingPaymentRequestId = null;
            pendingPaymentSku = null;
            showConfirm('üéÅ –ü–µ—Ä–≤–∞—è –ø–µ—Å–Ω—è –≤ –ø–æ–¥–∞—Ä–æ–∫!', '–°–æ–∑–¥–∞—ë–º —Ç–≤–æ—é –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –ø–µ—Å–Ω—é.<br><br>üéµ –ü–µ—Å–Ω—è –ø—Ä–∏–¥—ë—Ç –≤ —ç—Ç–æ—Ç —á–∞—Ç. –ú–æ–∂–µ—à—å –∑–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–ø–∞–¥—ë—Ç.');
          } else {
            var errMsg = json.error || json.message || '–ù–µ —É–¥–∞–ª–æ—Å—å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∞—Ä–æ–∫';
            console.warn('[Free Trial] –û—à–∏–±–∫–∞:', errMsg);
            setPaymentStatus('‚ùå ' + errMsg, 'error');
            payOvFreeClaimBtn.disabled = false;
            payOvFreeClaimBtn.textContent = 'üéÅ –ü–æ–ª—É—á–∏—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –ø–µ—Å–Ω—é';
          }
        } catch (e) {
          console.error('[Free Trial] –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:', e);
          setPaymentStatus('‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞.', 'error');
          payOvFreeClaimBtn.disabled = false;
          payOvFreeClaimBtn.textContent = 'üéÅ –ü–æ–ª—É—á–∏—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –ø–µ—Å–Ω—é';
        }
      });

      // ‚îÄ‚îÄ Overlay: –∫–Ω–æ–ø–∫–∞ ¬´–ù–∞–∑–∞–¥¬ª ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      var payOvBackBtn = document.getElementById('payOvBackBtn');
      if (payOvBackBtn) payOvBackBtn.addEventListener('click', function() {
        hidePaymentOverlay();
        if (tg && tg.MainButton && tg.MainButton.hide) tg.MainButton.hide();
      });

      // ‚îÄ‚îÄ Overlay: –∫–Ω–æ–ø–∫–∞ ¬´–Ø —É–∂–µ –æ–ø–ª–∞—Ç–∏–ª¬ª ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      var payOvCheckBtn = document.getElementById('payOvCheckBtn');
      if (payOvCheckBtn) payOvCheckBtn.addEventListener('click', async function() {
        if (!pendingPaymentRequestId) { setPaymentStatus('–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞—è–≤–∫–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏', 'error'); return; }
        var apiBase = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
        var initData = getInitData();
        if (!apiBase || !initData) { setPaymentStatus('–ù–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º', 'error'); return; }
        payOvCheckBtn.disabled = true;
        payOvCheckBtn.textContent = '‚è≥ –ü—Ä–æ–≤–µ—Ä—è—é...';
        setPaymentStatus('–ü—Ä–æ–≤–µ—Ä—è—é —Å—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã...', 'warn');
        try {
          var st = '';
          for (var i = 0; i < 5; i++) {
            var r = await fetchWithTimeout(apiBase + '/api/payments/hot/status?request_id=' + encodeURIComponent(pendingPaymentRequestId), { headers: { 'X-Telegram-Init': initData } }, 10000);
            var j = await r.json().catch(function() { return {}; });
            st = j && j.data && j.data.payment_status ? String(j.data.payment_status).toLowerCase() : '';
            if (st === 'paid') break;
            if (i < 4) await new Promise(function(res) { setTimeout(res, 1500); });
          }
          if (st === 'paid') {
            setPaymentStatus('‚úÖ –û–ø–ª–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞! –ó–∞–ø—É—Å–∫–∞–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ...', 'ok');
            await fetch(apiBase + '/api/payments/hot/confirm', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData },
              body: JSON.stringify({ request_id: pendingPaymentRequestId, initData: initData })
            }).catch(function(){});
            pendingPaymentRequestId = null; pendingPaymentSku = null;
            setTimeout(function() { hidePaymentOverlay(); showConfirm('‚ú® –û–ø–ª–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞!', '–ó–∞–ø—É—Å–∫–∞–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–≤–æ–µ–π –ø–µ—Å–Ω–∏.<br><br>üéµ –ü–µ—Å–Ω—è –ø—Ä–∏–¥—ë—Ç –≤ —ç—Ç–æ—Ç —á–∞—Ç. –ú–æ–∂–µ—à—å –∑–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–ø–∞–¥—ë—Ç.'); }, 1200);
          } else {
            setPaymentStatus('–û–ø–ª–∞—Ç–∞ –ø–æ–∫–∞ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞. –ü–æ–¥–æ–∂–¥–∏ –Ω–µ–º–Ω–æ–≥–æ –∏ –ø—Ä–æ–≤–µ—Ä—å —Å–Ω–æ–≤–∞.', 'warn');
          }
        } catch(e) {
          setPaymentStatus('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏: ' + (e && e.message ? e.message : '–ø–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞'), 'error');
        } finally {
          payOvCheckBtn.disabled = false;
          payOvCheckBtn.textContent = '‚úÖ –Ø —É–∂–µ –æ–ø–ª–∞—Ç–∏–ª ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å';
        }
      });

      // ‚îÄ‚îÄ Overlay: –∫–Ω–æ–ø–∫–∞ ¬´–û–ø–ª–∞—Ç–∏—Ç—å¬ª ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      var payBtn = document.getElementById('payOvPayBtn');
      if (payBtn) payBtn.addEventListener('click', async function() {
        console.log('[HOT Pay] –ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ –æ–ø–ª–∞—Ç—ã');
        
        if (payBtn.disabled) {
          console.log('[HOT Pay] –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∫–ª–∏–∫');
          return;
        }
        
        if (!pendingPaymentRequestId) {
          console.error('[HOT Pay] –ö–†–ò–¢–ò–ß–ù–û: –ù–µ—Ç pendingPaymentRequestId!');
          setPaymentStatus('‚ùå –°–Ω–∞—á–∞–ª–∞ –∑–∞–ø–æ–ª–Ω–∏ —Ñ–æ—Ä–º—É –∏ –æ—Ç–ø—Ä–∞–≤—å –∑–∞—è–≤–∫—É', 'error');
          return;
        }
        
        var apiBase = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
        if (!apiBase) { 
          console.error('[HOT Pay] –ù–µ—Ç API –±–∞–∑–æ–≤–æ–≥–æ URL');
          alert(t('alertNoApi')); 
          return; 
        }
        
        var initData = getInitData();
        if (!initData) { 
          console.error('[HOT Pay] –ù–µ—Ç initData - –ø—Ä–æ–±–ª–µ–º–∞ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π Telegram');
          
          if (window.demoMode) {
            console.log('[HOT Pay] –î–µ–º–æ-—Ä–µ–∂–∏–º: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏');
            alert('üí° –î–µ–º–æ-—Ä–µ–∂–∏–º\n\n' +
                  '–î–ª—è –æ–ø–ª–∞—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ Telegram –±–æ—Ç–∞ @YupSoul_bot\n\n' +
                  'üì± –ö–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å:\n' +
                  '1. –û—Ç–∫—Ä–æ–π—Ç–µ @YupSoul_bot –≤ Telegram\n' +
                  '2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é (‚ò∞) –∏–ª–∏ "–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"\n' +
                  '3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∏ –æ–ø–ª–∞—Ç–∏—Ç–µ');
            return;
          }
          
          var errorMessage = '‚ö†Ô∏è –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Telegram!\n\n' +
                            'üîß –†–µ—à–µ–Ω–∏—è:\n' +
                            '‚Ä¢ –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ –±–æ—Ç–∞ @YupSoul_bot (–∫–Ω–æ–ø–∫–∞ –º–µ–Ω—é ‚ò∞)\n' +
                            '‚Ä¢ –û–±–Ω–æ–≤–∏—Ç–µ Telegram –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏\n' +
                            '‚Ä¢ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Telegram\n' +
                            '‚Ä¢ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ web.telegram.org\n\n' +
                            'üí° –í–∞—à–∞ –≤–µ—Ä—Å–∏—è Telegram: ' + (tg && tg.version ? tg.version : '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞');
          
          if (confirm(errorMessage + '\n\n–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ?')) {
            window.demoMode = true;
            alert('üí° –î–µ–º–æ-—Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω\n\n–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É, –Ω–æ –æ–ø–ª–∞—Ç–∞ –±—É–¥–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.');
          }
          return; 
        }
        
        console.log('[HOT Pay] –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã, apiBase:', apiBase);
        console.log('[HOT Pay] pendingPaymentRequestId:', pendingPaymentRequestId);
        console.log('[HOT Pay] Telegram WebApp –¥–æ—Å—Ç—É–ø–µ–Ω:', !!(window.Telegram && window.Telegram.WebApp));
        
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ –¥–ª—è –æ–ø–ª–∞—Ç—ã
        if (tg && tg.version) {
          var version = parseFloat(tg.version) || 0;
          if (version < 6.1) {
            console.warn('[HOT Pay] –í–µ—Ä—Å–∏—è Telegram (' + tg.version + ') –º–æ–∂–µ—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –æ–ø–ª–∞—Ç—É');
            alert('‚ö†Ô∏è –î–ª—è –æ–ø–ª–∞—Ç—ã —Ç—Ä–µ–±—É–µ—Ç—Å—è –±–æ–ª–µ–µ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è Telegram!\n\n' +
                  'üì± –í–∞—à–∞ –≤–µ—Ä—Å–∏—è: ' + tg.version + '\n' +
                  '‚úÖ –¢—Ä–µ–±—É–µ—Ç—Å—è: 6.1 –∏–ª–∏ –≤—ã—à–µ\n\n' +
                  'üîÑ –û–±–Ω–æ–≤–∏—Ç–µ Telegram –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞');
            return;
          }
        }

        // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ –ü–†–û–í–ï–†–ï–ù–ù–´–ô –ø—Ä–æ–º–æ–∫–æ–¥ (activePromo). –ï—Å–ª–∏ –≤ –ø–æ–ª–µ —Ç–µ–∫—Å—Ç, –Ω–æ activePromo=null ‚Äî
        // –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–º–æ–∫–æ–¥ –±—ã–ª –æ—Ç–∫–ª–æ–Ω—ë–Ω, –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ.
        var promoCode = activePromo ? activePromo.code : null;
        var hotPayload = {
          request_id: pendingPaymentRequestId,
          sku: pendingPaymentSku,
          promo_code: promoCode || null,
          initData: initData
        };

        payBtn.disabled = true;
        payBtn.textContent = t('sending');
        console.log('[HOT Pay] –ù–∞—á–∏–Ω–∞–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞, payload:', hotPayload);
        
        try {
          var hotCtrl = new AbortController();
          var hotTimeout = setTimeout(function() { hotCtrl.abort(); }, 30000);
          console.log('[HOT Pay] –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞:', apiBase + '/api/payments/hot/create');
          
          var hotResp = await fetch(apiBase + '/api/payments/hot/create', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData },
            body: JSON.stringify(hotPayload),
            signal: hotCtrl.signal
          });
          clearTimeout(hotTimeout);
          
          console.log('[HOT Pay] –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞, —Å—Ç–∞—Ç—É—Å:', hotResp.status, hotResp.ok);
          var hotJson = await hotResp.json().catch(function(e) { 
            console.error('[HOT Pay] –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON:', e); 
            return {}; 
          });
          console.log('[HOT Pay] –î–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞:', hotJson);

          if (!hotResp.ok || !hotJson.success) {
            var errorMsg = hotJson.error || '–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –æ–ø–ª–∞—Ç—É HOT';
            console.error('[HOT Pay] –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞:', errorMsg);
            console.error('[HOT Pay] –°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞:', hotResp.status, hotResp.statusText);
            
            if (hotResp.status === 401) {
              errorMsg = '–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (401). –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω–æ –∏–∑ Telegram –±–æ—Ç–∞!';
              console.error('[HOT Pay] –ö–†–ò–¢–ò–ß–ù–û: –ü—Ä–æ–±–ª–µ–º–∞ —Å initData - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –Ω–µ –∏–∑ Telegram');
            } else if (hotResp.status === 403) {
              errorMsg = '–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω (403). –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞.';
            } else if (hotResp.status >= 500) {
              errorMsg = '–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (' + hotResp.status + '). –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.';
            }
            
            throw new Error(errorMsg);
          }
          // –ö–†–ò–¢–ò–ß–ù–û: –ï—Å–ª–∏ –ø—Ä–æ–º–æ–∫–æ–¥ –¥–∞–ª 100% —Å–∫–∏–¥–∫—É –∏–ª–∏ free_applied ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
          if (hotJson.free_applied || (hotJson.success && hotJson.provider === 'promo' && Number(hotJson.amount) === 0)) {
            console.log('[HOT Pay] –ü—Ä–æ–º–æ–∫–æ–¥ –¥–∞–ª –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è');
            pendingPaymentRequestId = null;
            pendingPaymentSku = null;
            activePromo = null;
            showConfirmOverlay('‚ú® –ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞!', '–ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–º–µ–Ω—ë–Ω! üéÅ<br><br>–ü–µ—Å–Ω—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –Ω–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ ‚Äî –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞, –ø—Ä–∏–¥—ë—Ç —Å—é–¥–∞ –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º. –ú–æ–∂–µ—à—å –∑–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–ø–∞–¥—ë—Ç. –°–ø–∞—Å–∏–±–æ ‚ù§Ô∏è<br><br><span style="font-size:0.9em;color:rgba(255,255,255,0.6)">–ù–µ—Ç –ø–µ—Å–Ω–∏? –ù–∞–ø–∏—à–∏ –±–æ—Ç—É ¬´–ø–µ—Å–Ω—è –Ω–µ –ø—Ä–∏—à–ª–∞¬ª.</span>', function() { goToPage('successPage'); });
            return;
          }
          if (!hotJson.checkout_url) {
            console.error('[HOT Pay] Checkout URL –Ω–µ –ø–æ–ª—É—á–µ–Ω –≤ –æ—Ç–≤–µ—Ç–µ:', hotJson);
            throw new Error('Checkout URL –Ω–µ –ø–æ–ª—É—á–µ–Ω');
          }
          var checkoutUrl = String(hotJson.checkout_url);
          console.log('[HOT Pay] –ü–æ–ª—É—á–µ–Ω checkout_url:', checkoutUrl);
          setPaymentStatus('–û—Ç–∫—Ä—ã–≤–∞—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã...', 'warn');

          var lastCheckoutUrl = checkoutUrl;
          var hintEl = document.getElementById('payOvLinkRow');
          var copyBtn = document.getElementById('payOvCopyBtn');
          if (copyBtn) {
            copyBtn.onclick = function() {
              try {
                navigator.clipboard.writeText(lastCheckoutUrl);
                alert(t('alertLinkCopied'));
              } catch (e) {
                prompt(t('copyLinkPrompt'), lastCheckoutUrl);
              }
            };
          }
          if (hintEl) hintEl.style.display = 'block';

          var opened = false;
          console.log('[HOT Pay] –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å —Å—Å—ã–ª–∫—É –æ–ø–ª–∞—Ç—ã:', checkoutUrl);
          
          try {
            if (window.Telegram && window.Telegram.WebApp && typeof window.Telegram.WebApp.openLink === 'function') {
              console.log('[HOT Pay] –ò—Å–ø–æ–ª—å–∑—É–µ–º Telegram.WebApp.openLink');
              try {
                window.Telegram.WebApp.openLink(checkoutUrl, { try_instant_view: false });
                console.log('[HOT Pay] openLink —Å try_instant_view: false - —É—Å–ø–µ—à–Ω–æ');
              } catch (e1) {
                console.log('[HOT Pay] openLink —Å try_instant_view: false - –æ—à–∏–±–∫–∞:', e1);
                window.Telegram.WebApp.openLink(checkoutUrl);
                console.log('[HOT Pay] openLink –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ - —É—Å–ø–µ—à–Ω–æ');
              }
              opened = true;
            } else {
              console.log('[HOT Pay] Telegram.WebApp.openLink –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
            }
          } catch (linkErr) {
            console.error('[HOT Pay] –û—à–∏–±–∫–∞ Telegram.WebApp.openLink:', linkErr);
          }
          
          if (!opened) {
            console.log('[HOT Pay] –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ window.open');
            var newWindow = window.open(checkoutUrl, '_blank', 'noopener,noreferrer');
            if (newWindow) {
              opened = true;
              console.log('[HOT Pay] window.open - —É—Å–ø–µ—à–Ω–æ');
            } else {
              console.log('[HOT Pay] window.open - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –±—Ä–∞—É–∑–µ—Ä–æ–º');
              // –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ location.href –∫–∞–∫ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤–∞—Ä–∏–∞–Ω—Ç
              console.log('[HOT Pay] –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ location.href');
              try {
                window.location.href = checkoutUrl;
                opened = true;
                console.log('[HOT Pay] location.href - —É—Å–ø–µ—à–Ω–æ');
              } catch (e) {
                console.error('[HOT Pay] location.href - –æ—à–∏–±–∫–∞:', e);
              }
            }
          }
          
          if (!opened) {
            console.error('[HOT Pay] –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫—Ä—ã—Ç—å —Å—Å—ã–ª–∫—É –Ω–∏ –æ–¥–Ω–∏–º —Å–ø–æ—Å–æ–±–æ–º');
            setPaymentStatus('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫—Ä—ã—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ù–∞–∂–º–∏—Ç–µ ¬´–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É¬ª –Ω–∏–∂–µ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.', 'error');
            payBtn.disabled = false;
            payBtn.textContent = t('payWithHot');
            return;
          } else {
            console.log('[HOT Pay] –°—Å—ã–ª–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–∫—Ä—ã—Ç–∞, –Ω–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Ç–∞—Ç—É—Å–∞ –æ–ø–ª–∞—Ç—ã');
          }

          setPaymentStatus(t('hotCheckoutOpened'), 'warn');
          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Äî –Ω–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ webhook –∑–∞–¥–µ—Ä–∂–∏—Ç—Å—è
          var checkBtn = document.getElementById('payOvCheckBtn');
          if (checkBtn) checkBtn.style.display = 'block';
          var maxAttempts = 60;
          var attempt = 0;
          var paid = false;
          while (attempt < maxAttempts) {
            attempt += 1;
            await new Promise(function(resolve) { setTimeout(resolve, 3000); });
            var statusResp = await fetchWithTimeout(apiBase + '/api/payments/hot/status?request_id=' + encodeURIComponent(pendingPaymentRequestId), { headers: { 'X-Telegram-Init': initData } }, 10000);
            var statusJson = await statusResp.json().catch(function() { return {}; });
            var paymentStatus = statusJson && statusJson.data && statusJson.data.payment_status ? String(statusJson.data.payment_status).toLowerCase() : '';
            if (paymentStatus === 'paid') { paid = true; break; }
          }
          if (!paid) {
            setPaymentStatus(t('paymentNotConfirmed'), 'warn');
            payBtn.disabled = false;
            payBtn.textContent = t('payWithHot');
            return;
          }
          setPaymentStatus(t('paymentConfirmed'), 'ok');
          var confirmResp = await fetch(apiBase + '/api/payments/hot/confirm', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData },
            body: JSON.stringify({ request_id: pendingPaymentRequestId, initData: initData })
          });
          if (!confirmResp.ok) throw new Error('–û—à–∏–±–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã (' + confirmResp.status + ')');
          pendingPaymentRequestId = null;
          pendingPaymentSku = null;
          hidePaymentOverlay();
          showConfirm('‚úÖ –û–ø–ª–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞!', '–ó–∞–ø—É—Å–∫–∞–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–≤–æ–µ–π –ø–µ—Å–Ω–∏.<br><br>üéµ –ü–µ—Å–Ω—è –ø—Ä–∏–¥—ë—Ç –≤ —ç—Ç–æ—Ç —á–∞—Ç. –ú–æ–∂–µ—à—å –∑–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–ø–∞–¥—ë—Ç.');
        } catch (error) {
          console.error('[HOT Pay] –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞:', error);
          var msg = (error && error.message) ? String(error.message) : t('errorOp');
          var hint = '';
          if (error.name === 'AbortError') {
            hint = ' –ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è ‚Äî –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.';
          } else if (msg && (msg.toLowerCase().includes('–ø—Ä–æ–º–æ–∫–æ–¥') || msg.toLowerCase().includes('promo'))) {
            // –ü—Ä–æ–º–æ–∫–æ–¥ –Ω–µ –ø–æ–¥–æ—à—ë–ª ‚Äî —á–∏—Å—Ç–∏–º –ø–æ–ª–µ –∏ activePromo —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞–ª —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–ø—ã—Ç–∫–µ
            activePromo = null;
            var promoInputErr = document.getElementById('payOvPromoInput');
            if (promoInputErr) promoInputErr.value = '';
            hint = ' –û–ø–ª–∞—Ç–∏ –±–µ–∑ –ø—Ä–æ–º–æ–∫–æ–¥–∞ –∏–ª–∏ –≤–≤–µ–¥–∏ –¥—Ä—É–≥–æ–π.';
          } else if (msg && msg.includes('fetch')) {
            hint = ' –ü—Ä–æ–≤–µ—Ä—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.';
          }
          setPaymentStatus('‚ùå ' + msg + hint, 'error');
          // –°–∫—Ä–æ–ª–ª–∏–º –æ–≤–µ—Ä–ª–µ–π –Ω–∞–≤–µ—Ä—Ö, —á—Ç–æ–±—ã –æ—à–∏–±–∫–∞ –±—ã–ª–∞ –≤–∏–¥–Ω–∞
          var ovScroll = document.getElementById('paymentOverlay');
          if (ovScroll) ovScroll.scrollTop = 0;
        } finally {
          console.log('[HOT Pay] –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏, –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É');
          payBtn.disabled = false;
          // –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏: —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –≤ HOT Pay (–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥ —É–∂–µ –æ—á–∏—â–µ–Ω –ø—Ä–∏ –æ—à–∏–±–∫–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞)
          var isFreeAfterError = activePromo && Number(activePromo.amount_after) === 0;
          payBtn.textContent = isFreeAfterError ? 'üéÅ –ü–æ–ª—É—á–∏—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ' : 'üí≥ –û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ HOT Pay';
          payBtn.style.background = isFreeAfterError ? 'linear-gradient(135deg,#059669,#10b981)' : 'linear-gradient(135deg,var(--primary-color),var(--secondary-color))';
        }
      });
      
      var goProfileBtn = document.getElementById('goProfileBtn');
      if (goProfileBtn) goProfileBtn.addEventListener('click', function() { goToPage('profilePage'); });
      var goHeroesBtn = document.getElementById('goHeroesBtn');
      if (goHeroesBtn) goHeroesBtn.addEventListener('click', function() { goToPage('heroesPage'); initHeroesPage(); });
      var profileCreateSongBtn = document.getElementById('profileCreateSongBtn');
      if (profileCreateSongBtn) profileCreateSongBtn.addEventListener('click', function() { goToPage('formPage'); });
      var PLAN_PRICES = { plan_basic: '$14.99', plan_plus: '$24.99', plan_master: '$39.99' };
      var PLAN_TRACKS = { plan_basic: '5', plan_plus: '10', plan_master: '30' };
      var PLAN_SKU_MAP = { plan_basic: 'soul_basic_sub', plan_plus: 'soul_plus_sub', plan_master: 'master_monthly' };
      var PLAN_STARS = { plan_basic: '1 150 ‚≠ê', plan_plus: '1 920 ‚≠ê', plan_master: '3 070 ‚≠ê' };

      // ‚îÄ‚îÄ Stars: —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∏–Ω–≤–æ–π—Å–∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      window.payWithStars = async function payWithStars(sku, requestId, btn) {
        var apiBase  = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
        var initData = getInitData ? getInitData() : '';
        if (!apiBase || !initData) { alert('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –û—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ Telegram.'); return; }
        var origText = btn ? btn.textContent : '';
        if (btn) { btn.disabled = true; btn.textContent = '–°–æ–∑–¥–∞—ë–º –∏–Ω–≤–æ–π—Å‚Ä¶'; }
        try {
          var resp = await fetch(apiBase + '/api/payments/stars/invoice', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData },
            body: JSON.stringify({ sku: sku, initData: initData, request_id: requestId || null })
          });
          var data = await resp.json().catch(function() { return {}; });
          if (!data.success || !data.invoice_link) {
            alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∏–Ω–≤–æ–π—Å: ' + (data.error || '–ø–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑'));
            return;
          }
          // –û—Ç–∫—Ä—ã–≤–∞–µ–º –∏–Ω–≤–æ–π—Å Stars —á–µ—Ä–µ–∑ Telegram WebApp
          var tgApp = window.Telegram && window.Telegram.WebApp;
          if (tgApp && typeof tgApp.openInvoice === 'function') {
            tgApp.openInvoice(data.invoice_link, function(status) {
              if (status === 'paid') {
                if (btn) btn.textContent = '‚úÖ –û–ø–ª–∞—á–µ–Ω–æ!';
                setTimeout(function() {
                  var ov = document.getElementById('planConfirmOverlay') || document.getElementById('paymentOverlay');
                  if (ov) ov.style.display = 'none';
                }, 1200);
              } else {
                if (btn) { btn.disabled = false; btn.textContent = origText; }
              }
            });
          } else if (tgApp && typeof tgApp.openLink === 'function') {
            tgApp.openLink(data.invoice_link);
            if (btn) { btn.disabled = false; btn.textContent = origText; }
          } else {
            window.open(data.invoice_link, '_blank');
            if (btn) { btn.disabled = false; btn.textContent = origText; }
          }
        } catch (e) {
          alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ' + (e.message || e));
          if (btn) { btn.disabled = false; btn.textContent = origText; }
        }
      };

      // –ö–Ω–æ–ø–∫–∞ Stars –≤ –æ–≤–µ—Ä–ª–µ–µ —Ä–∞–∑–æ–≤–æ–π –ø–æ–∫—É–ø–∫–∏
      var payOvStarsBtn = document.getElementById('payOvStarsBtn');
      if (payOvStarsBtn) payOvStarsBtn.addEventListener('click', function() {
        var sku = pendingPaymentSku || '';
        if (!sku) { alert('–°–Ω–∞—á–∞–ª–∞ –∑–∞–ø–æ–ª–Ω–∏ —Ñ–æ—Ä–º—É –∑–∞—è–≤–∫–∏.'); return; }
        payWithStars(sku, pendingPaymentRequestId, payOvStarsBtn);
      });

      window.showPlanConfirm = function showPlanConfirm(planKey, planName) {
        var overlay = document.getElementById('planConfirmOverlay');
        var title = document.getElementById('planConfirmTitle');
        var desc = document.getElementById('planConfirmDesc');
        var btn = document.getElementById('planConfirmBtn');
        var starsBtn = document.getElementById('planConfirmStarsBtn');
        if (!overlay) return;
        var price = PLAN_PRICES[planKey] || '';
        var tracks = PLAN_TRACKS[planKey] || '';
        var starsPrice = PLAN_STARS[planKey] || '';
        if (title) title.textContent = planName + (price ? ' ‚Äî ' + price + '/–º–µ—Å' : '');
        if (desc) desc.textContent = (tracks ? tracks + ' –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤ –≤ –º–µ—Å—è—Ü.' : '') + ' –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ HOT Pay. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Å—Ç–∞—ë—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º.';
        if (starsBtn && starsPrice) {
          starsBtn.textContent = '‚≠ê –û–ø–ª–∞—Ç–∏—Ç—å –∑–≤—ë–∑–¥–∞–º–∏ ‚Äî ' + starsPrice;
          starsBtn.disabled = false;
          var skuForStars = PLAN_SKU_MAP[planKey] || '';
          starsBtn.onclick = function() { payWithStars(skuForStars, null, starsBtn); };
        }
        if (btn) {
          btn.textContent = '–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ ‚Üí';
          btn.onclick = async function() {
            btn.textContent = '–ó–∞–≥—Ä—É–∂–∞–µ–º‚Ä¶';
            btn.disabled = true;
            try {
              var apiBase = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
              var initData = getInitData ? getInitData() : '';
              var resp = await fetch(apiBase + '/api/payments/subscription/checkout', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData },
                body: JSON.stringify({ initData: initData, plan_key: planKey, name: (userProfile && userProfile.name) || '' })
              });
              var data = await resp.json().catch(function() { return {}; });
              if (data.already_subscribed) {
                overlay.style.display = 'none';
                alert('–£ —Ç–µ–±—è —É–∂–µ –∞–∫—Ç–∏–≤–Ω–∞ —ç—Ç–∞ –ø–æ–¥–ø–∏—Å–∫–∞.');
                return;
              }
              if (!data.success || !data.checkout_url) {
                btn.textContent = '–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ ‚Üí';
                btn.disabled = false;
                alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –æ–ø–ª–∞—Ç—É. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.');
                return;
              }
              overlay.style.display = 'none';
              // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage —á—Ç–æ —ç—Ç–æ –æ–ø–ª–∞—Ç–∞ –ø–æ–¥–ø–∏—Å–∫–∏ ‚Äî –Ω—É–∂–Ω–æ –¥–ª—è —ç–∫—Ä–∞–Ω–∞ –ø–æ—Å–ª–µ –≤–æ–∑–≤—Ä–∞—Ç–∞
              try {
                localStorage.setItem('pending_payment_type', JSON.stringify({
                  type: 'subscription', plan_key: planKey, plan_name: planName, ts: Date.now()
                }));
              } catch(e) {}
              // –û—Ç–∫—Ä—ã–≤–∞–µ–º –æ–ø–ª–∞—Ç—É –±–µ–∑ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
              if (tg && tg.openLink) {
                tg.openLink(data.checkout_url);
              } else {
                window.open(data.checkout_url, '_blank');
              }
            } catch(e) {
              btn.textContent = '–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ ‚Üí';
              btn.disabled = false;
              alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.');
            }
          };
        }
        overlay.style.display = 'flex';
      }

      var planBtnBasic = document.getElementById('planBtnBasic');
      if (planBtnBasic) planBtnBasic.addEventListener('click', function() {
        showPlanConfirm('plan_basic', 'Basic');
      });
      var planBtnPlus = document.getElementById('planBtnPlus');
      if (planBtnPlus) planBtnPlus.addEventListener('click', function() {
        showPlanConfirm('plan_plus', 'Plus');
      });
      var planBtnMaster = document.getElementById('planBtnMaster');
      if (planBtnMaster) planBtnMaster.addEventListener('click', function() {
        showPlanConfirm('plan_master', '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è');
      });

      // –¢—É–ª—Ç–∏–ø—ã –¥–ª—è —Ñ–∏—á —Ç–∞—Ä–∏—Ñ–æ–≤ (.ppc-info)
      (function() {
        var tooltip = document.getElementById('modeTooltip');
        if (!tooltip) return;
        var timer = null;
        function hide() { tooltip.style.display = 'none'; clearTimeout(timer); }
        document.querySelectorAll('.ppc-info').forEach(function(icon) {
          icon.addEventListener('click', function(e) {
            e.stopPropagation();
            var text = this.getAttribute('data-tip') || '';
            if (!text) return;
            tooltip.textContent = text;
            tooltip.style.display = 'block';
            var rect = this.getBoundingClientRect();
            var tw = tooltip.offsetWidth || 220;
            var left = Math.min(rect.left, window.innerWidth - tw - 12);
            tooltip.style.left = Math.max(8, left) + 'px';
            tooltip.style.top = (rect.bottom + 8) + 'px';
            clearTimeout(timer);
            timer = setTimeout(hide, 4000);
          });
        });
      })();
      var profileRefShareBtn = document.getElementById('profileRefShareBtn');
      if (profileRefShareBtn) profileRefShareBtn.addEventListener('click', function() {
        var link = (document.getElementById('profileRefLinkInput') || {}).value || '';
        if (!link) return;
        if (tg && tg.openTelegramLink) {
          tg.openTelegramLink('https://t.me/share/url?url=' + encodeURIComponent(link) + '&text=' + encodeURIComponent('–ü–æ–ø—Ä–æ–±—É–π YupSoul ‚Äî –ø–µ—Ä–≤—É—é –ø–µ—Å–Ω—é –ø–æ–ª—É—á–∏—à—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ'));
        } else {
          try {
            if (navigator.clipboard && navigator.clipboard.writeText) {
              navigator.clipboard.writeText(link);
              profileRefShareBtn.textContent = t('profileShare') + ' ‚úì';
              setTimeout(function() { profileRefShareBtn.textContent = t('profileShare'); }, 2000);
            }
          } catch (e) {}
        }
      });

      // ‚îÄ‚îÄ –ó–ê–ì–†–£–ó–ö–ê –§–û–¢–û –ü–†–û–§–ò–õ–Ø ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      (function setupAvatarUpload() {
        var wrap = document.getElementById('profileAvatarWrap');
        var input = document.getElementById('avatarFileInput');
        var spinner = document.getElementById('profileAvatarSpinner');

        if (!wrap || !input) return;

        wrap.addEventListener('click', function() { input.click(); });
        wrap.addEventListener('keydown', function(e) { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); input.click(); } });

        input.addEventListener('change', function() {
          var file = input.files && input.files[0];
          if (!file) return;
          if (!file.type.startsWith('image/')) { alert('–í—ã–±–µ—Ä–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ'); return; }

          var reader = new FileReader();
          reader.onload = function(e) {
            var src = e.target.result;
            var img = new Image();
            img.onload = function() {
              // –†–µ—Å–∞–π–∑ –¥–æ 256√ó256 —á–µ—Ä–µ–∑ Canvas
              var SIZE = 256;
              var canvas = document.createElement('canvas');
              canvas.width = SIZE; canvas.height = SIZE;
              var ctx = canvas.getContext('2d');
              // –ö—Ä–æ–ø –ø–æ —Ü–µ–Ω—Ç—Ä—É
              var sw = img.width, sh = img.height;
              var side = Math.min(sw, sh);
              var sx = (sw - side) / 2, sy = (sh - side) / 2;
              ctx.drawImage(img, sx, sy, side, side, 0, 0, SIZE, SIZE);
              var base64 = canvas.toDataURL('image/jpeg', 0.85);

              // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–≤—å—é —Å—Ä–∞–∑—É
              var avatarEl = document.getElementById('profileAvatar');
              var initEl   = document.getElementById('profileAvatarInitial');
              if (avatarEl) {
                var existing = avatarEl.querySelector('img');
                if (!existing) { existing = document.createElement('img'); existing.alt='avatar'; avatarEl.insertBefore(existing, avatarEl.firstChild); }
                existing.src = base64; existing.style.display = 'block';
              }
              if (initEl) initEl.style.display = 'none';

              // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä
              var apiBase = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
              var initData = getInitData();
              if (!apiBase || !initData) return;
              if (spinner) { spinner.style.display = 'flex'; }
              fetch(apiBase + '/api/user/avatar', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json', 'X-Telegram-Init': initData },
                body: JSON.stringify({ initData: initData, avatar_base64: base64 })
              })
              .then(function(r) { return r.json(); })
              .then(function(json) {
                if (spinner) spinner.style.display = 'none';
                if (!json.ok) console.warn('[Avatar] upload error:', json.error);
              })
              .catch(function(err) {
                if (spinner) spinner.style.display = 'none';
                console.warn('[Avatar] upload failed:', err);
              });
            };
            img.src = src;
          };
          reader.readAsDataURL(file);
          input.value = ''; // —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞
        });
      })();

      // ‚îÄ‚îÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≥–µ—Ä–æ–µ–≤ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      function initHeroesPage() {
        var paywall = document.getElementById('masterPaywall');
        var cabinet = document.getElementById('masterCabinet');
        var formWrap = document.getElementById('heroFormWrap');
        if (!paywall || !cabinet) return;
        paywall.style.display = 'none';
        cabinet.style.display = 'none';
        if (formWrap) formWrap.style.display = 'none';
        var badge = document.getElementById('masterAccessBadge');
        if (badge) badge.textContent = (typeof t === 'function' ? t('loading') : '–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶');

        heroesApi('/master/access', { method: 'GET' }).then(function(d) {
          if (d && d.access) {
            var sub = d.source === 'trial' ? '–ü—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥' : '–ü–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞';
            if (d.renew_at) {
              var exp = new Date(d.renew_at);
              sub += ' ¬∑ –¥–æ ' + exp.toLocaleDateString('ru-RU', { day:'numeric', month:'short' });
            }
            if (badge) badge.textContent = sub;
            cabinet.style.display = 'block';
            loadHeroesList();
          } else {
            if (badge) badge.textContent = '';
            paywall.style.display = 'block';
          }
        }).catch(function() {
          if (badge) badge.textContent = '';
          paywall.style.display = 'block';
        });
      }

      // ‚îÄ‚îÄ –¢—Ä–∏–∞–ª –∏ –ø–æ–¥–ø–∏—Å–∫–∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      var masterTrialBtn = document.getElementById('masterTrialBtn');
      var masterSubBtn = document.getElementById('masterSubBtn');
      if (masterTrialBtn) masterTrialBtn.addEventListener('click', function() {
        masterTrialBtn.disabled = true;
        masterTrialBtn.textContent = '–ü–æ–¥–∫–ª—é—á–∞–µ–º‚Ä¶';
        heroesApi('/master/trial/start', { method: 'POST', body: { initData: (tg && tg.initData) || '' } }).then(function(d) {
          if (d && d.ok) {
            var paywall = document.getElementById('masterPaywall');
            var cabinet = document.getElementById('masterCabinet');
            var badge = document.getElementById('masterAccessBadge');
            if (paywall) paywall.style.display = 'none';
            if (cabinet) { cabinet.style.display = 'block'; loadHeroesList(); }
            if (badge) {
              var exp = d.renew_at ? new Date(d.renew_at).toLocaleString('ru-RU', { day:'numeric', month:'short', hour:'2-digit', minute:'2-digit' }) : '';
              badge.textContent = '–ü—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥' + (exp ? ' ¬∑ –¥–æ ' + exp : '');
            }
          } else {
            alert(d && d.error ? d.error : '–ù–µ —É–¥–∞–ª–æ—Å—å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å');
            masterTrialBtn.disabled = false;
            masterTrialBtn.textContent = 'üéÅ 1 –¥–µ–Ω—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ ‚Äî –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å';
          }
        }).catch(function(e) {
          alert('–û—à–∏–±–∫–∞: ' + (e.message || e));
          masterTrialBtn.disabled = false;
          masterTrialBtn.textContent = 'üéÅ 1 –¥–µ–Ω—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ ‚Äî –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å';
        });
      });
      if (masterSubBtn) masterSubBtn.addEventListener('click', function() {
        masterSubBtn.disabled = true;
        masterSubBtn.textContent = '–û—Ç–∫—Ä—ã–≤–∞–µ–º –æ–ø–ª–∞—Ç—É‚Ä¶';
        heroesApi('/master/subscribe', { method: 'POST', body: { initData: (tg && tg.initData) || '' } }).then(function(d) {
          if (d && d.payment_url) {
            if (tg && tg.openLink) tg.openLink(d.payment_url);
            else window.open(d.payment_url, '_blank');
          }
          masterSubBtn.disabled = false;
          var priceStr = (d && d.payment_amount != null && d.payment_currency) ? (d.payment_amount + ' ' + d.payment_currency + '/–º–µ—Å') : '39.99 USDT/–º–µ—Å';
          masterSubBtn.textContent = 'üí≥ –ü–æ–¥–ø–∏—Å–∫–∞ ‚Äî ' + priceStr;
        }).catch(function(e) {
          alert('–û—à–∏–±–∫–∞: ' + (e.message || e));
          masterSubBtn.disabled = false;
          masterSubBtn.textContent = 'üí≥ –ü–æ–¥–ø–∏—Å–∫–∞ ‚Äî 39.99 USDT/–º–µ—Å';
        });
      });

      // ‚îÄ‚îÄ –°–ø–∏—Å–æ–∫ –≥–µ—Ä–æ–µ–≤ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      function escHtml(s) { return String(s || '').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }

      function loadHeroesList() {
        var listEl = document.getElementById('heroesList');
        if (!listEl) return;
        listEl.innerHTML = '<div style="text-align:center;padding:24px 0;font-size:0.85rem;color:rgba(255,255,255,0.3)">' + (typeof t === 'function' ? t('loading') : '–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶') + '</div>';
        var search = (document.getElementById('heroesSearch') || {}).value || '';
        var q = search.trim() ? '?search=' + encodeURIComponent(search.trim()) : '';
        heroesApi('/heroes' + q, { method: 'GET' }).then(function(d) {
          heroesCache = (d && d.clients) || [];
          if (!heroesCache.length) {
            listEl.innerHTML = '<div style="text-align:center;padding:32px 0">' +
              '<div style="font-size:2rem;margin-bottom:10px">üåü</div>' +
              '<div style="font-size:0.9rem;color:rgba(255,255,255,0.35);line-height:1.55">–ü–æ–∫–∞ –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ –≥–µ—Ä–æ—è.<br>–î–æ–±–∞–≤—å –ø–µ—Ä–≤–æ–≥–æ ‚Äî –∏ —Å–æ–∑–¥–∞–≤–∞–π –¥–ª—è –Ω–µ–≥–æ<br>–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Å–Ω–∏ –≤ –æ–¥–∏–Ω —Ç–∞–ø.</div></div>';
            return;
          }
          listEl.innerHTML = heroesCache.map(function(h) {
            var initials = (h.name || '?').trim().split(/\s+/).map(function(w){ return w[0]; }).slice(0,2).join('').toUpperCase();
            var metaParts = [];
            if (h.relationship) metaParts.push(h.relationship);
            if (h.birth_date) metaParts.push(new Date(h.birth_date).toLocaleDateString('ru-RU', { day:'numeric', month:'long', year:'numeric' }));
            if (h.birth_place) metaParts.push(h.birth_place);
            return '<div class="hero-card" id="hcard-' + escHtml(h.id) + '">' +
              '<div class="hero-card-head" onclick="toggleHeroCard(\'' + escHtml(h.id) + '\')">' +
              '<div class="hero-avatar">' + escHtml(initials) + '</div>' +
              '<div style="flex:1;min-width:0">' +
              '<div class="hero-card-name">' + escHtml(h.name) + '</div>' +
              '<div class="hero-card-meta">' + escHtml(metaParts.join(' ¬∑ ')) + '</div>' +
              (h.preferred_style ? '<div class="hero-style-badge">üéµ ' + escHtml(h.preferred_style) + '</div>' : '') +
              '</div>' +
              '<div class="hero-card-chevron">‚ñº</div>' +
              '</div>' +
              '<div class="hero-card-body">' +
              (h.notes ? '<div style="font-size:0.82rem;color:rgba(255,255,255,0.45);line-height:1.5;margin-bottom:12px">' + escHtml(h.notes) + '</div>' : '') +
              '<div class="hca-row">' +
              '<button type="button" class="hca-btn hero-solo-btn" data-id="' + escHtml(h.id) + '" data-name="' + escHtml(h.name) + '">üéµ –°–æ–ª–æ</button>' +
              '<button type="button" class="hca-btn hero-duo-btn" data-id="' + escHtml(h.id) + '" data-name="' + escHtml(h.name) + '">üé∂ –í–º–µ—Å—Ç–µ —Å–æ –º–Ω–æ–π</button>' +
              '<button type="button" class="hca-btn hca-secondary hero-edit-btn" data-id="' + escHtml(h.id) + '">‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å</button>' +
              '<button type="button" class="hca-btn hca-danger hero-delete-btn" data-id="' + escHtml(h.id) + '" data-name="' + escHtml(h.name) + '">–£–¥–∞–ª–∏—Ç—å</button>' +
              '</div>' +
              '<div class="hero-hist-section" id="hhist-' + escHtml(h.id) + '">' +
              '<button type="button" class="hero-hist-toggle hero-hist-load-btn" data-id="' + escHtml(h.id) + '">‚ñ∏ –ò—Å—Ç–æ—Ä–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–π</button>' +
              '<div class="hero-hist-content" id="hhist-content-' + escHtml(h.id) + '" style="display:none"></div>' +
              '</div>' +
              '</div>' +
              '</div>';
          }).join('');

          // –†–∞—Å–∫—Ä—ã—Ç–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏
          listEl.querySelectorAll('.hero-hist-load-btn').forEach(function(btn) {
            btn.addEventListener('click', function(e) {
              e.stopPropagation();
              var id = btn.getAttribute('data-id');
              var contentEl = document.getElementById('hhist-content-' + id);
              if (!contentEl) return;
              if (contentEl.style.display === 'block') { contentEl.style.display = 'none'; btn.textContent = '‚ñ∏ –ò—Å—Ç–æ—Ä–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–π'; return; }
              contentEl.style.display = 'block';
              btn.textContent = '‚ñæ –ò—Å—Ç–æ—Ä–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–π';
              if (contentEl.dataset.loaded) return;
              contentEl.dataset.loaded = '1';
              contentEl.innerHTML = '<div class="hero-hist-loading">' + (typeof t === 'function' ? t('heroHistLoading') : '–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏‚Ä¶') + '</div>';
              heroesApi('/heroes/' + id + '/requests', { method: 'GET' }).then(function(d) {
                var reqs = (d && d.requests) || [];
                if (!reqs.length) { contentEl.innerHTML = '<div class="hero-hist-empty">' + (typeof t === 'function' ? t('heroHistEmpty') : '–ì–µ–Ω–µ—Ä–∞—Ü–∏–π –ø–æ–∫–∞ –Ω–µ—Ç') + '</div>'; return; }
                contentEl.innerHTML = reqs.map(function(r) {
                  var statusEmoji = { completed:'‚úÖ', error:'‚ùå', pending:'‚è≥', pending_payment:'üí≥' }[r.generation_status] || 'üîÑ';
                  var dateStr = r.created_at ? new Date(r.created_at).toLocaleString('ru-RU', { day:'numeric', month:'short', hour:'2-digit', minute:'2-digit' }) : '';
                  var html = '<div class="hero-hist-item">';
                  html += '<div class="hero-hist-title">' + statusEmoji + ' ' + escHtml(r.title || '(–±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è)') + '</div>';
                  html += '<div class="hero-hist-meta">' + escHtml(dateStr) + (r.request_type ? ' ¬∑ ' + escHtml(r.request_type) : '') + '</div>';
                  if (r.lyrics) {
                    html += '<div class="hero-hist-block-label">–¢–µ–∫—Å—Ç –ø–µ—Å–Ω–∏</div>';
                    html += '<div class="hero-hist-text">' + escHtml(r.lyrics) + '</div>';
                  }
                  if (r.detailed_analysis) {
                    html += '<button type="button" class="hero-hist-toggle hha-toggle" style="margin-bottom:4px">‚ñ∏ –ê–Ω–∞–ª–∏–∑</button>';
                    html += '<div class="hero-hist-text" style="display:none">' + escHtml(r.detailed_analysis) + '</div>';
                  }
                  if (r.cover_letter) {
                    html += '<button type="button" class="hero-hist-toggle hha-toggle" style="margin-bottom:4px">‚ñ∏ –°–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ</button>';
                    html += '<div class="hero-hist-text" style="display:none">' + escHtml(r.cover_letter) + '</div>';
                  }
                  if (r.audio_url) {
                    html += '<a href="' + escHtml(r.audio_url) + '" target="_blank" class="hero-hist-audio">üéß –°–ª—É—à–∞—Ç—å</a>';
                  }
                  html += '</div>';
                  return html;
                }).join('');
                // –†–∞—Å–∫—Ä—ã—Ç–∏–µ –∞–Ω–∞–ª–∏–∑–∞/–ø–∏—Å—å–º–∞
                contentEl.querySelectorAll('.hha-toggle').forEach(function(tb) {
                  tb.addEventListener('click', function() {
                    var next = tb.nextElementSibling;
                    if (!next) return;
                    var open = next.style.display === 'block';
                    next.style.display = open ? 'none' : 'block';
                    tb.textContent = tb.textContent.replace(/^[‚ñ∏‚ñæ]\s/, (open ? '‚ñ∏ ' : '‚ñæ '));
                  });
                });
              }).catch(function() { contentEl.innerHTML = '<div class="hero-hist-empty">' + (typeof t === 'function' ? t('heroHistLoadError') : '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é') + '</div>'; });
            });
          });

          // –ö–Ω–æ–ø–∫–∏ –°–æ–ª–æ / –í–º–µ—Å—Ç–µ
          listEl.querySelectorAll('.hero-solo-btn').forEach(function(btn) {
            btn.addEventListener('click', function(e) {
              e.stopPropagation();
              var heroId = btn.getAttribute('data-id');
              var heroName = btn.getAttribute('data-name') || '';
              var h = heroesCache.find(function(c){ return c.id === heroId; }) || {};
              startHeroRequest({ hero: h, mode: 'single', forWho: heroName });
            });
          });
          listEl.querySelectorAll('.hero-duo-btn').forEach(function(btn) {
            btn.addEventListener('click', function(e) {
              e.stopPropagation();
              var heroId = btn.getAttribute('data-id');
              var heroName = btn.getAttribute('data-name') || '';
              var h = heroesCache.find(function(c){ return c.id === heroId; }) || {};
              startHeroRequest({ hero: h, mode: 'couple', forWho: heroName });
            });
          });

          // –ö–Ω–æ–ø–∫–∏ –ò–∑–º–µ–Ω–∏—Ç—å / –£–¥–∞–ª–∏—Ç—å
          listEl.querySelectorAll('.hero-edit-btn').forEach(function(btn) {
            btn.addEventListener('click', function(e) {
              e.stopPropagation();
              var id = btn.getAttribute('data-id');
              var h = heroesCache.find(function(c) { return c.id === id; });
              if (!h) return;
              openHeroForm(h);
            });
          });
          listEl.querySelectorAll('.hero-delete-btn').forEach(function(btn) {
            btn.addEventListener('click', function(e) {
              e.stopPropagation();
              var id = btn.getAttribute('data-id');
              var name = btn.getAttribute('data-name') || '—ç—Ç–æ–≥–æ –≥–µ—Ä–æ—è';
              if (!confirm('–£–¥–∞–ª–∏—Ç—å ¬´' + name + '¬ª?')) return;
              heroesApi('/heroes/' + id, { method: 'DELETE' }).then(function() { loadHeroesList(); }).catch(function(e) { alert('–û—à–∏–±–∫–∞: ' + (e.message || e)); });
            });
          });
        }).catch(function() {
          if (listEl) listEl.innerHTML = '<div style="color:rgba(239,68,68,0.7);font-size:0.85rem;text-align:center;padding:20px">' + (typeof t === 'function' ? t('heroesPageLoadError') : '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –≥–µ—Ä–æ–µ–≤') + '</div>';
        });
      }

      // –†–∞—Å–∫—Ä—ã—Ç–∏–µ/—Å—Ö–ª–æ–ø—ã–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏
      window.toggleHeroCard = function(id) {
        var card = document.getElementById('hcard-' + id);
        if (!card) return;
        card.classList.toggle('expanded');
      };

      // ‚îÄ‚îÄ –§–æ—Ä–º–∞ –≥–µ—Ä–æ—è ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      function openHeroForm(h) {
        var cabinet = document.getElementById('masterCabinet');
        var formWrap = document.getElementById('heroFormWrap');
        var titleEl = document.getElementById('heroFormTitle');
        if (cabinet) cabinet.style.display = 'none';
        if (!formWrap) return;
        formWrap.style.display = 'block';
        if (h && h.id) {
          editingHeroId = h.id;
          if (titleEl) titleEl.textContent = '–ò–∑–º–µ–Ω–∏—Ç—å –≥–µ—Ä–æ—è';
        } else {
          editingHeroId = null;
          if (titleEl) titleEl.textContent = '–î–æ–±–∞–≤–∏—Ç—å –≥–µ—Ä–æ—è';
        }
        document.getElementById('heroName').value = (h && h.name) || '';
        document.getElementById('heroRelationship').value = (h && h.relationship) || '';
        document.getElementById('heroBirthdate').value = (h && h.birth_date) || '';
        if (typeof updateDateSelectsFromInput === 'function') updateDateSelectsFromInput('heroBirthdate');
        document.getElementById('heroBirthtime').value = ((h && h.birth_time) || '').substring(0, 5);
        document.getElementById('heroBirthtimeUnknown').checked = !!(h && h.birthtime_unknown);
        document.getElementById('heroGender').value = (h && h.gender) || '';
        document.getElementById('heroStyle').value = (h && h.preferred_style) || '';
        document.getElementById('heroNotes').value = (h && h.notes) || '';
        // –ì–æ—Ä–æ–¥: –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ–∫–º–∞—Ä–∫–∞
        var hpInput = document.getElementById('heroBirthplace');
        var hpWrap  = document.getElementById('heroBirthplaceWrap');
        var hpCheck = document.getElementById('heroBirthplaceCheck');
        var hpHint  = document.getElementById('heroBirthplaceHint');
        var birthPlaceVal = (h && h.birth_place) || '';
        if (hpInput) hpInput.value = birthPlaceVal;
        if (hpWrap)  hpWrap.classList.toggle('has-place', !!birthPlaceVal);
        if (hpCheck) hpCheck.setAttribute('aria-hidden', birthPlaceVal ? 'false' : 'true');
        if (hpInput && birthPlaceVal) hpInput.setAttribute('data-place-selected','1');
        else if (hpInput) hpInput.removeAttribute('data-place-selected');
        if (hpHint)  hpHint.style.display = 'none';
        formWrap.scrollTop = 0;
      }

      function closeHeroForm() {
        var cabinet = document.getElementById('masterCabinet');
        var formWrap = document.getElementById('heroFormWrap');
        if (formWrap) formWrap.style.display = 'none';
        if (cabinet) cabinet.style.display = 'block';
        editingHeroId = null;
      }

      var addHeroBtn = document.getElementById('addHeroBtn');
      if (addHeroBtn) addHeroBtn.addEventListener('click', function() { openHeroForm(null); });
      var heroFormCancel = document.getElementById('heroFormCancel');
      if (heroFormCancel) heroFormCancel.addEventListener('click', closeHeroForm);

      var heroFormSave = document.getElementById('heroFormSave');
      if (heroFormSave) heroFormSave.addEventListener('click', function() {
        var name = (document.getElementById('heroName') || {}).value.trim();
        if (!name) { alert('–£–∫–∞–∂–∏ –∏–º—è –≥–µ—Ä–æ—è'); return; }
        heroFormSave.disabled = true;
        heroFormSave.textContent = '–°–æ—Ö—Ä–∞–Ω—è–µ–º‚Ä¶';
        var payload = {
          initData: (tg && tg.initData) || '',
          name: name,
          relationship: (document.getElementById('heroRelationship') || {}).value || null,
          birth_date: (document.getElementById('heroBirthdate') || {}).value || null,
          birth_time: (document.getElementById('heroBirthtime') || {}).value || null,
          birth_place: (document.getElementById('heroBirthplace') || {}).value.trim() || null,
          birthtime_unknown: (document.getElementById('heroBirthtimeUnknown') || {}).checked,
          gender: (document.getElementById('heroGender') || {}).value || null,
          preferred_style: (document.getElementById('heroStyle') || {}).value.trim() || null,
          notes: (document.getElementById('heroNotes') || {}).value.trim() || null
        };
        var apiCall = editingHeroId
          ? heroesApi('/heroes/' + editingHeroId, { method: 'PATCH', body: payload })
          : heroesApi('/heroes', { method: 'POST', body: payload });
        apiCall.then(function() {
          closeHeroForm();
          loadHeroesList();
        }).catch(function(e) {
          alert('–û—à–∏–±–∫–∞: ' + (e.message || e));
        }).finally(function() {
          heroFormSave.disabled = false;
          heroFormSave.textContent = '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å';
        });
      });

      var heroesSearchBtn = document.getElementById('heroesSearchBtn');
      if (heroesSearchBtn) heroesSearchBtn.addEventListener('click', loadHeroesList);
      var heroesBackBtn = document.getElementById('heroesBackBtn');
      if (heroesBackBtn) heroesBackBtn.addEventListener('click', function() {
        var formWrap = document.getElementById('heroFormWrap');
        if (formWrap && formWrap.style.display !== 'none') { closeHeroForm(); return; }
        goBack();
      });
      var todayHero = new Date();
      var heroBirthdateEl = document.getElementById('heroBirthdate');
      if (heroBirthdateEl) {
        heroBirthdateEl.max = todayHero.toISOString().split('T')[0];
        var minH = new Date(); minH.setFullYear(minH.getFullYear() - 100);
        heroBirthdateEl.min = minH.toISOString().split('T')[0];
      }

      // ‚îÄ‚îÄ –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –¥–ª—è —Ñ–æ—Ä–º—ã –≥–µ—Ä–æ—è ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      (function() {
        var hInput = document.getElementById('heroBirthplace');
        var hSugg  = document.getElementById('heroBirthplaceSuggestions');
        var hWrap  = document.getElementById('heroBirthplaceWrap');
        var hCheck = document.getElementById('heroBirthplaceCheck');
        var hHint  = document.getElementById('heroBirthplaceHint');
        if (!hInput) return;
        var hDebounce = null;
        var hLastQ = '';

        function hHideSuggestions() {
          if (hSugg) { hSugg.innerHTML = ''; hSugg.setAttribute('aria-hidden','true'); hSugg.style.display = 'none'; }
        }
        function hSelectPlace(displayName, lat, lon) {
          hInput.value = (displayName || '').trim();
          hInput.setAttribute('data-place-selected','1');
          if (lat != null) hInput.setAttribute('data-lat', String(lat));
          if (lon != null) hInput.setAttribute('data-lon', String(lon));
          if (hWrap)  hWrap.classList.add('has-place');
          if (hCheck) hCheck.setAttribute('aria-hidden','false');
          if (hHint)  hHint.style.display = 'none';
          hHideSuggestions();
        }
        function hClearSelection() {
          hInput.removeAttribute('data-place-selected');
          hInput.removeAttribute('data-lat');
          hInput.removeAttribute('data-lon');
          if (hWrap)  hWrap.classList.remove('has-place');
          if (hCheck) hCheck.setAttribute('aria-hidden','true');
        }
        function hFetchPlaces(q) {
          if (!q || q.length < 2) { hHideSuggestions(); return; }
          var url = typeof getPlacesSearchUrl === 'function' ? getPlacesSearchUrl(q) : ('https://nominatim.openstreetmap.org/search?q=' + encodeURIComponent(q) + '&format=json&limit=8&addressdetails=1');
          var headers = { 'Accept': 'application/json' };
          if (url.indexOf('nominatim') !== -1) { headers['Accept-Language'] = 'ru'; headers['User-Agent'] = 'YupSoulMiniApp/1.0'; }
          fetch(url, { headers: headers })
            .then(function(r){ return r.json(); })
            .then(function(list){
              if (hLastQ !== q || !hSugg) return;
              hSugg.innerHTML = '';
              (list || []).forEach(function(item) {
                var li = document.createElement('li');
                var main = item.display_name || (item.address && (item.address.city || item.address.town || item.address.village || item.address.state || item.address.country)) || '';
                var country = item.address && item.address.country ? item.address.country : '';
                li.textContent = main;
                if (country) {
                  var sp = document.createElement('div');
                  sp.className = 'place-type';
                  sp.textContent = country + (item.address.country_code ? ' (' + item.address.country_code.toUpperCase() + ')' : '');
                  li.appendChild(sp);
                }
                li.addEventListener('click', function(){ hSelectPlace(item.display_name || main, item.lat, item.lon); });
                hSugg.appendChild(li);
              });
              hSugg.style.display = (list && list.length) ? 'block' : 'none';
              hSugg.setAttribute('aria-hidden', (list && list.length) ? 'false' : 'true');
            })
            .catch(function(){ hHideSuggestions(); });
        }
        hInput.addEventListener('input', function(){
          var v = hInput.value.trim();
          hClearSelection();
          if (v) { hLastQ = v; clearTimeout(hDebounce); hDebounce = setTimeout(function(){ hFetchPlaces(v); }, 320); }
          else hHideSuggestions();
        });
        hInput.addEventListener('focus', function(){
          if (hHint) hHint.style.display = 'none';
          var v = hInput.value.trim();
          if (v && v.length >= 2) { hLastQ = v; hFetchPlaces(v); }
        });
        hInput.addEventListener('blur', function(){
          setTimeout(hHideSuggestions, 200);
        });
      })();

      // ‚îÄ‚îÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –∏–∑ –∫–∞—Ä—Ç–æ—á–∫–∏ –≥–µ—Ä–æ—è ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      // –•—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ heroRequest –ø–æ–∫–∞ loadForWhoSelect –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
      var _pendingHeroRequest = null;

      function _applyHeroRequest(hero, mode) {
        setMode(mode);
        if (mode === 'couple') {
          // –°–∫—Ä—ã–≤–∞–µ–º forWhoWrap (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–∫–∞–∑–∞–Ω async-–∫–æ–ª–±—ç–∫–æ–º loadForWhoSelect)
          var fww = document.getElementById('forWhoWrap');
          if (fww) fww.style.display = 'none';

          // –ü—Ä–µ–¥–∑–∞–ø–æ–ª–Ω—è–µ–º person1 –ø—Ä–æ—Ñ–∏–ª–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
          fillFormFromProfile(userProfile || (tg && tg.initDataUnsafe && tg.initDataUnsafe.user));
          // –ß—Ç–æ–±—ã –Ω–µ —Ç—Ä–µ–±–æ–≤–∞–ª–æ ¬´–≤—ã–±–µ—Ä–∏ –≥–æ—Ä–æ–¥ –∏–∑ —Å–ø–∏—Å–∫–∞¬ª: –µ—Å–ª–∏ —É person1 —É–∂–µ –µ—Å—Ç—å –≥–æ—Ä–æ–¥ (3+ —Å–∏–º–≤–æ–ª–æ–≤), —Å—á–∏—Ç–∞–µ–º –µ–≥–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º
          var bp1 = document.getElementById('birthplace');
          if (bp1 && bp1.value.trim().length >= 3) {
            if (!bp1.getAttribute('data-place-selected')) {
              bp1.setAttribute('data-place-selected', '1');
              bp1.setAttribute('data-from-profile', '1');
            }
            var bw1 = document.getElementById('birthplaceWrap');
            if (bw1) bw1.classList.add('has-place');
            var bch1 = document.getElementById('birthplaceCheck');
            if (bch1) bch1.setAttribute('aria-hidden', 'false');
          }
          // –í—Å–µ–≥–¥–∞ —Å–∫—Ä—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –¥–ª—è person1 –ø—Ä–∏ –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏
          var bHint1 = document.getElementById('birthplaceHint');
          if (bHint1) bHint1.style.display = 'none';

          // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è person2 –∏–∑ –∫–∞—Ä—Ç–æ—á–∫–∏ –≥–µ—Ä–æ—è
          var n2   = document.getElementById('name2');
          var bd2  = document.getElementById('birthdate2');
          var bt2  = document.getElementById('birthtime2');
          var unk2 = document.getElementById('unknown2');
          var g2   = document.getElementById('gender2');
          var bp2  = document.getElementById('birthplace2');

          if (n2)   n2.value   = hero.name || '';
          if (bd2)  { bd2.value = (hero.birth_date || '').substring(0, 10); if (typeof updateDateSelectsFromInput === 'function') updateDateSelectsFromInput('birthdate2'); }
          if (bt2)  bt2.value  = (hero.birth_time || '').substring(0, 5);
          if (unk2) unk2.checked = !!hero.birthtime_unknown;
          if (g2)   g2.value   = hero.gender || '';
          var p2rel = document.getElementById('person2Relationship');
          if (p2rel) p2rel.value = hero.relationship || '';
          if (bp2) {
            bp2.value = hero.birth_place || '';
            if (hero.birth_place && hero.birth_place.trim().length >= 3) {
              bp2.setAttribute('data-from-profile', '1');
              bp2.setAttribute('data-place-selected', '1');
              if (hero.birth_lat) bp2.setAttribute('data-lat', String(hero.birth_lat));
              if (hero.birth_lon) bp2.setAttribute('data-lon', String(hero.birth_lon));
              var bw2 = document.getElementById('birthplace2Wrap');
              if (bw2) bw2.classList.add('has-place');
              var bch2 = document.getElementById('birthplace2Check');
              if (bch2) bch2.setAttribute('aria-hidden', 'false');
              var bHint2 = document.getElementById('birthplace2Hint');
              if (bHint2) bHint2.style.display = 'none';
            }
          }
          // –°–æ–±–∏—Ä–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–∞—Ä—ã –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
          (function() {
            var reqEl = document.getElementById('request');
            if (!reqEl || reqEl.value) return;
            var parts = ['–°–æ–∑–¥–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–Ω—É—é –ø–µ—Å–Ω—é –¥–ª—è –Ω–∞—Å –¥–≤–æ–∏—Ö'];
            if (hero.relationship) parts.push('–ö–µ–º —è–≤–ª—è–µ—Ç—Å—è ' + hero.name + ' –¥–ª—è –º–µ–Ω—è: ' + hero.relationship);
            if (hero.preferred_style) parts.push('–ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Å—Ç–∏–ª—å: ' + hero.preferred_style);
            if (hero.notes) parts.push('–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç: ' + hero.notes);
            reqEl.value = parts.join('. ');
          })();

          // –°–∫—Ä–æ–ª–ª–∏–º –∫ secondPersonForm —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–µ–ª –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è
          setTimeout(function() {
            var sf = document.getElementById('secondPersonForm');
            if (sf) try { sf.scrollIntoView({ behavior: 'smooth', block: 'start' }); } catch(e) {}
          }, 100);

        } else {
          // ‚îÄ‚îÄ –†–µ–∂–∏–º ¬´—Å–æ–ª–æ¬ª: –≥–µ—Ä–æ–π = person1 ‚îÄ‚îÄ
          var forWhoEl = document.getElementById('forWho');
          if (forWhoEl && hero.id) {
            if (!forWhoEl.querySelector('option[value="' + hero.id + '"]')) {
              var pendingOpt = document.createElement('option');
              pendingOpt.value = hero.id;
              pendingOpt.textContent = hero.name || hero.id;
              pendingOpt.setAttribute('data-pending', '1');
              forWhoEl.appendChild(pendingOpt);
            }
            forWhoEl.value = hero.id;
          }
          fillFormFromHero(hero);
          // –°–æ–±–∏—Ä–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –≥–µ—Ä–æ—è –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ ‚Äî relationship + preferred_style + notes
          (function() {
            var reqEl = document.getElementById('request');
            if (!reqEl || reqEl.value) return;
            var parts = ['–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –ø–µ—Å–Ω—é'];
            if (hero.relationship) parts.push('–≠—Ç–æ –º–æ—è ' + hero.relationship + ' ‚Äî ' + (hero.name || ''));
            if (hero.preferred_style) parts.push('–ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Å—Ç–∏–ª—å: ' + hero.preferred_style);
            if (hero.notes) parts.push('–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç: ' + hero.notes);
            if (parts.length > 1) reqEl.value = parts.join('. ');
          })();
        }
      }

      function startHeroRequest(opts) {
        var hero = opts.hero || {};
        var mode = opts.mode || 'single';

        _pendingHeroRequest = { hero: hero, mode: mode };
        goToPage('formPage');

        // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
        _applyHeroRequest(hero, mode);
        // –ò –ø–æ–≤—Ç–æ—Ä—è–µ–º —á–µ—Ä–µ–∑ 600–º—Å ‚Äî –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ loadForWhoSelect –∑–∞–≤–µ—Ä—à–∏—Ç async-–∑–∞–ø—Ä–æ—Å
        // –∏ –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å forWhoWrap/heroesCache
        setTimeout(function() {
          if (_pendingHeroRequest) {
            _applyHeroRequest(_pendingHeroRequest.hero, _pendingHeroRequest.mode);
            _pendingHeroRequest = null;
          }
        }, 600);
      }

      function fillFormFromProfile(profileOrTgUser) {
        if (!profileOrTgUser) return;
        var nameEl = document.getElementById('name');
        var bd = document.getElementById('birthdate');
        var bt = document.getElementById('birthtime');
        var bp = document.getElementById('birthplace');
        var unk = document.getElementById('unknown');
        var g = document.getElementById('gender');
        var langEl = document.getElementById('language');
        var isProfile = profileOrTgUser && (profileOrTgUser.birthdate != null || profileOrTgUser.birthplace != null);
        var firstName = profileOrTgUser.first_name || profileOrTgUser.name;
        if (nameEl && firstName) nameEl.value = firstName;
        if (isProfile) {
          if (bd) { bd.value = (profileOrTgUser.birthdate || '').toString().slice(0, 10); if (typeof updateDateSelectsFromInput === 'function') updateDateSelectsFromInput('birthdate'); }
          if (bt) bt.value = (profileOrTgUser.birthtime || '').toString().slice(0, 5);
          if (bp) {
            bp.value = profileOrTgUser.birthplace || '';
            if (profileOrTgUser.birthplace && profileOrTgUser.birthplace.length >= 3) {
              bp.setAttribute('data-from-profile', '1');
              bp.setAttribute('data-place-selected', '1');
              var bw = document.getElementById('birthplaceWrap'); if (bw) bw.classList.add('has-place');
              var bch = document.getElementById('birthplaceCheck'); if (bch) bch.setAttribute('aria-hidden', 'false');
              var bHintP = document.getElementById('birthplaceHint'); if (bHintP) bHintP.style.display = 'none';
              if (profileOrTgUser.birthplace_lat != null && profileOrTgUser.birthplace_lon != null) {
                bp.setAttribute('data-lat', String(profileOrTgUser.birthplace_lat));
                bp.setAttribute('data-lon', String(profileOrTgUser.birthplace_lon));
              } else {
                bp.removeAttribute('data-lat');
                bp.removeAttribute('data-lon');
              }
            } else {
              bp.removeAttribute('data-from-profile');
              bp.removeAttribute('data-place-selected');
              bp.removeAttribute('data-lat');
              bp.removeAttribute('data-lon');
              var bw = document.getElementById('birthplaceWrap'); if (bw) bw.classList.remove('has-place');
              var bch = document.getElementById('birthplaceCheck'); if (bch) bch.setAttribute('aria-hidden', 'true');
            }
          }
          if (unk) unk.checked = !!profileOrTgUser.birthtime_unknown;
          if (g) g.value = profileOrTgUser.gender || '';
          if (langEl && profileOrTgUser.language) langEl.value = profileOrTgUser.language;
          var bdWrap = document.getElementById('birthdateWrap');
          if (bdWrap) {
            if (profileOrTgUser.birthdate) { bdWrap.classList.add('has-date'); var bc = document.getElementById('birthdateCheck'); if (bc) bc.setAttribute('aria-hidden', 'false'); }
            else { bdWrap.classList.remove('has-date'); var bc = document.getElementById('birthdateCheck'); if (bc) bc.setAttribute('aria-hidden', 'true'); }
          }
        }
      }
      function fillFormFromHero(hero) {
        if (!hero) return;
        var nameEl = document.getElementById('name');
        var bd = document.getElementById('birthdate');
        var bt = document.getElementById('birthtime');
        var bp = document.getElementById('birthplace');
        var unk = document.getElementById('unknown');
        var g = document.getElementById('gender');
        if (nameEl) nameEl.value = hero.name || '';
        if (bd) { bd.value = hero.birth_date || ''; if (typeof updateDateSelectsFromInput === 'function') updateDateSelectsFromInput('birthdate'); }
        if (bt) bt.value = (hero.birth_time || '').substring(0, 5);
        if (bp) {
          bp.value = hero.birth_place || '';
          bp.removeAttribute('data-lat');
          bp.removeAttribute('data-lon');
          if (hero.birth_place && String(hero.birth_place).trim().length >= 3) {
            bp.setAttribute('data-from-profile', '1');
            bp.setAttribute('data-place-selected', '1');
            var bw = document.getElementById('birthplaceWrap'); if (bw) bw.classList.add('has-place');
            var bch = document.getElementById('birthplaceCheck'); if (bch) bch.setAttribute('aria-hidden', 'false');
            var bHint = document.getElementById('birthplaceHint'); if (bHint) bHint.style.display = 'none';
          } else {
            bp.removeAttribute('data-from-profile');
            bp.removeAttribute('data-place-selected');
            var bw = document.getElementById('birthplaceWrap'); if (bw) bw.classList.remove('has-place');
            var bch = document.getElementById('birthplaceCheck'); if (bch) bch.setAttribute('aria-hidden', 'true');
          }
        }
        if (unk) unk.checked = !!hero.birthtime_unknown;
        if (g) g.value = hero.gender || '';
        var langEl = document.getElementById('language');
        if (langEl && hero.language) langEl.value = hero.language;
        var bdWrap = document.getElementById('birthdateWrap');
        if (bdWrap) {
          if (hero.birth_date) { bdWrap.classList.add('has-date'); var bc = document.getElementById('birthdateCheck'); if (bc) bc.setAttribute('aria-hidden', 'false'); }
          else { bdWrap.classList.remove('has-date'); var bc = document.getElementById('birthdateCheck'); if (bc) bc.setAttribute('aria-hidden', 'true'); }
        }
      }
      function loadForWhoSelect() {
        var wrap = document.getElementById('forWhoWrap');
        var sel = document.getElementById('forWho');
        if (!wrap || !sel) return;
        if (userTariff !== 'master') { wrap.style.display = 'none'; return; }
        // –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤ couple-—Ä–µ–∂–∏–º–µ (–≥–µ—Ä–æ–π = person2, forWho –Ω–µ –Ω—É–∂–µ–Ω)
        if (selectedMode !== 'couple') wrap.style.display = 'block';
        if (wrap._errorEl) { wrap._errorEl.style.display = 'none'; sel.style.display = ''; }
        heroesApi('/heroes', { method: 'GET' }).then(function(d) {
          heroesCache = (d && d.clients) || [];
          var esc = typeof escHtml === 'function' ? escHtml : function(s) { return String(s || '').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); };
          sel.innerHTML = '<option value="">' + t('forMyself') + '</option>' + heroesCache.map(function(h) { return '<option value="' + esc(h.id || '') + '">' + t('forHero', { name: esc(h.name || '‚Äî') }) + '</option>'; }).join('');
          // –ò—Å–ø–æ–ª—å–∑—É–µ–º onchange –≤–º–µ—Å—Ç–æ addEventListener —á—Ç–æ–±—ã –Ω–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ —Å–ª—É—à–∞—Ç–µ–ª–∏
          sel.onchange = function() {
            var id = sel.value;
            if (!id) { fillFormFromHero(null); return; }
            var hero = heroesCache.find(function(c) { return c.id === id; });
            if (hero) fillFormFromHero(hero);
          };
          // –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∂–∏–º
          if (selectedMode !== 'couple') wrap.style.display = 'block';
          else wrap.style.display = 'none';
          // –ï—Å–ª–∏ –µ—Å—Ç—å –æ–∂–∏–¥–∞—é—â–∏–π –≥–µ—Ä–æ—è–º ‚Äî –ø–µ—Ä–µ–ø—Ä–∏–º–µ–Ω—è–µ–º (–∑–∞—â–∏—Ç–∞ –æ—Ç –≥–æ–Ω–∫–∏)
          if (_pendingHeroRequest) {
            _applyHeroRequest(_pendingHeroRequest.hero, _pendingHeroRequest.mode);
          }
        }).catch(function() {
          wrap.style.display = 'block';
          if (!wrap._errorEl) {
            wrap._errorEl = document.createElement('div');
            wrap._errorEl.className = 'forWho-error';
            wrap._errorEl.setAttribute('role', 'alert');
            wrap._errorEl.style.cssText = 'font-size:0.9rem;color:var(--tg-theme-hint-color,rgba(255,255,255,0.7));margin-top:8px;';
            var msg = document.createElement('span');
            msg.className = 'forWho-error-msg';
            var btn = document.createElement('button');
            btn.type = 'button';
            btn.className = 'forWho-retry';
            btn.textContent = typeof t === 'function' ? t('retry') : '–ü–æ–≤—Ç–æ—Ä–∏—Ç—å';
            btn.style.cssText = 'margin-left:8px;padding:4px 10px;font-size:0.85rem;cursor:pointer;';
            wrap._errorEl.appendChild(msg);
            wrap._errorEl.appendChild(btn);
            wrap.appendChild(wrap._errorEl);
            btn.addEventListener('click', function() { loadForWhoSelect(); });
          }
          wrap._errorEl.querySelector('.forWho-error-msg').textContent = typeof t === 'function' ? t('heroesLoadError') : '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫.';
          wrap._errorEl.style.display = 'block';
          sel.style.display = 'none';
        });
      }

      var soulChatBtn = document.getElementById('soulChatBtn');
      if (soulChatBtn) soulChatBtn.addEventListener('click', function() {
        goToPage('soulChatPage');
      });
      var soulChatPayBtn = document.getElementById('soulChatPayBtn');
      if (soulChatPayBtn) soulChatPayBtn.addEventListener('click', function() { goToPage('formPage'); setTimeout(function() { var stepNext = document.getElementById('stepNext'); if (stepNext) stepNext.click(); }, 100); });
      function openBotLink(payload) {
        var botUrl = 'https://t.me/' + BOT_USERNAME + (payload ? '?start=' + payload : '');
        if (tg && tg.openTelegramLink) tg.openTelegramLink(botUrl);
        else if (tg && tg.openLink) tg.openLink(botUrl);
        else window.open(botUrl, '_blank');
      }
      var openBotBtn = document.getElementById('openBotBtn');
      if (openBotBtn) openBotBtn.addEventListener('click', function() {
        openBotLink('song_ready');
        setTimeout(function() { try { if (tg && tg.close) tg.close(); } catch(e){} }, 400);
      });
      var openBotBeforeSubmitBtn = document.getElementById('openBotBeforeSubmitBtn');
      if (openBotBeforeSubmitBtn) openBotBeforeSubmitBtn.addEventListener('click', function() { openBotLink('miniapp_start'); });
      var helpSupportBtn = document.getElementById('helpSupportBtn');
      // –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–π support_username –∏–∑ –±—ç–∫–µ–Ω–¥–∞
      var SUPPORT_USERNAME = BOT_USERNAME;
      (function() {
        var _base = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
        if (!_base) return;
        fetch(_base + '/api/config').then(function(r){ return r.json(); }).then(function(d){
          if (d && d.support_username) SUPPORT_USERNAME = d.support_username;
        }).catch(function(){});
      })();
      if (helpSupportBtn) helpSupportBtn.addEventListener('click', function() {
        var supportUrl = 'https://t.me/' + SUPPORT_USERNAME;
        try {
          if (tg && tg.openTelegramLink) { tg.openTelegramLink(supportUrl); return; }
          if (tg && tg.openLink) { tg.openLink(supportUrl); return; }
        } catch(e) {}
        window.open(supportUrl, '_blank');
      });
      var newKeyBtn = document.getElementById('newKeyBtn');
      if (newKeyBtn) newKeyBtn.addEventListener('click', function() {
        var n = document.getElementById('name');
        var bd = document.getElementById('birthdate');
        var bp = document.getElementById('birthplace');
        var bt = document.getElementById('birthtime');
        var g = document.getElementById('gender');
        var langEl = document.getElementById('language');
        var r = document.getElementById('request');
        if (n) n.value = '';
        if (bd) { bd.value = ''; if (typeof updateDateSelectsFromInput === 'function') updateDateSelectsFromInput('birthdate'); }
        if (bp) bp.value = '';
        if (bt) bt.value = '';
        var unknownChk = document.getElementById('unknown'); if (unknownChk) unknownChk.checked = false;
        if (g) g.value = '';
        if (langEl) langEl.value = '';
        if (r) r.value = '';
        var bdWrap = document.getElementById('birthdateWrap');
        if (bdWrap) { bdWrap.classList.remove('has-date'); var bc = document.getElementById('birthdateCheck'); if (bc) bc.setAttribute('aria-hidden', 'true'); }
        var birthplaceHint = document.getElementById('birthplaceHint');
        if (birthplaceHint) birthplaceHint.style.display = 'none';
        var bpEl = document.getElementById('birthplace');
        if (bpEl) { bpEl.removeAttribute('data-place-selected'); bpEl.removeAttribute('data-lat'); bpEl.removeAttribute('data-lon'); }
        var wrap = document.getElementById('birthplaceWrap');
        if (wrap) wrap.classList.remove('has-place');
        goToPage('formPage');
      });
      
      document.querySelectorAll('.preview-nav button').forEach(function(button) {
        button.addEventListener('click', function() {
          var pageMap = { 'home': 'homePage', 'form': 'formPage', 'payment': 'paymentPage', 'loading': 'loadingPage', 'success': 'successPage', 'heroes': 'heroesPage' };
          document.querySelectorAll('.preview-nav button').forEach(function(btn) { btn.classList.remove('active'); });
          this.classList.add('active');
          goToPage(pageMap[button.getAttribute('data-page')] || 'homePage');
        });
      });
      
      (function checkAdminAndShowLink() {
        var apiBase = (window.BACKEND_URL || window.HEROES_API_BASE || '').replace(/\/$/, '');
        var initData = (tg && tg.initData) ? tg.initData : (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.initData) || '';
        if (!apiBase || !initData) return;
        fetch(apiBase + '/api/admin/me', { headers: { 'X-Telegram-Init': initData } })
          .then(function(r) { return r.json(); })
          .then(function(data) {
            if (!data || !data.admin) return;
            var wrap = document.getElementById('adminLinkWrap');
            var btn = document.getElementById('adminLinkBtn');
            if (!wrap || !btn) return;
            wrap.style.display = 'block';
            btn.addEventListener('click', function(e) {
              e.preventDefault();
              var url = apiBase + '/admin';
              if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.openLink) window.Telegram.WebApp.openLink(url);
              else window.open(url, '_blank');
            });
          })
          .catch(function() {});
      })();
        } catch (e) {
          console.warn('App init error:', e);
        }
      }, 50);
    });
  </script>

  <!--
    PAYMENT OVERLAY ‚Äî –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π –æ–ø–ª–∞—Ç—ã.
    –ü—Ä—è–º–æ–π —Ä–µ–±—ë–Ω–æ–∫ <body>, –≤–Ω–µ –ª—é–±—ã—Ö stacking context.
    z-index:9999 ‚Äî –≤—ã—à–µ –≤—Å–µ–≥–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.
    –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ showPaymentOverlay() / hidePaymentOverlay() –≤ JS.
  -->
  <div id="paymentOverlay" style="
    display:none;
    position:fixed;inset:0;
    z-index:9999;
    overflow-y:auto;overflow-x:hidden;
    background:linear-gradient(165deg,#0d0b1e 0%,#160a2e 45%,#0d1830 100%);
    color:#fff;
    font-family:'Comfortaa',sans-serif;
  ">
    <div style="max-width:520px;margin:0 auto;padding:28px 18px 40px;">
      <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
      <div style="text-align:center;margin-bottom:24px;">
        <div style="font-size:1.9rem;font-weight:700;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color),var(--primary-color));background-size:300%;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">YupSoul</div>
        <div style="font-size:0.72rem;font-weight:400;letter-spacing:0.12em;color:rgba(var(--primary-rgb),0.5);margin:2px 0 4px;text-transform:uppercase">–ú—É–∑—ã–∫–∞ —Ç–≤–æ–µ–π –¥—É—à–∏</div>
        <div id="payOvSubtitle" style="color:rgba(255,255,255,0.75);font-size:0.95rem;margin-top:2px;">–¢–≤–æ—è –ø–µ—Å–Ω—è</div>
      </div>

      <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –æ–ø–ª–∞—Ç—ã: –æ–¥–∏–Ω –ø—Ä–æ–¥—É–∫—Ç, –æ–¥–Ω–∞ —Ü–µ–Ω–∞, –æ–¥–∏–Ω CTA -->
      <div style="background:rgba(15,12,40,0.96);border:1px solid rgba(var(--primary-rgb),0.3);border-radius:18px;padding:24px 20px;">
        <div id="payOvCardTitle" style="color:var(--primary-color);font-weight:700;font-size:1.05rem;margin-bottom:10px;">–û–ø–ª–∞—Ç–∞ –∑–∞—è–≤–∫–∏</div>

        <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ free_trial –¥–æ—Å—Ç—É–ø–µ–Ω) -->
        <div id="payOvTrialHint" style="display:none;background:rgba(5,150,105,0.15);border:1.5px solid rgba(16,185,129,0.5);border-radius:14px;padding:16px;margin-bottom:16px;">
          <div style="font-size:0.95rem;color:#d1fae5;line-height:1.6;margin-bottom:12px;">
            üéÅ <strong id="payOvTrialText" style="color:#6ee7b7;">–ü–µ—Ä–≤–∞—è –ø–µ—Å–Ω—è ‚Äî –≤ –ø–æ–¥–∞—Ä–æ–∫!</strong>
          </div>
          <button id="payOvFreeClaimBtn" type="button"
            style="width:100%;padding:14px;border-radius:11px;background:linear-gradient(135deg,#059669,#10b981);border:none;color:#fff;font-size:1rem;font-weight:700;cursor:pointer;font-family:inherit;letter-spacing:0.2px;">
            üéÅ –ü–æ–ª—É—á–∏—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ
          </button>
        </div>

        <!-- –ü—Ä–æ–º–æ–∫–æ–¥ ‚Äî —Ä–∞—Å–∫—Ä—ã–≤–∞–µ–º—ã–π –±–ª–æ–∫, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å —ç–∫—Ä–∞–Ω -->
        <div style="margin-bottom:16px;">
          <button type="button" id="payOvPromoToggle" style="width:100%;padding:10px 0;background:none;border:none;color:rgba(var(--primary-rgb),0.85);font-size:0.9rem;cursor:pointer;font-family:inherit;text-align:left;">‚ñ∏ –ï—Å—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥?</button>
          <div id="payOvPromoSection" style="display:none;margin-top:8px;">
            <input id="payOvPromoInput" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥"
              style="display:block;width:100%;box-sizing:border-box;padding:12px 14px;border-radius:10px;border:1.5px solid rgba(var(--primary-rgb),0.65);background:rgba(255,255,255,0.14);color:#fff;font-size:1rem;font-family:inherit;text-transform:uppercase;outline:none;-webkit-appearance:none;margin-bottom:8px;">
            <button id="payOvPromoBtn" type="button"
              style="display:block;width:100%;box-sizing:border-box;padding:11px;border-radius:10px;background:rgba(var(--primary-rgb),0.18);border:1.5px solid rgba(var(--primary-rgb),0.55);color:var(--primary-color);font-weight:600;font-size:0.9rem;cursor:pointer;font-family:inherit;">
              –ü—Ä–∏–º–µ–Ω–∏—Ç—å
            </button>
          </div>
        </div>

        <!-- –£—Å–ø–µ—à–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞ 100% -->
        <div id="payOvPromoSuccessHint" style="display:none;background:rgba(5,150,105,0.15);border:1.5px solid rgba(16,185,129,0.5);border-radius:14px;padding:16px;margin-bottom:16px;">
          <p style="color:#d1fae5;font-size:0.95rem;line-height:1.6;margin:0;">
            ‚úÖ <strong style="color:#6ee7b7;">–ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–º–µ–Ω—ë–Ω!</strong> –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ—Å–ø–ª–∞—Ç–Ω–∞.
          </p>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–∞ 100% -->
        <button id="payOvPromoConfirmBtn" type="button" style="display:none;width:100%;padding:16px;border-radius:13px;background:linear-gradient(135deg,#059669,#10b981);border:none;color:#fff;font-size:1.05rem;font-weight:700;cursor:pointer;font-family:inherit;margin-bottom:16px;letter-spacing:0.3px;">
          üéÅ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
        </button>

        <!-- –°—Ç–∞—Ç—É—Å (–æ—à–∏–±–∫–∏, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è) -->
        <div id="payOvStatus" style="display:none;border-radius:10px;padding:11px 14px;margin-bottom:14px;font-size:0.88rem;line-height:1.5;"></div>

        <!-- –°–µ–∫—Ü–∏—è –æ–ø–ª–∞—Ç—ã (HOT Pay) -->
        <div id="payOvPaymentSection" style="margin-bottom:16px;">
          <p id="payOvOrPayText" style="color:rgba(255,255,255,0.8);font-size:0.95rem;margin-bottom:10px;">–ò–ª–∏ –æ–ø–ª–∞—Ç–∏:</p>
          <div style="background:rgba(var(--primary-rgb),0.06);border-radius:12px;padding:14px;margin-bottom:12px;text-align:center;">
            <div id="payOvPriceLabel" style="color:rgba(255,255,255,0.6);font-size:0.85rem;margin-bottom:4px;">–¶–µ–Ω–∞:</div>
            <div id="payOvPriceDisplay" style="font-size:1.3rem;font-weight:700;color:var(--primary-color);">5.99 USDT</div>
            <div id="payOvPriceHint" style="font-size:0.8rem;color:rgba(16,185,129,0.8);margin-top:6px;"></div>
          </div>
          <button id="payOvPayBtn" type="button"
            style="width:100%;padding:13px 24px;border-radius:14px;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));border:none;color:#fff;font-size:1rem;font-weight:700;cursor:pointer;font-family:inherit;margin-bottom:10px;letter-spacing:0;">
            üí≥ –û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ HOT Pay
          </button>
          <button id="payOvStarsBtn" type="button"
            style="width:100%;padding:13px 24px;border-radius:14px;background:linear-gradient(135deg,#7c3aed,#4f46e5);border:none;color:#fff;font-size:1rem;font-weight:700;cursor:pointer;font-family:inherit;margin-bottom:0;letter-spacing:0;">
            ‚≠ê –û–ø–ª–∞—Ç–∏—Ç—å –∑–≤—ë–∑–¥–∞–º–∏ Telegram
          </button>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ ¬´—Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É¬ª (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –µ—Å–ª–∏ openLink –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª) -->
        <div id="payOvLinkRow" style="display:none;margin-bottom:12px;">
          <p id="payOvLinkHint" style="color:rgba(255,255,255,0.75);font-size:0.85rem;margin-bottom:6px;">
            –ï—Å–ª–∏ –æ–∫–Ω–æ –Ω–µ –æ—Ç–∫—Ä—ã–ª–æ—Å—å ‚Äî —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä:
          </p>
          <button id="payOvCopyBtn" type="button"
            style="width:100%;padding:11px;border-radius:10px;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.2);color:#fff;font-size:0.9rem;cursor:pointer;font-family:inherit;">
            üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –æ–ø–ª–∞—Ç—ã
          </button>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è HOT Pay) -->
        <button id="payOvCheckBtn" type="button" style="display:none;width:100%;padding:13px;border-radius:13px;background:rgba(16,185,129,0.12);border:1.5px solid rgba(16,185,129,0.4);color:rgba(16,185,129,0.95);font-size:0.9rem;font-weight:600;cursor:pointer;font-family:inherit;margin-bottom:11px;">
          ‚úÖ –Ø —É–∂–µ –æ–ø–ª–∞—Ç–∏–ª ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
        </button>

        <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ -->
        <button id="payOvBackBtn" type="button"
          style="width:100%;padding:13px;border-radius:13px;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.15);color:rgba(255,255,255,0.65);font-size:0.9rem;cursor:pointer;font-family:inherit;">
          ‚Üê –ù–∞–∑–∞–¥
        </button>
      </div>
    </div>
  </div>

  <!-- –¢–æ—Å—Ç (–∫–æ—Ä–æ—Ç–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ) -->
  <div id="scToast" style="display:none;position:fixed;left:50%;bottom:calc(env(safe-area-inset-bottom) + 24px);transform:translateX(-50%);z-index:10002;padding:12px 20px;border-radius:14px;background:rgba(15,12,40,0.95);border:1px solid rgba(var(--primary-rgb),0.4);color:rgba(255,255,255,0.95);font-size:0.9rem;font-family:'Comfortaa',sans-serif;box-shadow:0 8px 24px rgba(0,0,0,0.4);max-width:90%;text-align:center;"></div>

  <!-- –≠–ö–†–ê–ù –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–Ø –ó–ê–Ø–í–ö–ò ‚Äî position:fixed, z-index –≤—ã—à–µ –æ–ø–ª–∞—Ç—ã, –≤—Å–µ–≥–¥–∞ –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ -->
  <div id="confirmOverlay" style="
    display:none;
    position:fixed;inset:0;
    z-index:10000;
    background:linear-gradient(165deg,#0d0b1e 0%,#160a2e 45%,#0d1830 100%);
    overflow-y:auto;
    font-family:'Comfortaa',sans-serif;
  ">
    <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100%;padding:40px 24px;text-align:center;background:linear-gradient(180deg,rgba(1,6,26,.7) 0%,rgba(8,10,38,.85) 100%);">
      <div style="width:64px;height:64px;border:4px solid rgba(var(--primary-rgb),.15);border-top-color:var(--primary-color);border-radius:50%;margin:0 auto 24px;animation:confirmSpin 1s linear infinite;"></div>
      <div style="font-size:1.5rem;color:var(--primary-color);font-weight:700;margin-bottom:16px;" id="confirmTitle">‚ú® –ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞!</div>
      <div style="color:rgba(255,255,255,0.8);font-size:1rem;line-height:1.8;max-width:340px;" id="confirmDesc">
        –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é —Ç–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ–∑–¥–∞—é —É–Ω–∏–∫–∞–ª—å–Ω—É—é –ø–µ—Å–Ω—é.<br><br>
        üéµ –ü–µ—Å–Ω—è –ø—Ä–∏–¥—ë—Ç –≤ —ç—Ç–æ—Ç —á–∞—Ç. –ú–æ–∂–µ—à—å –∑–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–ø–∞–¥—ë—Ç.
      </div>
      <button id="confirmContinueBtn" type="button" style="margin-top:28px;padding:13px 44px;border-radius:14px;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));border:none;color:#fff;font-size:1rem;font-weight:700;cursor:pointer;font-family:inherit;box-shadow:0 6px 24px rgba(var(--primary-rgb),0.35);letter-spacing:0;">
        –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å ‚Üí
      </button>
    </div>
  </div>
  <!-- –ü–æ–ø–∞–ø –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º –ø–æ–¥–ø–∏—Å–∫–∏ (–±–µ–∑ —á—ë—Ä–Ω–æ–π –ø–æ–¥–ª–æ–∂–∫–∏ ‚Äî —Ä–∞–Ω—å—à–µ –µ—ë –Ω–µ –±—ã–ª–æ) -->
  <div id="planConfirmOverlay" style="
    display:none;position:fixed;inset:0;z-index:10000;
    background:transparent;
    align-items:flex-end;justify-content:center;padding:0 0 env(safe-area-inset-bottom,0) 0;
  " onclick="if(event.target===this)this.style.display='none'">
    <div style="
      background:linear-gradient(160deg,#1a1030 0%,#0d1830 100%);
      border:1px solid rgba(var(--primary-rgb),0.25);
      border-radius:20px 20px 0 0;
      padding:28px 24px 32px;
      max-width:480px;width:100%;
      text-align:center;
    ">
      <div style="width:40px;height:4px;border-radius:2px;background:rgba(255,255,255,0.15);margin:0 auto 20px;"></div>
      <div id="planConfirmTitle" style="font-size:1.15rem;font-weight:700;color:var(--primary-color);margin-bottom:10px;"></div>
      <div id="planConfirmDesc" style="font-size:0.88rem;color:rgba(255,255,255,0.65);line-height:1.5;margin-bottom:24px;"></div>
      <button id="planConfirmBtn" type="button" style="
        width:100%;padding:14px;border-radius:14px;
        background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));
        border:none;color:#fff;font-size:1rem;font-weight:700;
        cursor:pointer;font-family:inherit;
        box-shadow:0 6px 20px rgba(var(--primary-rgb),0.3);
        margin-bottom:10px;
      ">–ü–µ—Ä–µ–π—Ç–∏ –≤ –±–æ—Ç ‚Üí</button>
      <button id="planConfirmStarsBtn" type="button" style="
        width:100%;padding:14px;border-radius:14px;
        background:linear-gradient(135deg,#7c3aed,#4f46e5);
        border:none;color:#fff;font-size:1rem;font-weight:700;
        cursor:pointer;font-family:inherit;
        box-shadow:0 6px 20px rgba(124,58,237,0.3);
        margin-bottom:10px;
      ">‚≠ê –û–ø–ª–∞—Ç–∏—Ç—å –∑–≤—ë–∑–¥–∞–º–∏</button>
      <button type="button" onclick="document.getElementById('planConfirmOverlay').style.display='none'" style="
        width:100%;padding:12px;border-radius:14px;
        background:transparent;border:1px solid rgba(255,255,255,0.15);
        color:rgba(255,255,255,0.5);font-size:0.9rem;
        cursor:pointer;font-family:inherit;
      ">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>

  <style>
    @keyframes confirmSpin { to { transform: rotate(360deg); } }
    @keyframes planModalIn { from{opacity:0;transform:translateY(40px)} to{opacity:1;transform:translateY(0)} }
    .plan-modal-sheet { animation: planModalIn .25s ease; }
  </style>

  <!-- –ú–æ–¥–∞–ª –æ–ø–∏—Å–∞–Ω–∏—è —Ç–∞—Ä–∏—Ñ–∞ -->
  <div id="planModalOverlay" class="plan-modal-overlay" style="display:none;" onclick="closePlanModal(event)">
    <div class="plan-modal-sheet" id="planModalSheet">
      <div class="plan-modal-handle"></div>
      <div id="planModalContent"></div>
    </div>
  </div>

  <script>
    var PLAN_DETAILS = {
      basic: {
        title: 'Soul Basic',
        price: '$14.99 / –º–µ—Å—è—Ü',
        color: 'gold',
        features: [
          { icon: 'üéµ', name: '5 —Ç—Ä–µ–∫–æ–≤ –≤ –º–µ—Å—è—Ü', desc: '–ö–∞–∂–¥—ã–π –º–µ—Å—è—Ü ‚Äî 5 –Ω–æ–≤—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–µ—Å–µ–Ω. –¶–µ–Ω–∞ –∑–∞ —Ç—Ä–µ–∫ –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ: ~$3 –≤–º–µ—Å—Ç–æ $5.99 –≤ —Ä–æ–∑–Ω–∏—Ü—É. –≠–∫–æ–Ω–æ–º–∏—è 50%.' },
          { icon: 'üí¨', name: 'Soul Chat', desc: '–ò–ò-–¥–∏–∞–ª–æ–≥ —Å —Ç–≤–æ–µ–π –¥—É—à–æ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è, –∏–º–µ–Ω–∏ –∏ –ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ó–∞–¥–∞–≤–∞–π –≤–æ–ø—Ä–æ—Å—ã –æ —Å–µ–±–µ, —Å–≤–æ—ë–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–µ, –ø—É—Ç–∏ –∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏.' },
          { icon: 'üìÇ', name: '–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤', desc: '–í—Å–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç—Ä–µ–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–≤–æ—ë–º –ø—Ä–æ—Ñ–∏–ª–µ. –ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è, –ø–µ—Ä–µ—Å–ª—É—à–∞—Ç—å –∏ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è.' },
          { icon: 'üåê', name: '–í—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã', desc: '–î–ª—è —Å–µ–±—è, –î–ª—è –¥–≤–æ–∏—Ö –∏ –≠–Ω–µ—Ä–≥–∏—è –¥–Ω—è ‚Äî –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ —Ç—Ä–∏ —Ñ–æ—Ä–º–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Å–Ω–∏.' },
        ]
      },
      plus: {
        title: 'Soul Plus',
        price: '$24.99 / –º–µ—Å—è—Ü',
        color: 'pink',
        features: [
          { icon: 'üéµ', name: '10 —Ç—Ä–µ–∫–æ–≤ –≤ –º–µ—Å—è—Ü', desc: '10 –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–µ—Å–µ–Ω –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü. –¶–µ–Ω–∞ –∑–∞ —Ç—Ä–µ–∫ ~$2.5 ‚Äî —ç–∫–æ–Ω–æ–º–∏—è 58% –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å —Ä–∞–∑–æ–≤–æ–π –ø–æ–∫—É–ø–∫–æ–π.' },
          { icon: 'üí¨', name: 'Soul Chat –±–µ–∑ –ª–∏–º–∏—Ç–∞', desc: '–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∏–∞–ª–æ–≥–æ–≤ —Å Soul Chat. –û–±—â–∞–π—Å—è —Å –ò–ò-–æ—Ç—Ä–∞–∂–µ–Ω–∏–µ–º —Å–≤–æ–µ–π –¥—É—à–∏ –∫–æ–≥–¥–∞ —É–≥–æ–¥–Ω–æ –∏ —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ.' },
          { icon: '‚ö°', name: '–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏', desc: '–¢–≤–æ–∏ –∑–∞—è–≤–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å ‚Äî –ø–µ—Å–Ω—è –≥–æ—Ç–æ–≤–∞ –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º —É –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.' },
          { icon: 'üìÇ', name: '–ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–µ–∫–æ–≤', desc: '–í—Å–µ —Ç—Ä–µ–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å —Ç–µ–∫—Å—Ç–∞–º–∏, –∞—É–¥–∏–æ –∏ –¥–∞—Ç–∞–º–∏ —Å–æ–∑–¥–∞–Ω–∏—è ‚Äî –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –ø—Ä–æ—Ñ–∏–ª–µ.' },
        ]
      },
      master: {
        title: '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è',
        price: '$39.99 / –º–µ—Å—è—Ü',
        color: 'gold',
        features: [
          { icon: 'üéµ', name: '30 —Ç—Ä–µ–∫–æ–≤ –≤ –º–µ—Å—è—Ü', desc: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä—ë–º ‚Äî 30 –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–µ—Å–µ–Ω –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü –¥–ª—è —Å–µ–±—è –∏ –±–ª–∏–∑–∫–∏—Ö. –¶–µ–Ω–∞ –∑–∞ —Ç—Ä–µ–∫ ~$1.33 ‚Äî —ç–∫–æ–Ω–æ–º–∏—è 83%.' },
          { icon: 'üë•', name: '–ö–∞—Ä—Ç–æ—Ç–µ–∫–∞ –ª—é–¥–µ–π', desc: '–î–æ–±–∞–≤–ª—è–π –±–ª–∏–∑–∫–∏—Ö –≤ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—é –∏ —Å–æ–∑–¥–∞–≤–∞–π –¥–ª—è –Ω–∏—Ö –ø–µ—Å–Ω–∏ –≤ –æ–¥–∏–Ω —Ç–∞–ø. –ò–º—è, –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –∏ –¥—Ä—É–≥–∏–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è ‚Äî –≤–≤–æ–¥–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –Ω–µ –Ω—É–∂–Ω–æ.' },
          { icon: 'üìã', name: '–ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π', desc: '–ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤ —Å —Ç–µ–∫—Å—Ç–∞–º–∏, –∞—É–¥–∏–æ –∏ –¥–∞—Ç–∞–º–∏ ‚Äî –¥–ª—è —Ç–µ–±—è –∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ –≤ –ö–∞—Ä—Ç–æ—Ç–µ–∫–µ.' },
          { icon: 'üí¨', name: 'Soul Chat –±–µ–∑ –ª–∏–º–∏—Ç–∞', desc: '–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ Soul Chat –¥–ª—è —Ç–µ–±—è –∏ –≤—Å–µ—Ö –ª—é–¥–µ–π –∏–∑ –ö–∞—Ä—Ç–æ—Ç–µ–∫–∏.' },
          { icon: '‚ö°', name: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç', desc: '–°–∞–º—ã–π –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –æ—á–µ—Ä–µ–¥–∏ ‚Äî –ø–µ—Å–Ω–∏ –≥–æ—Ç–æ–≤—ã –±—ã—Å—Ç—Ä–µ–µ –≤—Å–µ–≥–æ.' },
        ]
      }
    };

    function openPlanDetails(plan) {
      var data = PLAN_DETAILS[plan];
      if (!data) return;
      var content = document.getElementById('planModalContent');
      if (!content) return;
      var featuresHtml = data.features.map(function(f) {
        return '<div class="plan-modal-feature">'
          + '<div class="plan-modal-feature-icon">' + f.icon + '</div>'
          + '<div class="plan-modal-feature-text"><strong>' + f.name + '</strong><br>' + f.desc + '</div>'
          + '</div>';
      }).join('');
      content.innerHTML = ''
        + '<div class="plan-modal-title">' + data.title + '</div>'
        + '<div class="plan-modal-price">' + data.price + '</div>'
        + '<div class="plan-modal-section">–ß—Ç–æ –≤—Ö–æ–¥–∏—Ç</div>'
        + featuresHtml
        + '<button class="plan-modal-cta ' + data.color + '" onclick="closePlanModal();document.getElementById(\'planBtn\' + \'' + (plan.charAt(0).toUpperCase()+plan.slice(1)) + '\') && document.getElementById(\'planBtn\' + \'' + (plan.charAt(0).toUpperCase()+plan.slice(1)) + '\').click()">–û—Ñ–æ—Ä–º–∏—Ç—å ' + data.title + '</button>'
        + '<button class="plan-modal-close" onclick="closePlanModal()">–ó–∞–∫—Ä—ã—Ç—å</button>';
      var overlay = document.getElementById('planModalOverlay');
      if (overlay) { overlay.style.display = 'flex'; document.body.style.overflow = 'hidden'; }
    }
    function closePlanModal(e) {
      if (e && e.target !== document.getElementById('planModalOverlay')) return;
      var overlay = document.getElementById('planModalOverlay');
      if (overlay) { overlay.style.display = 'none'; document.body.style.overflow = ''; }
    }
    window.openPlanDetails = openPlanDetails;
    window.closePlanModal = closePlanModal;
  </script>
  <script>
  /* YUPSOUL ‚Äî –£–¥–∞–ª–µ–Ω–∏–µ —á—ë—Ä–Ω–æ–π –ø–∞–Ω–µ–ª–∏: –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ö–æ–¥–æ–≤ (0, 500, 1000, 2000 ms), —Ç.–∫. Telegram –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å —Å—Ç–∏–ª–∏ –ø–æ–∑–∂–µ */
  function forceHeaderTransparent() {
    var headers = document.querySelectorAll('#formNavBar, .form-header-bar, .form-nav-bar, .page-header, #homeTopBar');
    headers.forEach(function(header) {
      header.style.background = 'transparent';
      header.style.backgroundColor = 'transparent';
      header.style.boxShadow = 'none';
      header.style.backdropFilter = 'none';
      header.style.webkitBackdropFilter = 'none';
    });
    var blackEls = document.querySelectorAll('[style*="background: rgba(0, 0, 0"], [style*="background-color: rgba(0, 0, 0"]');
    blackEls.forEach(function(el) {
      if (el.id === 'formNavBar' || el.classList.contains('form-header-bar') || el.classList.contains('form-nav-bar') || el.classList.contains('page-header') || el.id === 'homeTopBar') {
        el.style.background = 'transparent';
        el.style.backgroundColor = 'transparent';
      }
    });
  }
  function runFix() {
    forceHeaderTransparent();
    document.querySelectorAll('.header-title, .page-header-title, .app-title').forEach(function(el) { el.remove(); });
    document.querySelectorAll('*').forEach(function(el) {
      if (el.textContent && el.textContent.trim() === 'YupSoul Personal Music' && !el.classList.contains('logo') && !el.classList.contains('app-logo') && el.tagName !== 'TITLE') {
        el.style.display = 'none';
        el.style.visibility = 'hidden';
        el.style.width = '0';
        el.style.height = '0';
      }
    });
    document.querySelectorAll('#formNavBar .form-header-bar span, #formNavBar .form-header-bar div, .form-header-bar > span, .form-header-bar > div').forEach(function(el) {
      if (el.tagName !== 'BUTTON' && !el.classList.contains('btn') && !el.classList.contains('back') && !el.classList.contains('menu') && !el.classList.contains('icon')) el.style.display = 'none';
    });
  }
  [0, 500, 1000, 2000].forEach(function(ms) {
    if (ms === 0) {
      if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', runFix);
      else runFix();
    } else window.setTimeout(runFix, ms);
  });
  window.addEventListener('load', runFix);
  </script>
</body>
</html>
